(window.webpackJsonp=window.webpackJsonp||[]).push([[461],{1900:function(e,t,a){"use strict";a.r(t);var i=a(0),o=(a(14),a(1)),c=a(8),l=a(26),n=a(71),s=a(247),b=a(40),d=a(141),m=a(282),r=a(536),u=a(186),j=a(1738),O=a(86),y=a(2073),p=a(19),h=a(172),f=a(1290),g=a(1610),v=a(2072),M=a(2067),k=a(6);const w=Object(c.d)({title:{id:"column.firehose",defaultMessage:"Live feeds"}}),_=()=>{const e=Object(h.b)(),t=Object(h.c)((e=>e.getIn(["settings","firehose"]))),a=Object(o.useCallback)(((t,a)=>e(Object(u.c)(["firehose",...t],a))),[e]);return Object(i.a)("div",{className:"column-settings"},void 0,Object(i.a)("section",{},void 0,Object(i.a)("div",{className:"column-settings__row"},void 0,Object(i.a)(v.a,{settings:t,settingPath:["onlyMedia"],onChange:a,label:Object(i.a)(l.a,{id:"community.column_settings.media_only",defaultMessage:"Media only"})}))))};t.default=e=>{let{feedType:t,multiColumn:a}=e;const c=Object(h.b)(),u=Object(n.a)(),{signedIn:v}=Object(d.d)(),C=Object(o.useRef)(null),T=Object(h.c)((e=>e.getIn(["settings","firehose","onlyMedia"],!1))),I=Object(h.c)((e=>e.getIn(["timelines","".concat(t).concat(T?":media":""),"unread"],0)>0)),x=Object(o.useCallback)((()=>{switch(t){case"community":c(Object(r.e)("COMMUNITY",{other:{onlyMedia:T}}));break;case"public":c(Object(r.e)("PUBLIC",{other:{onlyMedia:T}}));break;case"public:remote":c(Object(r.e)("REMOTE",{other:{onlyMedia:T,onlyRemote:!0}}))}}),[c,T,t]),N=Object(o.useCallback)((e=>{switch(t){case"community":c(Object(O.t)({maxId:e,onlyMedia:T}));break;case"public":c(Object(O.y)({maxId:e,onlyMedia:T}));break;case"public:remote":c(Object(O.y)({maxId:e,onlyMedia:T,onlyRemote:!0}))}}),[c,T,t]),R=Object(o.useCallback)((()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.scrollTop()}),[]);Object(o.useEffect)((()=>{let e;switch(t){case"community":c(Object(O.t)({onlyMedia:T})),v&&(e=c(Object(j.a)({onlyMedia:T})));break;case"public":c(Object(O.y)({onlyMedia:T})),v&&(e=c(Object(j.e)({onlyMedia:T})));break;case"public:remote":c(Object(O.y)({onlyMedia:T,onlyRemote:!0})),v&&(e=c(Object(j.e)({onlyMedia:T,onlyRemote:!0})))}return()=>{var t;return null===(t=e)||void 0===t?void 0:t()}}),[c,v,t,T]);const E="community"===t?Object(i.a)(y.a,{id:"community_timeline"},void 0,Object(i.a)(l.a,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:p.j}})):Object(i.a)(y.a,{id:"public_timeline"},void 0,Object(i.a)(l.a,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the social web that people on {domain} follow.",values:{domain:p.j}})),L="community"===t?Object(i.a)(l.a,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}):Object(i.a)(l.a,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"});return Object(k.jsxs)(f.a,{bindToDocument:!a,ref:C,label:u.formatMessage(w.title),children:[Object(i.a)(g.b,{icon:"globe",iconComponent:m.a,active:I,title:u.formatMessage(w.title),onPin:x,onClick:R,multiColumn:a},void 0,Object(i.a)(_,{})),Object(i.a)("div",{className:"account__section-headline"},void 0,Object(i.a)(b.b,{exact:!0,to:"/public/local"},void 0,Object(i.a)(l.a,{tagName:"div",id:"firehose.local",defaultMessage:"This server"})),Object(i.a)(b.b,{exact:!0,to:"/public/remote"},void 0,Object(i.a)(l.a,{tagName:"div",id:"firehose.remote",defaultMessage:"Other servers"})),Object(i.a)(b.b,{exact:!0,to:"/public"},void 0,Object(i.a)(l.a,{tagName:"div",id:"firehose.all",defaultMessage:"All"}))),Object(i.a)(M.a,{prepend:E,timelineId:"".concat(t).concat(T?":media":""),onLoadMore:N,trackScroll:!0,scrollKey:"firehose",emptyMessage:L,bindToDocument:!a}),Object(i.a)(s.a,{},void 0,Object(i.a)("title",{},void 0,u.formatMessage(w.title)),Object(i.a)("meta",{name:"robots",content:"noindex"}))]})}}}]);
//# sourceMappingURL=firehose.js.map