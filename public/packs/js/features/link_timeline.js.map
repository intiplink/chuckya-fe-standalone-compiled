{"version":3,"sources":["webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/link_timeline/index.tsx"],"names":["LinkTimeline","_ref","multiColumn","url","useParams","decodedUrl","decodeURIComponent","undefined","dispatch","useAppDispatch","columnRef","useRef","firstStatusId","useAppSelector","state","timelines","getIn","concat","story","statuses","handleHeaderClick","useCallback","_columnRef$current","current","scrollTop","handleLoadMore","maxId","expandLinkTimeline","useEffect","_jsxs","Column","bindToDocument","ref","label","title","children","_jsx","ColumnHeader","icon","iconComponent","ExploreIcon","onClick","showBackButton","StatusListContainer","timelineId","onLoadMore","trackScroll","scrollKey","Helmet","name","content"],"mappings":"kPAaO,MAAMA,EAERC,IAAsB,IAArB,YAAEC,GAAaD,EACnB,MAAM,IAAEE,GAAQC,cACVC,EAAaF,EAAMG,mBAAmBH,QAAOI,EAC7CC,EAAWC,cACXC,EAAYC,iBAAe,MAC3BC,EAAgBC,aAAgBC,GACpCT,EAEKS,EAAMC,UAAUC,MAAM,CAAC,QAADC,OAASZ,GAAc,QAAS,SACvDE,IAEAW,EAAQL,aAAgBC,GAC5BF,EACKE,EAAMK,SAASH,MAAM,CAACJ,EAAe,cACtCL,IAGAa,EAAoBC,uBAAY,KAAO,IAADC,EACzB,QAAjBA,EAAAZ,EAAUa,eAAO,IAAAD,GAAjBA,EAAmBE,WAAW,GAC7B,IAEGC,EAAiBJ,uBACpBK,IACClB,EAASmB,YAAmBtB,EAAY,CAAEqB,UAAS,GAErD,CAAClB,EAAUH,IAOb,OAJAuB,qBAAU,KACRpB,EAASmB,YAAmBtB,GAAY,GACvC,CAACG,EAAUH,IAGZwB,eAACC,IAAM,CAACC,gBAAiB7B,EAAa8B,IAAKtB,EAAWuB,MAAOf,aAAK,EAALA,EAAOgB,MAAMC,SAAA,CACxEC,YAACC,IAAY,CACXC,KAAK,UACLC,cAAeC,IACfN,MAAOhB,aAAK,EAALA,EAAOgB,MACdO,QAASrB,EACTlB,YAAaA,EACbwC,gBAAc,IAGhBN,YAACO,IAAmB,CAClBC,WAAU,QAAA3B,OAAUZ,GACpBwC,WAAYpB,EACZqB,aAAW,EACXC,UAAS,iBAAA9B,OAAmBZ,GAC5B0B,gBAAiB7B,IAGnBkC,YAACY,IAAM,UACLZ,YAAA,kBAAQlB,aAAK,EAALA,EAAOgB,OACfE,YAAA,QAAMa,KAAK,SAASC,QAAQ,eAEvB,EAKElD,W","file":"js/features/link_timeline.js","sourcesContent":["import { useRef, useEffect, useCallback } from 'react';\n\nimport { Helmet } from 'react-helmet';\nimport { useParams } from 'react-router-dom';\n\nimport ExploreIcon from '@/material-icons/400-24px/explore.svg?react';\nimport { expandLinkTimeline } from 'mastodon/actions/timelines';\nimport Column from 'mastodon/components/column';\nimport { ColumnHeader } from 'mastodon/components/column_header';\nimport StatusListContainer from 'mastodon/features/ui/containers/status_list_container';\nimport type { Card } from 'mastodon/models/status';\nimport { useAppDispatch, useAppSelector } from 'mastodon/store';\n\nexport const LinkTimeline: React.FC<{\n  multiColumn: boolean;\n}> = ({ multiColumn }) => {\n  const { url } = useParams<{ url: string }>();\n  const decodedUrl = url ? decodeURIComponent(url) : undefined;\n  const dispatch = useAppDispatch();\n  const columnRef = useRef<Column>(null);\n  const firstStatusId = useAppSelector((state) =>\n    decodedUrl\n      ? // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        (state.timelines.getIn([`link:${decodedUrl}`, 'items', 0]) as string)\n      : undefined,\n  );\n  const story = useAppSelector((state) =>\n    firstStatusId\n      ? (state.statuses.getIn([firstStatusId, 'card']) as Card)\n      : undefined,\n  );\n\n  const handleHeaderClick = useCallback(() => {\n    columnRef.current?.scrollTop();\n  }, []);\n\n  const handleLoadMore = useCallback(\n    (maxId: string) => {\n      dispatch(expandLinkTimeline(decodedUrl, { maxId }));\n    },\n    [dispatch, decodedUrl],\n  );\n\n  useEffect(() => {\n    dispatch(expandLinkTimeline(decodedUrl));\n  }, [dispatch, decodedUrl]);\n\n  return (\n    <Column bindToDocument={!multiColumn} ref={columnRef} label={story?.title}>\n      <ColumnHeader\n        icon='explore'\n        iconComponent={ExploreIcon}\n        title={story?.title}\n        onClick={handleHeaderClick}\n        multiColumn={multiColumn}\n        showBackButton\n      />\n\n      <StatusListContainer\n        timelineId={`link:${decodedUrl}`}\n        onLoadMore={handleLoadMore}\n        trackScroll\n        scrollKey={`link_timeline-${decodedUrl}`}\n        bindToDocument={!multiColumn}\n      />\n\n      <Helmet>\n        <title>{story?.title}</title>\n        <meta name='robots' content='noindex' />\n      </Helmet>\n    </Column>\n  );\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default LinkTimeline;\n"],"sourceRoot":""}