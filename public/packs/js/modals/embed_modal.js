(window.webpackJsonp=window.webpackJsonp||[]).push([[763],{1959:function(e,t,a){"use strict";a.r(t);var s=a(0),i=a(2),o=(a(13),a(4)),d=a.n(o),l=a(8),c=a(26),r=a(58),n=a(37),m=a(78),b=a(15),h=a(77),p=a(6);const u=Object(l.d)({close:{id:"lightbox.close",defaultMessage:"Close"}});class f extends n.a{constructor(){super(...arguments),Object(i.a)(this,"state",{loading:!1,oembed:null}),Object(i.a)(this,"setIframeRef",(e=>{this.iframe=e})),Object(i.a)(this,"handleTextareaClick",(e=>{e.target.select()}))}componentDidMount(){const{id:e}=this.props;this.setState({loading:!0}),Object(b.e)().get("/api/web/embeds/".concat(e)).then((e=>{this.setState({loading:!1,oembed:e.data});const t=this.iframe.contentWindow.document;t.open(),t.write(e.data.html),t.close(),t.body.style.margin=0,this.iframe.width=t.body.scrollWidth,this.iframe.height=t.body.scrollHeight})).catch((e=>{this.props.onError(e)}))}render(){const{intl:e,onClose:t}=this.props,{oembed:a}=this.state;return Object(s.a)("div",{className:"modal-root__modal report-modal embed-modal"},void 0,Object(s.a)("div",{className:"report-modal__target"},void 0,Object(s.a)(h.a,{className:"media-modal__close",title:e.formatMessage(u.close),icon:"times",iconComponent:m.a,onClick:t,size:16}),Object(s.a)(c.a,{id:"status.embed",defaultMessage:"Embed"})),Object(s.a)("div",{className:"report-modal__container embed-modal__container",style:{display:"block"}},void 0,Object(s.a)("p",{className:"hint"},void 0,Object(s.a)(c.a,{id:"embed.instructions",defaultMessage:"Embed this status on your website by copying the code below."})),Object(s.a)("input",{type:"text",className:"embed-modal__html",readOnly:!0,value:a&&a.html||"",onClick:this.handleTextareaClick}),Object(s.a)("p",{className:"hint"},void 0,Object(s.a)(c.a,{id:"embed.preview",defaultMessage:"Here is what it will look like:"})),Object(p.jsx)("iframe",{className:"embed-modal__iframe",frameBorder:"0",ref:this.setIframeRef,sandbox:"allow-scripts allow-same-origin",title:"preview"})))}}Object(i.a)(f,"propTypes",{id:d.a.string.isRequired,onClose:d.a.func.isRequired,onError:d.a.func.isRequired,intl:d.a.object.isRequired}),t.default=Object(r.c)(f)}}]);
//# sourceMappingURL=embed_modal.js.map