{"version":3,"sources":["webpack:///./app/javascript/flavours/glitch/images/mbstobon-ui-0.png","webpack:///./app/javascript/flavours/glitch/images/mbstobon-ui-1.png","webpack:///./app/javascript/flavours/glitch/images/mbstobon-ui-2.png","webpack:///./app/javascript/material-icons/400-24px/manufacturing-fill.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/compose/components/search_results.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/compose/index.jsx"],"names":["_path","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_ref","title","titleId","props","xmlns","height","viewBox","width","id","d","INITIAL_PAGE_LIMIT","withoutLastResult","list","size","skipLast","SearchResults","results","useAppSelector","state","getIn","isLoading","dispatch","useAppDispatch","handleLoadMoreAccounts","useCallback","expandSearch","handleLoadMoreStatuses","handleLoadMoreHashtags","accounts","statuses","hashtags","get","_jsx","SearchSection","_jsxs","_Fragment","children","Icon","icon","PeopleIcon","FormattedMessage","defaultMessage","map","accountId","AccountContainer","LoadMore","visible","onClick","TagIcon","hashtag","Hashtag","FindInPageIcon","statusId","StatusContainer","className","LoadingIndicator","messages","defineMessages","start","home_timeline","notifications","public","community","settings","logout","compose","logoutMessage","logoutConfirm","Compose","PureComponent","constructor","_defineProperty","elefriend","Math","random","floor","intl","this","preventDefault","stopPropagation","openModal","modalType","modalProps","message","formatMessage","confirm","closeWhenConfirm","onConfirm","logOut","changeComposing","setState","componentDidMount","mountCompose","componentWillUnmount","unmountCompose","render","multiColumn","showSearch","showNotificationsBadge","unreadNotifications","glitchedElephant1","glitchedElephant2","glitchedElephant3","elephantUIPlane","columns","role","Link","to","MenuIcon","some","column","HomeIcon","NotificationsIcon","PublicIcon","handleSettingsClick","href","ManufacturingIcon","handleLogoutClick","LogoutIcon","SearchContainer","onFocus","ComposeFormContainer","autoFocus","isMobile","window","innerWidth","cycleElefriend","alt","draggable","src","mascot","Motion","defaultStyle","x","style","spring","stiffness","damping","transform","concat","visibility","Column","Helmet","name","content","connect","mapStateToProps","ownProps","injectIntl"],"mappings":"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","file":"js/flavours/glitch/async/compose.js","sourcesContent":["export default __webpack_public_path__ + \"media/flavours/glitch/images/mbstobon-ui-0-07a1d75b024f0b0aed7127e1c1b20fc2.png\";","export default __webpack_public_path__ + \"media/flavours/glitch/images/mbstobon-ui-1-c3aa4ba2dca2c406fa32e9ebee0d362b.png\";","export default __webpack_public_path__ + \"media/flavours/glitch/images/mbstobon-ui-2-6c5e94fac80476dbc6271425c55582aa.png\";","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgManufacturingFill(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m234-480-12-60q-12-5-22.5-10.5T178-564l-58 18-40-68 46-40q-2-13-2-26t2-26l-46-40 40-68 58 18q11-8 21.5-13.5T222-820l12-60h80l12 60q12 5 22.5 10.5T370-796l58-18 40 68-46 40q2 13 2 26t-2 26l46 40-40 68-58-18q-11 8-21.5 13.5T326-540l-12 60h-80Zm40-120q33 0 56.5-23.5T354-680q0-33-23.5-56.5T274-760q-33 0-56.5 23.5T194-680q0 33 23.5 56.5T274-600ZM592-40l-18-84q-17-6-31.5-14.5T514-158l-80 26-56-96 64-56q-2-18-2-36t2-36l-64-56 56-96 80 26q14-11 28.5-19.5T574-516l18-84h112l18 84q17 6 31.5 14.5T782-482l80-26 56 96-64 56q2 18 2 36t-2 36l64 56-56 96-80-26q-14 11-28.5 19.5T722-124l-18 84H592Zm56-160q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Z\"\n  })));\n}\nexport default SvgManufacturingFill;","import { useCallback } from 'react';\n\nimport { FormattedMessage } from 'react-intl';\n\nimport FindInPageIcon from '@/material-icons/400-24px/find_in_page.svg?react';\nimport PeopleIcon from '@/material-icons/400-24px/group.svg?react';\nimport TagIcon from '@/material-icons/400-24px/tag.svg?react';\nimport { expandSearch } from 'flavours/glitch/actions/search';\nimport { Icon }  from 'flavours/glitch/components/icon';\nimport { LoadMore } from 'flavours/glitch/components/load_more';\nimport { LoadingIndicator } from 'flavours/glitch/components/loading_indicator';\nimport { SearchSection } from 'flavours/glitch/features/explore/components/search_section';\nimport { useAppDispatch, useAppSelector } from 'flavours/glitch/store';\n\nimport { ImmutableHashtag as Hashtag } from '../../../components/hashtag';\nimport AccountContainer from '../../../containers/account_container';\nimport StatusContainer from '../../../containers/status_container';\n\nconst INITIAL_PAGE_LIMIT = 10;\n\nconst withoutLastResult = list => {\n  if (list.size > INITIAL_PAGE_LIMIT && list.size % INITIAL_PAGE_LIMIT === 1) {\n    return list.skipLast(1);\n  } else {\n    return list;\n  }\n};\n\nexport const SearchResults = () => {\n  const results = useAppSelector((state) => state.getIn(['search', 'results']));\n  const isLoading = useAppSelector((state) => state.getIn(['search', 'isLoading']));\n\n  const dispatch = useAppDispatch();\n\n  const handleLoadMoreAccounts = useCallback(() => {\n    dispatch(expandSearch('accounts'));\n  }, [dispatch]);\n\n  const handleLoadMoreStatuses = useCallback(() => {\n    dispatch(expandSearch('statuses'));\n  }, [dispatch]);\n\n  const handleLoadMoreHashtags = useCallback(() => {\n    dispatch(expandSearch('hashtags'));\n  }, [dispatch]);\n\n  let accounts, statuses, hashtags;\n\n  if (results.get('accounts') && results.get('accounts').size > 0) {\n    accounts = (\n      <SearchSection title={<><Icon id='users' icon={PeopleIcon} /><FormattedMessage id='search_results.accounts' defaultMessage='Profiles' /></>}>\n        {withoutLastResult(results.get('accounts')).map(accountId => <AccountContainer key={accountId} id={accountId} />)}\n        {(results.get('accounts').size > INITIAL_PAGE_LIMIT && results.get('accounts').size % INITIAL_PAGE_LIMIT === 1) && <LoadMore visible onClick={handleLoadMoreAccounts} />}\n      </SearchSection>\n    );\n  }\n\n  if (results.get('hashtags') && results.get('hashtags').size > 0) {\n    hashtags = (\n      <SearchSection title={<><Icon id='hashtag' icon={TagIcon} /><FormattedMessage id='search_results.hashtags' defaultMessage='Hashtags' /></>}>\n        {withoutLastResult(results.get('hashtags')).map(hashtag => <Hashtag key={hashtag.get('name')} hashtag={hashtag} />)}\n        {(results.get('hashtags').size > INITIAL_PAGE_LIMIT && results.get('hashtags').size % INITIAL_PAGE_LIMIT === 1) && <LoadMore visible onClick={handleLoadMoreHashtags} />}\n      </SearchSection>\n    );\n  }\n\n  if (results.get('statuses') && results.get('statuses').size > 0) {\n    statuses = (\n      <SearchSection title={<><Icon id='quote-right' icon={FindInPageIcon} /><FormattedMessage id='search_results.statuses' defaultMessage='Posts' /></>}>\n        {withoutLastResult(results.get('statuses')).map(statusId => <StatusContainer key={statusId} id={statusId} />)}\n        {(results.get('statuses').size > INITIAL_PAGE_LIMIT && results.get('statuses').size % INITIAL_PAGE_LIMIT === 1) && <LoadMore visible onClick={handleLoadMoreStatuses} />}\n      </SearchSection>\n    );\n  }\n\n  return (\n    <div className='search-results'>\n      {!accounts && !hashtags && !statuses && (\n        isLoading ? (\n          <LoadingIndicator />\n        ) : (\n          <div className='empty-column-indicator'>\n            <FormattedMessage id='search_results.nothing_found' defaultMessage='Could not find anything for these search terms' />\n          </div>\n        )\n      )}\n      {accounts}\n      {hashtags}\n      {statuses}\n    </div>\n  );\n\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { injectIntl, defineMessages } from 'react-intl';\n\nimport { Helmet } from 'react-helmet';\nimport { Link } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport { connect } from 'react-redux';\n\nimport spring from 'react-motion/lib/spring';\n\nimport PeopleIcon from '@/material-icons/400-24px/group.svg?react';\nimport HomeIcon from '@/material-icons/400-24px/home-fill.svg?react';\nimport LogoutIcon from '@/material-icons/400-24px/logout.svg?react';\nimport ManufacturingIcon from '@/material-icons/400-24px/manufacturing-fill.svg?react';\nimport MenuIcon from '@/material-icons/400-24px/menu.svg?react';\nimport NotificationsIcon from '@/material-icons/400-24px/notifications-fill.svg?react';\nimport PublicIcon from '@/material-icons/400-24px/public.svg?react';\nimport { openModal } from 'flavours/glitch/actions/modal';\nimport Column from 'flavours/glitch/components/column';\nimport { Icon }  from 'flavours/glitch/components/icon';\nimport glitchedElephant1 from 'flavours/glitch/images/mbstobon-ui-0.png';\nimport glitchedElephant2 from 'flavours/glitch/images/mbstobon-ui-1.png';\nimport glitchedElephant3 from 'flavours/glitch/images/mbstobon-ui-2.png';\nimport { logOut } from 'flavours/glitch/utils/log_out';\n\nimport elephantUIPlane from '../../../../images/elephant_ui_plane.svg';\nimport { changeComposing, mountCompose, unmountCompose } from '../../actions/compose';\nimport { mascot } from '../../initial_state';\nimport { isMobile } from '../../is_mobile';\nimport Motion from '../ui/util/optional_motion';\n\nimport { SearchResults } from './components/search_results';\nimport ComposeFormContainer from './containers/compose_form_container';\nimport SearchContainer from './containers/search_container';\n\nconst messages = defineMessages({\n  start: { id: 'getting_started.heading', defaultMessage: 'Getting started' },\n  home_timeline: { id: 'tabs_bar.home', defaultMessage: 'Home' },\n  notifications: { id: 'tabs_bar.notifications', defaultMessage: 'Notifications' },\n  public: { id: 'navigation_bar.public_timeline', defaultMessage: 'Federated timeline' },\n  community: { id: 'navigation_bar.community_timeline', defaultMessage: 'Local timeline' },\n  settings: { id: 'navigation_bar.app_settings', defaultMessage: 'App settings' },\n  logout: { id: 'navigation_bar.logout', defaultMessage: 'Logout' },\n  compose: { id: 'navigation_bar.compose', defaultMessage: 'Compose new post' },\n  logoutMessage: { id: 'confirmations.logout.message', defaultMessage: 'Are you sure you want to log out?' },\n  logoutConfirm: { id: 'confirmations.logout.confirm', defaultMessage: 'Log out' },\n});\n\nconst mapStateToProps = (state, ownProps) => ({\n  columns: state.getIn(['settings', 'columns']),\n  showSearch: ownProps.multiColumn ? state.getIn(['search', 'submitted']) && !state.getIn(['search', 'hidden']) : false,\n  unreadNotifications: state.getIn(['notifications', 'unread']),\n  showNotificationsBadge: state.getIn(['local_settings', 'notifications', 'tab_badge']),\n});\n\n// ~4% chance you'll end up with an unexpected friend\n// glitch-soc/mastodon repo created_at date: 2017-04-20T21:55:28Z\nconst glitchProbability = 1 - 0.0420215528;\nconst totalElefriends = 3;\n\nclass Compose extends PureComponent {\n\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    columns: ImmutablePropTypes.list.isRequired,\n    multiColumn: PropTypes.bool,\n    showSearch: PropTypes.bool,\n    unreadNotifications: PropTypes.number,\n    showNotificationsBadge: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  state = {\n    elefriend: Math.random() < glitchProbability ? Math.floor(Math.random() * totalElefriends) : totalElefriends,\n  };\n\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(mountCompose());\n  }\n\n  componentWillUnmount () {\n    const { dispatch } = this.props;\n    dispatch(unmountCompose());\n  }\n\n  handleLogoutClick = e => {\n    const { dispatch, intl } = this.props;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    dispatch(openModal({\n      modalType: 'CONFIRM',\n      modalProps: {\n        message: intl.formatMessage(messages.logoutMessage),\n        confirm: intl.formatMessage(messages.logoutConfirm),\n        closeWhenConfirm: false,\n        onConfirm: () => logOut(),\n      },\n    }));\n\n    return false;\n  };\n\n  handleSettingsClick = e => {\n    const { dispatch } = this.props;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    dispatch(openModal({ modalType: 'SETTINGS', modalProps: {} }));\n  };\n\n  onFocus = () => {\n    this.props.dispatch(changeComposing(true));\n  };\n\n  onBlur = () => {\n    this.props.dispatch(changeComposing(false));\n  };\n\n  cycleElefriend = () => {\n    this.setState((state) => ({ elefriend: (state.elefriend + 1) % totalElefriends }));\n  };\n\n  render () {\n    const { multiColumn, showSearch, showNotificationsBadge, unreadNotifications, intl } = this.props;\n\n    const elefriend = [glitchedElephant1, glitchedElephant2, glitchedElephant3, elephantUIPlane][this.state.elefriend];\n\n    if (multiColumn) {\n      const { columns } = this.props;\n\n      return (\n        <div className='drawer' role='region' aria-label={intl.formatMessage(messages.compose)}>\n          <nav className='drawer__header'>\n            <Link to='/getting-started' className='drawer__tab' title={intl.formatMessage(messages.start)} aria-label={intl.formatMessage(messages.start)}><Icon id='bars' icon={MenuIcon} /></Link>\n            {!columns.some(column => column.get('id') === 'HOME') && (\n              <Link to='/home' className='drawer__tab' title={intl.formatMessage(messages.home_timeline)} aria-label={intl.formatMessage(messages.home_timeline)}><Icon id='home' icon={HomeIcon} /></Link>\n            )}\n            {!columns.some(column => column.get('id') === 'NOTIFICATIONS') && (\n              <Link to='/notifications' className='drawer__tab' title={intl.formatMessage(messages.notifications)} aria-label={intl.formatMessage(messages.notifications)}>\n                <span className='icon-badge-wrapper'>\n                  <Icon id='bell' icon={NotificationsIcon} />\n                  {showNotificationsBadge && unreadNotifications > 0 && <div className='icon-badge' />}\n                </span>\n              </Link>\n            )}\n            {!columns.some(column => column.get('id') === 'COMMUNITY') && (\n              <Link to='/public/local' className='drawer__tab' title={intl.formatMessage(messages.community)} aria-label={intl.formatMessage(messages.community)}><Icon id='users' icon={PeopleIcon} /></Link>\n            )}\n            {!columns.some(column => column.get('id') === 'PUBLIC') && (\n              <Link to='/public' className='drawer__tab' title={intl.formatMessage(messages.public)} aria-label={intl.formatMessage(messages.public)}><Icon id='globe' icon={PublicIcon} /></Link>\n            )}\n            <a\n              onClick={this.handleSettingsClick}\n              href='/settings/preferences'\n              className='drawer__tab'\n              title={intl.formatMessage(messages.settings)}\n              aria-label={intl.formatMessage(messages.settings)}\n            >\n              <Icon id='cogs' icon={ManufacturingIcon} />\n            </a>\n            <a href='/auth/sign_out' className='drawer__tab' title={intl.formatMessage(messages.logout)} aria-label={intl.formatMessage(messages.logout)} onClick={this.handleLogoutClick}><Icon id='sign-out' icon={LogoutIcon} /></a>\n          </nav>\n\n          {multiColumn && <SearchContainer /> }\n\n          <div className='drawer__pager'>\n            <div className='drawer__inner' onFocus={this.onFocus}>\n              <ComposeFormContainer autoFocus={!isMobile(window.innerWidth)} />\n\n              {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions -- this is not a feature but a visual easter egg */}\n              <div className='drawer__inner__mastodon' onClick={this.cycleElefriend}>\n                <img alt='' draggable='false' src={mascot || elefriend} />\n              </div>\n            </div>\n\n            <Motion defaultStyle={{ x: -100 }} style={{ x: spring(showSearch ? 0 : -100, { stiffness: 210, damping: 20 }) }}>\n              {({ x }) => (\n                <div className='drawer__inner darker' style={{ transform: `translateX(${x}%)`, visibility: x === -100 ? 'hidden' : 'visible' }}>\n                  <SearchResults />\n                </div>\n              )}\n            </Motion>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <Column onFocus={this.onFocus}>\n        <ComposeFormContainer />\n\n        <Helmet>\n          <meta name='robots' content='noindex' />\n        </Helmet>\n      </Column>\n    );\n  }\n\n}\n\nexport default connect(mapStateToProps)(injectIntl(Compose));\n"],"sourceRoot":""}