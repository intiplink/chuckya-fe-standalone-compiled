(window.webpackJsonp=window.webpackJsonp||[]).push([[507],{2012:function(e,t,s){"use strict";s.r(t);var a=s(0),o=s(2),i=(s(13),s(1)),c=s(8),n=s(26),l=s(58),r=s(201),d=s(38),h=s(47),b=s(10),u=s(1515),g=s(284),p=s(557),j=s(555),O=s(1875),m=s(111),_=s(12),v=s(271),f=s(2111),x=s(455),y=(s(256),s(9)),M=s.n(y),k=s(349),N=s(208),w=s(306),L=s(308),C=s(1715),I=s(6);const S=(e,t)=>Object(a.a)(n.a,{id:"link_preview.shares",defaultMessage:"{count, plural, one {{counter} post} other {{counter} posts}}",values:{count:t,counter:Object(a.a)("strong",{},void 0,e)}}),P=e=>{let{url:t,title:s,lang:o,publisher:c,publishedAt:l,author:r,authorAccount:h,sharedTimes:b,thumbnail:u,thumbnailDescription:g,blurhash:p,expanded:j}=e;const[O,m]=Object(i.useState)(!1),_=Object(i.useCallback)((()=>{m(!0)}),[m]);return Object(a.a)("div",{className:M()("story",{expanded:j})},void 0,Object(a.a)("div",{className:"story__details"},void 0,Object(a.a)("div",{className:"story__details__publisher"},void 0,c?Object(a.a)("span",{lang:o},void 0,c):Object(a.a)(L.a,{width:50}),l&&Object(I.jsxs)(I.Fragment,{children:[" Â· ",Object(a.a)(N.a,{timestamp:l})]})),Object(a.a)("a",{className:"story__details__title",lang:o,href:t,target:"blank",rel:"noopener"},void 0,s||Object(a.a)(L.a,{})),Object(a.a)("div",{className:"story__details__shared"},void 0,r?Object(a.a)(n.a,{id:"link_preview.author",className:"story__details__shared__author",defaultMessage:"By {name}",values:{name:h?Object(a.a)(C.a,{accountId:h}):Object(a.a)("strong",{},void 0,r)}}):Object(a.a)("span",{}),"number"==typeof b?Object(a.a)(d.a,{className:"story__details__shared__pill",to:"/links/".concat(encodeURIComponent(t))},void 0,Object(a.a)(w.a,{value:b,renderer:S})):Object(a.a)(L.a,{width:"10ch"}))),Object(a.a)("a",{className:"story__thumbnail",href:t,target:"blank",rel:"noopener"},void 0,u?Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:M()("story__thumbnail__preview",{"story__thumbnail__preview--hidden":O})},void 0,Object(a.a)(k.a,{hash:p})),Object(a.a)("img",{src:u,onLoad:_,alt:g,title:g,lang:o})]}):Object(a.a)(L.a,{})))};class T extends i.PureComponent{componentDidMount(){const{dispatch:e,links:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(v.o)())}render(){const{isLoading:e,links:t}=this.props,s=Object(a.a)(f.a,{id:"explore/links"},void 0,Object(a.a)(n.a,{id:"dismissable_banner.explore_links",defaultMessage:"These are news stories being shared the most on the social web today. Newer news stories posted by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(n.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__links scrollable","data-nosnippet":!0},void 0,s,e?Object(a.a)(x.a,{}):t.map(((e,t)=>Object(a.a)(P,{expanded:0===t,lang:e.get("language"),url:e.get("url"),title:e.get("title"),publisher:e.get("provider_name"),publishedAt:e.get("published_at"),author:e.get("author_name"),authorAccount:e.getIn(["authors",0,"account","id"]),sharedTimes:1*e.getIn(["history",0,"accounts"])+1*e.getIn(["history",1,"accounts"]),thumbnail:e.get("image"),thumbnailDescription:e.get("image_description"),blurhash:e.get("blurhash")},e.get("id")))))}}var z=Object(b.connect)((e=>({links:e.getIn(["trends","links","items"]),isLoading:e.getIn(["trends","links","isLoading"])})))(Object(h.k)(T)),D=s(5),H=s(2116),A=s(1744),F=s(2104),q=s(179),R=s(1637),E=s(23),J=s(1512),K=s(1514),B=s(548),U=s(2150);const G=Object(c.d)({title:{id:"search_results.title",defaultMessage:"Search for {q}"}}),Q=e=>e.size>10&&e.size%10==1?e.skipLast(1):e;class V extends i.PureComponent{constructor(){super(...arguments),Object(o.a)(this,"state",{type:this.props.submittedType||"all"}),Object(o.a)(this,"handleSelectAll",(()=>{const{submittedType:e,dispatch:t}=this.props;e&&t(Object(q.s)()),this.setState({type:"all"})})),Object(o.a)(this,"handleSelectAccounts",(()=>{const{submittedType:e,dispatch:t}=this.props;"accounts"!==e&&t(Object(q.s)("accounts")),this.setState({type:"accounts"})})),Object(o.a)(this,"handleSelectHashtags",(()=>{const{submittedType:e,dispatch:t}=this.props;"hashtags"!==e&&t(Object(q.s)("hashtags")),this.setState({type:"hashtags"})})),Object(o.a)(this,"handleSelectStatuses",(()=>{const{submittedType:e,dispatch:t}=this.props;"statuses"!==e&&t(Object(q.s)("statuses")),this.setState({type:"statuses"})})),Object(o.a)(this,"handleLoadMoreAccounts",(()=>this._loadMore("accounts"))),Object(o.a)(this,"handleLoadMoreStatuses",(()=>this._loadMore("statuses"))),Object(o.a)(this,"handleLoadMoreHashtags",(()=>this._loadMore("hashtags"))),Object(o.a)(this,"handleLoadMore",(()=>{const{type:e}=this.state;"all"!==e&&this._loadMore(e)}))}static getDerivedStateFromProps(e,t){return e.submittedType!==t.type?{type:e.submittedType||"all"}:null}_loadMore(e){const{dispatch:t}=this.props;t(Object(q.n)(e))}render(){const{intl:e,isLoading:t,q:s,results:o}=this.props,{type:i}=this.state,c="all"!==i&&(o.get(i,Object(D.List)()).size>10&&o.get(i).size%10==1);let l;const d=o.get("accounts",Object(D.List)()),h=o.get("hashtags",Object(D.List)()),b=o.get("statuses",Object(D.List)());switch(i){case"all":l=d.size+h.size+b.size>0?Object(I.jsxs)(I.Fragment,{children:[d.size>0&&Object(a.a)(U.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(E.a,{id:"users",icon:A.a}),Object(a.a)(n.a,{id:"search_results.accounts",defaultMessage:"Profiles"})]}),onClickMore:this.handleLoadMoreAccounts},"accounts",d.take(4).map((e=>Object(a.a)(K.a,{id:e},e)))),h.size>0&&Object(a.a)(U.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(E.a,{id:"hashtag",icon:F.a}),Object(a.a)(n.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})]}),onClickMore:this.handleLoadMoreHashtags},"hashtags",h.take(4).map((e=>Object(a.a)(R.b,{hashtag:e},e.get("name"))))),b.size>0&&Object(a.a)(U.a,{title:Object(I.jsxs)(I.Fragment,{children:[Object(a.a)(E.a,{id:"quote-right",icon:H.a}),Object(a.a)(n.a,{id:"search_results.statuses",defaultMessage:"Posts"})]}),onClickMore:this.handleLoadMoreStatuses},"statuses",b.take(4).map((e=>Object(a.a)(B.a,{id:e},e))))]}):[];break;case"accounts":l=(e=>Q(e).map((e=>Object(a.a)(K.a,{id:e},e))))(d);break;case"hashtags":l=(e=>Q(e).map((e=>Object(a.a)(R.b,{hashtag:e},e.get("name")))))(h);break;case"statuses":l=(e=>Q(e).map((e=>Object(a.a)(B.a,{id:e},e))))(b)}return Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)("button",{onClick:this.handleSelectAll,className:"all"===i?"active":void 0},void 0,Object(a.a)(n.a,{id:"search_results.all",defaultMessage:"All"})),Object(a.a)("button",{onClick:this.handleSelectAccounts,className:"accounts"===i?"active":void 0},void 0,Object(a.a)(n.a,{id:"search_results.accounts",defaultMessage:"Profiles"})),Object(a.a)("button",{onClick:this.handleSelectHashtags,className:"hashtags"===i?"active":void 0},void 0,Object(a.a)(n.a,{id:"search_results.hashtags",defaultMessage:"Hashtags"})),Object(a.a)("button",{onClick:this.handleSelectStatuses,className:"statuses"===i?"active":void 0},void 0,Object(a.a)(n.a,{id:"search_results.statuses",defaultMessage:"Posts"}))),Object(a.a)("div",{className:"explore__search-results","data-nosnippet":!0},void 0,Object(a.a)(J.a,{scrollKey:"search-results",isLoading:t,onLoadMore:this.handleLoadMore,hasMore:c,emptyMessage:Object(a.a)(n.a,{id:"search_results.nothing_found",defaultMessage:"Could not find anything for these search terms"}),bindToDocument:!0},void 0,l)),Object(a.a)(r.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(G.title,{q:s})))]})}}var W=Object(b.connect)((e=>({isLoading:e.getIn(["search","isLoading"]),results:e.getIn(["search","results"]),q:e.getIn(["search","searchTerm"]),submittedType:e.getIn(["search","type"])})))(Object(l.c)(V)),X=s(96),Y=s.n(X),Z=s(1901),$=s(240);class ee extends i.PureComponent{constructor(){super(...arguments),Object(o.a)(this,"handleLoadMore",Y()((()=>{const{dispatch:e}=this.props;e(Object(v.m)())}),300,{leading:!0}))}componentDidMount(){const{dispatch:e,statusIds:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(v.p)())}render(){const{isLoading:e,hasMore:t,statusIds:s,multiColumn:o}=this.props,i=Object(a.a)(n.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"});return Object(a.a)(Z.a,{trackScroll:!0,prepend:Object(a.a)(f.a,{id:"explore/statuses"},void 0,Object(a.a)(n.a,{id:"dismissable_banner.explore_statuses",defaultMessage:"These are posts from across the social web that are gaining traction today. Newer posts with more boosts and favorites are ranked higher."})),alwaysPrepend:!0,timelineId:"explore",statusIds:s,scrollKey:"explore-statuses",hasMore:t,isLoading:e,onLoadMore:this.handleLoadMore,emptyMessage:i,bindToDocument:!o,withCounters:!0})}}var te=Object(b.connect)((e=>({statusIds:Object($.d)(e,"trending"),isLoading:e.getIn(["status_lists","trending","isLoading"],!0),hasMore:!!e.getIn(["status_lists","trending","next"])})))(Object(h.k)(ee)),se=s(516),ae=s(72),oe=s(78),ie=s(161),ce=s(192),ne=s(1712),le=s(53);const re=Object(c.d)({dismiss:{id:"follow_suggestions.dismiss",defaultMessage:"Don't show again"}}),de=e=>{let{id:t,source:s}=e;const o=Object(ae.a)(),c=Object(b.useSelector)((e=>e.getIn(["accounts",t]))),l=Object(b.useDispatch)(),r=Object(i.useCallback)((()=>{l(Object(se.e)(t))}),[t,l]);let h;switch(s){case"friends_of_friends":h=Object(a.a)(n.a,{id:"follow_suggestions.friends_of_friends_longer",defaultMessage:"Popular among people you follow"});break;case"similar_to_recently_followed":h=Object(a.a)(n.a,{id:"follow_suggestions.similar_to_recently_followed_longer",defaultMessage:"Similar to profiles you recently followed"});break;case"featured":h=Object(a.a)(n.a,{id:"follow_suggestions.featured_longer",defaultMessage:"Hand-picked by the {domain} team",values:{domain:_.k}});break;case"most_followed":case"most_interactions":h=Object(a.a)(n.a,{id:"follow_suggestions.popular_suggestion_longer",defaultMessage:"Popular on {domain}",values:{domain:_.k}})}return Object(a.a)("div",{className:"explore__suggestions__card"},void 0,Object(a.a)("div",{className:"explore__suggestions__card__source"},void 0,h),Object(a.a)("div",{className:"explore__suggestions__card__body"},void 0,Object(a.a)(d.a,{to:"/@".concat(c.get("acct"))},void 0,Object(a.a)(ie.a,{account:c,size:48})),Object(a.a)("div",{className:"explore__suggestions__card__body__main"},void 0,Object(a.a)("div",{className:"explore__suggestions__card__body__main__name-button"},void 0,Object(a.a)(d.a,{className:"explore__suggestions__card__body__main__name-button__name",to:"/@".concat(c.get("acct"))},void 0,Object(a.a)(ce.a,{account:c})),Object(a.a)(le.a,{iconComponent:oe.a,onClick:r,title:o.formatMessage(re.dismiss)}),Object(a.a)(ne.a,{accountId:c.get("id")})))))};class he extends i.PureComponent{constructor(){super(...arguments),Object(o.a)(this,"handleDismiss",(e=>{const{dispatch:t}=this.props;t(Object(se.e)(e))}))}componentDidMount(){const{dispatch:e,suggestions:t,history:s}=this.props;"POP"===s.action&&t.size>0||e(Object(se.f)(!0))}render(){const{isLoading:e,suggestions:t}=this.props;return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__suggestions scrollable scrollable--flex"},void 0,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(n.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"explore__suggestions scrollable","data-nosnippet":!0},void 0,e?Object(a.a)(x.a,{}):t.map((e=>Object(a.a)(de,{id:e.get("account"),source:e.getIn(["sources",0])},e.get("account")))))}}var be=Object(b.connect)((e=>({suggestions:e.getIn(["suggestions","items"]),isLoading:e.getIn(["suggestions","isLoading"])})))(Object(h.k)(he));class ue extends i.PureComponent{componentDidMount(){const{dispatch:e,history:t,hashtags:s}=this.props;"POP"===t.action&&s.size>0||e(Object(v.n)())}render(){const{isLoading:e,hashtags:t}=this.props,s=Object(a.a)(f.a,{id:"explore/tags"},void 0,Object(a.a)(n.a,{id:"dismissable_banner.explore_tags",defaultMessage:"These are hashtags that are gaining traction on the social web today. Hashtags that are used by more different people are ranked higher."}));return!e&&t.isEmpty()?Object(a.a)("div",{className:"explore__links scrollable scrollable--flex"},void 0,s,Object(a.a)("div",{className:"empty-column-indicator"},void 0,Object(a.a)(n.a,{id:"empty_column.explore_statuses",defaultMessage:"Nothing is trending right now. Check back later!"}))):Object(a.a)("div",{className:"scrollable explore__links","data-nosnippet":!0},void 0,s,e?Object(a.a)(x.a,{}):t.map((e=>Object(a.a)(R.b,{hashtag:e},e.get("name")))))}}var ge=Object(b.connect)((e=>({hashtags:e.getIn(["trends","tags","items"]),isLoadingHashtags:e.getIn(["trends","tags","isLoading"])})))(Object(h.k)(ue));const pe=Object(c.d)({title:{id:"explore.title",defaultMessage:"Explore"},searchResults:{id:"explore.search_results",defaultMessage:"Search results"}});class je extends i.PureComponent{constructor(){super(...arguments),Object(o.a)(this,"handleHeaderClick",(()=>{this.column.scrollTop()})),Object(o.a)(this,"setRef",(e=>{this.column=e}))}render(){const{intl:e,multiColumn:t,isSearching:s}=this.props,{signedIn:o}=this.props.identity;return Object(I.jsxs)(p.a,{bindToDocument:!t,ref:this.setRef,label:e.formatMessage(pe.title),children:[Object(a.a)(j.b,{icon:s?"search":"explore",iconComponent:s?g.a:u.a,title:e.formatMessage(s?pe.searchResults:pe.title),onClick:this.handleHeaderClick,multiColumn:t}),Object(a.a)("div",{className:"explore__search-header"},void 0,Object(a.a)(O.a,{})),s?Object(a.a)(W,{}):Object(I.jsxs)(I.Fragment,{children:[Object(a.a)("div",{className:"account__section-headline"},void 0,Object(a.a)(d.b,{exact:!0,to:"/explore"},void 0,Object(a.a)(n.a,{tagName:"div",id:"explore.trending_statuses",defaultMessage:"Posts"})),Object(a.a)(d.b,{exact:!0,to:"/explore/tags"},void 0,Object(a.a)(n.a,{tagName:"div",id:"explore.trending_tags",defaultMessage:"Hashtags"})),o&&Object(a.a)(d.b,{exact:!0,to:"/explore/suggestions"},void 0,Object(a.a)(n.a,{tagName:"div",id:"explore.suggested_follows",defaultMessage:"People"})),Object(a.a)(d.b,{exact:!0,to:"/explore/links"},void 0,Object(a.a)(n.a,{tagName:"div",id:"explore.trending_links",defaultMessage:"News"}))),Object(a.a)(h.d,{},void 0,Object(a.a)(h.b,{path:"/explore/tags",component:ge}),Object(a.a)(h.b,{path:"/explore/links",component:z}),Object(a.a)(h.b,{path:"/explore/suggestions",component:be}),Object(a.a)(h.b,{exact:!0,path:["/explore","/explore/posts","/search"]},void 0,Object(a.a)(te,{multiColumn:t}))),Object(a.a)(r.a,{},void 0,Object(a.a)("title",{},void 0,e.formatMessage(pe.title)),Object(a.a)("meta",{name:"robots",content:s?"noindex":"all"}))]})]})}}t.default=Object(m.e)(Object(b.connect)((e=>({layout:e.getIn(["meta","layout"]),isSearching:e.getIn(["search","submitted"])||!_.J})))(Object(l.c)(je)))}}]);
//# sourceMappingURL=explore.js.map