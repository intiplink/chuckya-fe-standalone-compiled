(window.webpackJsonp=window.webpackJsonp||[]).push([[511],{1976:function(e,t,a){"use strict";a.r(t);var o=a(0),l=(a(13),a(1)),c=a(8),i=a(72),n=a(26),s=a(201),b=a(38),d=a(111),r=a(294),m=a(329),u=a(137),O=a(1775),j=a(88),g=a(2111),y=a(2113),h=a(12),f=a(45),p=a(557),v=a(555),M=a(1638),_=a(2106),w=a(6);const x=Object(c.d)({title:{id:"column.firehose",defaultMessage:"Live feeds"},filter_regex:{id:"home.column_settings.filter_regex",defaultMessage:"Filter out by regular expressions"}}),k=()=>{const e=Object(i.a)(),t=Object(f.c)(),a=Object(f.d)((e=>e.getIn(["settings","firehose"]))),c=Object(l.useCallback)(((e,a)=>t(Object(u.c)(["firehose",...e],a))),[t]);return Object(o.a)("div",{className:"column-settings"},void 0,Object(o.a)("section",{},void 0,Object(o.a)("div",{className:"column-settings__row"},void 0,Object(o.a)(M.a,{settings:a,settingPath:["onlyMedia"],onChange:c,label:Object(o.a)(n.a,{id:"community.column_settings.media_only",defaultMessage:"Media only"})}),Object(o.a)(M.a,{settings:a,settingPath:["allowLocalOnly"],onChange:c,label:Object(o.a)(n.a,{id:"firehose.column_settings.allow_local_only",defaultMessage:'Show local-only posts in "All"'})}))),Object(o.a)("section",{},void 0,Object(o.a)("h3",{},void 0,Object(o.a)(n.a,{id:"home.column_settings.advanced",defaultMessage:"Advanced"})),Object(o.a)("div",{className:"column-settings__row"},void 0,Object(o.a)(y.a,{settings:a,settingPath:["regex","body"],onChange:c,label:e.formatMessage(x.filter_regex)}))))};t.default=e=>{let{feedType:t,multiColumn:a}=e;const c=Object(f.c)(),u=Object(i.a)(),{signedIn:y}=Object(d.d)(),M=Object(l.useRef)(null),C=Object(f.d)((e=>e.getIn(["settings","firehose","allowLocalOnly"]))),I=Object(f.d)((e=>e.getIn(["settings","firehose","regex","body"]))),T=Object(f.d)((e=>e.getIn(["settings","firehose","onlyMedia"],!1))),L=Object(f.d)((e=>e.getIn(["timelines","".concat(t).concat("public"===t&&C?":allow_local_only":"").concat(T?":media":""),"unread"],0)>0)),N=Object(l.useCallback)((()=>{switch(t){case"community":c(Object(m.e)("COMMUNITY",{other:{onlyMedia:T},regex:{body:I}}));break;case"public":c(Object(m.e)("PUBLIC",{other:{onlyMedia:T,allowLocalOnly:C},regex:{body:I}}));break;case"public:remote":c(Object(m.e)("REMOTE",{other:{onlyMedia:T,onlyRemote:!0},regex:{body:I}}))}}),[c,T,t,C,I]),R=Object(l.useCallback)((e=>{switch(t){case"community":c(Object(j.t)({maxId:e,onlyMedia:T}));break;case"public":c(Object(j.z)({maxId:e,onlyMedia:T,allowLocalOnly:C}));break;case"public:remote":c(Object(j.z)({maxId:e,onlyMedia:T,onlyRemote:!0}))}}),[c,T,C,t]),P=Object(l.useCallback)((()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.scrollTop()}),[]);Object(l.useEffect)((()=>{let e;switch(t){case"community":c(Object(j.t)({onlyMedia:T})),y&&(e=c(Object(O.a)({onlyMedia:T})));break;case"public":c(Object(j.z)({onlyMedia:T,allowLocalOnly:C})),y&&(e=c(Object(O.e)({onlyMedia:T,allowLocalOnly:C})));break;case"public:remote":c(Object(j.z)({onlyMedia:T,onlyRemote:!0})),y&&(e=c(Object(O.e)({onlyMedia:T,onlyRemote:!0})))}return()=>{var t;return null===(t=e)||void 0===t?void 0:t()}}),[c,y,t,T,C]);const z="community"===t?Object(o.a)(g.a,{id:"community_timeline"},void 0,Object(o.a)(n.a,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:h.k}})):Object(o.a)(g.a,{id:"public_timeline"},void 0,Object(o.a)(n.a,{id:"dismissable_banner.public_timeline",defaultMessage:"These are the most recent public posts from people on the social web that people on {domain} follow.",values:{domain:h.k}})),A="community"===t?Object(o.a)(n.a,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}):Object(o.a)(n.a,{id:"empty_column.public",defaultMessage:"There is nothing here! Write something publicly, or manually follow users from other servers to fill it up"});return Object(w.jsxs)(p.a,{bindToDocument:!a,ref:M,label:u.formatMessage(x.title),children:[Object(o.a)(v.b,{icon:"globe",iconComponent:r.a,active:L,title:u.formatMessage(x.title),onPin:N,onClick:P,multiColumn:a},void 0,Object(o.a)(k,{})),Object(o.a)("div",{className:"account__section-headline"},void 0,Object(o.a)(b.b,{exact:!0,to:"/public/local"},void 0,Object(o.a)(n.a,{tagName:"div",id:"firehose.local",defaultMessage:"This server"})),Object(o.a)(b.b,{exact:!0,to:"/public/remote"},void 0,Object(o.a)(n.a,{tagName:"div",id:"firehose.remote",defaultMessage:"Other servers"})),Object(o.a)(b.b,{exact:!0,to:"/public"},void 0,Object(o.a)(n.a,{tagName:"div",id:"firehose.all",defaultMessage:"All"}))),Object(o.a)(_.a,{prepend:z,timelineId:"".concat(t).concat("public"===t&&C?":allow_local_only":"").concat(T?":media":""),onLoadMore:R,trackScroll:!0,scrollKey:"firehose",emptyMessage:A,bindToDocument:!a,regex:I}),Object(o.a)(s.a,{},void 0,Object(o.a)("title",{},void 0,u.formatMessage(x.title)),Object(o.a)("meta",{name:"robots",content:"noindex"}))]})}}}]);
//# sourceMappingURL=firehose.js.map