(window.webpackJsonp=window.webpackJsonp||[]).push([[496],{1982:function(t,e,s){"use strict";s.r(e);var a=s(2),c=s(0),o=(s(13),s(4)),n=s.n(o),i=s(26),d=s(5),r=s(27),u=s.n(r),p=s(37),l=s(10),h=s(2130),m=s(2119),g=s(1293),b=s(1318),I=s(240),j=s(36),O=s(1264),w=s(88),R=s(455),f=s(1901),L=s(2102),M=s(2131),_=s(2122),y=s(6);const C=Object(d.List)(),A=t=>{let{url:e}=t;return Object(c.a)(h.a,{url:e,resource:Object(c.a)(i.a,{id:"timeline_hint.resources.statuses",defaultMessage:"Older posts"})})};class k extends p.a{constructor(){super(...arguments),Object(a.a)(this,"handleHeaderClick",(()=>{this.column.scrollTop()})),Object(a.a)(this,"handleLoadMore",(t=>{this.props.dispatch(Object(w.s)(this.props.accountId,{maxId:t,withReplies:this.props.withReplies,tagged:this.props.params.tagged}))})),Object(a.a)(this,"setRef",(t=>{this.column=t}))}_load(){const{accountId:t,withReplies:e,params:{tagged:s},dispatch:a}=this.props;a(Object(j.J)(t)),e||a(Object(w.q)(t,{tagged:s})),a(Object(O.d)(t)),a(Object(w.s)(t,{withReplies:e,tagged:s}))}componentDidMount(){const{params:{acct:t},accountId:e,dispatch:s}=this.props;e?this._load():s(Object(j.R)(t))}componentDidUpdate(t){const{params:{acct:e,tagged:s},accountId:a,withReplies:c,dispatch:o}=this.props;t.accountId!==a&&a?this._load():t.params.acct!==e?o(Object(j.R)(e)):t.params.tagged!==s&&(c||o(Object(w.q)(a,{tagged:s})),o(Object(w.s)(a,{withReplies:c,tagged:s})))}UNSAFE_componentWillReceiveProps(t){const{dispatch:e}=this.props;(t.params.accountId!==this.props.params.accountId&&t.params.accountId||t.withReplies!==this.props.withReplies)&&(e(Object(j.J)(t.params.accountId)),t.withReplies||e(Object(w.q)(t.params.accountId)),e(Object(w.s)(t.params.accountId,{withReplies:t.params.withReplies})))}render(){const{accountId:t,statusIds:e,featuredStatusIds:s,isLoading:a,hasMore:o,suspended:n,isAccount:d,hidden:r,multiColumn:u,remote:p,remoteUrl:l}=this.props;if(a&&e.isEmpty())return Object(c.a)(L.a,{},void 0,Object(c.a)(R.a,{}));if(!a&&!d)return Object(c.a)(g.a,{multiColumn:u,errorType:"routing"});let h;const b=n||r;h=n?Object(c.a)(i.a,{id:"empty_column.account_suspended",defaultMessage:"Account suspended"}):r?Object(c.a)(M.a,{accountId:t}):p&&e.isEmpty()?Object(c.a)(A,{url:l}):Object(c.a)(i.a,{id:"empty_column.account_timeline",defaultMessage:"No posts found"});const I=p?Object(c.a)(A,{url:l}):null;return Object(y.jsxs)(L.a,{ref:this.setRef,children:[Object(c.a)(m.a,{onClick:this.handleHeaderClick,multiColumn:u}),Object(c.a)(f.a,{prepend:Object(c.a)(_.a,{accountId:this.props.accountId,hideTabs:b,tagged:this.props.params.tagged}),alwaysPrepend:!0,append:I,scrollKey:"account_timeline",statusIds:b?C:e,featuredStatusIds:s,isLoading:a,hasMore:!b&&o,onLoadMore:this.handleLoadMore,emptyMessage:h,bindToDocument:!u,timelineId:"account"})]})}}Object(a.a)(k,"propTypes",{params:n.a.shape({acct:n.a.string,id:n.a.string,tagged:n.a.string}).isRequired,accountId:n.a.string,dispatch:n.a.func.isRequired,statusIds:u.a.list,featuredStatusIds:u.a.list,isLoading:n.a.bool,hasMore:n.a.bool,withReplies:n.a.bool,isAccount:n.a.bool,suspended:n.a.bool,hidden:n.a.bool,remote:n.a.bool,remoteUrl:n.a.string,multiColumn:n.a.bool}),e.default=Object(l.connect)(((t,e)=>{let{params:{acct:s,id:a,tagged:c},withReplies:o=!1}=e;const n=a||t.getIn(["accounts_map",Object(b.b)(s)]);if(null===n)return{isLoading:!1,isAccount:!1,statusIds:C};if(!n)return{isLoading:!0,statusIds:C};const i=o?"".concat(n,":with_replies"):"".concat(n).concat(c?":".concat(c):"");return{accountId:n,remote:!(t.getIn(["accounts",n,"acct"])===t.getIn(["accounts",n,"username"])),remoteUrl:t.getIn(["accounts",n,"url"]),isAccount:!!t.getIn(["accounts",n]),statusIds:t.getIn(["timelines","account:".concat(i),"items"],Object(d.List)()),featuredStatusIds:o?Object(d.List)():t.getIn(["timelines","account:".concat(n,":pinned").concat(c?":".concat(c):""),"items"],Object(d.List)()),isLoading:t.getIn(["timelines","account:".concat(i),"isLoading"]),hasMore:t.getIn(["timelines","account:".concat(i),"hasMore"]),suspended:t.getIn(["accounts",n,"suspended"],!1),hidden:Object(I.b)(t,n)}}))(k)}}]);
//# sourceMappingURL=account_timeline.js.map