(window.webpackJsonp=window.webpackJsonp||[]).push([[500],{1994:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n(2),o=(n(14),n(1)),a=n(8),c=n(26),d=n(54),l=n(247),m=n(10),r=n(1717),u=n(2075),g=n(126),h=n(12),b=n(537),p=n(1739),y=n(85),j=n(1291),O=n(1289),M=n(2066),f=n(166),I=n(2076),v=n(2070);const _=Object(a.d)({filter_regex:{id:"home.column_settings.filter_regex",defaultMessage:"Filter out by regular expressions"},settings:{id:"home.settings",defaultMessage:"Column settings"}});class x extends o.PureComponent{render(){const{settings:e,onChange:t,intl:n}=this.props;return Object(i.a)("div",{className:"column-settings"},void 0,Object(i.a)("div",{className:"column-settings__row"},void 0,Object(i.a)(v.a,{settings:e,settingPath:["other","onlyMedia"],onChange:t,label:Object(i.a)(c.a,{id:"community.column_settings.media_only",defaultMessage:"Media only"})})),Object(i.a)("span",{className:"column-settings__section"},void 0,Object(i.a)(c.a,{id:"home.column_settings.advanced",defaultMessage:"Advanced"})),Object(i.a)("div",{className:"column-settings__row"},void 0,Object(i.a)(I.a,{settings:e,settingPath:["regex","body"],onChange:t,label:n.formatMessage(_.filter_regex)})))}}var C=Object(d.c)(x);var w=Object(m.connect)(((e,t)=>{let{columnId:n}=t;const i=n,s=e.getIn(["settings","columns"]),o=s.findIndex((e=>e.get("uuid")===i));return{settings:i&&o>=0?s.get(o).get("params"):e.getIn(["settings","community"])}}),((e,t)=>{let{columnId:n}=t;return{onChange(t,i){e(n?Object(b.f)(n,t,i):Object(f.c)(["community",...t],i))}}}))(C),P=n(6);const k=Object(a.d)({title:{id:"column.community",defaultMessage:"Local timeline"}});class T extends o.PureComponent{constructor(){super(...arguments),Object(s.a)(this,"handlePin",(()=>{const{columnId:e,dispatch:t,onlyMedia:n}=this.props;t(e?Object(b.h)(e):Object(b.e)("COMMUNITY",{other:{onlyMedia:n}}))})),Object(s.a)(this,"handleMove",(e=>{const{columnId:t,dispatch:n}=this.props;n(Object(b.g)(t,e))})),Object(s.a)(this,"handleHeaderClick",(()=>{this.column.scrollTop()})),Object(s.a)(this,"setRef",(e=>{this.column=e})),Object(s.a)(this,"handleLoadMore",(e=>{const{dispatch:t,onlyMedia:n}=this.props;t(Object(y.t)({maxId:e,onlyMedia:n}))}))}componentDidMount(){const{dispatch:e,onlyMedia:t}=this.props,{signedIn:n}=this.props.identity;e(Object(y.t)({onlyMedia:t})),n&&(this.disconnect=e(Object(p.a)({onlyMedia:t})))}componentDidUpdate(e){const{signedIn:t}=this.props.identity;if(e.onlyMedia!==this.props.onlyMedia){const{dispatch:e,onlyMedia:n}=this.props;this.disconnect&&this.disconnect(),e(Object(y.t)({onlyMedia:n})),t&&(this.disconnect=e(Object(p.a)({onlyMedia:n})))}}componentWillUnmount(){this.disconnect&&(this.disconnect(),this.disconnect=null)}render(){const{intl:e,hasUnread:t,columnId:n,multiColumn:s,onlyMedia:o}=this.props,a=!!n;return Object(P.jsxs)(j.a,{bindToDocument:!s,ref:this.setRef,label:e.formatMessage(k.title),children:[Object(i.a)(O.b,{icon:"users",iconComponent:r.a,active:t,title:e.formatMessage(k.title),onPin:this.handlePin,onMove:this.handleMove,onClick:this.handleHeaderClick,pinned:a,multiColumn:s},void 0,Object(i.a)(w,{columnId:n})),Object(i.a)(M.a,{prepend:Object(i.a)(u.a,{id:"community_timeline"},void 0,Object(i.a)(c.a,{id:"dismissable_banner.community_timeline",defaultMessage:"These are the most recent public posts from people whose accounts are hosted by {domain}.",values:{domain:h.k}})),trackScroll:!a,scrollKey:"community_timeline-".concat(n),timelineId:"community".concat(o?":media":""),onLoadMore:this.handleLoadMore,emptyMessage:Object(i.a)(c.a,{id:"empty_column.community",defaultMessage:"The local timeline is empty. Write something publicly to get the ball rolling!"}),bindToDocument:!s,regex:this.props.regex}),Object(i.a)(l.a,{},void 0,Object(i.a)("title",{},void 0,e.formatMessage(k.title)),Object(i.a)("meta",{name:"robots",content:"noindex"}))]})}}Object(s.a)(T,"defaultProps",{onlyMedia:!1});t.default=Object(g.e)(Object(m.connect)(((e,t)=>{let{columnId:n}=t;const i=n,s=e.getIn(["settings","columns"]),o=s.findIndex((e=>e.get("uuid")===i)),a=n&&o>=0?s.get(o).getIn(["params","other","onlyMedia"]):e.getIn(["settings","community","other","onlyMedia"]),c=n&&o>=0?s.get(o).getIn(["params","regex","body"]):e.getIn(["settings","community","regex","body"]),d=e.getIn(["timelines","community".concat(a?":media":"")]);return{hasUnread:!!d&&d.get("unread")>0,onlyMedia:a,regex:c}}))(Object(d.c)(T)))}}]);
//# sourceMappingURL=community_timeline.js.map