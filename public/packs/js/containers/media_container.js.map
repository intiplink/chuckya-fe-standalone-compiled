{"version":3,"sources":["webpack:///./node_modules/react-redux/dist/react-redux.legacy-esm.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/identity_context.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/statuses.js","webpack:///./app/javascript/material-icons/400-24px/check_box_outline_blank.svg","webpack:///./node_modules/blurhash/dist/esm/index.js","webpack:///./node_modules/color-blend/dist/index.modern.js","webpack:///./app/javascript/material-icons/400-24px/download.svg","webpack:///./app/javascript/material-icons/400-24px/fullscreen.svg","webpack:///./node_modules/redux-immutable/dist/index.js","webpack:///./node_modules/use-sync-external-store/with-selector.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/store/typed_functions.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/height_cache.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/height_cache.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/filters.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/animated_number.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/hashtag.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/content_warning.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji_mart_data_light.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji_utils.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji_mart_search_light.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_mart_data_light.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_utils.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_mart_search_light.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/models/custom_emoji.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/models/account.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/models/custom_emoji.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/models/account.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/custom_emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/hooks/useHovering.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/languages.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/filters.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/gifv.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/blurhash.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/custom_emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/privacy_preference.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/hooks/useHovering.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/languages.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/filters.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/gifv.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/blurhash.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/components/zoomable_image.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/components/image_loader.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/components/zoomable_image.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/components/image_loader.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/history.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/featured_tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/history.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/featured_tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/idna.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/store/typed_functions.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/unicode_to_filename.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/unicode_to_filename.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/statuses.js","webpack:///./node_modules/core-js/modules/es.object.has-own.js","webpack:///./node_modules/wicg-inert/dist/inert.esm.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/accounts_map.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/accounts_map.js","webpack:///./node_modules/core-js/internals/promise-native-constructor.js","webpack:///./node_modules/core-js/internals/species-constructor.js","webpack:///./node_modules/core-js/internals/promise-resolve.js","webpack:///./node_modules/core-js/internals/new-promise-capability.js","webpack:///./node_modules/core-js/internals/delete-property-or-throw.js","webpack:///./node_modules/use-sync-external-store/cjs/use-sync-external-store-with-selector.production.min.js","webpack:///./node_modules/raf/node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/react-motion/lib/StaggeredMotion.js","webpack:///./node_modules/react-motion/lib/mergeDiff.js","webpack:///./node_modules/react-motion/lib/reorderKeys.js","webpack:///./node_modules/react-lifecycles-compat/react-lifecycles-compat.es.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar_middleware.js","webpack:///./node_modules/react-redux-loading-bar/build/immutable.js","webpack:///./node_modules/core-js/internals/typed-array-constructor.js","webpack:///./node_modules/core-js/internals/typed-array-constructors-require-wrappers.js","webpack:///./node_modules/core-js/internals/check-correctness-of-iteration.js","webpack:///./node_modules/core-js/internals/array-buffer.js","webpack:///./node_modules/core-js/internals/math-fround.js","webpack:///./node_modules/core-js/internals/math-float-round.js","webpack:///./node_modules/core-js/internals/math-sign.js","webpack:///./node_modules/core-js/internals/ieee754.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/identity_context.tsx","webpack:///./node_modules/core-js/internals/is-integral-number.js","webpack:///./node_modules/core-js/internals/to-positive-integer.js","webpack:///./node_modules/core-js/internals/to-uint8-clamped.js","webpack:///./node_modules/core-js/internals/typed-array-from.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/array-species-constructor.js","webpack:///./node_modules/core-js/internals/set-species.js","webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./node_modules/react-motion/lib/spring.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./node_modules/core-js/internals/array-to-reversed.js","webpack:///./node_modules/core-js/internals/array-with.js","webpack:///./node_modules/core-js/modules/es.array-buffer.detached.js","webpack:///./node_modules/core-js/modules/es.array-buffer.transfer.js","webpack:///./node_modules/core-js/internals/detach-transferable.js","webpack:///./node_modules/core-js/internals/try-node-require.js","webpack:///./node_modules/core-js/internals/engine-is-browser.js","webpack:///./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","webpack:///./node_modules/redux-immutable/dist/combineReducers.js","webpack:///./node_modules/redux-immutable/dist/utilities/index.js","webpack:///./node_modules/redux-immutable/dist/utilities/getUnexpectedInvocationParameterMessage.js","webpack:///./node_modules/redux-immutable/dist/utilities/validateNextState.js","webpack:///./node_modules/core-js/internals/dom-exception-constants.js","webpack:///./node_modules/react-swipeable-views/lib/SwipeableViews.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/extends.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/settings.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/react-swipeable-views-core/lib/index.js","webpack:///./node_modules/react-swipeable-views-core/lib/checkIndexBounds.js","webpack:///./node_modules/react-swipeable-views-core/lib/computeIndex.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api_types/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/notification_groups.ts","webpack:///./node_modules/react-swipeable-views-core/lib/getDisplaySameSlide.js","webpack:///./node_modules/react-swipeable-views-core/lib/mod.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api_types/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/notification_groups.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/account_notes.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api/accounts.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/account_notes.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api/accounts.ts","webpack:///./node_modules/exif-js/exif.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/settings.js","webpack:///./node_modules/core-js/internals/array-buffer-view-core.js","webpack:///./app/javascript/material-icons/400-24px/repeat.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/avatar.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/filters.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/animated_number.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/pin_statuses.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/pin_statuses.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/unicode_to_unified_name.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/modal_root.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/scrollbar.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/poll.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/components/media_modal.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/unicode_to_unified_name.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/modal_root.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/scrollbar.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/components/media_modal.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/search.js","webpack:///./node_modules/reselect/dist/reselect.legacy-esm.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/alerts.js","webpack:///./node_modules/core-js/modules/es.array.unshift.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/search.js","webpack:///app/src/devtoolsExtension.ts","webpack:///app/src/createDraftSafeSelector.ts","webpack:///app/src/tsHelpers.ts","webpack:///app/src/createAction.ts","webpack:///app/src/utils.ts","webpack:///app/src/getDefaultMiddleware.ts","webpack:///app/src/autoBatchEnhancer.ts","webpack:///app/src/getDefaultEnhancers.ts","webpack:///app/src/configureStore.ts","webpack:///app/src/mapBuilders.ts","webpack:///app/src/createReducer.ts","webpack:///app/src/nanoid.ts","webpack:///app/src/matchers.ts","webpack:///app/src/createAsyncThunk.ts","webpack:///app/src/entities/state_adapter.ts","webpack:///app/src/listenerMiddleware/exceptions.ts","webpack:///app/src/listenerMiddleware/utils.ts","webpack:///app/src/listenerMiddleware/task.ts","webpack:///app/src/listenerMiddleware/index.ts","webpack:///app/src/combineSlices.ts","webpack:///app/src/formatProdErrorMessage.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/alerts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/timelines_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/timelines_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/avatar.tsx","webpack:///./app/javascript/material-icons/400-24px/check.svg","webpack:///./node_modules/escape-html/index.js","webpack:///./node_modules/react-redux-loading-bar/build/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/relative_timestamp.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/resize_image.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/compose.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/containers/media_container.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/containers/media_container.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/icon.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/ready.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/ready.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/announcements.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/announcements.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/selectors/accounts.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/selectors/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/markers.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/markers.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/relative_timestamp.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/server.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/server.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/compose.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/selectors/accounts.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/selectors/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/config.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/router.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/react_router.tsx","webpack:///./app/javascript/material-icons/400-24px/reply.svg","webpack:///./app/javascript/material-icons/400-24px/star.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/video/index.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/video/index.jsx","webpack:///./node_modules/react-immutable-proptypes/dist/ImmutablePropTypes.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/trends.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/trends.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/icon.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/store.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/config.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/react_router.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/importer/index.js","webpack:///./app/javascript/material-icons/400-24px/chevron_right.svg","webpack:///./app/javascript/material-icons/400-24px/play_arrow-fill.svg","webpack:///./app/javascript/material-icons/400-24px/reply_all.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/domain_blocks.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/is_mobile.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_unicode_mapping_light.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/importer/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/store.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/domain_blocks.js","webpack:///./node_modules/core-js/modules/es.promise.finally.js","webpack:///./app/javascript/material-icons/400-24px/visibility_off.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/columns.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/columns.js","webpack:///./node_modules/react-motion/lib/Motion.js","webpack:///./app/javascript/material-icons/400-24px/chevron_left.svg","webpack:///./app/javascript/material-icons/400-24px/fullscreen_exit.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/importer/normalizer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/importer/normalizer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/mutes.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/mutes.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/conversations.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/conversations.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/notification_policies.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api/notification_policies.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/notification_policies.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api/notification_policies.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/blurhash.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/blurhash.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/is_mobile.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/domain_blocks_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/domain_blocks_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/interactions_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api/interactions.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/interactions_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api/interactions.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/app.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/accounts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji_unicode_mapping_light.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/selectors/settings.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/selectors/settings.ts","webpack:///./node_modules/react-immutable-pure-component/lib/react-immutable-pure-component.es.js","webpack:///./node_modules/core-js/modules/es.typed-array.uint8-array.js","webpack:///./node_modules/core-js/modules/es.typed-array.at.js","webpack:///./node_modules/core-js/modules/es.typed-array.fill.js","webpack:///./node_modules/core-js/modules/es.typed-array.find-last.js","webpack:///./node_modules/core-js/modules/es.typed-array.find-last-index.js","webpack:///./node_modules/core-js/modules/es.typed-array.set.js","webpack:///./node_modules/core-js/modules/es.typed-array.sort.js","webpack:///./node_modules/core-js/modules/es.typed-array.to-reversed.js","webpack:///./node_modules/core-js/modules/es.typed-array.to-sorted.js","webpack:///./node_modules/core-js/modules/es.typed-array.with.js","webpack:///./node_modules/core-js/modules/esnext.array-buffer.detached.js","webpack:///./node_modules/core-js/modules/esnext.array-buffer.transfer.js","webpack:///./node_modules/core-js/modules/esnext.array-buffer.transfer-to-fixed-length.js","webpack:///./node_modules/react-motion/lib/stripStyle.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar_ducks.js","webpack:///./node_modules/core-js/internals/array-iteration-from-last.js","webpack:///./node_modules/react-swipeable-views-core/node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/accounts.js","webpack:///./node_modules/warning/warning.js","webpack:///./app/javascript/material-icons/400-24px/pause.svg","webpack:///./app/javascript/material-icons/400-24px/volume_off-fill.svg","webpack:///./app/javascript/material-icons/400-24px/volume_up-fill.svg","webpack:///./app/javascript/material-icons/400-24px/rectangle.svg","webpack:///./app/javascript/material-icons/400-24px/open_in_new.svg","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/util/reduced_motion.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/util/optional_motion.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/util/reduced_motion.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/util/optional_motion.js","webpack:///./node_modules/react-motion/lib/react-motion.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/blocks.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/blocks.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/base64.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/push_notifications/setter.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/push_notifications/registerer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/push_notifications/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/base64.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/push_notifications/setter.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/push_notifications/registerer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/push_notifications/index.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/html.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/ui/util/fullscreen.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/ui/util/fullscreen.js","webpack:///./node_modules/detect-it/dist/detect-it.esm.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/accounts.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/alerts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/announcements.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/js_helpers.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/uuid.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/compose.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/contexts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/conversations.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/custom_emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/domain_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/dropdown_menu.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/filters.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/followed_tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/height_cache.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/history.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/list_adder.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/list_editor.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/local_settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/markers.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/media_attachments.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/meta.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/modal.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/notification_groups.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/notification_policy.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/notification_requests.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/picture_in_picture.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/pinned_accounts_editor.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/polls.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/push_notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/models/relationship.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/relationships.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/search.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/server.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/status_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/statuses.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/suggestions.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/timelines.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/trends.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/user_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/reducers/index.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/store/middlewares/errors.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/store/middlewares/loading_bar.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/store/middlewares/sounds.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/store/store.ts","webpack:///./node_modules/core-js/modules/es.array.find-last-index.js","webpack:///./node_modules/react-motion/lib/mapToZero.js","webpack:///./node_modules/react-motion/lib/stepper.js","webpack:///./node_modules/performance-now/lib/performance-now.js","webpack:///./node_modules/raf/index.js","webpack:///./node_modules/react-motion/lib/shouldStopAnimation.js","webpack:///./node_modules/core-js/internals/to-index.js","webpack:///./node_modules/core-js/internals/to-big-int.js","webpack:///./node_modules/core-js/internals/engine-is-node.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/utils/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/html.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/picture_in_picture/components/footer.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/picture_in_picture/components/footer.jsx","webpack:///./node_modules/redux-thunk/dist/redux-thunk.legacy-esm.js","webpack:///./node_modules/immutable/dist/immutable.es.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/picture_in_picture.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/app.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/picture_in_picture.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/models/notification_group.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/bookmarks.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/favourites.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/models/notification_group.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/bookmarks.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/favourites.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/modal.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/api/directory.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/directory.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/api/directory.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/directory.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/suggestions.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/suggestions.js","webpack:///./node_modules/core-js/modules/es.array.at.js","webpack:///./node_modules/core-js/modules/es.string.at-alternative.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/notifications_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/notifications_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/components/icon_button.tsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/audio/visualizer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/audio/index.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/audio/visualizer.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/audio/index.jsx","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/local_settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/dropdown_menu.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/dropdown_menu.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/accounts.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/alerts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/announcements.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/uuid.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/compose.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/contexts.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/conversations.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/custom_emojis.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/domain_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/dropdown_menu.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/filters.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/followed_tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/height_cache.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/history.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/list_adder.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/list_editor.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/markers.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/media_attachments.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/meta.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/modal.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/notification_groups.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/notification_policy.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/notification_requests.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/picture_in_picture.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/polls.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/push_notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/models/relationship.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/relationships.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/search.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/server.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/settings.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/status_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/statuses.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/suggestions.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/tags.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/timelines.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/trends.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/user_lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/reducers/index.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/store/middlewares/errors.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/store/middlewares/loading_bar.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/store/middlewares/sounds.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/store/store.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/features/emoji/emoji_compressed.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/features/emoji/emoji_compressed.js","webpack:///./node_modules/core-js/modules/es.array.find-last.js","webpack:///./node_modules/core-js/modules/es.array.unscopables.flat-map.js","webpack:///./node_modules/core-js/internals/a-constructor.js","webpack:///./node_modules/react-motion/lib/presets.js","webpack:///./node_modules/react-redux-loading-bar/build/loading_bar.js","webpack:///./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/internals/to-offset.js","webpack:///./node_modules/core-js/internals/is-big-int-array.js","webpack:///./node_modules/core-js/internals/array-from-constructor-and-list.js","webpack:///./node_modules/core-js/internals/array-buffer-is-detached.js","webpack:///./node_modules/core-js/internals/array-buffer-byte-length.js","webpack:///./node_modules/core-js/internals/array-buffer-transfer.js","webpack:///./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack:///./node_modules/core-js/internals/engine-is-deno.js","webpack:///./node_modules/redux-immutable/dist/utilities/getStateName.js","webpack:///./node_modules/core-js/modules/web.dom-exception.stack.js","webpack:///./node_modules/react-swipeable-views/lib/index.js","webpack:///./node_modules/react-swipeable-views/node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack:///./node_modules/react-swipeable-views-core/lib/constant.js","webpack:///./node_modules/react-motion/lib/TransitionMotion.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/utils/notifications.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/notifications.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/modal.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/accounts_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/accounts_typed.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/components/icon_button.tsx","webpack:///./app/javascript/material-icons/400-24px/close.svg","webpack:///./node_modules/immer/dist/immer.legacy-esm.js","webpack:///./node_modules/redux/dist/redux.legacy-esm.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/interactions.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/actions/timelines.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/timelines.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/compare_id.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/flavours/glitch/compare_id.ts","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/lists.js","webpack:///app/javascript/var/home/testeraphy/Documents/Chuckya-fe-standalone/app/javascript/mastodon/actions/interactions.js"],"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__objRest","source","exclude","target","indexOf","React","ContextKey","Symbol","for","gT","globalThis","getContext","_a","createContext","contextMap","Map","realContext","get","set","ReactReduxContext","notInitialized","Error","createReduxContextHook","context","useContext","useReduxContext","useSyncExternalStoreWithSelector","refEquality","createSelectorHook","useReduxContext2","useSelector2","selector","equalityFnOrOptions","equalityFn","devModeChecks","store","subscription","getServerState","stabilityCheck","identityFunctionCheck","wrappedSelector","useRef","useCallback","name","state","selectedState","addNestedSub","getState","useDebugValue","assign","withTypes","useSelector","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_SERVER_CONTEXT_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","ForwardRef","Memo","typeOf","object","$$typeof","type","$$typeofType","pureFinalPropsSelectorFactory","mapStateToProps","mapDispatchToProps","mergeProps","dispatch","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","ownProps","stateProps","dispatchProps","mergedProps","hasRunAtLeastOnce","handleSubsequentCalls","nextState","nextOwnProps","propsChanged","stateChanged","dependsOnOwnProps","nextStateProps","statePropsChanged","handleNewState","wrapMapToPropsConstant","getConstant","constant","constantSelector","getDependsOnOwnProps","mapToProps","Boolean","length","wrapMapToPropsFunc","methodName","displayName","proxy","stateOrDispatch","props","createInvalidArgFactory","arg","options","wrappedComponentName","defaultMergeProps","defaultNoopBatch","callback","nullListeners","notify","createSubscription","parentSub","unsubscribe","listeners","subscriptionsAmount","selfSubscribed","handleChangeWrapper","onStateChange","trySubscribe","subscribe","first","last","clear","listener","next","push","isSubscribed","prev","createListenerCollection","tryUnsubscribe","cleanupListener","removed","notifyNestedSubs","getListeners","canUseDOM","window","document","createElement","isReactNative","navigator","product","useIsomorphicLayoutEffect","useLayoutEffect","useEffect","is","x","y","shallowEqual","objA","objB","keysA","keys","keysB","i","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arguments","arity","MEMO_STATICS","compare","TYPE_STATICS","render","getStatics","component","getOwnPropertyNames","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","inheritedComponent","concat","targetStatics","sourceStatics","descriptor","e","useSyncExternalStore","NO_SUBSCRIPTION_ARRAY","captureWrapperProps","lastWrapperProps","lastChildProps","renderIsScheduled","wrapperProps","childPropsFromStoreUpdate","current","strictEqual","connect_default","pure","areMergedPropsEqual","forwardRef","Context","initMapStateToProps","mapStateToPropsFactory","initMapDispatchToProps","actionCreators","boundActionCreators","actionCreator","args","mapDispatchToPropsFactory","initMergeProps","hasRunOnce","nextMergedProps","wrapMergePropsFunc","mergePropsFactory","shouldHandleStateChanges","WrappedComponent","selectorFactoryOptions","ConnectFunction","propsContext","reactReduxForwardedRef","useMemo","reactReduxForwardedRef2","wrapperProps2","ContextToUse","ResultContext","Consumer","contextValue","didStoreComeFromProps","didStoreComeFromContext","childPropsSelector","_b","finalPropsSelectorFactory","subscription2","notifyNestedSubs2","bind","overriddenContextValue","isMounted","latestSubscriptionCallbackError","actualChildPropsSelector","subscribeForReact","reactListener","additionalSubscribeListener","didUnsubscribe","lastThrownError","checkForUpdates","latestStoreState","newChildProps","error","subscribeUpdates","effectFunc","effectArgs","dependencies","actualChildProps","err","message","stack","renderedWrappedComponent","ref","Provider","Connect","memo","forwarded","Provider_default","children","serverState","previousState","createStoreHook","useStore2","useStore","createDispatchHook","useDispatch2","fn","useDispatch","batch","initializeConnect","identityContextPropShape","PropTypes","shape","signedIn","bool","isRequired","accountId","string","disabledAccountId","createIdentityContext","_state$role$permissio","_state$role","meta","me","disabled_account_id","permissions","role","IdentityContext","undefined","useIdentity","withIdentity","Component","_Component$displayNam","C","wrappedComponentRef","remainingProps","_jsx2","_jsx","identity","hoistStatics","STATUS_FETCH_REQUEST","STATUS_FETCH_SUCCESS","STATUS_FETCH_FAIL","STATUS_DELETE_REQUEST","STATUS_DELETE_SUCCESS","STATUS_DELETE_FAIL","CONTEXT_FETCH_REQUEST","CONTEXT_FETCH_SUCCESS","CONTEXT_FETCH_FAIL","STATUS_MUTE_REQUEST","STATUS_MUTE_SUCCESS","STATUS_MUTE_FAIL","STATUS_UNMUTE_REQUEST","STATUS_UNMUTE_SUCCESS","STATUS_UNMUTE_FAIL","STATUS_REVEAL","STATUS_HIDE","STATUS_COLLAPSE","REDRAFT","STATUS_TRANSLATE_SUCCESS","STATUS_TRANSLATE_UNDO","fetchStatus","id","forceFetch","skipLoading","getIn","fetchContextRequest","api","then","response","importFetchedStatuses","data","ancestors","descendants","statuses","fetchContextSuccess","catch","status","deleteFromTimelines","skipAlert","fetchContextFail","fetchContext","fetchStatusRequest","importFetchedStatus","fetchStatusSuccess","fetchStatusFail","editStatus","fetchStatusSourceRequest","fetchStatusSourceSuccess","ensureComposeIsVisible","setComposeToStatus","text","spoiler_text","fetchStatusSourceFail","deleteStatus","withRedraft","deleteStatusRequest","delete","deleteStatusSuccess","importFetchedAccount","account","raw_text","redraft","deleteStatusFail","updateStatus","muteStatus","muteStatusRequest","post","muteStatusSuccess","muteStatusFail","unmuteStatus","unmuteStatusRequest","unmuteStatusSuccess","unmuteStatusFail","hideStatus","ids","Array","isArray","revealStatus","toggleStatusSpoilers","statusId","toggleStatusCollapse","isCollapsed","translateStatus","translateStatusRequest","translateStatusSuccess","translateStatusFail","translation","undoStatusTranslation","pollId","navigateToStatus","_dispatch","acct","accounts","browserHistory","_path","_extends","n","t","r","apply","_ref","title","titleId","xmlns","height","viewBox","width","d","q","f","Math","pow","h","max","min","trunc","M","F","abs","constructor","super","this","floor","z","L","l","j","m","u","o","substring","c","s","Uint8ClampedArray","B","R","w","P","G","cos","PI","T","V","I","E","g","p","v","round","O","unitInput","unitOutput","roundOutput","exports","combineReducers","_combineReducers2","_combineReducers3","__esModule","default","module","useAppDispatch","useAppSelector","createAppAsyncThunk","createAsyncThunk","createBaseAsyncThunk","discardLoadDataInPayload","createDataLoadingThunk","loadData","onDataOrThunkOptions","maybeThunkOptions","onData","thunkOptions","creator","async","fulfillWithValue","rejectWithValue","getPendingMeta","createThunk","_ref2","result","discardLoadData","actionArg","HEIGHT_CACHE_SET","HEIGHT_CACHE_CLEAR","setHeight","clearHeight","toServerSideType","columnType","includes","obfuscatedCount","count","AnimatedNumber","obfuscate","previousValue","setPreviousValue","useState","direction","setDirection","willEnter","willLeave","spring","damping","stiffness","reduceMotion","_Fragment","ShortNumber","styles","style","TransitionMotion","items","className","map","_style$y","_style$y2","position","transform","recoverHashtags","recognizedTags","tag","re","RegExp","matched_hashtag","match","filter","_autoUnfoldCW","skip_unfold_regex","expandSpoilers","regex","trim","test","autoHideCW","settings","autoUnfoldCW","shortCodesToEmojiData","skins","categories","short_names","_emojisWithoutShortCodes","emojiCompressed","emojis","forEach","shortCode","emojiData","_filenameData","searchData","native","search","unified","unicodeToUnifiedName","buildSearch","addToSearch","strings","split","toLowerCase","keywords","emoticons","join","stringFromCodePoint","String","fromCodePoint","highSurrogate","lowSurrogate","codeUnits","index","codePoint","Number","isFinite","RangeError","fromCharCode","_JSON","JSON","COLONS_REGEX","SKINS","unifiedToNative","codePoints","getSanitizedData","emoji","skin_tone","skin_variations","custom","imageUrl","colons","skin","sanitize","getData","matches","parseInt","hasOwn","variations","parse","stringify","skinKey","variationData","k","shift","uniq","arr","reduce","acc","item","intersect","uniqA","uniqB","originalPool","emojisList","emoticonsList","customEmojisList","emoticon","addCustomToPool","pool","emojiId","clearCustomEmojis","emojisToShowFilter","maxResults","include","results","values","allResults","category","isIncluded","isExcluded","customIsIncluded","customIsExcluded","searchValue","aPool","aIndex","charIndex","char","scores","sub","slice","subIndex","score","sort","CustomEmojiFactory","Record","shortcode","static_url","url","visible_in_picker","AccountFieldFactory","ImmutableRecord","verified_at","name_emojified","value_emojified","value_plain","AccountRoleFactory","color","accountDefaultValues","avatar","avatar_static","bot","created_at","discoverable","indexable","display_name","display_name_html","List","fields","group","header","header_static","last_status_at","locked","noindex","note","note_emojified","note_plain","roles","uri","username","followers_count","following_count","statuses_count","hidden","suspended","memorial","limited","moved","hide_collections","AccountFactory","createAccountFromServerJSON","serverJSON","_serverJSON$roles","accountJSON","emojiMap","field","jsonField","emojify","escapeTextContentForBrowser","unescapeHTML","createAccountField","CUSTOM_EMOJIS_FETCH_REQUEST","CUSTOM_EMOJIS_FETCH_SUCCESS","CUSTOM_EMOJIS_FETCH_FAIL","fetchCustomEmojis","custom_emojis","fetchCustomEmojisFail","useHovering","animate","hovering","setHovering","handleMouseEnter","handleMouseLeave","LANGUAGE_USE","useLanguage","language","saveSettings","FILTERS_FETCH_SUCCESS","FILTERS_CREATE_SUCCESS","initAddFilter","openModal","modalType","modalProps","fetchFilters","filters","createFilterStatus","params","onSuccess","onFail","createFilterStatusRequest","filter_id","createFilterStatusSuccess","createFilterStatusFail","filter_status","createFilter","createFilterRequest","createFilterSuccess","createFilterFail","GIFV","src","alt","lang","onClick","loading","setLoading","handleLoadedData","handleClick","stopPropagation","tabIndex","muted","loop","autoPlay","playsInline","onLoadedData","top","left","DIGIT_CHARACTERS","getAverageFromBlurhash","blurhash","int","str","digit","decode83","order","privacyPreference","messages","defineMessages","compress","defaultMessage","expand","getDistance","p1","p2","sqrt","clientX","clientY","ZoomableImage","PureComponent","_defineProperty","scale","zoomMatrix","fullScreen","rate","clientWidth","clientHeight","offsetWidth","offsetHeight","clientHeightFixed","scrollTop","scrollLeft","translateX","translateY","zoomState","navigationHidden","dragPosition","dragged","lockScroll","lockTranslate","preventDefault","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","normalizeWheel","container","cursor","userSelect","setState","image","addEventListener","mouseMoveHandler","mouseUpHandler","dx","dy","removeProperty","removeEventListener","touches","lastDistance","scrollHeight","distance","midpoint","getMidpoint","_MAX_SCALE","clamp","zoom","lastMidpoint","handler","componentDidMount","handleTouchStart","removers","handleTouchMove","passive","mouseDownHandler","mouseWheelHandler","initZoomMatrix","componentWillUnmount","removeEventListeners","componentDidUpdate","UNSAFE_componentWillReceiveProps","zoomButtonHidden","nextScale","nextScrollLeft","nextScrollTop","intl","overflow","zoomButtonShouldHide","zoomButtonTitle","formatMessage","_jsxs","IconButton","icon","iconComponent","FullscreenExitIcon","RectangleIcon","handleZoomClick","size","fontSize","setContainerRef","setImageRef","transformOrigin","draggable","onMouseDown","handleMouseDown","injectIntl","ImageLoader","previewSrc","Promise","resolve","reject","Image","handleError","handleLoad","canvasContext","drawImage","canvas","_canvasContext","loadImage","nextProps","all","loadPreviewCanvas","hasSize","loadOriginalImage","clearPreviewCanvas","clearRect","classNames","LoadingBar","setCanvasRef","HISTORY_FETCH_REQUEST","HISTORY_FETCH_SUCCESS","HISTORY_FETCH_FAIL","fetchHistory","fetchHistoryRequest","importFetchedAccounts","fetchHistorySuccess","fetchHistoryFail","history","FEATURED_TAGS_FETCH_REQUEST","FEATURED_TAGS_FETCH_SUCCESS","FEATURED_TAGS_FETCH_FAIL","fetchFeaturedTags","fetchFeaturedTagsRequest","fetchFeaturedTagsSuccess","fetchFeaturedTagsFail","tags","IDNA_PREFIX","decode","domain","part","punycode","unicodeToFilename","charCode","charCodeAt","toString","content_type","$","stat","_createClass","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","Element","msMatchesSelector","_focusableElementsString","InertRoot","rootElement","inertManager","_inertManager","_rootElement","_managedNodes","Set","hasAttribute","_savedAriaHidden","getAttribute","setAttribute","_makeSubtreeUnfocusable","_observer","MutationObserver","_onMutation","observe","attributes","childList","subtree","disconnect","removeAttribute","inertNode","_unmanageNode","node","startNode","_this2","composedTreeWalk","_visitNode","activeElement","body","contains","root","nodeType","Node","DOCUMENT_FRAGMENT_NODE","parentNode","blur","focus","ELEMENT_NODE","element","_adoptInertRoot","_manageNode","register","add","deregister","_this3","inertSubroot","getInertRoot","setInert","managedNodes","savedInertNode","records","self","record","addedNodes","removedNodes","_unmanageSubtree","attributeName","managedNode","ariaHidden","InertNode","inertRoot","_node","_overrodeFocusMethod","_inertRoots","_savedTabIndex","_destroyed","ensureUntabbable","_throwIfDestroyed","destroyed","hasSavedTabIndex","destructor","InertManager","_document","_watchForInert","addInertStyle","head","documentElement","readyState","_onDocumentLoaded","inert","has","parent","addInertRoot","removeInertRoot","querySelectorAll","inertElement","_this","inertElements","unshift","HTMLElement","shadowRootAncestor","shadowRoot","localName","content","distributedNodes","getDistributedNodes","slot","_distributedNodes","assignedNodes","flatten","_i","child","firstChild","nextSibling","querySelector","textContent","appendChild","normalizeForLookup","trailingIndex","initialState","ImmutableMap","accountsMap","_action$error","action","ACCOUNT_LOOKUP_FAIL","importAccounts","withMutations","payload","global","anObject","aConstructor","isNullOrUndefined","SPECIES","wellKnownSymbol","defaultConstructor","S","isObject","newPromiseCapability","promiseCapability","promise","aCallable","$TypeError","PromiseCapability","$$resolve","$$reject","tryToString","hasValue","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","process","hr","uptime","Date","getTime","_interopRequireDefault","_mapToZero2","_stripStyle2","_stepper4","_performanceNow2","_raf2","_shouldStopAnimation2","_react2","_propTypes2","msPerFrame","StaggeredMotion","_React$Component","animationID","prevTime","accumulatedTime","unreadPropStyles","clearUnreadPropStyle","_state","currentStyles","currentVelocities","lastIdealStyles","lastIdealVelocities","someDirty","unreadPropStyle","dirty","styleValue","startAnimationIfNecessary","timestamp","destStyles","shouldStopAnimationAll","currentTime","timeDelta","currentFrameCompletion","framesToCatchUp","newLastIdealStyles","newLastIdealVelocities","newCurrentStyles","newCurrentVelocities","destStyle","newCurrentStyle","newCurrentVelocity","newLastIdealStyle","newLastIdealVelocity","newLastIdealStyleValue","newLastIdealVelocityValue","_stepper","val","precision","_stepper2","nextIdealX","nextIdealV","defaultState","subClass","superClass","create","setPrototypeOf","__proto__","_inherits","defaultStyles","arrayOf","objectOf","number","func","_props","currentStyle","componentWillReceiveProps","cancel","renderedChildren","Children","only","onRemove","prevKeyIndex","nextKeyIndex","ret","fill","nextOrderA","nextOrderB","prevOrderA","prevOrderB","pivot","componentWillMount","prevState","componentWillUpdate","prevProps","__reactInternalSnapshotFlag","__reactInternalSnapshot","getSnapshotBeforeUpdate","polyfill","isReactComponent","foundWillMountName","foundWillReceivePropsName","foundWillUpdateName","UNSAFE_componentWillMount","UNSAFE_componentWillUpdate","componentName","newApiName","maybeSnapshot","snapshot","__suppressDeprecationWarning","config","promiseTypeSuffixes","defaultTypeSuffixes","scope","_loading_bar_ducks","DEFAULT_SCOPE","_promiseTypeSuffixes","_arrayWithHoles","iterator","_arr","_n","_d","_e","_s","done","_iterableToArrayLimit","minLen","_arrayLikeToArray","from","_unsupportedIterableToArray","_nonIterableRest","PENDING","FULFILLED","REJECTED","isPending","isFulfilled","isRejected","actionScope","showLoading","hideLoading","len","arr2","_reactRedux","_loading_bar","_default","connect","DESCRIPTORS","TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS","ArrayBufferViewCore","ArrayBufferModule","anInstance","createPropertyDescriptor","createNonEnumerableProperty","isIntegralNumber","toLength","toIndex","toOffset","toUint8Clamped","toPropertyKey","classof","isSymbol","isPrototypeOf","typedArrayFrom","setSpecies","defineBuiltInAccessor","definePropertyModule","getOwnPropertyDescriptorModule","arrayFromConstructorAndList","InternalStateModule","inheritIfRequired","getInternalState","setInternalState","enforceInternalState","enforce","nativeDefineProperty","nativeGetOwnPropertyDescriptor","ArrayBuffer","ArrayBufferPrototype","DataView","NATIVE_ARRAY_BUFFER_VIEWS","TYPED_ARRAY_TAG","TypedArray","TypedArrayPrototype","isTypedArray","BYTES_PER_ELEMENT","WRONG_LENGTH","addGetter","it","isArrayBuffer","klass","isTypedArrayIndex","wrappedGetOwnPropertyDescriptor","wrappedDefineProperty","forced","TYPE","wrapper","CLAMPED","BYTES","CONSTRUCTOR_NAME","GETTER","SETTER","NativeTypedArrayConstructor","TypedArrayConstructor","TypedArrayConstructorPrototype","exported","addElement","that","view","byteOffset","getter","setter","dummy","typedArrayOffset","$length","offset","buffer","byteLength","$len","FORCED","sham","fails","checkCorrectnessOfIteration","Int8Array","iterable","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","exec","SKIP_CLOSING","ITERATION_SUPPORT","uncurryThis","NATIVE_ARRAY_BUFFER","FunctionName","defineBuiltIns","toIntegerOrInfinity","fround","IEEE754","arrayFill","arraySlice","copyConstructorProperties","setToStringTag","PROPER_FUNCTION_NAME","PROPER","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE","ARRAY_BUFFER","DATA_VIEW","PROTOTYPE","WRONG_INDEX","getInternalArrayBufferState","getterFor","getInternalDataViewState","NativeArrayBuffer","$ArrayBuffer","$DataView","DataViewPrototype","ObjectPrototype","reverse","packIEEE754","pack","unpackIEEE754","unpack","packInt8","packInt16","packInt32","unpackInt32","packFloat32","packFloat64","isLittleEndian","intIndex","boolIsLittleEndian","bytes","start","conversion","INCORRECT_ARRAY_BUFFER_NAME","NaN","testView","$setInt8","setInt8","getInt8","setUint8","unsafe","detached","bufferState","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","floatRound","sign","EPSILON","INVERSE_EPSILON","FLOAT_EPSILON","FLOAT_MAX_VALUE","FLOAT_MIN_VALUE","absolute","roundTiesToEven","Infinity","$Array","log","LN2","mantissaLength","exponent","mantissa","exponentLength","eMax","eBias","rt","nBits","isInteger","$RangeError","toObject","lengthOfArrayLike","getIterator","getIteratorMethod","isArrayIteratorMethod","isBigIntArray","aTypedArrayConstructor","toBigInt","thisIsBigIntArray","step","argumentsLength","mapfn","mapping","iteratorMethod","IndexedObject","arraySpeciesCreate","createMethod","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","$this","callbackfn","specificCreate","boundFunction","some","every","find","findIndex","filterReject","arraySpeciesConstructor","originalArray","isConstructor","getBuiltIn","firefox","UA","defaultConfig","_presets","_presets2","noWobble","webkit","A","relativeIndex","actualIndex","isDetached","$transfer","proto","transfer","WorkerThreads","channel","$detach","tryNodeRequire","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","$MessageChannel","MessageChannel","detach","transferable","port1","postMessage","IS_NODE","Function","IS_DENO","transferToFixedLength","_immutable","_immutable2","_utilities","reducers","getDefaultState","reducerKeys","inputState","temporaryState","reducerName","nextDomainState","reducer","validateNextState","getUnexpectedInvocationParameterMessage","getStateName","_getStateName3","_getUnexpectedInvocationParameterMessage3","_validateNextState3","_getStateName2","reducerNames","stateName","isImmutable","Iterable","isIterable","unexpectedStatePropertyNames","toSeq","keySeq","toArray","IndexSizeError","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","InvalidStateError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","_interopRequireWildcard","getDomTreeShapes","findNativeHandler","SwipeableViewsContext","_extends2","_objectWithoutProperties2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_reactSwipeableViewsCore","remove","display","willChange","WebkitFlexShrink","flexShrink","axisProperties","overflowX","overflowY","flexDirection","translate","rotationMatrix","scrollPosition","scrollLength","clientLength","createTransition","property","duration","easeFunction","delay","applyRotationMatrix","touch","pageX","pageY","adaptMouse","rootNode","domTreeShapes","getComputedStyle","getPropertyValue","scrollWidth","nodeWhoClaimedTheScroll","startX","goingForward","areNotAtStart","areNotAtEnd","SwipeableViews","containerNode","ignoreNextScrollEvents","viewLength","lastX","vx","startY","isSwiping","started","startIndex","transitionListener","touchMoveListener","activeSlide","indexCurrent","firstRenderTimeout","setRootNode","setContainerNode","setActiveSlide","updateHeight","handleSwipeStart","getBoundingClientRect","computedStyle","transformValues","rootStyle","tranformNormalized","paddingLeft","paddingRight","handleSwipeMove","_this$props","ignoreNativeScroll","onSwitching","resistance","UNCERTAINTY_THRESHOLD","_computeIndex","computeIndex","setIndexCurrent","displaySameSlide","isDragging","handleSwipeEnd","indexNew","indexLatest","delta","threshold","ceil","hysteresis","indexMax","onChangeIndex","reason","handleTransitionEnd","onTouchStart","handleTouchEnd","onTouchEnd","persist","handleMouseUp","onMouseUp","onMouseLeave","handleMouseMove","onMouseMove","handleScroll","onScroll","heightLatest","renderOnlyActive","disableLazyLoading","disabled","setTimeout","getDisplaySameSlide","clearTimeout","slideUpdateHeight","animateTransitions","WebkitTransform","onTransitionEnd","transition","WebkitTransition","_this4","_this$props2","animateHeight","containerStyleProp","containerStyle","enableMouseEvents","slideStyleProp","slideStyle","slideClassName","springConfig","other","_this$state","touchEvents","mouseEvents","additionalTranstion","WebkitFlexDirection","getSwipeableViewsContext","indexChild","objectWithoutPropertiesLoose","excluded","sourceSymbolKeys","sourceKeys","SETTING_CHANGE","SETTING_SAVE","changeSetting","path","debouncedSave","_debounce","_","toJS","put","showAlertForError","trailing","_defineProperties","_typeof","assertThisInitialized","_typeof2","ReferenceError","_getPrototypeOf","_setPrototypeOf","_checkIndexBounds","_constant","_getDisplaySameSlide","_mod","_react","newStartX","exp","RESISTANCE_COEF","apiFetchNotifications","request","method","notification_groups","notifications","links","getLinks","allNotificationTypes","dispatchAssociatedRecords","fetchedAccounts","fetchedStatuses","notification","report","target_account","moderation_warning","fetchNotifications","_params","activeFilter","selectSettingsNotificationsQuickFilterActive","exclude_types","selectSettingsNotificationsExcludedTypes","_ref3","_notifications$at","maxId","at","page_min_id","fetchNotificationsGap","max_id","gap","_ref4","_ref5","processNewNotificationForGroups","_ref6","loadPending","createAction","updateScrollPosition","setNotificationsFilter","_ref7","_ref8","filterType","NOTIFICATIONS_FILTER_SET","clearNotifications","apiRequest","markNotificationsAsRead","mountNotifications","unmountNotifications","getChildrenKey","oldKey","submitAccountNote","apiRequestPost","comment","apiSubmitAccountNote","relationship","debug","EXIF","EXIFwrapped","ExifTags","Tags","TiffTags","GPSTags","IFD1Tags","StringValues","ExposureProgram","MeteringMode","LightSource","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","Components","imageHasData","img","getImageData","handleBinaryFile","binFile","findEXIFinJPEG","exifdata","iptcdata","file","dataView","console","isFieldSegmentStart","nameHeaderLength","readIPTCData","findIPTCinJPEG","isXmpEnabled","xmpdata","dom","DOMParser","getStringFromDB","startOffset","sectionLength","xmpString","xmpEndIndex","indexOfXmp","xml2Object","parseFromString","findXMPinJPEG","base64","contentType","replace","binary","atob","Uint8Array","base64ToArrayBuffer","fileReader","FileReader","onload","http","XMLHttpRequest","open","responseType","send","objectURLToBlob","blob","readAsArrayBuffer","Blob","File","marker","readEXIFData","IptcFieldMap","fieldValue","fieldName","dataSize","segmentType","segmentStartPos","readTags","tiffStart","dirStart","bigEnd","entryOffset","entries","readTagValue","vals","numerator","denominator","numValues","valueOffset","outstr","exifData","gpsData","tiffOffset","firstIFDOffset","ExifIFDPointer","GPSInfoIFDPointer","IFD1OffsetPointer","getNextIFDOffset","thumbTags","JpegIFOffset","JpegIFByteCount","tOffset","tLength","readThumbnailImage","xml2json","xml","json","attribute","nodeName","nodeValue","hasChildNodes","childNodes","old","idx","itemAtt","dataKey","dataValue","enableXmp","disableXmp","HTMLImageElement","complete","getTag","getIptcTag","getAllTags","getAllIptcTags","pretty","strPretty","readFromBinaryFile","NAME","Prototype","isCallable","defineBuiltIn","uid","Int8ArrayPrototype","Uint8ClampedArrayPrototype","TO_STRING_TAG","TYPED_ARRAY_CONSTRUCTOR","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","getTypedArrayConstructor","aTypedArray","exportTypedArrayMethod","KEY","ARRAY","error2","exportTypedArrayStaticMethod","isView","Avatar","autoPlayGif","inline","styleFromParent","counter","counterBorderColor","onMouseEnter","borderColor","PINNED_STATUSES_FETCH_REQUEST","PINNED_STATUSES_FETCH_SUCCESS","PINNED_STATUSES_FETCH_FAIL","fetchPinnedStatuses","pinned","fetchPinnedStatusesFail","padLeft","num","output","codePointAt","toUpperCase","ModalRoot","keyCode","onClose","focusable","shiftKey","parentElement","handleKeyUp","handleKeyDown","createBrowserHistory","getSiblings","sibling","ignoreFocus","preventScroll","_handleModalClose","_handleModalOpen","_ensureHistoryBuffer","_modalHistoryKey","unlistenHistory","listen","location","mastodonModalKey","goBack","pathname","visible","setRef","opacity","backgroundColor","multiply","pointerEvents","withOptionalRouter","cachedScrollbarWidth","getScrollbarWidth","scrollbarWidth","isMobile","innerWidth","getActualScrollbarWidth","outer","visibility","inner","closed","voted","votes","Poll","ImmutablePureComponent","selected","expired","poll","tmp","_toggleOption","onVote","refresh","revealed","expires_at","_setupTimer","_timer","renderOption","option","optionIndex","showResults","pollVotesCount","percent","leading","filterNot","active","titleHtml","selectable","checked","onChange","handleOptionChange","checkbox","onKeyPress","handleOptionKeyPress","dangerouslySetInnerHTML","__html","Icon","CheckIcon","Motion","defaultStyle","timeRemaining","RelativeTimestamp","futureDate","votesCount","FormattedMessage","handleVote","handleReveal","handleRefresh","ImmutablePropTypes","close","previous","MediaModal","media","getIndex","currentTarget","handlePrevClick","handleNextClick","_sendBackgroundColor","onChangeBackgroundColor","leftNav","ChevronLeftIcon","rightNav","ChevronRightIcon","description","toggleNavigation","volume","Video","preview","frameRate","aspectRatio","onCloseVideo","detailed","navigationClassName","pagination","handleChangeIndex","ReactSwipeableViews","alignItems","handleSwipe","disableSwiping","CloseIcon","Footer","withOpenButton","list","noEsc","SEARCH_CHANGE","SEARCH_CLEAR","SEARCH_SHOW","SEARCH_FETCH_REQUEST","SEARCH_FETCH_SUCCESS","SEARCH_FETCH_FAIL","SEARCH_EXPAND_REQUEST","SEARCH_EXPAND_SUCCESS","SEARCH_EXPAND_FAIL","SEARCH_HISTORY_UPDATE","changeSearch","clearSearch","submitSearch","fetchSearchRequest","limit","fetchSearchSuccess","fetchRelationships","fetchSearchFail","hashtags","searchType","searchTerm","expandSearch","expandSearchRequest","expandSearchSuccess","expandSearchFail","showSearch","openURL","onFailure","_response$data$accoun","_response$data$status","clickSearchResult","fromJS","takeLast","searchHistory","updateSearchHistory","forgetSearchResult","recent","hydrateSearch","assertIsFunction","errorMessage","ensureIsArray","getDependencies","createSelectorArgs","array","itemTypes","assertIsArrayOfFunctions","Ref","WeakRef","deref","UNTERMINATED","TERMINATED","createCacheNode","weakMapMemoize","fnNode","resultEqualityCheck","lastResult","resultsCount","memoized","cacheNode","objectCache","WeakMap","objectNode","primitiveCache","primitiveNode","terminatedNode","lastResultValue","clearCache","resetResultsCount","createSelectorCreator","memoizeOrOptions","memoizeOptionsFromArgs","createSelectorCreatorOptions","memoize","memoizeOptions","createSelector2","recomputations","dependencyRecomputations","directlyPassedOptions","resultFunc","pop","combinedOptions","argsMemoize","argsMemoizeOptions","finalMemoizeOptions","finalArgsMemoizeOptions","memoizedResultFunc","inputSelectorResults","inputSelectorArgs","collectInputSelectorResults","resetDependencyRecomputations","resetRecomputations","createSelector","createStructuredSelector","inputSelectorsObject","selectorCreator","assertIsObject","inputSelectorKeys","composition","unexpectedTitle","unexpectedMessage","rateLimitedTitle","rateLimitedMessage","ALERT_SHOW","ALERT_DISMISS","ALERT_CLEAR","dismissAlert","alert","showAlert","skipNotFound","statusText","headers","setArrayLength","deletePropertyOrThrow","doesNotExceedSafeInteger","properErrorOnNonWritableLength","argCount","to","composeWithDevTools","createDraftSafeSelector2","_len","rest","_key","isDraft","createDraftSafeSelectorCreator","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","hasMatchFunction","__REDUX_DEVTOOLS_EXTENSION__","prepareAction","prepared","formatProdErrorMessage","isAction","Tuple","_Tuple","species","_len2","_key2","prepend","_len3","_key3","freezeDraftable","isDraftable","createNextState","buildGetDefaultMiddleware","thunk","immutableCheck","serializableCheck","actionCreatorCheck","middlewareArray","thunkMiddleware","withExtraArgument","extraArgument","SHOULD_AUTOBATCH","createQueueWithTimer","timeout","rAF","requestAnimationFrame","buildGetDefaultEnhancers","middlewareEnhancer","autoBatch","enhancerArray","notifying","shouldNotifyAtEndOfTick","notificationQueued","queueCallback","queueMicrotask","queueNotification","notifyListeners","listener2","wrappedListener","autoBatchEnhancer","IS_PRODUCTION","configureStore","getDefaultMiddleware","middleware","devTools","preloadedState","enhancers","rootReducer","finalMiddleware","isPlainObject2","finalCompose","compose2","trace","applyMiddleware","getDefaultEnhancers","storeEnhancers","composedEnhancer","createStore","executeReducerBuilderCallback","builderCallback","actionsMap","actionMatchers","defaultCaseReducer","builder","addCase","typeOrActionCreator","addMatcher","matcher","addDefaultCase","createReducer","mapOrBuilderCallback","getInitialState","finalActionMatchers","finalDefaultCaseReducer","frozenInitialState","caseReducers","reducer2","cr","caseReducer","isDraft2","isDraftable2","createNextState2","draft","nanoid","random","isAnyOf","_len4","matchers","_key4","isAllOf","_len5","_key5","hasExpectedRequestMetadata","validStatus","hasValidRequestId","requestId","hasValidRequestStatus","requestStatus","isAsyncThunkArray","_len6","asyncThunks","_key6","asyncThunk","pending","_len7","_key7","rejected","isRejectedWithValue","hasFlag","rejectedWithValue","_len8","_key8","_len9","_key9","fulfilled","isAsyncThunkAction","_len10","_key10","flatMap","commonProperties","RejectWithValue","__publicField","FulfillWithMeta","miniSerializeError","simpleError","createAsyncThunk2","typePrefix","payloadCreator","serializeError","aborted","condition","extra","idGenerator","abortController","AbortController","abortHandler","abortReason","abort","finalAction","conditionResult","signal","abortedPromise","race","dispatchConditionRejection","unwrap","unwrapResult","settled","isDraft3","completed","cancelled","assertFunction","expected","alm","getListenerEntryPropsFrom","predicate","effect","createListenerEntry","addListener","removeListener","code","trie","Trie","unicodeMapping","emojiFilenames","filename","darkEmoji","lightEmoji","emojiFilename","colorScheme","emojifyTextNode","customEmojis","fragment","DocumentFragment","unicode_emoji","rend","replacement","custom_emoji","_document$body","_document$body2","isSystemTheme","classList","assetHost","theme","append","createTextNode","replaceChild","emojifyNode","TEXT_NODE","innerHTML","buildCustomEmojis","customCategory","categoriesFromEmojis","useSystemEmojiFont","disconnectTimeline","timeline","usePendingItems","preferPendingItems","timelineDelete","matchHtmlRegExp","escape","html","lastIndex","_loading_bar_middleware","HIDE","loadingBarReducer","RESET","resetLoading","SHOW","cache","_getRequireWildcardCache","newObj","hasPropertyDescriptor","desc","today","just_now","just_now_full","seconds","seconds_full","minutes","minutes_full","hours","hours_full","days","days_full","moments_remaining","seconds_remaining","minutes_remaining","hours_remaining","days_remaining","dateFormatOptions","year","month","day","hour","minute","shortDateFormatOptions","SECOND","MINUTE","HOUR","DAY","timeAgoString","date","timeGiven","short","relativeTime","getFullYear","formatDate","shouldComponentUpdate","locale","_scheduleNextUpdate","unitDelay","units","getUnitDelay","absDelta","selectUnits","unitRemainder","timeRemainingString","dateTime","RelativeTimestampWithIntl","Settings","keyBase","generateKey","encodedData","localStorage","setItem","rawData","getItem","removeItem","pushNotificationsSetting","tagHistory","bannerSettings","playerSettings","MAX_IMAGE_PIXELS","_browser_quirks","inputFile","URL","createObjectURL","reader","onerror","readAsDataURL","getImageUrl","getOrientation","orientation","testImageURL","automatic","dropOrientationIfNeeded","resizeImage","newWidth","newHeight","refData","processImage","toBlob","resizeFile","fetchComposeSuggestionsAccountsController","fetchComposeSuggestionsTagsController","COMPOSE_CHANGE","COMPOSE_SUBMIT_REQUEST","COMPOSE_SUBMIT_SUCCESS","COMPOSE_SUBMIT_FAIL","COMPOSE_REPLY","COMPOSE_REPLY_CANCEL","COMPOSE_DIRECT","COMPOSE_MENTION","COMPOSE_RESET","COMPOSE_UPLOAD_REQUEST","COMPOSE_UPLOAD_SUCCESS","COMPOSE_UPLOAD_FAIL","COMPOSE_UPLOAD_PROGRESS","COMPOSE_UPLOAD_PROCESSING","COMPOSE_UPLOAD_UNDO","THUMBNAIL_UPLOAD_REQUEST","THUMBNAIL_UPLOAD_SUCCESS","THUMBNAIL_UPLOAD_FAIL","THUMBNAIL_UPLOAD_PROGRESS","COMPOSE_SUGGESTIONS_CLEAR","COMPOSE_SUGGESTIONS_READY","COMPOSE_SUGGESTION_SELECT","COMPOSE_SUGGESTION_IGNORE","COMPOSE_SUGGESTION_TAGS_UPDATE","COMPOSE_TAG_HISTORY_UPDATE","COMPOSE_MOUNT","COMPOSE_UNMOUNT","COMPOSE_ADVANCED_OPTIONS_CHANGE","COMPOSE_SENSITIVITY_CHANGE","COMPOSE_SPOILERNESS_CHANGE","COMPOSE_SPOILER_TEXT_CHANGE","COMPOSE_VISIBILITY_CHANGE","COMPOSE_COMPOSING_CHANGE","COMPOSE_CONTENT_TYPE_CHANGE","COMPOSE_LANGUAGE_CHANGE","COMPOSE_EMOJI_INSERT","COMPOSE_UPLOAD_CHANGE_REQUEST","COMPOSE_UPLOAD_CHANGE_SUCCESS","COMPOSE_UPLOAD_CHANGE_FAIL","COMPOSE_DOODLE_SET","COMPOSE_TENOR_SET","COMPOSE_POLL_ADD","COMPOSE_POLL_REMOVE","COMPOSE_POLL_OPTION_CHANGE","COMPOSE_POLL_SETTINGS_CHANGE","INIT_MEDIA_EDIT_MODAL","COMPOSE_CHANGE_MEDIA_DESCRIPTION","COMPOSE_CHANGE_MEDIA_FOCUS","COMPOSE_CHANGE_MEDIA_ORDER","COMPOSE_SET_STATUS","COMPOSE_FOCUS","uploadErrorLimit","published","saved","changeCompose","replyCompose","prependCWRe","replyComposeById","cancelReplyCompose","resetCompose","focusCompose","defaultText","mentionCompose","mentionComposeById","directCompose","submitCompose","overridePrivacy","media_attributes","spoilerText","toFixed","in_reply_to_id","media_ids","sensitive","oldHistory","names","intersectedOldHistory","newName","newHistory","updateTagHistory","submitComposeSuccess","insertIfOnline","timelineId","updateTimeline","local_only","dismissAfter","submitComposeFail","doodleSet","tenorSet","uploadCompose","files","uploadLimit","progress","total","FormData","onUploadProgress","loaded","uploadComposeProgress","uploadComposeSuccess","uploadComposeProcessing","tryCount","retryAfter","log2","uploadComposeFail","uploadThumbnail","uploadThumbnailRequest","uploadThumbnailProgress","uploadThumbnailSuccess","uploadThumbnailFail","initMediaEditModal","onChangeMediaDescription","onChangeMediaFocus","focusX","focusY","changeUploadCompose","parseFloat","changeUploadComposeSuccess","changeUploadComposeFail","attached","undoUploadCompose","media_id","clearComposeSuggestions","fetchComposeSuggestionsAccounts","_throttle","token","readyComposeSuggestionsAccounts","axios","isCancel","finally","fetchComposeSuggestionsEmojis","emojiSearch","readyComposeSuggestionsEmojis","fetchComposeSuggestionsTags","updateSuggestionTags","readyComposeSuggestionsTags","fetchComposeSuggestions","selectComposeSuggestion","suggestion","completion","startPosition","useEmoji","localeCompare","sensitivity","hydrateCompose","mountCompose","unmountCompose","changeComposeAdvancedOption","changeComposeSensitivity","changeComposeLanguage","changeComposeSpoilerness","changeComposeSpoilerText","changeComposeVisibility","insertEmojiCompose","needsSpace","changeComposing","changeComposeContentType","addPoll","removePoll","changePollOption","maxOptions","changePollSettings","expiresIn","isMultiple","changeMediaOrder","MEDIA_COMPONENTS","MediaGallery","Card","Hashtag","Audio","MediaContainer","time","marginRight","components","componentIndex","mediaList","_this$state$options","_this$state$options2","_this$state$options3","handleOpenVideo","IntlProvider","card","hashtag","onOpenVideo","onOpenMedia","handleOpenMedia","createPortal","_createElement","handleCloseMedia","startTime","defaultVolume","setBackgroundColor","IconComponent","titleProp","isProduction","CheckBoxOutlineBlankIcon","ready","_result","ANNOUNCEMENTS_FETCH_REQUEST","ANNOUNCEMENTS_FETCH_SUCCESS","ANNOUNCEMENTS_FETCH_FAIL","ANNOUNCEMENTS_UPDATE","ANNOUNCEMENTS_DELETE","ANNOUNCEMENTS_DISMISS_SUCCESS","ANNOUNCEMENTS_REACTION_ADD_REQUEST","ANNOUNCEMENTS_REACTION_ADD_FAIL","ANNOUNCEMENTS_REACTION_REMOVE_REQUEST","ANNOUNCEMENTS_REACTION_REMOVE_FAIL","ANNOUNCEMENTS_REACTION_UPDATE","ANNOUNCEMENTS_TOGGLE_SHOW","noOp","fetchAnnouncements","fetchAnnouncementsRequest","fetchAnnouncementsSuccess","normalizeAnnouncement","fetchAnnouncementsFail","announcements","updateAnnouncements","announcement","dismissAnnouncement","announcementId","dismissAnnouncementRequest","dismissAnnouncementSuccess","dismissAnnouncementFail","addReaction","alreadyAdded","reaction","addReactionRequest","encodeURIComponent","addReactionSuccess","addReactionFail","removeReaction","removeReactionRequest","removeReactionSuccess","removeReactionFail","updateReaction","toggleShowAnnouncements","deleteAnnouncement","getAccountBase","getAccountRelationship","relationships","getAccountMoved","_state$accounts$get","movedToId","FullAccountFactory","makeGetAccount","base","getFilters","serverSideType","makeGetStatus","statusBase","statusReblog","accountBase","accountReblog","filtered","_statusReblog","filterResults","ImmutableList","isEmpty","makeGetPictureInPicture","picture_in_picture","inUse","available","ALERT_DEFAULTS","getAlerts","alerts","makeGetNotification","makeGetReport","targetAccountId","targetAccount","getAccountGallery","statusIds","medias","getAccountHidden","followingOrRequested","isSelf","getStatusList","toList","synchronouslySubmitMarkers","_args","accessToken","getAccessToken","buildPostMarkersParams","Request","fetch","keepalive","Authorization","formData","last_read_id","sendBeacon","client","setRequestHeader","lastNotificationId","notificationGroups","lastReadId","getLastNotificationId","compareId","markers","submitMarkersAction","_params$home","_params$notifications","home","debouncedSubmitMarkers","submitMarkers","immediate","flush","fetchMarkers","SERVER_FETCH_REQUEST","SERVER_FETCH_SUCCESS","SERVER_FETCH_FAIL","SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST","SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS","SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL","EXTENDED_DESCRIPTION_REQUEST","EXTENDED_DESCRIPTION_SUCCESS","EXTENDED_DESCRIPTION_FAIL","SERVER_DOMAIN_BLOCKS_FETCH_REQUEST","SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS","SERVER_DOMAIN_BLOCKS_FETCH_FAIL","fetchServer","fetchServerRequest","contact","fetchServerSuccess","fetchServerFail","server","fetchServerTranslationLanguages","fetchServerTranslationLanguagesRequest","fetchServerTranslationLanguagesSuccess","fetchServerTranslationLanguagesFail","translationLanguages","fetchExtendedDescription","fetchExtendedDescriptionRequest","fetchExtendedDescriptionSuccess","fetchExtendedDescriptionFail","fetchDomainBlocks","fetchDomainBlocksRequest","fetchDomainBlocksSuccess","fetchDomainBlocksFail","isAvailable","blocks","uploadErrorPoll","exclude_unreviewed","cdnHost","originalPush","originalReplace","useAppHistory","useHistory","normalizePath","_location$pathname","isDevelopment","layoutFromWindow","startsWith","_location$state","fromMastodon","_browserHistory$locat","_location$state2","Router","OriginalRouter","WithRouterPropTypes","WithOptionalRouterPropTypes","__RouterContext","play","pause","mute","unmute","hide","fullscreen","exit_fullscreen","formatTime","secondsNum","findElementPosition","el","box","docEl","clientLeft","pageXOffset","clientTop","pageYOffset","getPointerPosition","boxW","boxH","boxY","boxX","changedTouches","fileNameFromURL","lastIndexOf","paused","dragging","hovered","displayMedia","player","video","seek","_updateTime","handleMouseVolSlide","handleVolumeMouseUp","isNaN","_syncVideoToVolumeState","_saveVolumeState","togglePlay","frameTime","getFrameRate","toggleMute","toggleFullscreen","seekBy","exitFullscreen","isFullscreen","requestFullscreen","inView","innerHeight","deployPictureInPicture","_playerSettings$get","_playerSettings$get2","onToggleVisibility","lastTimeRange","buffered","end","handleTimeUpdate","handleFullscreenChange","_syncVideoFromLocalStorage","editable","autoFocus","preload","warning","inactive","setPlayerRef","handleClickRoot","onKeyDown","Blurhash","hash","useBlurhash","setVideoRef","poster","handleVideoKeyDown","onPlay","handlePlay","onPause","handlePause","onProgress","handleProgress","onVolumeChange","handleVolumeChange","toggleReveal","setSeekRef","PlayArrowIcon","PauseIcon","VolumeOffIcon","VolumeUpIcon","handleVolumeMouseDown","setVolumeRef","alwaysVisible","VisibilityOffIcon","handleCloseVideo","FullscreenIcon","preventPlayback","letterbox","fullwidth","playerStyle","Immutable","ANONYMOUS","productionTypeChecker","invariant","getProductionTypeChecker","getPropType","propValue","propType","toSource","createChainableTypeChecker","validate","checkType","propName","propFullName","chainedCheckType","createIterableSubclassTypeChecker","subclassName","validator","immutableClassName","immutableClassTypeValidator","listOf","mapOf","orderedMapOf","setOf","orderedSetOf","stackOf","iterableOf","recordOf","mapContains","orderedMapContains","orderedMap","orderedSet","seq","indexed","isIndexed","keyed","isKeyed","TRENDS_TAGS_FETCH_REQUEST","TRENDS_TAGS_FETCH_SUCCESS","TRENDS_TAGS_FETCH_FAIL","TRENDS_LINKS_FETCH_REQUEST","TRENDS_LINKS_FETCH_SUCCESS","TRENDS_LINKS_FETCH_FAIL","TRENDS_STATUSES_FETCH_REQUEST","TRENDS_STATUSES_FETCH_SUCCESS","TRENDS_STATUSES_FETCH_FAIL","TRENDS_STATUSES_EXPAND_REQUEST","TRENDS_STATUSES_EXPAND_SUCCESS","TRENDS_STATUSES_EXPAND_FAIL","fetchTrendingHashtags","fetchTrendingHashtagsRequest","fetchTrendingHashtagsSuccess","fetchTrendingHashtagsFail","trends","fetchTrendingLinks","fetchTrendingLinksRequest","link","authors","author","fetchTrendingLinksSuccess","fetchTrendingLinksFail","fetchTrendingStatuses","fetchTrendingStatusesRequest","refs","rel","fetchTrendingStatusesSuccess","fetchTrendingStatusesFail","expandTrendingStatuses","expandTrendingStatusesRequest","expandTrendingStatusesSuccess","expandTrendingStatusesFail","STORE_HYDRATE","convertState","rawState","toMap","applyMigrations","setIn","removeIn","hydrateStore","STATUS_IMPORT","STATUSES_IMPORT","POLLS_IMPORT","FILTERS_IMPORT","pushUnique","importPolls","polls","normalAccounts","processAccount","normalStatuses","processStatus","_status$reblog","_status$poll","normalizeStatus","reblog","normalizePoll","importStatuses","importFilters","importFetchedPoll","DOMAIN_BLOCK_REQUEST","DOMAIN_BLOCK_FAIL","DOMAIN_UNBLOCK_REQUEST","DOMAIN_UNBLOCK_FAIL","DOMAIN_BLOCKS_FETCH_REQUEST","DOMAIN_BLOCKS_FETCH_SUCCESS","DOMAIN_BLOCKS_FETCH_FAIL","DOMAIN_BLOCKS_EXPAND_REQUEST","DOMAIN_BLOCKS_EXPAND_SUCCESS","DOMAIN_BLOCKS_EXPAND_FAIL","blockDomain","blockDomainRequest","at_domain","endsWith","valueSeq","blockDomainSuccess","blockDomainFail","unblockDomain","unblockDomainRequest","unblockDomainSuccess","unblockDomainFail","domains","expandDomainBlocks","expandDomainBlocksSuccess","initDomainBlockModal","transientSingleColumn","forceSingleColumn","hasMultiColumnPath","listenerOptions","supportsPassiveEvents","userTouching","touchListener","isUserTouching","HASHTAG_FETCH_SUCCESS","FOLLOWED_HASHTAGS_FETCH_REQUEST","FOLLOWED_HASHTAGS_FETCH_SUCCESS","FOLLOWED_HASHTAGS_FETCH_FAIL","FOLLOWED_HASHTAGS_EXPAND_REQUEST","FOLLOWED_HASHTAGS_EXPAND_SUCCESS","FOLLOWED_HASHTAGS_EXPAND_FAIL","HASHTAG_FOLLOW_REQUEST","HASHTAG_FOLLOW_FAIL","HASHTAG_UNFOLLOW_REQUEST","HASHTAG_UNFOLLOW_FAIL","fetchHashtag","fetchHashtagRequest","fetchHashtagSuccess","fetchHashtagFail","fetchFollowedHashtags","followed_tags","fetchFollowedHashtagsSuccess","expandFollowedHashtags","expandFollowedHashtagsSuccess","expandFollowedHashtagsFail","followHashtag","followHashtagRequest","followHashtagSuccess","followHashtagFail","unfollowHashtag","unfollowHashtagRequest","unfollowHashtagSuccess","unfollowHashtagFail","_skins","_categories","_short_names","emojisWithoutShortCodes","processEmojiMapData","emojiMapData","_filename","filenameData","_searchData","IS_PURE","NativePromiseConstructor","speciesConstructor","promiseResolve","NativePromisePrototype","real","onFinally","isFunction","COLUMN_ADD","COLUMN_REMOVE","COLUMN_MOVE","COLUMN_PARAMS_CHANGE","addColumn","removeColumn","uuid","moveColumn","changeColumnParams","wasAnimating","currentVelocity","lastIdealStyle","lastIdealVelocity","propsStyle","onRest","oneOfType","domParser","makeEmojiMap","normalizeFilterResult","normalResult","normalOldStatus","normalStatus","_author$account","search_index","contentHtml","spoilerHtml","searchContent","media_attachments","att","oldItem","normalizeStatusTranslation","detected_source_language","provider","normalOldPoll","normalPoll","normalOption","own_votes","normalizePollOptionTranslation","normalAnnouncement","MUTES_FETCH_REQUEST","MUTES_FETCH_SUCCESS","MUTES_FETCH_FAIL","MUTES_EXPAND_REQUEST","MUTES_EXPAND_SUCCESS","MUTES_EXPAND_FAIL","fetchMutes","fetchMutesSuccess","fetchMutesFail","expandMutes","expandMutesSuccess","expandMutesFail","initMuteModal","CONVERSATIONS_MOUNT","CONVERSATIONS_UNMOUNT","CONVERSATIONS_FETCH_REQUEST","CONVERSATIONS_FETCH_SUCCESS","CONVERSATIONS_FETCH_FAIL","CONVERSATIONS_UPDATE","CONVERSATIONS_READ","CONVERSATIONS_DELETE_SUCCESS","mountConversations","unmountConversations","markConversationRead","conversationId","expandConversations","expandConversationsRequest","since_id","isLoadingRecent","aggr","last_status","expandConversationsSuccess","expandConversationsFail","conversations","updateConversations","conversation","deleteConversation","deleteConversationRequest","deleteConversationSuccess","deleteConversationFail","fetchNotificationPolicy","apiRequestGet","updateNotificationsPolicy","policy","apiRequestPut","apiUpdateNotificationsPolicy","decreasePendingNotificationsCount","canvasProps","canvasRef","pixels","ctx","imageData","ImageData","putImageData","MemoizedBlurhash","isSingleColumn","apiReblog","unreblog","apiUnreblog","focusApp","unfocusApp","changeLayout","ACCOUNT_FETCH_REQUEST","ACCOUNT_FETCH_SUCCESS","ACCOUNT_FETCH_FAIL","ACCOUNT_BLOCK_REQUEST","ACCOUNT_BLOCK_FAIL","ACCOUNT_UNBLOCK_REQUEST","ACCOUNT_UNBLOCK_FAIL","ACCOUNT_MUTE_REQUEST","ACCOUNT_MUTE_FAIL","ACCOUNT_UNMUTE_REQUEST","ACCOUNT_UNMUTE_FAIL","ACCOUNT_PIN_REQUEST","ACCOUNT_PIN_FAIL","ACCOUNT_UNPIN_REQUEST","ACCOUNT_UNPIN_FAIL","FOLLOWERS_FETCH_REQUEST","FOLLOWERS_FETCH_SUCCESS","FOLLOWERS_FETCH_FAIL","FOLLOWERS_EXPAND_REQUEST","FOLLOWERS_EXPAND_SUCCESS","FOLLOWERS_EXPAND_FAIL","FOLLOWING_FETCH_REQUEST","FOLLOWING_FETCH_SUCCESS","FOLLOWING_FETCH_FAIL","FOLLOWING_EXPAND_REQUEST","FOLLOWING_EXPAND_SUCCESS","FOLLOWING_EXPAND_FAIL","RELATIONSHIPS_FETCH_REQUEST","RELATIONSHIPS_FETCH_FAIL","FOLLOW_REQUESTS_FETCH_REQUEST","FOLLOW_REQUESTS_FETCH_SUCCESS","FOLLOW_REQUESTS_FETCH_FAIL","FOLLOW_REQUESTS_EXPAND_REQUEST","FOLLOW_REQUESTS_EXPAND_SUCCESS","FOLLOW_REQUESTS_EXPAND_FAIL","FOLLOW_REQUEST_AUTHORIZE_REQUEST","FOLLOW_REQUEST_AUTHORIZE_FAIL","FOLLOW_REQUEST_REJECT_REQUEST","FOLLOW_REQUEST_REJECT_FAIL","PINNED_ACCOUNTS_FETCH_REQUEST","PINNED_ACCOUNTS_FETCH_SUCCESS","PINNED_ACCOUNTS_FETCH_FAIL","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS","PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR","PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE","PINNED_ACCOUNTS_EDITOR_RESET","fetchAccount","fetchAccountRequest","fetchAccountFail","lookupAccount","lookupAccountRequest","lookupAccountSuccess","lookupAccountFail","followAccount","reblogs","alreadyFollowing","followAccountRequest","followAccountSuccess","followAccountFail","unfollowAccount","unfollowAccountRequest","unfollowAccountSuccess","unfollowAccountFail","blockAccount","blockAccountRequest","blockAccountSuccess","blockAccountFail","unblockAccount","unblockAccountRequest","unblockAccountSuccess","unblockAccountFail","muteAccount","muteAccountRequest","muteAccountSuccess","muteAccountFail","unmuteAccount","unmuteAccountRequest","unmuteAccountSuccess","unmuteAccountFail","fetchFollowers","fetchFollowersRequest","fetchFollowersSuccess","fetchFollowersFail","expandFollowers","expandFollowersRequest","expandFollowersSuccess","expandFollowersFail","fetchFollowing","fetchFollowingRequest","fetchFollowingSuccess","fetchFollowingFail","expandFollowing","expandFollowingRequest","expandFollowingSuccess","expandFollowingFail","accountIds","loadedRelationships","newAccountIds","fetchRelationshipsSuccess","fetchRelationshipsFail","fetchFollowRequests","fetchFollowRequestsSuccess","fetchFollowRequestsFail","expandFollowRequests","expandFollowRequestsSuccess","expandFollowRequestsFail","authorizeFollowRequest","authorizeFollowRequestRequest","authorizeFollowRequestSuccess","authorizeFollowRequestFail","rejectFollowRequest","rejectFollowRequestRequest","rejectFollowRequestSuccess","rejectFollowRequestFail","pinAccount","pinAccountRequest","pinAccountSuccess","pinAccountFail","unpinAccount","unpinAccountRequest","unpinAccountSuccess","unpinAccountFail","fetchPinnedAccounts","updateAccount","patch","navigateToProfile","fetchPinnedAccountsSuggestions","following","query","clearPinnedAccountsSuggestions","changePinnedAccountsSuggestions","resetPinnedAccountsEditor","selectSettingsNotificationsShows","_type","enabled","_enabled","selectSettingsNotificationsQuickFilterShow","selectSettingsNotificationsQuickFilterAdvanced","selectSettingsNotificationsShowUnread","selectNeedsNotificationPermission","selectSettingsNotificationsMinimizeFilteredBanner","ownKeys","enumerableOnly","symbols","sym","_possibleConstructorReturn","_assertThisInitialized","NOT_SET","collection","notSetValue","isInvalid","isMapLike","keyPath","check","checkItem","createChecker","checklist","_objectSpread2","updateOnProps","updateOnStates","createTypedArrayConstructor","init","$fill","actualValue","valueOf","$findLast","findLast","$findLastIndex","findLastIndex","toIndexedObject","$set","WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS","TO_OBJECT_BUG","arrayLike","internalSort","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","ACCEPT_INCORRECT_ARGUMENTS","STABLE_SORT","mod","comparefn","getSortCompare","arrayToReversed","compareFn","arrayWith","PROPER_ORDER","_objectSpread","_ref$scope","IS_FIND_LAST_INDEX","stylesToKeep","ReducedMotion","_interopRequire","_Motion","_StaggeredMotion","_TransitionMotion","_spring","presets","_stripStyle","stripStyle","_reorderKeys","reorderKeys","BLOCKS_FETCH_REQUEST","BLOCKS_FETCH_SUCCESS","BLOCKS_FETCH_FAIL","BLOCKS_EXPAND_REQUEST","BLOCKS_EXPAND_SUCCESS","BLOCKS_EXPAND_FAIL","fetchBlocks","fetchBlocksSuccess","fetchBlocksFail","expandBlocks","expandBlocksSuccess","expandBlocksFail","initBlockModal","SET_BROWSER_SUPPORT","SET_SUBSCRIPTION","CLEAR_SUBSCRIPTION","SET_ALERTS","urlBase64ToUint8Array","base64String","outputArray","decodeBase64","repeat","getApplicationServerKey","getRegistration","serviceWorker","getPushSubscription","registration","pushManager","getSubscription","userVisibleOnly","applicationServerKey","sendSubscriptionToBackend","supportsPushNotifications","PushSubscription","currentServerKey","subscriptionServerKey","serverEndpoint","endpoint","setSubscription","warn","changeAlerts","setAlerts","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","webkitExitFullscreen","mozCancelFullScreen","webkitRequestFullscreen","mozRequestFullScreen","attachFullscreenListener","detachFullscreenListener","screen","matchMedia","passiveOptionAccessed","noop","onTouchStartInWindow","supportsTouchEvents","userAgent","maxTouchPoints","isIPad","normalizeAccounts","normalizeAccount","_state$get","getCurrentUser","isLoading","show","updater","update","reactions","sortAnnouncements","sortBy","updateAnnouncement","mergeDeep","overwrite","oldVal","newVal","mounted","advanced_options","do_not_federate","threaded_mode","spoiler","privacy","defaultContentType","focusDate","caretPosition","preselectDate","in_reply_to","is_composing","is_submitting","is_changing_upload","is_uploading","isUploadingThumbnail","thumbnailProgress","pending_media_attachments","suggestion_token","suggestions","default_advanced_options","default_privacy","default_sensitive","default_language","resetFileKey","idempotencyKey","tenor","media_modal","doodle","fg","bg","swapped","mode","weight","adaptiveStroke","smoothing","initialPoll","expires_in","multiple","clearAll","mergeWith","continueThread","ImmutableOrderedSet","union","mentions","mention","apiStatusToTextMentions","apiStatusToTextHashtags","merge","expiresInFromExpiresAt","mergeLocalHashtagResults","prefix","localTags","inReplyTos","replies","deleteFromContexts","immutableState","immutableAncestors","immutableDescendants","inReplyToIdOfId","repliesOfId","siblings","reply","hasMore","conversationToMap","unread","filterConversations","dropdownMenuReducer","openId","keyboard","scrollKey","openDropdownMenu","closeDropdownMenu","normalizeFilter","normalizedFilter","filter_action","old_value","new_value","normalizeFilters","initialHistory","lists","listId","isSubmitting","isChanged","isExclusive","normalizeList","stretch","side_arm","side_arm_reply_mode","show_reply_count","always_show_spoilers_field","confirm_missing_media_description","confirm_boost_missing_media_description","confirm_before_clearing_draft","prepend_cw_re","preselect_on_reply","inline_preview_cards","hicolor_privacy_icons","show_content_type_choice","tag_misleading_links","rewrite_mentions","content_warnings","media_outside","shared_state","collapsed","auto","lengthy","backgrounds","user_backgrounds","preview_images","show_action_bar","reveal_behind_cw","pop_in_player","pop_in_position","favicon_badge","tab_badge","status_icons","show_published_toast","markersReducer","accept_content_types","streaming_api_base_url","layout","Modal","Stack","popModal","_state$get$get","filterNotificationsForAccounts","groups","onlyForType","mergeGaps","previousLength","sampleAccountIds","notifications_count","filterNotificationsForStatus","removeNotificationsForAccounts","pendingGroups","isNotificationGroup","groupOrGap","firstGroupOrGap","lastGap","splice","sinceId","trimNotifications","scrolledToTop","updateLastReadId","_group","_group2","_groups$at","isTabVisible","ignoreScroll","oldestGroup","oldestGroupReached","shouldMarkNewNotificationsAsRead","page_max_id","notificationGroupsReducer","createNotificationGroupFromJSON","gapIndex","oldestPageNotification","newerGroupKeys","group_key","toInsert","apiGroupKeys","_notifications$at2","_groups$","existingGroupIndex","existingGroup","NOTIFICATIONS_GROUP_MAX_AVATARS","most_recent_notification_id","latest_page_notification_at","potentialFirstGap","potentialSecondGap","mergeGapsAround","createNotificationGroupFromNotificationJSON","processNewNotification","_state$groups$","_state$groups$2","removeNotificationsForStatus","muting_notifications","mostRecentGroup","notificationPolicyReducer","summary","pending_notifications_count","pending_requests_count","pendingItems","readMarkerId","cleaningMode","browserSupport","browserPermission","markNewForDelete","notificationToMap","markForDelete","markedForDelete","filterNotifications","helper","clearUnread","lastNotification","shouldCountUnreadNotifications","isOnTop","lastItem","lastItemReached","recountUnread","mutable","normalizeRequest","follow","follow_request","favourite","RelationshipFactory","blocked_by","blocking","domain_blocking","endorsed","followed_by","languages","muting","requested_by","requested","showing_reblogs","normalizeRelationship","setDomainBlocking","submitted","extendedDescription","domainBlocks","skinTone","shows","direct","quickFilter","advanced","dismissPermissionBanner","showUnread","minimizeFilteredBanner","sounds","firehose","onlyMedia","allowLocalOnly","community","public","dismissed_banners","defaultColumns","filterDeadListColumns","columns","column","favourites","bookmarks","pins","trending","listType","listMap","appendToList","prependOneToList","updateIn","removeOneFromList","importStatus","references","initialTimeline","online","isPlaceholder","TIMELINE_GAP","TIMELINE_SUGGESTIONS","exclude_account","initialListState","followers","reblogged_by","favourited_by","follow_requests","mutes","featured_tags","normalizeFeaturedTags","featuredTags","featuredTag","normalizeFeaturedTag","updateReactionCount","announcement_id","dropdownMenu","timelines","TIMELINE_LOAD_PENDING","take","TIMELINE_EXPAND_REQUEST","TIMELINE_EXPAND_FAIL","TIMELINE_EXPAND_SUCCESS","expandNormalizedTimeline","isPartial","mMap","oldIds","newIds","firstIndex","insertedIds","olderIds","subtract","skip","partial","TIMELINE_UPDATE","includesId","reblogOf","TIMELINE_CLEAR","clearTimeline","filterTimelines","toJSON","filterTimeline","TIMELINE_SCROLL_TOP","updateTop","TIMELINE_CONNECT","reconnectTimeline","TIMELINE_MARK_AS_PARTIAL","TIMELINE_INSERT","insert","addAlert","loadingBar","modal","pushModal","closeModal","user_lists","REBLOGS_FETCH_SUCCESS","REBLOGS_EXPAND_SUCCESS","REBLOGS_FETCH_REQUEST","REBLOGS_EXPAND_REQUEST","REBLOGS_FETCH_FAIL","REBLOGS_EXPAND_FAIL","FAVOURITES_FETCH_SUCCESS","FAVOURITES_EXPAND_SUCCESS","FAVOURITES_FETCH_REQUEST","FAVOURITES_EXPAND_REQUEST","FAVOURITES_FETCH_FAIL","FAVOURITES_EXPAND_FAIL","notificationsUpdate","normalizeFollowRequest","fetchDirectory","expandDirectory","domain_lists","status_lists","FAVOURITED_STATUSES_FETCH_REQUEST","FAVOURITED_STATUSES_EXPAND_REQUEST","FAVOURITED_STATUSES_FETCH_FAIL","FAVOURITED_STATUSES_EXPAND_FAIL","FAVOURITED_STATUSES_FETCH_SUCCESS","FAVOURITED_STATUSES_EXPAND_SUCCESS","BOOKMARKED_STATUSES_FETCH_REQUEST","BOOKMARKED_STATUSES_EXPAND_REQUEST","BOOKMARKED_STATUSES_FETCH_FAIL","BOOKMARKED_STATUSES_EXPAND_FAIL","BOOKMARKED_STATUSES_FETCH_SUCCESS","BOOKMARKED_STATUSES_EXPAND_SUCCESS","FAVOURITE_SUCCESS","UNFAVOURITE_SUCCESS","BOOKMARK_SUCCESS","UNBOOKMARK_SUCCESS","PIN_SUCCESS","UNPIN_SUCCESS","revealAccount","accounts_map","FAVOURITE_REQUEST","FAVOURITE_FAIL","UNFAVOURITE_REQUEST","UNFAVOURITE_FAIL","BOOKMARK_REQUEST","BOOKMARK_FAIL","UNBOOKMARK_REQUEST","UNBOOKMARK_FAIL","REACTION_UPDATE","status_id","REACTION_ADD_REQUEST","REACTION_REMOVE_FAIL","REACTION_REMOVE_REQUEST","REACTION_ADD_FAIL","statusTranslateSuccess","statusTranslateUndo","deleteIn","normalizeRelationships","hydrate","newIndex","newColumns","EMOJI_USE","updateFrequentEmojis","updateFrequentLanguages","LIST_FETCH_FAIL","LIST_DELETE_SUCCESS","local_settings","localSettings","LOCAL_SETTING_CHANGE","LOCAL_SETTING_DELETE","push_notifications","push_subscription","contexts","filterContexts","ownedStatusIds","addReply","updateContext","normalizeContext","hydratedState","statusToTextMentions","prevSize","appendMedia","mediaId","removeMedia","normalizeSuggestions","sortHashtagsByUse","personalHistory","sorted","lowerName","usedA","usedB","insertSuggestion","oldText","ignoreSuggestion","insertEmoji","mergeIn","expandMentions","updatePoll","indexA","moveItem","indexB","st","NOTIFICATIONS_MOUNT","updateMounted","NOTIFICATIONS_UNMOUNT","NOTIFICATIONS_SET_VISIBILITY","updateVisibility","NOTIFICATIONS_LOAD_PENDING","NOTIFICATIONS_EXPAND_REQUEST","NOTIFICATIONS_DELETE_MARKED_REQUEST","nbLoading","NOTIFICATIONS_DELETE_MARKED_FAIL","NOTIFICATIONS_EXPAND_FAIL","NOTIFICATIONS_SCROLL_TOP","normalizeNotification","NOTIFICATIONS_EXPAND_SUCCESS","expandNormalizedNotifications","isLoadingMore","newItems","oldItems","idsToCheck","toSet","insertedItems","olderItems","mostRecent","deleteByStatus","deletedUnread","NOTIFICATIONS_SET_BROWSER_SUPPORT","NOTIFICATIONS_SET_BROWSER_PERMISSION","NOTIFICATION_MARK_FOR_DELETE","notificationId","yes","NOTIFICATIONS_DELETE_MARKED_SUCCESS","deleteMarkedNotifs","NOTIFICATIONS_ENTER_CLEARING_MODE","unmarkAllForDelete","NOTIFICATIONS_MARK_ALL_FOR_DELETE","markAllForDelete","NOTIFICATIONS_MARK_AS_READ","height_cache","ConvertToImmutable","LIST_FETCH_SUCCESS","LIST_CREATE_SUCCESS","LIST_UPDATE_SUCCESS","LISTS_FETCH_SUCCESS","normalizeLists","listEditor","LIST_EDITOR_RESET","LIST_EDITOR_SETUP","LIST_EDITOR_TITLE_CHANGE","LIST_CREATE_REQUEST","LIST_UPDATE_REQUEST","LIST_CREATE_FAIL","LIST_UPDATE_FAIL","LIST_ACCOUNTS_FETCH_REQUEST","LIST_ACCOUNTS_FETCH_FAIL","LIST_ACCOUNTS_FETCH_SUCCESS","LIST_EDITOR_SUGGESTIONS_CHANGE","LIST_EDITOR_SUGGESTIONS_READY","LIST_EDITOR_SUGGESTIONS_CLEAR","LIST_EDITOR_ADD_SUCCESS","LIST_EDITOR_REMOVE_SUCCESS","listAdder","LIST_ADDER_RESET","LIST_ADDER_SETUP","LIST_ADDER_LISTS_FETCH_REQUEST","LIST_ADDER_LISTS_FETCH_FAIL","LIST_ADDER_LISTS_FETCH_SUCCESS","expandNormalizedConversations","newItemIndex","newItem","updateConversation","SUGGESTIONS_FETCH_REQUEST","SUGGESTIONS_FETCH_SUCCESS","SUGGESTIONS_FETCH_FAIL","SUGGESTIONS_DISMISS","pinnedAccountsEditor","pollTranslation","deployPictureInPictureAction","playerType","removePictureInPicture","original","notificationPolicy","notificationRequests","NOTIFICATION_REQUESTS_FETCH_SUCCESS","requests","NOTIFICATION_REQUESTS_EXPAND_SUCCESS","NOTIFICATION_REQUESTS_EXPAND_REQUEST","NOTIFICATION_REQUESTS_FETCH_REQUEST","NOTIFICATION_REQUESTS_EXPAND_FAIL","NOTIFICATION_REQUESTS_FETCH_FAIL","NOTIFICATION_REQUEST_ACCEPT_REQUEST","NOTIFICATION_REQUEST_DISMISS_REQUEST","removeRequest","NOTIFICATION_REQUEST_FETCH_REQUEST","NOTIFICATION_REQUEST_FETCH_SUCCESS","NOTIFICATION_REQUEST_FETCH_FAIL","NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST","NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST","NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS","NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS","NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL","NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL","initialRootState","fromEntries","RootStateRecord","isFailedAction","errorsMiddleware","isRejectedActionWithPayload","isActionWithmaybeAlertParams","loadingBarMiddleware","_config$promiseTypeSu","isThunkActionPending","isThunkActionFulfilled","isThunkActionRejected","isActionWithSkipLoading","isPendingRegexp","isFulfilledRegexp","isRejectedRegexp","soundsMiddleware","soundCache","boop","sources","audio","createAudio","sound","isActionWithMetaSound","fastSeek","addToUnscopables","secondPerFrame","destX","newV","newX","reusedTuple","vendors","suffix","raf","caf","queue","frameDuration","_now","cp","handle","cancelAnimationFrame","toPrimitive","argument","prim","BigInt","requestNotificationPermission","Notification","requestPermission","NOTIFICATIONS_UPDATE_NOOP","fetchRelatedRelationships","selectNotificationCountForRequest","thisRequest","updateNotifications","intlMessages","intlLocale","showInColumn","playSound","IntlMessageFormat","format","excludeTypesFromSettings","excludeTypesFromFilter","expandNotificationsController","expandNotifications","forceLoad","expandNotificationsRequest","expandNotificationsSuccess","expandNotificationsFail","scrollTopNotifications","deleteMarkedNotifications","enterNotificationClearingMode","markAllNotifications","markNotificationForDelete","notificationsSetVisibility","setFilter","setupBrowserNotifications","setBrowserPermission","permission","onchange","requestBrowserPermission","registerPushNotifications","fetchNotificationRequests","_getState$getIn","fetchNotificationRequestsRequest","fetchNotificationRequestsSuccess","fetchNotificationRequestsFail","expandNotificationRequests","expandNotificationRequestsRequest","expandNotificationRequestsSuccess","expandNotificationRequestsFail","fetchNotificationRequest","fetchNotificationRequestRequest","fetchNotificationRequestSuccess","fetchNotificationRequestFail","acceptNotificationRequest","acceptNotificationRequestRequest","acceptNotificationRequestSuccess","acceptNotificationRequestFail","dismissNotificationRequest","dismissNotificationRequestRequest","dismissNotificationRequestSuccess","dismissNotificationRequestFail","fetchNotificationsForRequest","account_id","_current$getIn","fetchNotificationsForRequestRequest","fetchNotificationsForRequestSuccess","fetchNotificationsForRequestFail","expandNotificationsForRequest","expandNotificationsForRequestRequest","expandNotificationsForRequestSuccess","expandNotificationsForRequestFail","replyAll","reblog_private","cancel_reblog_private","cannot_reblog","askReplyConfirmation","_performReply","toggleFavourite","toggleReblog","button","publicStatus","reblogPrivate","replyIcon","replyIconComponent","replyTitle","ReplyIcon","ReplyAllIcon","reblogTitle","handleReplyClick","RepeatIcon","handleReblogClick","StarIcon","handleFavouriteClick","OpenInNewIcon","handleOpenClick","href","makeMapStateToProps","getStatus","withRouter","showReplyCount","replyButton","obfuscateCount","createThunkMiddleware","DELETE","SHIFT","SIZE","MASK","SetRef","OwnerID","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","wholeSlice","begin","isNeg","resolveBegin","resolveIndex","resolveEnd","defaultIndex","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","IS_KEYED_SYMBOL","maybeKeyed","IS_INDEXED_SYMBOL","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","IndexedCollection","IndexedSeq","SetCollection","SetSeq","Keyed","Indexed","IS_SEQ_SYMBOL","isSeq","maybeSeq","IS_RECORD_SYMBOL","isRecord","maybeRecord","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","iteratorValue","iteratorResult","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","iteratorFn","KEYS","VALUES","ENTRIES","inspect","isArrayLike","emptySequence","maybeIndexedSeqFromValue","fromEntrySeq","isKeysIterable","toSetSeq","ObjectSeq","seqFromValue","__toString","cacheResult","_cache","__iterateUncached","entrySeq","entry","__iterator","__iteratorUncached","toKeyedSeq","keyedSeqFromValue","toIndexedSeq","indexedSeqFromValue","of","ArraySeq","_array","ii","_object","_keys","EMPTY_SEQ","CollectionSeq","_collection","iterations","IS_MAP_SYMBOL","isMap","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","equals","hashCode","valueA","valueB","imul","smi","i32","defaultValueOf","hashNullish","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","hashed","stringHashCache","hashString","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","cachedHashString","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","uniqueID","getIENodeHash","nextHash","isExtensible","hashJSObj","symbolMap","hashSymbol","nullish","_objHashUID","ToKeyedSequence","useKeys","_iter","_useKeys","this$1$1","reversedSequence","reverseFactory","mapper","mappedSequence","mapFactory","ToIndexedSequence","ToSetSequence","FromEntriesSequence","validateEntry","indexedCollection","flipFactory","flipSequence","makeSequence","flip","cacheResultThrough","filterFactory","filterSequence","sliceFactory","originalSize","sliceSize","resolvedBegin","resolvedSize","sliceSeq","skipped","isSkipping","skipWhileFactory","skipSequence","skipping","flattenFactory","depth","flatSequence","stopped","flatDeep","currentDepth","sortFactory","comparator","defaultComparator","isKeyedCollection","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","iters","zipAll","zipSequence","sizes","iterators","isDone","steps","reify","collectionClass","arrCopy","newArr","assertNotInfinite","coerceKeyPath","isPlainObject","parentProto","nextProto","isDataStructure","quoteString","_ignoreError","shallowCopy","collectionCopy","updateIn$1","updatedValue","updateInDeeply","inImmutable","existing","wasNotSet","existingValue","newValue","nextExisting","nextUpdated","emptyMap","setIn$1","update$1","merge$1","mergeIntoKeyedWith","mergeWith$1","merger","collections","collection$1","__ownerID","mergeIntoCollection","mergeWithSources","mergeDeep$1","mergeDeepWithSources","mergeDeepWith$1","deepMerger","oldValue","newDataStructure","oldSeq","newSeq","deepMergerWith","merged","mergeItem","hasVal","nextVal","mergeDeepWith","mergeDeepIn","asMutable","wasAltered","__ensureOwner","asImmutable","__altered","keyValues","_root","updateMap","deleteAll","__hash","OrderedMap","MapIterator","iterate","ownerID","makeMap","MapPrototype","removeAll","ArrayMapNode","keyHash","didChangeSize","didAlter","exists","MAX_ARRAY_MAP_SIZE","ValueNode","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","nodes","bit","popCount","keyHashFrag","newNode","updateNode","MAX_BITMAP_INDEXED_SIZE","including","expandedNodes","HashArrayMapNode","expandNodes","isLeafNode","newBitmap","newNodes","setAt","canEdit","newLen","newArray","after","spliceOut","spliceIn","newCount","MIN_HASH_ARRAY_MAP_SIZE","excluding","packedII","packedNodes","packNodes","HashCollisionNode","mergeIntoNode","keyMatch","maxIndex","EMPTY_MAP","_reverse","_stack","mapIteratorFrame","mapIteratorValue","subNode","__prev","newRoot","newSize","idx1","idx2","IS_LIST_SYMBOL","isList","maybeList","empty","emptyList","makeList","VNode","setSize","listNodeFor","_origin","setListBounds","newTail","_tail","getTailOffset","_capacity","updateVNode","_level","updateList","oldSize","arguments$1","seqs","iterateList","DONE","ListPrototype","removeBefore","level","originIndex","newChild","removingFirst","oldChild","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","right","tailPos","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","origin","capacity","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","EMPTY_ORDERED_MAP","emptyOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","omap","IS_STACK_SYMBOL","isStack","maybeStack","emptyStack","pushAll","_head","peek","makeStack","EMPTY_STACK","StackPrototype","unshiftAll","IS_SET_SYMBOL","isSet","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","flipped","allEqual","bSize","mixin","ctor","methods","keyCopier","result$1","emptySet","fromKeys","sets","SetPrototype","updateSet","didChanges","mapEntries","mapped","toRemove","OrderedSet","__make","__empty","EMPTY_SET","makeSet","EMPTY_RANGE","Range","_start","_end","_step","possibleIndex","offsetValue","getIn$1","searchKeyPath","hasIn$1","useTuples","toOrderedMap","toOrderedSet","toStack","__toStringMapper","singleton","concatSeq","sum","concatFactory","returnValue","partition","isKeyedIter","coerce","partitionFactory","findEntry","sideEffect","separator","joined","isFirst","initialReduction","reduceRight","butLast","countBy","grouper","countByFactory","entriesSequence","entryMapper","not","found","findKey","findLastEntry","findLastKey","flatMapFactory","searchKey","groupBy","groupByFactory","hasIn","isSubset","isSuperset","keyOf","keyMapper","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","amount","skipLast","skipWhile","skipUntil","takeWhile","takeSequence","iterating","takeWhileFactory","takeUntil","ordered","murmurHashOfSize","hashMerge","hashCollection","CollectionPrototype","chain","mapKeys","KeyedCollectionPrototype","removeNum","numArgs","spliced","interpose","interposedSequence","interposeFactory","interleave","zipped","interleaved","zip","defaultZipper","zipWith","IndexedCollectionPrototype","SetCollectionPrototype","reduction","useFirst","emptyOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","PairSorting","LeftThenRight","RightThenLeft","defaultValues","hasInitialized","throwOnInvalidDefaultValues","RecordType","indices","RecordTypePrototype","_indices","_name","_defaultValues","recordName","setProp","_values","RecordPrototype","recordSeq","newValues","makeRecord","getDescriptiveName","likeRecord","EMPTY_REPEAT","Repeat","times","_value","converter","fromJSWith","defaultConverter","parentValue","converted","version","createReportFromJSON","reportJSON","createAccountWarningFromJSON","warningJSON","groupJson","sample_account_ids","groupWithoutStatus","groupWithoutTargetAccount","groupWithoutModerationWarning","moderationWarning","fetchBookmarkedStatuses","fetchBookmarkedStatusesSuccess","fetchBookmarkedStatusesFail","expandBookmarkedStatuses","expandBookmarkedStatusesSuccess","expandBookmarkedStatusesFail","fetchFavouritedStatuses","fetchFavouritedStatusesSuccess","fetchFavouritedStatusesFail","expandFavouritedStatuses","expandFavouritedStatusesSuccess","expandFavouritedStatusesFail","apiGetDirectory","loadedItems","fetchSuggestions","withRelationships","fetchSuggestionsFail","dismissSuggestion","requireObjectCoercible","charAt","createRef","activate","deactivate","activeStyle","expanded","inverted","overlay","classes","overlayed","contents","label","handleKeyPress","buttonRef","Visualizer","tickSize","setCanvas","setAudioContext","analyser","createAnalyser","smoothingTimeConstant","fftSize","getTickPoints","coords","rad","sin","drawTick","cx","cy","mainColor","x1","y1","x2","y2","dx1","dy1","dx2","dy2","gradient","createLinearGradient","lastColor","hex","alpha","hex2rgba","addColorStop","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","getTicks","radius","scaleCoefficient","ticks","frequencyBinCount","frequencyData","allScales","getByteFrequencyData","tick","coef","pv","cv","draw","coefficient","save","restore","download","_setDimensions","visualizer","audioContext","_initAudioContext","resume","_renderCanvas","suspend","gainNode","gain","_pack","res","objectURL","click","removeChild","revokeObjectURL","foregroundColor","accentColor","cacheWidth","handleResize","_clear","_draw","AudioContext","webkitAudioContext","createMediaElementSource","createGain","destination","_getCX","_getCY","_getAccentColor","_getRadius","_getScaleCoefficient","_getBackgroundColor","_getForegroundColor","setAudioRef","crossOrigin","handleAudioKeyDown","TICK_SIZE","borderRadius","DownloadIcon","containerWidth","checkDeprecatedLocalSettings","local_auto_unfold","local_swipe_to_change_columns","changed_settings","deleteLocalSetting","onConfirm","changeLocalSetting","saveLocalSettings","gentle","wobbly","stiff","TERMINATING_ANIMATION_DURATION","ANIMATION_DURATION","PROGRESS_INCREASE","MAX_PROGRESS","UPDATE_TIME","_reactLifecyclesCompat","_propTypes","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","Proxy","_isNativeReflectConstruct","Super","NewTarget","_Component","_super","reset","terminatingAnimationTimeoutId","newPercent","progressIncrease","simulateProgress","maxProgress","shouldStart","shouldStop","stop","clearInterval","progressIntervalId","updateTime","setInterval","showFastActions","terminatingAnimationDuration","isShown","customStyle","animationDuration","msTransition","MozTransition","OTransition","buildStyle","ConnectedLoadingBar","toAbsoluteIndex","endPos","toPositiveInteger","arrayBufferByteLength","uncurryThisAccessor","detachTransferable","isResizable","maxByteLength","arrayBuffer","newLength","preserveResizability","newBuffer","newByteLength","fixedLength","copyLength","IS_BROWSER","clone","Deno","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","DOMException","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constantName","_SwipeableViews","_mergeDiff2","rehydrateStyles","mergedPropsStyles","plainStyles","cUnreadPropStyles","mergedPropsStyle","mergeAndSync","didLeave","oldMergedPropsStyles","oldCurrentStyles","oldCurrentVelocities","oldLastIdealStyles","oldLastIdealVelocities","newMergedPropsStyles","oldIndex","oldMergedPropsStyle","leavingStyle","newMergedPropsStyleCell","foundOldIndex","plainStyle","velocity","unmounting","_mergeAndSync","propStyles","_mergeAndSync2","newMergedPropsStyle","any","styleThatEntered","defaultStyleCell","_mergeAndSync3","hydratedStyles","actionWithSkipLoadingTrue","NOTHING","DRAFTABLE","DRAFT_STATE","die","objectCtorString","Ctor","each","getArchtype","thing","type_","propOrOldValue","latest","copy_","base_","strict","descriptors","freeze","deep","isFrozen","dontMutateFrozenCollections","currentScope","plugins","getPlugin","pluginKey","plugin","getCurrentScope","usePatchesInScope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer2","immer_","canAutoFreeze_","unfinalizedDrafts_","revoke_","revoked_","processResult","baseDraft","modified_","finalize","maybeFreeze","generateReplacementPatches_","rootScope","childValue","finalizeProperty","scope_","finalized_","resultEach","isSet2","generatePatches_","parentState","targetObject","rootPath","targetIsSet","assigned_","autoFreeze_","objectTraps","getDescriptorFromProto","draft_","readPropFromProto","prepareCopy","createProxy","current2","currentState","markChanged","deleteProperty","arrayTraps","useStrictShallowCopy_","proxyMap_","proxySet_","isManual_","traps","revoke","revocable","createProxyProxy","currentImpl","copy","immer","produce","recipe","defaultBase","base2","hasError","ip","produceWithPatches","patches","inversePatches","autoFreeze","setAutoFreeze","useStrictShallowCopy","setUseStrictShallowCopy","createDraft","finishDraft","applyPatches","op","applyPatchesImpl","applyPatches_","symbol_observable_default","observable","randomString","actionTypes_default","INIT","REPLACE","PROBE_UNKNOWN_ACTION","enhancer","currentReducer","currentListeners","nextListeners","listenerIdCounter","isDispatching","ensureCanMutateNextListeners","listenerId","replaceReducer","nextReducer","outerSubscribe","observer","observeState","observerAsObserver","finalReducers","finalReducerKeys","shapeAssertionError","assertReducerShape","hasChanged","previousStateForKey","nextStateForKey","funcs","middlewares","createStore2","middlewareAPI","PIN_REQUEST","PIN_FAIL","UNPIN_REQUEST","UNPIN_FAIL","favouriteRequest","favouriteSuccess","favouriteFail","unfavourite","unfavouriteRequest","unfavouriteSuccess","unfavouriteFail","bookmark","bookmarkRequest","bookmarkSuccess","bookmarkFail","unbookmark","unbookmarkRequest","unbookmarkSuccess","unbookmarkFail","fetchReblogs","fetchReblogsRequest","fetchReblogsSuccess","fetchReblogsFail","expandReblogs","expandReblogsRequest","expandReblogsSuccess","expandReblogsFail","fetchFavourites","fetchFavouritesRequest","fetchFavouritesSuccess","fetchFavouritesFail","expandFavourites","expandFavouritesRequest","expandFavouritesSuccess","expandFavouritesFail","pin","pinRequest","pinSuccess","pinFail","unpin","unpinRequest","unpinSuccess","unpinFail","toggleReblogWithoutConfirmation","skipModal","missing_description_setting","missing_description","onReblog","missingMediaDescription","boostModal","favouriteModal","onFavourite","fetchList","fetchListRequest","fetchListSuccess","fetchListFail","fetchLists","fetchListsRequest","fetchListsSuccess","fetchListsFail","submitListEditor","shouldReset","createList","setupListEditor","fetchListAccounts","changeListEditorTitle","createListRequest","createListSuccess","resetListEditor","createListFail","replies_policy","updateListRequest","exclusive","updateListSuccess","updateListFail","deleteList","deleteListRequest","deleteListSuccess","deleteListFail","fetchListAccountsRequest","fetchListAccountsSuccess","fetchListAccountsFail","fetchListSuggestions","fetchListSuggestionsReady","clearListSuggestions","changeListSuggestions","addToListEditor","addToList","addToListRequest","account_ids","addToListSuccess","addToListFail","removeFromListEditor","removeFromList","removeFromListRequest","removeFromListSuccess","removeFromListFail","resetListAdder","setupListAdder","fetchAccountLists","fetchAccountListsRequest","fetchAccountListsSuccess","fetchAccountListsFail","addToListAdder","removeFromListAdder","accept","parseTags","expandTimeline","expandTimelineRequest","expandTimelineSuccess","fittingIndex","insertIntoTimeline","expandTimelineFail","fillTimelineGaps","gaps","expandHomeTimeline","expandPublicTimeline","onlyRemote","remote","allow_local_only","only_media","expandCommunityTimeline","local","expandDirectTimeline","expandAccountTimeline","withReplies","tagged","exclude_replies","exclude_reblogs","expandAccountFeaturedTimeline","expandAccountMediaTimeline","expandListTimeline","expandLinkTimeline","expandHashtagTimeline","none","fillHomeTimelineGaps","fillPublicTimelineGaps","fillCommunityTimelineGaps","fillListTimelineGaps","scrollTopTimeline","connectTimeline","markAsPartial","id1","id2"],"mappings":"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AP+B,IACpC0U,EAAG,IACHC,EAAG,KACHC,EAAI,MACJtU,EAAK,OACLF,EAAM,QACNyU,GACD7U,EACC,MAAO8U,EAASC,GAAchP,oBAAS,GAEjCiP,EACJrsB,uBAAY,KACVosB,GAAW,EAAM,GAChB,CAACA,IAEAE,EAAuCtsB,uBAC1CwJ,IACK0iB,IACF1iB,EAAE+iB,kBACFL,IACF,GAEF,CAACA,IAGH,OACErb,YAAA,OAAKsN,UAAU,OAAOH,MAAO,CAAEO,SAAU,kBAAa,EACnD4N,GACCtb,YAAA,UACE8G,MAAOA,EACPF,OAAQA,EACRvH,KAAK,SACLsc,SAAU,EACV,aAAYR,EACZ1U,MAAO0U,EACPC,KAAMA,EACNC,QAASI,IAIbzb,YAAA,SACEkb,IAAKA,EACL7b,KAAK,SACLsc,SAAU,EACV,aAAYR,EACZ1U,MAAO0U,EACPC,KAAMA,EACNQ,OAAK,EACLC,MAAI,EACJC,UAAQ,EACRC,aAAW,EACXV,QAASI,EACTO,aAAcR,EACdrO,MAAO,CAAEO,SAAU4N,EAAU,WAAa,SAAUW,IAAK,EAAGC,KAAM,KAEhE,C,4ECnEV,MAAMC,EAAmB,CACvB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAqBWC,EAA0BC,IACrC,OAAKA,GAPkBC,EAZAC,KACvB,IACIC,EADAzwB,EAAQ,EAGZ,IAAK,MAAMwc,KAAKgU,EACdC,EAAQL,EAAiBtvB,QAAQ0b,GACjCxc,EAAgB,GAARA,EAAaywB,EAGvB,OAAOzwB,CAAK,EAcI0wB,CAASJ,EAASvH,MAAM,EAAG,IAXT,CAClCxO,EAAGY,KAAKG,IAAI,EAAGiV,GAAO,IACtBjT,EAAGnC,KAAKG,IAAI,EAAIiV,GAAO,EAAK,KAC5BjwB,EAAG6a,KAAKG,IAAI,EAAS,IAANiV,KAKN,KARcA,KAWwB,C,oCC7GjD,gFAEO,MAAM1D,EAA8B,8BAC9BC,EAA8B,8BAC9BC,EAA2B,2BAEjC,SAASC,IACd,OAAQ1nB,IACNA,EAWK,CACLN,KAAM6nB,EACNjX,aAAa,IAXbG,cAAMpU,IAAI,yBAAyBqU,MAAKC,IAerC,IAAkCgX,EAdnC3nB,GAcmC2nB,EAdDhX,EAASE,KAexC,CACLnR,KAAM8nB,EACNG,gBACArX,aAAa,IAlBsC,IAChDY,OAAM9F,IACPpL,EAoBC,SAA+BoL,GACpC,MAAO,CACL1L,KAAM+nB,EACNrc,QACAkF,aAAa,EAEjB,CA1BesX,CAAsBxc,GAAO,GACtC,CAEN,C,oCChBA,kCAAO,MAAMigB,EAAQ,CAAC,SAAU,WAAY,UAAW,UAEhD,SAASC,EAAmBvwB,EAAGC,GACpC,OAAOqwB,EAAMxV,KAAKG,IAAIqV,EAAM7vB,QAAQT,GAAIswB,EAAM7vB,QAAQR,GAAI,GAC5D,C,uFCFO,MAAM6sB,EAAeC,IAC1B,MAAOC,EAAUC,GAAe9M,mBAAkB4M,YAYlD,MAAO,CAAEC,WAAUE,iBAVMnqB,uBAAY,KAC/BgqB,GACJE,GAAY,EAAK,GAChB,CAACF,IAOiCI,iBALZpqB,uBAAY,KAC/BgqB,GACJE,GAAY,EAAM,GACjB,CAACF,IAEmD,C,oCCfzD,iFAEO,MAAMK,EAAe,eAEfC,EAAcC,GAAYroB,IACrCA,EAAS,CACPN,KAAMyoB,EACNE,aAGFroB,EAASsoB,cAAe,C,oCCV1B,gOAIO,MACMC,EAAwB,wBAQxBC,EAAyB,yBAGzBC,EAAgBA,CAACtX,EAAMgE,KAAA,IAAE,YAAE5P,GAAa4P,EAAA,OAAKnV,GACxDA,EAAS0oB,YAAU,CACjBC,UAAW,SACXC,WAAY,CACV9U,SAAU3C,aAAM,EAANA,EAAQ9U,IAAI,MACtBkJ,YAAaA,KAEd,EAEQsjB,EAAeA,IAAO7oB,IACjCA,EAAS,CACPN,KAvBiC,wBAwBjC4Q,aAAa,IAGfG,cACGpU,IAAI,mBACJqU,MAAKuJ,IAAA,IAAC,KAAEpJ,GAAMoJ,EAAA,OAAKja,EAAS,CAC3BN,KAAM6oB,EACNO,QAASjY,EACTP,aAAa,GACb,IACDY,OAAMxF,GAAO1L,EAAS,CACrBN,KAjC+B,qBAkC/BgM,MACA4E,aAAa,EACbe,WAAW,KACV,EAGM0X,EAAqBA,CAACC,EAAQC,EAAWC,IAAYlpB,IAChEA,EAASmpB,KAET1Y,cAAMwC,KAAK,mBAAD/L,OAAoB8hB,EAAOI,UAAS,aAAaJ,GAAQtY,MAAKC,IACtE3Q,EAASqpB,EAA0B1Y,EAASE,OACxCoY,GAAWA,GAAW,IACzB/X,OAAM9F,IACPpL,EAASspB,EAAuBle,IAC5B8d,GAAQA,GAAQ,GACpB,EAGSC,EAA4BA,KAAA,CACvCzpB,KAnD2C,kCAsDhC2pB,EAA4BE,IAAa,CACpD7pB,KAtD2C,gCAuD3C6pB,kBAGWD,EAAyBle,IAAK,CACzC1L,KA1D2C,6BA2D3C0L,UAGWoe,EAAeA,CAACR,EAAQC,EAAWC,IAAYlpB,IAC1DA,EAASypB,KAEThZ,cAAMwC,KAAK,kBAAmB+V,GAAQtY,MAAKC,IACzC3Q,EAAS0pB,EAAoB/Y,EAASE,OAClCoY,GAAWA,EAAUtY,EAASE,KAAK,IACtCK,OAAM9F,IACPpL,EAAS2pB,EAAiBve,IACtB8d,GAAQA,GAAQ,GACpB,EAGSO,EAAsBA,KAAA,CACjC/pB,KAzEoC,2BA4EzBgqB,EAAsB5M,IAAM,CACvCpd,KAAM8oB,EACN1L,WAGW6M,EAAmBve,IAAK,CACnC1L,KAhFoC,sBAiFpC0L,S,gGCnFK,MAAMwe,EAAwBzU,IAO9B,IAP+B,IACpC0U,EAAG,IACHC,EAAG,KACHC,EAAI,MACJtU,EAAK,OACLF,EAAM,QACNyU,GACD7U,EACC,MAAO8U,EAASC,GAAchP,oBAAS,GAEjCiP,EACJrsB,uBAAY,KACVosB,GAAW,EAAM,GAChB,CAACA,IAEAE,EAAuCtsB,uBAC1CwJ,IACK0iB,IACF1iB,EAAE+iB,kBACFL,IACF,GAEF,CAACA,IAGH,OACErb,YAAA,OAAKsN,UAAU,OAAOH,MAAO,CAAEO,SAAU,kBAAa,EACnD4N,GACCtb,YAAA,UACE8G,MAAOA,EACPF,OAAQA,EACRvH,KAAK,SACLsc,SAAU,EACV,aAAYR,EACZ1U,MAAO0U,EACPC,KAAMA,EACNC,QAASI,IAIbzb,YAAA,SACEkb,IAAKA,EACL7b,KAAK,SACLsc,SAAU,EACV,aAAYR,EACZ1U,MAAO0U,EACPC,KAAMA,EACNQ,OAAK,EACLC,MAAI,EACJC,UAAQ,EACRC,aAAW,EACXV,QAASI,EACTO,aAAcR,EACdrO,MAAO,CAAEO,SAAU4N,EAAU,WAAa,SAAUW,IAAK,EAAGC,KAAM,KAEhE,C,4ECnEV,MAAMC,EAAmB,CACvB,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAqBWC,EAA0BC,IACrC,OAAKA,GAPkBC,EAZAC,KACvB,IACIC,EADAzwB,EAAQ,EAGZ,IAAK,MAAMwc,KAAKgU,EACdC,EAAQL,EAAiBtvB,QAAQ0b,GACjCxc,EAAgB,GAARA,EAAaywB,EAGvB,OAAOzwB,CAAK,EAcI0wB,CAASJ,EAASvH,MAAM,EAAG,IAXT,CAClCxO,EAAGY,KAAKG,IAAI,EAAGiV,GAAO,IACtBjT,EAAGnC,KAAKG,IAAI,EAAIiV,GAAO,EAAK,KAC5BjwB,EAAG6a,KAAKG,IAAI,EAAS,IAANiV,KAKN,KARcA,KA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","file":"js/containers/media_container.js","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// src/index.ts\nimport * as React2 from \"react\";\nimport { useSyncExternalStoreWithSelector as useSyncExternalStoreWithSelector2 } from \"use-sync-external-store/with-selector.js\";\n\n// src/utils/react.ts\nimport * as ReactOriginal from \"react\";\nvar React = (\n  // prettier-ignore\n  // @ts-ignore\n  \"default\" in ReactOriginal ? ReactOriginal[\"default\"] : ReactOriginal\n);\n\n// src/components/Context.ts\nvar ContextKey = Symbol.for(`react-redux-context`);\nvar gT = typeof globalThis !== \"undefined\" ? globalThis : (\n  /* fall back to a per-module scope (pre-8.1 behaviour) if `globalThis` is not available */\n  {}\n);\nfunction getContext() {\n  var _a;\n  if (!React.createContext)\n    return {};\n  const contextMap = (_a = gT[ContextKey]) != null ? _a : gT[ContextKey] = /* @__PURE__ */ new Map();\n  let realContext = contextMap.get(React.createContext);\n  if (!realContext) {\n    realContext = React.createContext(\n      null\n    );\n    if (process.env.NODE_ENV !== \"production\") {\n      realContext.displayName = \"ReactRedux\";\n    }\n    contextMap.set(React.createContext, realContext);\n  }\n  return realContext;\n}\nvar ReactReduxContext = /* @__PURE__ */ getContext();\n\n// src/utils/useSyncExternalStore.ts\nvar notInitialized = () => {\n  throw new Error(\"uSES not initialized!\");\n};\n\n// src/hooks/useReduxContext.ts\nfunction createReduxContextHook(context = ReactReduxContext) {\n  return function useReduxContext2() {\n    const contextValue = React.useContext(context);\n    if (process.env.NODE_ENV !== \"production\" && !contextValue) {\n      throw new Error(\n        \"could not find react-redux context value; please ensure the component is wrapped in a <Provider>\"\n      );\n    }\n    return contextValue;\n  };\n}\nvar useReduxContext = /* @__PURE__ */ createReduxContextHook();\n\n// src/hooks/useSelector.ts\nvar useSyncExternalStoreWithSelector = notInitialized;\nvar initializeUseSelector = (fn) => {\n  useSyncExternalStoreWithSelector = fn;\n};\nvar refEquality = (a, b) => a === b;\nfunction createSelectorHook(context = ReactReduxContext) {\n  const useReduxContext2 = context === ReactReduxContext ? useReduxContext : createReduxContextHook(context);\n  const useSelector2 = (selector, equalityFnOrOptions = {}) => {\n    const { equalityFn = refEquality, devModeChecks = {} } = typeof equalityFnOrOptions === \"function\" ? { equalityFn: equalityFnOrOptions } : equalityFnOrOptions;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!selector) {\n        throw new Error(`You must pass a selector to useSelector`);\n      }\n      if (typeof selector !== \"function\") {\n        throw new Error(`You must pass a function as a selector to useSelector`);\n      }\n      if (typeof equalityFn !== \"function\") {\n        throw new Error(\n          `You must pass a function as an equality function to useSelector`\n        );\n      }\n    }\n    const {\n      store,\n      subscription,\n      getServerState,\n      stabilityCheck,\n      identityFunctionCheck\n    } = useReduxContext2();\n    const firstRun = React.useRef(true);\n    const wrappedSelector = React.useCallback(\n      {\n        [selector.name](state) {\n          const selected = selector(state);\n          if (process.env.NODE_ENV !== \"production\") {\n            const {\n              identityFunctionCheck: finalIdentityFunctionCheck,\n              stabilityCheck: finalStabilityCheck\n            } = __spreadValues({\n              stabilityCheck,\n              identityFunctionCheck\n            }, devModeChecks);\n            if (finalStabilityCheck === \"always\" || finalStabilityCheck === \"once\" && firstRun.current) {\n              const toCompare = selector(state);\n              if (!equalityFn(selected, toCompare)) {\n                let stack = void 0;\n                try {\n                  throw new Error();\n                } catch (e) {\n                  ;\n                  ({ stack } = e);\n                }\n                console.warn(\n                  \"Selector \" + (selector.name || \"unknown\") + \" returned a different result when called with the same parameters. This can lead to unnecessary rerenders.\\nSelectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization\",\n                  {\n                    state,\n                    selected,\n                    selected2: toCompare,\n                    stack\n                  }\n                );\n              }\n            }\n            if (finalIdentityFunctionCheck === \"always\" || finalIdentityFunctionCheck === \"once\" && firstRun.current) {\n              if (selected === state) {\n                let stack = void 0;\n                try {\n                  throw new Error();\n                } catch (e) {\n                  ;\n                  ({ stack } = e);\n                }\n                console.warn(\n                  \"Selector \" + (selector.name || \"unknown\") + \" returned the root state when called. This can lead to unnecessary rerenders.\\nSelectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.\",\n                  { stack }\n                );\n              }\n            }\n            if (firstRun.current)\n              firstRun.current = false;\n          }\n          return selected;\n        }\n      }[selector.name],\n      [selector, stabilityCheck, devModeChecks.stabilityCheck]\n    );\n    const selectedState = useSyncExternalStoreWithSelector(\n      subscription.addNestedSub,\n      store.getState,\n      getServerState || store.getState,\n      wrappedSelector,\n      equalityFn\n    );\n    React.useDebugValue(selectedState);\n    return selectedState;\n  };\n  Object.assign(useSelector2, {\n    withTypes: () => useSelector2\n  });\n  return useSelector2;\n}\nvar useSelector = /* @__PURE__ */ createSelectorHook();\n\n// src/utils/react-is.ts\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.element\");\nvar REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nvar REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nvar REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\");\nvar REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\");\nvar REACT_PROVIDER_TYPE = Symbol.for(\"react.provider\");\nvar REACT_CONTEXT_TYPE = Symbol.for(\"react.context\");\nvar REACT_SERVER_CONTEXT_TYPE = Symbol.for(\"react.server_context\");\nvar REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\");\nvar REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\");\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\");\nvar REACT_MEMO_TYPE = Symbol.for(\"react.memo\");\nvar REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nvar REACT_OFFSCREEN_TYPE = Symbol.for(\"react.offscreen\");\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nvar ForwardRef = REACT_FORWARD_REF_TYPE;\nvar Memo = REACT_MEMO_TYPE;\nfunction isValidElementType(type) {\n  if (typeof type === \"string\" || typeof type === \"function\") {\n    return true;\n  }\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || type === REACT_OFFSCREEN_TYPE) {\n    return true;\n  }\n  if (typeof type === \"object\" && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_CLIENT_REFERENCE || type.getModuleId !== void 0) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction typeOf(object) {\n  if (typeof object === \"object\" && object !== null) {\n    const $$typeof = object.$$typeof;\n    switch ($$typeof) {\n      case REACT_ELEMENT_TYPE: {\n        const type = object.type;\n        switch (type) {\n          case REACT_FRAGMENT_TYPE:\n          case REACT_PROFILER_TYPE:\n          case REACT_STRICT_MODE_TYPE:\n          case REACT_SUSPENSE_TYPE:\n          case REACT_SUSPENSE_LIST_TYPE:\n            return type;\n          default: {\n            const $$typeofType = type && type.$$typeof;\n            switch ($$typeofType) {\n              case REACT_SERVER_CONTEXT_TYPE:\n              case REACT_CONTEXT_TYPE:\n              case REACT_FORWARD_REF_TYPE:\n              case REACT_LAZY_TYPE:\n              case REACT_MEMO_TYPE:\n              case REACT_PROVIDER_TYPE:\n                return $$typeofType;\n              default:\n                return $$typeof;\n            }\n          }\n        }\n      }\n      case REACT_PORTAL_TYPE: {\n        return $$typeof;\n      }\n    }\n  }\n  return void 0;\n}\nfunction isContextConsumer(object) {\n  return typeOf(object) === REACT_CONTEXT_TYPE;\n}\nfunction isMemo(object) {\n  return typeOf(object) === REACT_MEMO_TYPE;\n}\n\n// src/utils/warning.ts\nfunction warning(message) {\n  if (typeof console !== \"undefined\" && typeof console.error === \"function\") {\n    console.error(message);\n  }\n  try {\n    throw new Error(message);\n  } catch (e) {\n  }\n}\n\n// src/connect/verifySubselectors.ts\nfunction verify(selector, methodName) {\n  if (!selector) {\n    throw new Error(`Unexpected value for ${methodName} in connect.`);\n  } else if (methodName === \"mapStateToProps\" || methodName === \"mapDispatchToProps\") {\n    if (!Object.prototype.hasOwnProperty.call(selector, \"dependsOnOwnProps\")) {\n      warning(\n        `The selector for ${methodName} of connect did not specify a value for dependsOnOwnProps.`\n      );\n    }\n  }\n}\nfunction verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps) {\n  verify(mapStateToProps, \"mapStateToProps\");\n  verify(mapDispatchToProps, \"mapDispatchToProps\");\n  verify(mergeProps, \"mergeProps\");\n}\n\n// src/connect/selectorFactory.ts\nfunction pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, {\n  areStatesEqual,\n  areOwnPropsEqual,\n  areStatePropsEqual\n}) {\n  let hasRunAtLeastOnce = false;\n  let state;\n  let ownProps;\n  let stateProps;\n  let dispatchProps;\n  let mergedProps;\n  function handleFirstCall(firstState, firstOwnProps) {\n    state = firstState;\n    ownProps = firstOwnProps;\n    stateProps = mapStateToProps(state, ownProps);\n    dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    hasRunAtLeastOnce = true;\n    return mergedProps;\n  }\n  function handleNewPropsAndNewState() {\n    stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewProps() {\n    if (mapStateToProps.dependsOnOwnProps)\n      stateProps = mapStateToProps(state, ownProps);\n    if (mapDispatchToProps.dependsOnOwnProps)\n      dispatchProps = mapDispatchToProps(dispatch, ownProps);\n    mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleNewState() {\n    const nextStateProps = mapStateToProps(state, ownProps);\n    const statePropsChanged = !areStatePropsEqual(nextStateProps, stateProps);\n    stateProps = nextStateProps;\n    if (statePropsChanged)\n      mergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n    return mergedProps;\n  }\n  function handleSubsequentCalls(nextState, nextOwnProps) {\n    const propsChanged = !areOwnPropsEqual(nextOwnProps, ownProps);\n    const stateChanged = !areStatesEqual(\n      nextState,\n      state,\n      nextOwnProps,\n      ownProps\n    );\n    state = nextState;\n    ownProps = nextOwnProps;\n    if (propsChanged && stateChanged)\n      return handleNewPropsAndNewState();\n    if (propsChanged)\n      return handleNewProps();\n    if (stateChanged)\n      return handleNewState();\n    return mergedProps;\n  }\n  return function pureFinalPropsSelector(nextState, nextOwnProps) {\n    return hasRunAtLeastOnce ? handleSubsequentCalls(nextState, nextOwnProps) : handleFirstCall(nextState, nextOwnProps);\n  };\n}\nfunction finalPropsSelectorFactory(dispatch, _a) {\n  var _b = _a, {\n    initMapStateToProps,\n    initMapDispatchToProps,\n    initMergeProps\n  } = _b, options = __objRest(_b, [\n    \"initMapStateToProps\",\n    \"initMapDispatchToProps\",\n    \"initMergeProps\"\n  ]);\n  const mapStateToProps = initMapStateToProps(dispatch, options);\n  const mapDispatchToProps = initMapDispatchToProps(dispatch, options);\n  const mergeProps = initMergeProps(dispatch, options);\n  if (process.env.NODE_ENV !== \"production\") {\n    verifySubselectors(mapStateToProps, mapDispatchToProps, mergeProps);\n  }\n  return pureFinalPropsSelectorFactory(mapStateToProps, mapDispatchToProps, mergeProps, dispatch, options);\n}\n\n// src/utils/bindActionCreators.ts\nfunction bindActionCreators(actionCreators, dispatch) {\n  const boundActionCreators = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === \"function\") {\n      boundActionCreators[key] = (...args) => dispatch(actionCreator(...args));\n    }\n  }\n  return boundActionCreators;\n}\n\n// src/utils/isPlainObject.ts\nfunction isPlainObject(obj) {\n  if (typeof obj !== \"object\" || obj === null)\n    return false;\n  const proto = Object.getPrototypeOf(obj);\n  if (proto === null)\n    return true;\n  let baseProto = proto;\n  while (Object.getPrototypeOf(baseProto) !== null) {\n    baseProto = Object.getPrototypeOf(baseProto);\n  }\n  return proto === baseProto;\n}\n\n// src/utils/verifyPlainObject.ts\nfunction verifyPlainObject(value, displayName, methodName) {\n  if (!isPlainObject(value)) {\n    warning(\n      `${methodName}() in ${displayName} must return a plain object. Instead received ${value}.`\n    );\n  }\n}\n\n// src/connect/wrapMapToProps.ts\nfunction wrapMapToPropsConstant(getConstant) {\n  return function initConstantSelector(dispatch) {\n    const constant = getConstant(dispatch);\n    function constantSelector() {\n      return constant;\n    }\n    constantSelector.dependsOnOwnProps = false;\n    return constantSelector;\n  };\n}\nfunction getDependsOnOwnProps(mapToProps) {\n  return mapToProps.dependsOnOwnProps ? Boolean(mapToProps.dependsOnOwnProps) : mapToProps.length !== 1;\n}\nfunction wrapMapToPropsFunc(mapToProps, methodName) {\n  return function initProxySelector(dispatch, { displayName }) {\n    const proxy = function mapToPropsProxy(stateOrDispatch, ownProps) {\n      return proxy.dependsOnOwnProps ? proxy.mapToProps(stateOrDispatch, ownProps) : proxy.mapToProps(stateOrDispatch, void 0);\n    };\n    proxy.dependsOnOwnProps = true;\n    proxy.mapToProps = function detectFactoryAndVerify(stateOrDispatch, ownProps) {\n      proxy.mapToProps = mapToProps;\n      proxy.dependsOnOwnProps = getDependsOnOwnProps(mapToProps);\n      let props = proxy(stateOrDispatch, ownProps);\n      if (typeof props === \"function\") {\n        proxy.mapToProps = props;\n        proxy.dependsOnOwnProps = getDependsOnOwnProps(props);\n        props = proxy(stateOrDispatch, ownProps);\n      }\n      if (process.env.NODE_ENV !== \"production\")\n        verifyPlainObject(props, displayName, methodName);\n      return props;\n    };\n    return proxy;\n  };\n}\n\n// src/connect/invalidArgFactory.ts\nfunction createInvalidArgFactory(arg, name) {\n  return (dispatch, options) => {\n    throw new Error(\n      `Invalid value of type ${typeof arg} for ${name} argument when connecting component ${options.wrappedComponentName}.`\n    );\n  };\n}\n\n// src/connect/mapDispatchToProps.ts\nfunction mapDispatchToPropsFactory(mapDispatchToProps) {\n  return mapDispatchToProps && typeof mapDispatchToProps === \"object\" ? wrapMapToPropsConstant(\n    (dispatch) => (\n      // @ts-ignore\n      bindActionCreators(mapDispatchToProps, dispatch)\n    )\n  ) : !mapDispatchToProps ? wrapMapToPropsConstant((dispatch) => ({\n    dispatch\n  })) : typeof mapDispatchToProps === \"function\" ? (\n    // @ts-ignore\n    wrapMapToPropsFunc(mapDispatchToProps, \"mapDispatchToProps\")\n  ) : createInvalidArgFactory(mapDispatchToProps, \"mapDispatchToProps\");\n}\n\n// src/connect/mapStateToProps.ts\nfunction mapStateToPropsFactory(mapStateToProps) {\n  return !mapStateToProps ? wrapMapToPropsConstant(() => ({})) : typeof mapStateToProps === \"function\" ? (\n    // @ts-ignore\n    wrapMapToPropsFunc(mapStateToProps, \"mapStateToProps\")\n  ) : createInvalidArgFactory(mapStateToProps, \"mapStateToProps\");\n}\n\n// src/connect/mergeProps.ts\nfunction defaultMergeProps(stateProps, dispatchProps, ownProps) {\n  return __spreadValues(__spreadValues(__spreadValues({}, ownProps), stateProps), dispatchProps);\n}\nfunction wrapMergePropsFunc(mergeProps) {\n  return function initMergePropsProxy(dispatch, { displayName, areMergedPropsEqual }) {\n    let hasRunOnce = false;\n    let mergedProps;\n    return function mergePropsProxy(stateProps, dispatchProps, ownProps) {\n      const nextMergedProps = mergeProps(stateProps, dispatchProps, ownProps);\n      if (hasRunOnce) {\n        if (!areMergedPropsEqual(nextMergedProps, mergedProps))\n          mergedProps = nextMergedProps;\n      } else {\n        hasRunOnce = true;\n        mergedProps = nextMergedProps;\n        if (process.env.NODE_ENV !== \"production\")\n          verifyPlainObject(mergedProps, displayName, \"mergeProps\");\n      }\n      return mergedProps;\n    };\n  };\n}\nfunction mergePropsFactory(mergeProps) {\n  return !mergeProps ? () => defaultMergeProps : typeof mergeProps === \"function\" ? wrapMergePropsFunc(mergeProps) : createInvalidArgFactory(mergeProps, \"mergeProps\");\n}\n\n// src/utils/batch.ts\nfunction defaultNoopBatch(callback) {\n  callback();\n}\n\n// src/utils/Subscription.ts\nfunction createListenerCollection() {\n  let first = null;\n  let last = null;\n  return {\n    clear() {\n      first = null;\n      last = null;\n    },\n    notify() {\n      defaultNoopBatch(() => {\n        let listener = first;\n        while (listener) {\n          listener.callback();\n          listener = listener.next;\n        }\n      });\n    },\n    get() {\n      const listeners = [];\n      let listener = first;\n      while (listener) {\n        listeners.push(listener);\n        listener = listener.next;\n      }\n      return listeners;\n    },\n    subscribe(callback) {\n      let isSubscribed = true;\n      const listener = last = {\n        callback,\n        next: null,\n        prev: last\n      };\n      if (listener.prev) {\n        listener.prev.next = listener;\n      } else {\n        first = listener;\n      }\n      return function unsubscribe() {\n        if (!isSubscribed || first === null)\n          return;\n        isSubscribed = false;\n        if (listener.next) {\n          listener.next.prev = listener.prev;\n        } else {\n          last = listener.prev;\n        }\n        if (listener.prev) {\n          listener.prev.next = listener.next;\n        } else {\n          first = listener.next;\n        }\n      };\n    }\n  };\n}\nvar nullListeners = {\n  notify() {\n  },\n  get: () => []\n};\nfunction createSubscription(store, parentSub) {\n  let unsubscribe;\n  let listeners = nullListeners;\n  let subscriptionsAmount = 0;\n  let selfSubscribed = false;\n  function addNestedSub(listener) {\n    trySubscribe();\n    const cleanupListener = listeners.subscribe(listener);\n    let removed = false;\n    return () => {\n      if (!removed) {\n        removed = true;\n        cleanupListener();\n        tryUnsubscribe();\n      }\n    };\n  }\n  function notifyNestedSubs() {\n    listeners.notify();\n  }\n  function handleChangeWrapper() {\n    if (subscription.onStateChange) {\n      subscription.onStateChange();\n    }\n  }\n  function isSubscribed() {\n    return selfSubscribed;\n  }\n  function trySubscribe() {\n    subscriptionsAmount++;\n    if (!unsubscribe) {\n      unsubscribe = parentSub ? parentSub.addNestedSub(handleChangeWrapper) : store.subscribe(handleChangeWrapper);\n      listeners = createListenerCollection();\n    }\n  }\n  function tryUnsubscribe() {\n    subscriptionsAmount--;\n    if (unsubscribe && subscriptionsAmount === 0) {\n      unsubscribe();\n      unsubscribe = void 0;\n      listeners.clear();\n      listeners = nullListeners;\n    }\n  }\n  function trySubscribeSelf() {\n    if (!selfSubscribed) {\n      selfSubscribed = true;\n      trySubscribe();\n    }\n  }\n  function tryUnsubscribeSelf() {\n    if (selfSubscribed) {\n      selfSubscribed = false;\n      tryUnsubscribe();\n    }\n  }\n  const subscription = {\n    addNestedSub,\n    notifyNestedSubs,\n    handleChangeWrapper,\n    isSubscribed,\n    trySubscribe: trySubscribeSelf,\n    tryUnsubscribe: tryUnsubscribeSelf,\n    getListeners: () => listeners\n  };\n  return subscription;\n}\n\n// src/utils/useIsomorphicLayoutEffect.ts\nvar canUseDOM = !!(typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\");\nvar isReactNative = typeof navigator !== \"undefined\" && navigator.product === \"ReactNative\";\nvar useIsomorphicLayoutEffect = canUseDOM || isReactNative ? React.useLayoutEffect : React.useEffect;\n\n// src/utils/shallowEqual.ts\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB))\n    return true;\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length)\n    return false;\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// src/utils/hoistStatics.ts\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  $$typeof: true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  $$typeof: true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {\n  [ForwardRef]: FORWARD_REF_STATICS,\n  [Memo]: MEMO_STATICS\n};\nfunction getStatics(component) {\n  if (isMemo(component)) {\n    return MEMO_STATICS;\n  }\n  return TYPE_STATICS[component[\"$$typeof\"]] || REACT_STATICS;\n}\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\nfunction hoistNonReactStatics(targetComponent, sourceComponent) {\n  if (typeof sourceComponent !== \"string\") {\n    if (objectPrototype) {\n      const inheritedComponent = getPrototypeOf(sourceComponent);\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent);\n      }\n    }\n    let keys = getOwnPropertyNames(sourceComponent);\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n    const targetStatics = getStatics(targetComponent);\n    const sourceStatics = getStatics(sourceComponent);\n    for (let i = 0; i < keys.length; ++i) {\n      const key = keys[i];\n      if (!KNOWN_STATICS[key] && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        const descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n        try {\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {\n        }\n      }\n    }\n  }\n  return targetComponent;\n}\n\n// src/components/connect.tsx\nvar useSyncExternalStore = notInitialized;\nvar initializeConnect = (fn) => {\n  useSyncExternalStore = fn;\n};\nvar NO_SUBSCRIPTION_ARRAY = [null, null];\nvar stringifyComponent = (Comp) => {\n  try {\n    return JSON.stringify(Comp);\n  } catch (err) {\n    return String(Comp);\n  }\n};\nfunction useIsomorphicLayoutEffectWithArgs(effectFunc, effectArgs, dependencies) {\n  useIsomorphicLayoutEffect(() => effectFunc(...effectArgs), dependencies);\n}\nfunction captureWrapperProps(lastWrapperProps, lastChildProps, renderIsScheduled, wrapperProps, childPropsFromStoreUpdate, notifyNestedSubs) {\n  lastWrapperProps.current = wrapperProps;\n  renderIsScheduled.current = false;\n  if (childPropsFromStoreUpdate.current) {\n    childPropsFromStoreUpdate.current = null;\n    notifyNestedSubs();\n  }\n}\nfunction subscribeUpdates(shouldHandleStateChanges, store, subscription, childPropsSelector, lastWrapperProps, lastChildProps, renderIsScheduled, isMounted, childPropsFromStoreUpdate, notifyNestedSubs, additionalSubscribeListener) {\n  if (!shouldHandleStateChanges)\n    return () => {\n    };\n  let didUnsubscribe = false;\n  let lastThrownError = null;\n  const checkForUpdates = () => {\n    if (didUnsubscribe || !isMounted.current) {\n      return;\n    }\n    const latestStoreState = store.getState();\n    let newChildProps, error;\n    try {\n      newChildProps = childPropsSelector(\n        latestStoreState,\n        lastWrapperProps.current\n      );\n    } catch (e) {\n      error = e;\n      lastThrownError = e;\n    }\n    if (!error) {\n      lastThrownError = null;\n    }\n    if (newChildProps === lastChildProps.current) {\n      if (!renderIsScheduled.current) {\n        notifyNestedSubs();\n      }\n    } else {\n      lastChildProps.current = newChildProps;\n      childPropsFromStoreUpdate.current = newChildProps;\n      renderIsScheduled.current = true;\n      additionalSubscribeListener();\n    }\n  };\n  subscription.onStateChange = checkForUpdates;\n  subscription.trySubscribe();\n  checkForUpdates();\n  const unsubscribeWrapper = () => {\n    didUnsubscribe = true;\n    subscription.tryUnsubscribe();\n    subscription.onStateChange = null;\n    if (lastThrownError) {\n      throw lastThrownError;\n    }\n  };\n  return unsubscribeWrapper;\n}\nfunction strictEqual(a, b) {\n  return a === b;\n}\nvar hasWarnedAboutDeprecatedPureOption = false;\nfunction connect(mapStateToProps, mapDispatchToProps, mergeProps, {\n  // The `pure` option has been removed, so TS doesn't like us destructuring this to check its existence.\n  // @ts-ignore\n  pure,\n  areStatesEqual = strictEqual,\n  areOwnPropsEqual = shallowEqual,\n  areStatePropsEqual = shallowEqual,\n  areMergedPropsEqual = shallowEqual,\n  // use React's forwardRef to expose a ref of the wrapped component\n  forwardRef = false,\n  // the context consumer to use\n  context = ReactReduxContext\n} = {}) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (pure !== void 0 && !hasWarnedAboutDeprecatedPureOption) {\n      hasWarnedAboutDeprecatedPureOption = true;\n      warning(\n        'The `pure` option has been removed. `connect` is now always a \"pure/memoized\" component'\n      );\n    }\n  }\n  const Context = context;\n  const initMapStateToProps = mapStateToPropsFactory(mapStateToProps);\n  const initMapDispatchToProps = mapDispatchToPropsFactory(mapDispatchToProps);\n  const initMergeProps = mergePropsFactory(mergeProps);\n  const shouldHandleStateChanges = Boolean(mapStateToProps);\n  const wrapWithConnect = (WrappedComponent) => {\n    if (process.env.NODE_ENV !== \"production\") {\n      const isValid = /* @__PURE__ */ isValidElementType(WrappedComponent);\n      if (!isValid)\n        throw new Error(\n          `You must pass a component to the function returned by connect. Instead received ${stringifyComponent(\n            WrappedComponent\n          )}`\n        );\n    }\n    const wrappedComponentName = WrappedComponent.displayName || WrappedComponent.name || \"Component\";\n    const displayName = `Connect(${wrappedComponentName})`;\n    const selectorFactoryOptions = {\n      shouldHandleStateChanges,\n      displayName,\n      wrappedComponentName,\n      WrappedComponent,\n      // @ts-ignore\n      initMapStateToProps,\n      // @ts-ignore\n      initMapDispatchToProps,\n      initMergeProps,\n      areStatesEqual,\n      areStatePropsEqual,\n      areOwnPropsEqual,\n      areMergedPropsEqual\n    };\n    function ConnectFunction(props) {\n      const [propsContext, reactReduxForwardedRef, wrapperProps] = React.useMemo(() => {\n        const _a = props, { reactReduxForwardedRef: reactReduxForwardedRef2 } = _a, wrapperProps2 = __objRest(_a, [\"reactReduxForwardedRef\"]);\n        return [props.context, reactReduxForwardedRef2, wrapperProps2];\n      }, [props]);\n      const ContextToUse = React.useMemo(() => {\n        let ResultContext = Context;\n        if (propsContext == null ? void 0 : propsContext.Consumer) {\n          if (process.env.NODE_ENV !== \"production\") {\n            const isValid = /* @__PURE__ */ isContextConsumer(\n              // @ts-ignore\n              /* @__PURE__ */ React.createElement(propsContext.Consumer, null)\n            );\n            if (!isValid) {\n              throw new Error(\n                \"You must pass a valid React context consumer as `props.context`\"\n              );\n            }\n            ResultContext = propsContext;\n          }\n        }\n        return ResultContext;\n      }, [propsContext, Context]);\n      const contextValue = React.useContext(ContextToUse);\n      const didStoreComeFromProps = Boolean(props.store) && Boolean(props.store.getState) && Boolean(props.store.dispatch);\n      const didStoreComeFromContext = Boolean(contextValue) && Boolean(contextValue.store);\n      if (process.env.NODE_ENV !== \"production\" && !didStoreComeFromProps && !didStoreComeFromContext) {\n        throw new Error(\n          `Could not find \"store\" in the context of \"${displayName}\". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to ${displayName} in connect options.`\n        );\n      }\n      const store = didStoreComeFromProps ? props.store : contextValue.store;\n      const getServerState = didStoreComeFromContext ? contextValue.getServerState : store.getState;\n      const childPropsSelector = React.useMemo(() => {\n        return finalPropsSelectorFactory(store.dispatch, selectorFactoryOptions);\n      }, [store]);\n      const [subscription, notifyNestedSubs] = React.useMemo(() => {\n        if (!shouldHandleStateChanges)\n          return NO_SUBSCRIPTION_ARRAY;\n        const subscription2 = createSubscription(\n          store,\n          didStoreComeFromProps ? void 0 : contextValue.subscription\n        );\n        const notifyNestedSubs2 = subscription2.notifyNestedSubs.bind(subscription2);\n        return [subscription2, notifyNestedSubs2];\n      }, [store, didStoreComeFromProps, contextValue]);\n      const overriddenContextValue = React.useMemo(() => {\n        if (didStoreComeFromProps) {\n          return contextValue;\n        }\n        return __spreadProps(__spreadValues({}, contextValue), {\n          subscription\n        });\n      }, [didStoreComeFromProps, contextValue, subscription]);\n      const lastChildProps = React.useRef(void 0);\n      const lastWrapperProps = React.useRef(wrapperProps);\n      const childPropsFromStoreUpdate = React.useRef(void 0);\n      const renderIsScheduled = React.useRef(false);\n      const isMounted = React.useRef(false);\n      const latestSubscriptionCallbackError = React.useRef(\n        void 0\n      );\n      useIsomorphicLayoutEffect(() => {\n        isMounted.current = true;\n        return () => {\n          isMounted.current = false;\n        };\n      }, []);\n      const actualChildPropsSelector = React.useMemo(() => {\n        const selector = () => {\n          if (childPropsFromStoreUpdate.current && wrapperProps === lastWrapperProps.current) {\n            return childPropsFromStoreUpdate.current;\n          }\n          return childPropsSelector(store.getState(), wrapperProps);\n        };\n        return selector;\n      }, [store, wrapperProps]);\n      const subscribeForReact = React.useMemo(() => {\n        const subscribe = (reactListener) => {\n          if (!subscription) {\n            return () => {\n            };\n          }\n          return subscribeUpdates(\n            shouldHandleStateChanges,\n            store,\n            subscription,\n            // @ts-ignore\n            childPropsSelector,\n            lastWrapperProps,\n            lastChildProps,\n            renderIsScheduled,\n            isMounted,\n            childPropsFromStoreUpdate,\n            notifyNestedSubs,\n            reactListener\n          );\n        };\n        return subscribe;\n      }, [subscription]);\n      useIsomorphicLayoutEffectWithArgs(captureWrapperProps, [\n        lastWrapperProps,\n        lastChildProps,\n        renderIsScheduled,\n        wrapperProps,\n        childPropsFromStoreUpdate,\n        notifyNestedSubs\n      ]);\n      let actualChildProps;\n      try {\n        actualChildProps = useSyncExternalStore(\n          // TODO We're passing through a big wrapper that does a bunch of extra side effects besides subscribing\n          subscribeForReact,\n          // TODO This is incredibly hacky. We've already processed the store update and calculated new child props,\n          // TODO and we're just passing that through so it triggers a re-render for us rather than relying on `uSES`.\n          actualChildPropsSelector,\n          getServerState ? () => childPropsSelector(getServerState(), wrapperProps) : actualChildPropsSelector\n        );\n      } catch (err) {\n        if (latestSubscriptionCallbackError.current) {\n          ;\n          err.message += `\nThe error may be correlated with this previous error:\n${latestSubscriptionCallbackError.current.stack}\n\n`;\n        }\n        throw err;\n      }\n      useIsomorphicLayoutEffect(() => {\n        latestSubscriptionCallbackError.current = void 0;\n        childPropsFromStoreUpdate.current = void 0;\n        lastChildProps.current = actualChildProps;\n      });\n      const renderedWrappedComponent = React.useMemo(() => {\n        return (\n          // @ts-ignore\n          /* @__PURE__ */ React.createElement(\n            WrappedComponent,\n            __spreadProps(__spreadValues({}, actualChildProps), {\n              ref: reactReduxForwardedRef\n            })\n          )\n        );\n      }, [reactReduxForwardedRef, WrappedComponent, actualChildProps]);\n      const renderedChild = React.useMemo(() => {\n        if (shouldHandleStateChanges) {\n          return /* @__PURE__ */ React.createElement(ContextToUse.Provider, { value: overriddenContextValue }, renderedWrappedComponent);\n        }\n        return renderedWrappedComponent;\n      }, [ContextToUse, renderedWrappedComponent, overriddenContextValue]);\n      return renderedChild;\n    }\n    const _Connect = React.memo(ConnectFunction);\n    const Connect = _Connect;\n    Connect.WrappedComponent = WrappedComponent;\n    Connect.displayName = ConnectFunction.displayName = displayName;\n    if (forwardRef) {\n      const _forwarded = React.forwardRef(\n        function forwardConnectRef(props, ref) {\n          return /* @__PURE__ */ React.createElement(Connect, __spreadProps(__spreadValues({}, props), { reactReduxForwardedRef: ref }));\n        }\n      );\n      const forwarded = _forwarded;\n      forwarded.displayName = displayName;\n      forwarded.WrappedComponent = WrappedComponent;\n      return /* @__PURE__ */ hoistNonReactStatics(forwarded, WrappedComponent);\n    }\n    return /* @__PURE__ */ hoistNonReactStatics(Connect, WrappedComponent);\n  };\n  return wrapWithConnect;\n}\nvar connect_default = connect;\n\n// src/components/Provider.tsx\nfunction Provider({\n  store,\n  context,\n  children,\n  serverState,\n  stabilityCheck = \"once\",\n  identityFunctionCheck = \"once\"\n}) {\n  const contextValue = React.useMemo(() => {\n    const subscription = createSubscription(store);\n    return {\n      store,\n      subscription,\n      getServerState: serverState ? () => serverState : void 0,\n      stabilityCheck,\n      identityFunctionCheck\n    };\n  }, [store, serverState, stabilityCheck, identityFunctionCheck]);\n  const previousState = React.useMemo(() => store.getState(), [store]);\n  useIsomorphicLayoutEffect(() => {\n    const { subscription } = contextValue;\n    subscription.onStateChange = subscription.notifyNestedSubs;\n    subscription.trySubscribe();\n    if (previousState !== store.getState()) {\n      subscription.notifyNestedSubs();\n    }\n    return () => {\n      subscription.tryUnsubscribe();\n      subscription.onStateChange = void 0;\n    };\n  }, [contextValue, previousState]);\n  const Context = context || ReactReduxContext;\n  return /* @__PURE__ */ React.createElement(Context.Provider, { value: contextValue }, children);\n}\nvar Provider_default = Provider;\n\n// src/hooks/useStore.ts\nfunction createStoreHook(context = ReactReduxContext) {\n  const useReduxContext2 = context === ReactReduxContext ? useReduxContext : (\n    // @ts-ignore\n    createReduxContextHook(context)\n  );\n  const useStore2 = () => {\n    const { store } = useReduxContext2();\n    return store;\n  };\n  Object.assign(useStore2, {\n    withTypes: () => useStore2\n  });\n  return useStore2;\n}\nvar useStore = /* @__PURE__ */ createStoreHook();\n\n// src/hooks/useDispatch.ts\nfunction createDispatchHook(context = ReactReduxContext) {\n  const useStore2 = context === ReactReduxContext ? useStore : createStoreHook(context);\n  const useDispatch2 = () => {\n    const store = useStore2();\n    return store.dispatch;\n  };\n  Object.assign(useDispatch2, {\n    withTypes: () => useDispatch2\n  });\n  return useDispatch2;\n}\nvar useDispatch = /* @__PURE__ */ createDispatchHook();\n\n// src/exports.ts\nvar batch = defaultNoopBatch;\n\n// src/index.ts\ninitializeUseSelector(useSyncExternalStoreWithSelector2);\ninitializeConnect(React2.useSyncExternalStore);\nexport {\n  Provider_default as Provider,\n  ReactReduxContext,\n  batch,\n  connect_default as connect,\n  createDispatchHook,\n  createSelectorHook,\n  createStoreHook,\n  shallowEqual,\n  useDispatch,\n  useSelector,\n  useStore\n};\n//# sourceMappingURL=react-redux.legacy-esm.js.map","import PropTypes from 'prop-types';\nimport { createContext, useContext } from 'react';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nimport type { InitialState } from 'flavours/glitch/initial_state';\n\nexport interface IdentityContextType {\n  signedIn: boolean;\n  accountId: string | undefined;\n  disabledAccountId: string | undefined;\n  permissions: number;\n}\n\nexport const identityContextPropShape = PropTypes.shape({\n  signedIn: PropTypes.bool.isRequired,\n  accountId: PropTypes.string,\n  disabledAccountId: PropTypes.string,\n}).isRequired;\n\nexport const createIdentityContext = (state: InitialState) => ({\n  signedIn: !!state.meta.me,\n  accountId: state.meta.me,\n  disabledAccountId: state.meta.disabled_account_id,\n  permissions: state.role?.permissions ?? 0,\n});\n\nexport const IdentityContext = createContext<IdentityContextType>({\n  signedIn: false,\n  permissions: 0,\n  accountId: undefined,\n  disabledAccountId: undefined,\n});\n\nexport const useIdentity = () => useContext(IdentityContext);\n\nexport interface IdentityProps {\n  ref?: unknown;\n  wrappedComponentRef?: unknown;\n}\n\n/* Injects an `identity` props into the wrapped component to be able to use the new context in class components */\nexport function withIdentity<\n  ComponentType extends React.ComponentType<IdentityProps>,\n>(Component: ComponentType) {\n  const displayName = `withIdentity(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <IdentityContext.Consumer>\n        {(context) => {\n          return (\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            <Component\n              {...remainingProps}\n              identity={context}\n              ref={wrappedComponentRef}\n            />\n          );\n        }}\n      </IdentityContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n}\n","import { browserHistory } from 'mastodon/components/router';\n\nimport api from '../api';\n\nimport { ensureComposeIsVisible, setComposeToStatus } from './compose';\nimport { importFetchedStatus, importFetchedStatuses, importFetchedAccount } from './importer';\nimport { deleteFromTimelines } from './timelines';\n\nexport const STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport const STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport const STATUS_FETCH_FAIL    = 'STATUS_FETCH_FAIL';\n\nexport const STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport const STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport const STATUS_DELETE_FAIL    = 'STATUS_DELETE_FAIL';\n\nexport const CONTEXT_FETCH_REQUEST = 'CONTEXT_FETCH_REQUEST';\nexport const CONTEXT_FETCH_SUCCESS = 'CONTEXT_FETCH_SUCCESS';\nexport const CONTEXT_FETCH_FAIL    = 'CONTEXT_FETCH_FAIL';\n\nexport const STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport const STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport const STATUS_MUTE_FAIL    = 'STATUS_MUTE_FAIL';\n\nexport const STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport const STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport const STATUS_UNMUTE_FAIL    = 'STATUS_UNMUTE_FAIL';\n\nexport const STATUS_REVEAL   = 'STATUS_REVEAL';\nexport const STATUS_HIDE     = 'STATUS_HIDE';\nexport const STATUS_COLLAPSE = 'STATUS_COLLAPSE';\n\nexport const REDRAFT = 'REDRAFT';\n\nexport const STATUS_FETCH_SOURCE_REQUEST = 'STATUS_FETCH_SOURCE_REQUEST';\nexport const STATUS_FETCH_SOURCE_SUCCESS = 'STATUS_FETCH_SOURCE_SUCCESS';\nexport const STATUS_FETCH_SOURCE_FAIL    = 'STATUS_FETCH_SOURCE_FAIL';\n\nexport const STATUS_TRANSLATE_REQUEST = 'STATUS_TRANSLATE_REQUEST';\nexport const STATUS_TRANSLATE_SUCCESS = 'STATUS_TRANSLATE_SUCCESS';\nexport const STATUS_TRANSLATE_FAIL    = 'STATUS_TRANSLATE_FAIL';\nexport const STATUS_TRANSLATE_UNDO    = 'STATUS_TRANSLATE_UNDO';\n\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading,\n  };\n}\n\nexport function fetchStatus(id, forceFetch = false) {\n  return (dispatch, getState) => {\n    const skipLoading = !forceFetch && getState().getIn(['statuses', id], null) !== null;\n\n    dispatch(fetchContext(id));\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n\n    api().get(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(error => {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n}\n\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading,\n  };\n}\n\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true,\n  };\n}\n\nexport function redraft(status, raw_text) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text,\n  };\n}\n\nexport const editStatus = (id) => (dispatch, getState) => {\n  let status = getState().getIn(['statuses', id]);\n\n  if (status.get('poll')) {\n    status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n  }\n\n  dispatch(fetchStatusSourceRequest());\n\n  api().get(`/api/v1/statuses/${id}/source`).then(response => {\n    dispatch(fetchStatusSourceSuccess());\n    ensureComposeIsVisible(getState);\n    dispatch(setComposeToStatus(status, response.data.text, response.data.spoiler_text));\n  }).catch(error => {\n    dispatch(fetchStatusSourceFail(error));\n  });\n};\n\nexport const fetchStatusSourceRequest = () => ({\n  type: STATUS_FETCH_SOURCE_REQUEST,\n});\n\nexport const fetchStatusSourceSuccess = () => ({\n  type: STATUS_FETCH_SOURCE_SUCCESS,\n});\n\nexport const fetchStatusSourceFail = error => ({\n  type: STATUS_FETCH_SOURCE_FAIL,\n  error,\n});\n\nexport function deleteStatus(id, withRedraft = false) {\n  return (dispatch, getState) => {\n    let status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n\n    api().delete(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n      dispatch(importFetchedAccount(response.data.account));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text));\n        ensureComposeIsVisible(getState);\n      }\n    }).catch(error => {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n}\n\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id,\n  };\n}\n\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id,\n  };\n}\n\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error,\n  };\n}\n\nexport const updateStatus = status => dispatch =>\n  dispatch(importFetchedStatus(status));\n\nexport function fetchContext(id) {\n  return (dispatch) => {\n    dispatch(fetchContextRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/context`).then(response => {\n      dispatch(importFetchedStatuses(response.data.ancestors.concat(response.data.descendants)));\n      dispatch(fetchContextSuccess(id, response.data.ancestors, response.data.descendants));\n\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        dispatch(deleteFromTimelines(id));\n      }\n\n      dispatch(fetchContextFail(id, error));\n    });\n  };\n}\n\nexport function fetchContextRequest(id) {\n  return {\n    type: CONTEXT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchContextSuccess(id, ancestors, descendants) {\n  return {\n    type: CONTEXT_FETCH_SUCCESS,\n    id,\n    ancestors,\n    descendants,\n    statuses: ancestors.concat(descendants),\n  };\n}\n\nexport function fetchContextFail(id, error) {\n  return {\n    type: CONTEXT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function muteStatus(id) {\n  return (dispatch) => {\n    dispatch(muteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/mute`).then(() => {\n      dispatch(muteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n}\n\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function unmuteStatus(id) {\n  return (dispatch) => {\n    dispatch(unmuteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/unmute`).then(() => {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n}\n\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids,\n  };\n}\n\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids,\n  };\n}\n\nexport function toggleStatusSpoilers(statusId) {\n  return (dispatch, getState) => {\n    const status = getState().statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    if (status.get('hidden')) {\n      dispatch(revealStatus(statusId));\n    } else {\n      dispatch(hideStatus(statusId));\n    }\n  };\n}\n\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed,\n  };\n}\n\nexport const translateStatus = id => (dispatch) => {\n  dispatch(translateStatusRequest(id));\n\n  api().post(`/api/v1/statuses/${id}/translate`).then(response => {\n    dispatch(translateStatusSuccess(id, response.data));\n  }).catch(error => {\n    dispatch(translateStatusFail(id, error));\n  });\n};\n\nexport const translateStatusRequest = id => ({\n  type: STATUS_TRANSLATE_REQUEST,\n  id,\n});\n\nexport const translateStatusSuccess = (id, translation) => ({\n  type: STATUS_TRANSLATE_SUCCESS,\n  id,\n  translation,\n});\n\nexport const translateStatusFail = (id, error) => ({\n  type: STATUS_TRANSLATE_FAIL,\n  id,\n  error,\n});\n\nexport const undoStatusTranslation = (id, pollId) => ({\n  type: STATUS_TRANSLATE_UNDO,\n  id,\n  pollId,\n});\n\nexport const navigateToStatus = (statusId) => {\n  return (_dispatch, getState) => {\n    const state = getState();\n    const accountId = state.statuses.getIn([statusId, 'account']);\n    const acct = state.accounts.getIn([accountId, 'acct']);\n\n    if (acct) {\n      browserHistory.push(`/@${acct}/${statusId}`);\n    }\n  };\n};\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgCheckBoxOutlineBlank(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Z\"\n  })));\n}\nexport default SvgCheckBoxOutlineBlank;","var q=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\",\"#\",\"$\",\"%\",\"*\",\"+\",\",\",\"-\",\".\",\":\",\";\",\"=\",\"?\",\"@\",\"[\",\"]\",\"^\",\"_\",\"{\",\"|\",\"}\",\"~\"],x=t=>{let e=0;for(let r=0;r<t.length;r++){let n=t[r],l=q.indexOf(n);e=e*83+l}return e},p=(t,e)=>{var r=\"\";for(let n=1;n<=e;n++){let l=Math.floor(t)/Math.pow(83,e-n)%83;r+=q[Math.floor(l)]}return r};var f=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},h=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},F=t=>t<0?-1:1,M=(t,e)=>F(t)*Math.pow(Math.abs(t),e);var d=class extends Error{constructor(e){super(e),this.name=\"ValidationError\",this.message=e}};var C=t=>{if(!t||t.length<6)throw new d(\"The blurhash string must be at least 6 characters\");let e=x(t[0]),r=Math.floor(e/9)+1,n=e%9+1;if(t.length!==4+2*n*r)throw new d(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*n*r}`)},N=t=>{try{C(t)}catch(e){return{result:!1,errorReason:e.message}}return{result:!0}},z=t=>{let e=t>>16,r=t>>8&255,n=t&255;return[f(e),f(r),f(n)]},L=(t,e)=>{let r=Math.floor(t/361),n=Math.floor(t/19)%19,l=t%19;return[M((r-9)/9,2)*e,M((n-9)/9,2)*e,M((l-9)/9,2)*e]},U=(t,e,r,n)=>{C(t),n=n|1;let l=x(t[0]),m=Math.floor(l/9)+1,b=l%9+1,i=(x(t[1])+1)/166,u=new Array(b*m);for(let o=0;o<u.length;o++)if(o===0){let a=x(t.substring(2,6));u[o]=z(a)}else{let a=x(t.substring(4+o*2,6+o*2));u[o]=L(a,i*n)}let c=e*4,s=new Uint8ClampedArray(c*r);for(let o=0;o<r;o++)for(let a=0;a<e;a++){let y=0,B=0,R=0;for(let w=0;w<m;w++)for(let P=0;P<b;P++){let G=Math.cos(Math.PI*a*P/e)*Math.cos(Math.PI*o*w/r),T=u[P+w*b];y+=T[0]*G,B+=T[1]*G,R+=T[2]*G}let V=h(y),I=h(B),E=h(R);s[4*a+0+o*c]=V,s[4*a+1+o*c]=I,s[4*a+2+o*c]=E,s[4*a+3+o*c]=255}return s},j=U;var A=4,D=(t,e,r,n)=>{let l=0,m=0,b=0,g=e*A;for(let u=0;u<e;u++){let c=A*u;for(let s=0;s<r;s++){let o=c+s*g,a=n(u,s);l+=a*f(t[o]),m+=a*f(t[o+1]),b+=a*f(t[o+2])}}let i=1/(e*r);return[l*i,m*i,b*i]},$=t=>{let e=h(t[0]),r=h(t[1]),n=h(t[2]);return(e<<16)+(r<<8)+n},H=(t,e)=>{let r=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[0]/e,.5)*9+9.5)))),n=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[1]/e,.5)*9+9.5)))),l=Math.floor(Math.max(0,Math.min(18,Math.floor(M(t[2]/e,.5)*9+9.5))));return r*19*19+n*19+l},O=(t,e,r,n,l)=>{if(n<1||n>9||l<1||l>9)throw new d(\"BlurHash must have between 1 and 9 components\");if(e*r*4!==t.length)throw new d(\"Width and height must match the pixels array\");let m=[];for(let s=0;s<l;s++)for(let o=0;o<n;o++){let a=o==0&&s==0?1:2,y=D(t,e,r,(B,R)=>a*Math.cos(Math.PI*o*B/e)*Math.cos(Math.PI*s*R/r));m.push(y)}let b=m[0],g=m.slice(1),i=\"\",u=n-1+(l-1)*9;i+=p(u,1);let c;if(g.length>0){let s=Math.max(...g.map(a=>Math.max(...a))),o=Math.floor(Math.max(0,Math.min(82,Math.floor(s*166-.5))));c=(o+1)/166,i+=p(o,1)}else c=1,i+=p(0,1);return i+=p($(b),4),g.forEach(s=>{i+=p(H(s,c),2)}),i},S=O;export{d as ValidationError,j as decode,S as encode,N as isBlurhashValid};\n//# sourceMappingURL=index.js.map","function n(n,r,t){return{r:255*t(n.r/255,r.r/255),g:255*t(n.g/255,r.g/255),b:255*t(n.b/255,r.b/255)}}function r(n,r){return r}function t(n,r){return n*r}function u(n,r){return n+r-n*r}function i(n,r){return a(r,n)}function o(n,r){return Math.min(n,r)}function e(n,r){return Math.min(Math.max(n,r),1)}function c(n,r){return 0===n?0:1===r?1:Math.min(1,n/(1-r))}function f(n,r){return 1===n?1:0===r?0:1-Math.min(1,(1-n)/r)}function a(n,r){return r<=.5?t(n,2*r):u(n,2*r-1)}function b(n,r){return r<=.5?n-(1-2*r)*n*(1-n):n+(2*r-1)*((n<=.25?((16*n-12)*n+4)*n:Math.sqrt(n))-n)}function g(n,r){return Math.abs(n-r)}function h(n,r){return n+r-2*n*r}function M(n,r,t){return Math.min(Math.max(n||0,r),t)}function m(n){return{r:M(n.r,0,255),g:M(n.g,0,255),b:M(n.b,0,255),a:M(n.a,0,1)}}function d(n){return{r:255*n.r,g:255*n.g,b:255*n.b,a:n.a}}function p(n){return{r:n.r/255,g:n.g/255,b:n.b/255,a:n.a}}function v(n,r){void 0===r&&(r=0);var t=Math.pow(10,r);return{r:Math.round(n.r*t)/t,g:Math.round(n.g*t)/t,b:Math.round(n.b*t)/t,a:n.a}}function x(n,r,t,u,i,o){return(1-r/t)*u+r/t*Math.round((1-n)*i+n*o)}function O(n,r,t,u,i){void 0===i&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(n=d(n),r=d(r)),n=m(n);var o=(r=m(r)).a+n.a-r.a*n.a,e=t(n,r,u),c=m({r:x(n.a,r.a,o,n.r,r.r,e.r),g:x(n.a,r.a,o,n.g,r.g,e.g),b:x(n.a,r.a,o,n.b,r.b,e.b),a:o});return c=i.unitOutput?p(c):i.roundOutput?v(c):function(n){return v(n,9)}(c),c}function s(n,r,t){return d(t(p(n),p(r)))}function I(n){return.3*n.r+.59*n.g+.11*n.b}function q(n,r){var t=r-I(n);return function(n){var r=I(n),t=n.r,u=n.g,i=n.b,o=Math.min(t,u,i),e=Math.max(t,u,i);function c(n){return r+(n-r)*r/(r-o)}function f(n){return r+(n-r)*(1-r)/(e-r)}return o<0&&(t=c(t),u=c(u),i=c(i)),e>1&&(t=f(t),u=f(u),i=f(i)),{r:t,g:u,b:i}}({r:n.r+t,g:n.g+t,b:n.b+t})}function w(n){return Math.max(n.r,n.g,n.b)-Math.min(n.r,n.g,n.b)}function j(n,r){var t=[\"r\",\"g\",\"b\"].sort(function(r,t){return n[r]-n[t]}),u=t[0],i=t[1],o=t[2],e={r:n.r,g:n.g,b:n.b};return e[o]>e[u]?(e[i]=(e[i]-e[u])*r/(e[o]-e[u]),e[o]=r):e[i]=e[o]=0,e[u]=0,e}function k(n,r){return q(j(r,w(n)),I(n))}function l(n,r){return q(j(n,w(r)),I(n))}function y(n,r){return q(r,I(n))}function z(n,r){return q(n,I(r))}function A(t,u){return O(t,u,n,r)}function B(r,u){return O(r,u,n,t)}function C(r,t){return O(r,t,n,u)}function D(r,t){return O(r,t,n,i)}function E(r,t){return O(r,t,n,o)}function F(r,t){return O(r,t,n,e)}function G(r,t){return O(r,t,n,c)}function H(r,t){return O(r,t,n,f)}function J(r,t){return O(r,t,n,a)}function K(r,t){return O(r,t,n,b)}function L(r,t){return O(r,t,n,g)}function N(r,t){return O(r,t,n,h)}function P(n,r){return O(n,r,s,k)}function Q(n,r){return O(n,r,s,l)}function R(n,r){return O(n,r,s,y)}function S(n,r){return O(n,r,s,z)}export{R as color,H as colorBurn,G as colorDodge,E as darken,L as difference,N as exclusion,J as hardLight,P as hue,F as lighten,S as luminosity,B as multiply,A as normal,D as overlay,Q as saturation,C as screen,K as softLight};\n//# sourceMappingURL=index.modern.js.map\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgDownload(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z\"\n  })));\n}\nexport default SvgDownload;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgFullscreen(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M120-120v-200h80v120h120v80H120Zm520 0v-80h120v-120h80v200H640ZM120-640v-200h200v80H200v120h-80Zm640 0v-120H640v-80h200v200h-80Z\"\n  })));\n}\nexport default SvgFullscreen;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.combineReducers = undefined;\n\nvar _combineReducers2 = require('./combineReducers');\n\nvar _combineReducers3 = _interopRequireDefault(_combineReducers2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.combineReducers = _combineReducers3.default;\n//# sourceMappingURL=index.js.map","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.production.min.js');\n} else {\n  module.exports = require('./cjs/use-sync-external-store-with-selector.development.js');\n}\n","import { createAsyncThunk } from '@reduxjs/toolkit';\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport type { BaseThunkAPI } from '@reduxjs/toolkit/dist/createAsyncThunk';\n\nimport type { AppDispatch, RootState } from './store';\n\nexport const useAppDispatch = useDispatch.withTypes<AppDispatch>();\nexport const useAppSelector = useSelector.withTypes<RootState>();\n\nexport interface AsyncThunkRejectValue {\n  skipAlert?: boolean;\n  skipNotFound?: boolean;\n  error?: unknown;\n}\n\ninterface AppMeta {\n  skipLoading?: boolean;\n}\n\nexport const createAppAsyncThunk = createAsyncThunk.withTypes<{\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n}>();\n\ntype AppThunkApi = Pick<\n  BaseThunkAPI<\n    RootState,\n    unknown,\n    AppDispatch,\n    AsyncThunkRejectValue,\n    AppMeta,\n    AppMeta\n  >,\n  'getState' | 'dispatch'\n>;\n\ninterface AppThunkOptions {\n  skipLoading?: boolean;\n}\n\nconst createBaseAsyncThunk = createAsyncThunk.withTypes<{\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n  fulfilledMeta: AppMeta;\n  rejectedMeta: AppMeta;\n}>();\n\nexport function createThunk<Arg = void, Returned = void>(\n  name: string,\n  creator: (arg: Arg, api: AppThunkApi) => Returned | Promise<Returned>,\n  options: AppThunkOptions = {},\n) {\n  return createBaseAsyncThunk(\n    name,\n    async (\n      arg: Arg,\n      { getState, dispatch, fulfillWithValue, rejectWithValue },\n    ) => {\n      try {\n        const result = await creator(arg, { dispatch, getState });\n\n        return fulfillWithValue(result, {\n          skipLoading: options.skipLoading,\n        });\n      } catch (error) {\n        return rejectWithValue({ error }, { skipLoading: true });\n      }\n    },\n    {\n      getPendingMeta() {\n        if (options.skipLoading) return { skipLoading: true };\n        return {};\n      },\n    },\n  );\n}\n\nconst discardLoadDataInPayload = Symbol('discardLoadDataInPayload');\ntype DiscardLoadData = typeof discardLoadDataInPayload;\n\ntype OnData<ActionArg, LoadDataResult, ReturnedData> = (\n  data: LoadDataResult,\n  api: AppThunkApi & {\n    actionArg: ActionArg;\n    discardLoadData: DiscardLoadData;\n  },\n) => ReturnedData | DiscardLoadData | Promise<ReturnedData | DiscardLoadData>;\n\ntype LoadData<Args, LoadDataResult> = (\n  args: Args,\n  api: AppThunkApi,\n) => Promise<LoadDataResult>;\n\ntype ArgsType = Record<string, unknown> | undefined;\n\n// Overload when there is no `onData` method, the payload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: (args: Args) => Promise<LoadDataResult>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when the `onData` method returns discardLoadDataInPayload, then the payload is empty\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, DiscardLoadData>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, void>>;\n\n// Overload when the `onData` method returns nothing, then the mayload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?: AppThunkOptions | OnData<Args, LoadDataResult, void>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when there is an `onData` method returning something\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, Returned>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, Returned>>;\n\n/**\n * This function creates a Redux Thunk that handles loading data asynchronously (usually from the API), dispatching `pending`, `fullfilled` and `rejected` actions.\n *\n * You can run a callback on the `onData` results to either dispatch side effects or modify the payload.\n *\n * It is a wrapper around RTK's [`createAsyncThunk`](https://redux-toolkit.js.org/api/createAsyncThunk)\n * @param name Prefix for the actions types\n * @param loadData Function that loads the data. It's (object) argument will become the thunk's argument\n * @param onDataOrThunkOptions\n *   Callback called on the results from `loadData`.\n *\n *   First argument will be the return from `loadData`.\n *\n *   Second argument is an object with: `dispatch`, `getState` and `discardLoadData`.\n *   It can return:\n *   - `undefined` (or no explicit return), meaning that the `onData` results will be the payload\n *   - `discardLoadData` to discard the `onData` results and return an empty payload\n *   - anything else, which will be the payload\n *\n *   You can also omit this parameter and pass `thunkOptions` directly\n * @param maybeThunkOptions\n *   Additional Mastodon specific options for the thunk. Currently supports:\n *   - `skipLoading` to avoid showing the loading bar when the request is in progress\n * @returns The created thunk\n */\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, Returned>,\n  maybeThunkOptions?: AppThunkOptions,\n) {\n  let onData: OnData<Args, LoadDataResult, Returned> | undefined;\n  let thunkOptions: AppThunkOptions | undefined;\n\n  if (typeof onDataOrThunkOptions === 'function') onData = onDataOrThunkOptions;\n  else if (typeof onDataOrThunkOptions === 'object')\n    thunkOptions = onDataOrThunkOptions;\n\n  if (maybeThunkOptions) {\n    thunkOptions = maybeThunkOptions;\n  }\n\n  return createThunk<Args, Returned>(\n    name,\n    async (arg, { getState, dispatch }) => {\n      const data = await loadData(arg, {\n        dispatch,\n        getState,\n      });\n\n      if (!onData) return data as Returned;\n\n      const result = await onData(data, {\n        dispatch,\n        getState,\n        discardLoadData: discardLoadDataInPayload,\n        actionArg: arg,\n      });\n\n      // if there is no return in `onData`, we return the `onData` result\n      if (typeof result === 'undefined') return data as Returned;\n      // the user explicitely asked to discard the payload\n      else if (result === discardLoadDataInPayload)\n        return undefined as Returned;\n      else return result;\n    },\n    thunkOptions,\n  );\n}\n","export const HEIGHT_CACHE_SET = 'HEIGHT_CACHE_SET';\nexport const HEIGHT_CACHE_CLEAR = 'HEIGHT_CACHE_CLEAR';\n\nexport function setHeight (key, id, height) {\n  return {\n    type: HEIGHT_CACHE_SET,\n    key,\n    id,\n    height,\n  };\n}\n\nexport function clearHeight () {\n  return {\n    type: HEIGHT_CACHE_CLEAR,\n  };\n}\n","export const HEIGHT_CACHE_SET = 'HEIGHT_CACHE_SET';\nexport const HEIGHT_CACHE_CLEAR = 'HEIGHT_CACHE_CLEAR';\n\nexport function setHeight (key, id, height) {\n  return {\n    type: HEIGHT_CACHE_SET,\n    key,\n    id,\n    height,\n  };\n}\n\nexport function clearHeight () {\n  return {\n    type: HEIGHT_CACHE_CLEAR,\n  };\n}\n","export const toServerSideType = (columnType: string) => {\n  switch (columnType) {\n    case 'home':\n    case 'notifications':\n    case 'public':\n    case 'thread':\n    case 'account':\n      return columnType;\n    default:\n      if (columnType.includes('list:')) {\n        return 'home';\n      } else {\n        return 'public'; // community, account, hashtag\n      }\n  }\n};\n","import { useCallback, useState } from 'react';\n\nimport { TransitionMotion, spring } from 'react-motion';\n\nimport { reduceMotion } from '../initial_state';\n\nimport { ShortNumber } from './short_number';\n\nconst obfuscatedCount = (count: number) => {\n  if (count < 0) {\n    return 0;\n  } else if (count <= 1) {\n    return count;\n  } else {\n    return '1+';\n  }\n};\n\ninterface Props {\n  value: number;\n  obfuscate?: boolean;\n}\nexport const AnimatedNumber: React.FC<Props> = ({ value, obfuscate }) => {\n  const [previousValue, setPreviousValue] = useState(value);\n  const [direction, setDirection] = useState<1 | -1>(1);\n\n  if (previousValue !== value) {\n    setPreviousValue(value);\n    setDirection(value > previousValue ? 1 : -1);\n  }\n\n  const willEnter = useCallback(() => ({ y: -1 * direction }), [direction]);\n  const willLeave = useCallback(\n    () => ({ y: spring(1 * direction, { damping: 35, stiffness: 400 }) }),\n    [direction],\n  );\n\n  if (reduceMotion) {\n    return obfuscate ? (\n      <>{obfuscatedCount(value)}</>\n    ) : (\n      <ShortNumber value={value} />\n    );\n  }\n\n  const styles = [\n    {\n      key: `${value}`,\n      data: value,\n      style: { y: spring(0, { damping: 35, stiffness: 400 }) },\n    },\n  ];\n\n  return (\n    <TransitionMotion\n      styles={styles}\n      willEnter={willEnter}\n      willLeave={willLeave}\n    >\n      {(items) => (\n        <span className='animated-number'>\n          {items.map(({ key, data, style }) => (\n            <span\n              key={key}\n              style={{\n                position:\n                  direction * (style.y ?? 0) > 0 ? 'absolute' : 'static',\n                transform: `translateY(${(style.y ?? 0) * 100}%)`,\n              }}\n            >\n              {obfuscate ? (\n                obfuscatedCount(data as number)\n              ) : (\n                <ShortNumber value={data as number} />\n              )}\n            </span>\n          ))}\n        </span>\n      )}\n    </TransitionMotion>\n  );\n};\n","export function recoverHashtags (recognizedTags, text) {\n  return recognizedTags.map(tag => {\n    const re = new RegExp(`(?:^|[^/)\\\\w])#(${tag.name})`, 'i');\n    const matched_hashtag = text.match(re);\n    return matched_hashtag ? matched_hashtag[1] : null;\n  },\n  ).filter(x => x !== null);\n}\n","import { expandSpoilers } from 'flavours/glitch/initial_state';\n\nfunction _autoUnfoldCW(spoiler_text, skip_unfold_regex) {\n  if (!expandSpoilers)\n    return false;\n\n  if (!skip_unfold_regex)\n    return true;\n\n  let regex = null;\n\n  try {\n    regex = new RegExp(skip_unfold_regex.trim(), 'i');\n  } catch (e) {\n    // Bad regex, skip filters\n    return true;\n  }\n\n  return !regex.test(spoiler_text);\n}\n\nexport function autoHideCW(settings, spoiler_text) {\n  return !_autoUnfoldCW(spoiler_text, settings.getIn(['content_warnings', 'filter']));\n}\n\nexport function autoUnfoldCW(settings, status) {\n  if (!status)\n    return false;\n\n  return _autoUnfoldCW(status.get('spoiler_text'), settings.getIn(['content_warnings', 'filter']));\n}\n","// The output of this module is designed to mimic emoji-mart's\n// \"data\" object, such that we can use it for a light version of emoji-mart's\n// emojiIndex.search functionality.\nimport type { BaseEmoji } from 'emoji-mart';\nimport type { Emoji } from 'emoji-mart/dist-es/utils/data';\n\nimport type { Search, ShortCodesToEmojiData } from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToUnifiedName } from './unicode_to_unified_name';\n\ntype Emojis = {\n  [key in NonNullable<keyof ShortCodesToEmojiData>]: {\n    native: BaseEmoji['native'];\n    search: Search;\n    short_names: Emoji['short_names'];\n    unified: Emoji['unified'];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  skins,\n  categories,\n  short_names,\n  _emojisWithoutShortCodes,\n] = emojiCompressed;\n\nconst emojis: Emojis = {};\n\n// decompress\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  const emojiData = shortCodesToEmojiData[shortCode];\n  if (!emojiData) return;\n\n  const [_filenameData, searchData] = emojiData;\n  const [native, short_names, search, unified] = searchData;\n\n  emojis[shortCode] = {\n    native,\n    search,\n    short_names: short_names ? [shortCode].concat(short_names) : undefined,\n    unified: unified ?? unicodeToUnifiedName(native),\n  };\n});\n\nexport { emojis, skins, categories, short_names };\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/index.js\n\nimport * as data from './emoji_mart_data_light';\n\nconst buildSearch = (data) => {\n  const search = [];\n\n  let addToSearch = (strings, split) => {\n    if (!strings) {\n      return;\n    }\n\n    (Array.isArray(strings) ? strings : [strings]).forEach((string) => {\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach((s) => {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) === -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(data.short_names, true);\n  addToSearch(data.name, true);\n  addToSearch(data.keywords, false);\n  addToSearch(data.emoticons, false);\n\n  return search.join(',');\n};\n\nconst _String = String;\n\nconst stringFromCodePoint = _String.fromCodePoint || function () {\n  let MAX_SIZE = 0x4000;\n  let codeUnits = [];\n  let highSurrogate;\n  let lowSurrogate;\n  let index = -1;\n  let length = arguments.length;\n  if (!length) {\n    return '';\n  }\n  let result = '';\n  while (++index < length) {\n    let codePoint = Number(arguments[index]);\n    if (\n      !isFinite(codePoint) ||       // `NaN`, `+Infinity`, or `-Infinity`\n      codePoint < 0 ||              // not a valid Unicode code point\n      codePoint > 0x10FFFF ||       // not a valid Unicode code point\n      Math.floor(codePoint) !== codePoint // not an integer\n    ) {\n      throw RangeError('Invalid code point: ' + codePoint);\n    }\n    if (codePoint <= 0xFFFF) { // BMP code point\n      codeUnits.push(codePoint);\n    } else { // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xD800;\n      lowSurrogate = (codePoint % 0x400) + 0xDC00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n  return result;\n};\n\n\nconst _JSON = JSON;\n\nconst COLONS_REGEX = /^(?::([^:]+):)(?::skin-tone-(\\d):)?$/;\nconst SKINS = [\n  '1F3FA', '1F3FB', '1F3FC',\n  '1F3FD', '1F3FE', '1F3FF',\n];\n\nfunction unifiedToNative(unified) {\n  let unicodes = unified.split('-'),\n    codePoints = unicodes.map((u) => `0x${u}`);\n\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  let { name, short_names, skin_tone, skin_variations, emoticons, unified, custom, imageUrl } = emoji,\n    id = emoji.id || short_names[0],\n    colons = `:${id}:`;\n\n  if (custom) {\n    return {\n      id,\n      name,\n      colons,\n      emoticons,\n      custom,\n      imageUrl,\n    };\n  }\n\n  if (skin_tone) {\n    colons += `:skin-tone-${skin_tone}:`;\n  }\n\n  return {\n    id,\n    name,\n    colons,\n    emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    native: unifiedToNative(unified),\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData(...arguments));\n}\n\nfunction getData(emoji, skin, set) {\n  let emojiData = {};\n\n  if (typeof emoji === 'string') {\n    let matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2]);\n      }\n    }\n\n    if (Object.hasOwn(data.short_names, emoji)) {\n      emoji = data.short_names[emoji];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji)) {\n      emojiData = data.emojis[emoji];\n    }\n  } else if (emoji.id) {\n    if (Object.hasOwn(data.short_names, emoji.id)) {\n      emoji.id = data.short_names[emoji.id];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin = skin || emoji.skin;\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons = emojiData.emoticons || [];\n  emojiData.variations = emojiData.variations || [];\n\n  if (emojiData.skin_variations && skin > 1 && set) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n\n    let skinKey = SKINS[skin - 1],\n      variationData = emojiData.skin_variations[skinKey];\n\n    if (!variationData.variations && emojiData.variations) {\n      delete emojiData.variations;\n    }\n\n    if (variationData[`has_img_${set}`]) {\n      emojiData.skin_tone = skin;\n\n      for (let k in variationData) {\n        let v = variationData[k];\n        emojiData[k] = v;\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction uniq(arr) {\n  return arr.reduce((acc, item) => {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  const uniqA = uniq(a);\n  const uniqB = uniq(b);\n\n  return uniqA.filter(item => uniqB.indexOf(item) >= 0);\n}\n\nfunction deepMerge(a, b) {\n  let o = {};\n\n  for (let key in a) {\n    let originalValue = a[key],\n      value = originalValue;\n\n    if (Object.hasOwn(b, key)) {\n      value = b[key];\n    }\n\n    if (typeof value === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n}\n\n// https://github.com/sonicdoe/measure-scrollbar\nfunction measureScrollbar() {\n  const div = document.createElement('div');\n\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n\n  document.body.appendChild(div);\n  const scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n\n  return scrollbarWidth;\n}\n\nexport {\n  getData,\n  getSanitizedData,\n  uniq,\n  intersect,\n  deepMerge,\n  unifiedToNative,\n  measureScrollbar,\n};\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/emoji-index.js\n\nimport * as data from './emoji_mart_data_light';\nimport { getData, getSanitizedData, uniq, intersect } from './emoji_utils';\n\nlet originalPool = {};\nlet index = {};\nlet emojisList = {};\nlet emoticonsList = {};\nlet customEmojisList = [];\n\nfor (let emoji in data.emojis) {\n  let emojiData = data.emojis[emoji];\n  let { short_names, emoticons } = emojiData;\n  let id = short_names[0];\n\n  if (emoticons) {\n    emoticons.forEach(emoticon => {\n      if (emoticonsList[emoticon]) {\n        return;\n      }\n\n      emoticonsList[emoticon] = id;\n    });\n  }\n\n  emojisList[id] = getSanitizedData(id);\n  originalPool[id] = emojiData;\n}\n\nfunction clearCustomEmojis(pool) {\n  customEmojisList.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    delete pool[emojiId];\n    delete emojisList[emojiId];\n  });\n}\n\nfunction addCustomToPool(custom, pool) {\n  if (customEmojisList.length) clearCustomEmojis(pool);\n\n  custom.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    if (emojiId && !pool[emojiId]) {\n      pool[emojiId] = getData(emoji);\n      emojisList[emojiId] = getSanitizedData(emoji);\n    }\n  });\n\n  customEmojisList = custom;\n  index = {};\n}\n\nfunction search(value, { emojisToShowFilter, maxResults, include, exclude, custom } = {}) {\n  if (custom !== undefined) {\n    if (customEmojisList !== custom)\n      addCustomToPool(custom, originalPool);\n  } else {\n    custom = [];\n  }\n\n  maxResults = maxResults || 75;\n  include = include || [];\n  exclude = exclude || [];\n\n  let results = null,\n    pool = originalPool;\n\n  if (value.length) {\n    if (value === '-' || value === '-1') {\n      return [emojisList['-1']];\n    }\n\n    let values = value.toLowerCase().split(/[\\s|,\\-_]+/),\n      allResults = [];\n\n    if (values.length > 2) {\n      values = [values[0], values[1]];\n    }\n\n    if (include.length || exclude.length) {\n      pool = {};\n\n      data.categories.forEach(category => {\n        let isIncluded = include && include.length ? include.indexOf(category.name.toLowerCase()) > -1 : true;\n        let isExcluded = exclude && exclude.length ? exclude.indexOf(category.name.toLowerCase()) > -1 : false;\n        if (!isIncluded || isExcluded) {\n          return;\n        }\n\n        category.emojis.forEach(emojiId => pool[emojiId] = data.emojis[emojiId]);\n      });\n\n      if (custom.length) {\n        let customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n        let customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n        if (customIsIncluded && !customIsExcluded) {\n          addCustomToPool(custom, pool);\n        }\n      }\n    }\n\n    const searchValue = (value) => {\n      let aPool = pool,\n        aIndex = index,\n        length = 0;\n\n      for (let charIndex = 0; charIndex < value.length; charIndex++) {\n        const char = value[charIndex];\n        length++;\n\n        aIndex[char] = aIndex[char] || {};\n        aIndex = aIndex[char];\n\n        if (!aIndex.results) {\n          let scores = {};\n\n          aIndex.results = [];\n          aIndex.pool = {};\n\n          for (let id in aPool) {\n            let emoji = aPool[id],\n              { search } = emoji,\n              sub = value.slice(0, length),\n              subIndex = search.indexOf(sub);\n\n            if (subIndex !== -1) {\n              let score = subIndex + 1;\n              if (sub === id) score = 0;\n\n              aIndex.results.push(emojisList[id]);\n              aIndex.pool[id] = emoji;\n\n              scores[id] = score;\n            }\n          }\n\n          aIndex.results.sort((a, b) => {\n            let aScore = scores[a.id],\n              bScore = scores[b.id];\n\n            return aScore - bScore;\n          });\n        }\n\n        aPool = aIndex.pool;\n      }\n\n      return aIndex.results;\n    };\n\n    if (values.length > 1) {\n      results = searchValue(value);\n    } else {\n      results = [];\n    }\n\n    allResults = values.map(searchValue).filter(a => a);\n\n    if (allResults.length > 1) {\n      allResults = intersect.apply(null, allResults);\n    } else if (allResults.length) {\n      allResults = allResults[0];\n    }\n\n    results = uniq(results.concat(allResults));\n  }\n\n  if (results) {\n    if (emojisToShowFilter) {\n      results = results.filter((result) => emojisToShowFilter(data.emojis[result.id]));\n    }\n\n    if (results && results.length > maxResults) {\n      results = results.slice(0, maxResults);\n    }\n  }\n\n  return results;\n}\n\nexport { search };\n","// The output of this module is designed to mimic emoji-mart's\n// \"data\" object, such that we can use it for a light version of emoji-mart's\n// emojiIndex.search functionality.\nimport type { BaseEmoji } from 'emoji-mart';\nimport type { Emoji } from 'emoji-mart/dist-es/utils/data';\n\nimport type { Search, ShortCodesToEmojiData } from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToUnifiedName } from './unicode_to_unified_name';\n\ntype Emojis = {\n  [key in NonNullable<keyof ShortCodesToEmojiData>]: {\n    native: BaseEmoji['native'];\n    search: Search;\n    short_names: Emoji['short_names'];\n    unified: Emoji['unified'];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  skins,\n  categories,\n  short_names,\n  _emojisWithoutShortCodes,\n] = emojiCompressed;\n\nconst emojis: Emojis = {};\n\n// decompress\nObject.keys(shortCodesToEmojiData).forEach((shortCode) => {\n  const emojiData = shortCodesToEmojiData[shortCode];\n  if (!emojiData) return;\n\n  const [_filenameData, searchData] = emojiData;\n  const [native, short_names, search, unified] = searchData;\n\n  emojis[shortCode] = {\n    native,\n    search,\n    short_names: short_names ? [shortCode].concat(short_names) : undefined,\n    unified: unified ?? unicodeToUnifiedName(native),\n  };\n});\n\nexport { emojis, skins, categories, short_names };\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/index.js\n\nimport * as data from './emoji_mart_data_light';\n\nconst buildSearch = (data) => {\n  const search = [];\n\n  let addToSearch = (strings, split) => {\n    if (!strings) {\n      return;\n    }\n\n    (Array.isArray(strings) ? strings : [strings]).forEach((string) => {\n      (split ? string.split(/[-|_|\\s]+/) : [string]).forEach((s) => {\n        s = s.toLowerCase();\n\n        if (search.indexOf(s) === -1) {\n          search.push(s);\n        }\n      });\n    });\n  };\n\n  addToSearch(data.short_names, true);\n  addToSearch(data.name, true);\n  addToSearch(data.keywords, false);\n  addToSearch(data.emoticons, false);\n\n  return search.join(',');\n};\n\nconst _String = String;\n\nconst stringFromCodePoint = _String.fromCodePoint || function () {\n  let MAX_SIZE = 0x4000;\n  let codeUnits = [];\n  let highSurrogate;\n  let lowSurrogate;\n  let index = -1;\n  let length = arguments.length;\n  if (!length) {\n    return '';\n  }\n  let result = '';\n  while (++index < length) {\n    let codePoint = Number(arguments[index]);\n    if (\n      !isFinite(codePoint) ||       // `NaN`, `+Infinity`, or `-Infinity`\n      codePoint < 0 ||              // not a valid Unicode code point\n      codePoint > 0x10FFFF ||       // not a valid Unicode code point\n      Math.floor(codePoint) !== codePoint // not an integer\n    ) {\n      throw RangeError('Invalid code point: ' + codePoint);\n    }\n    if (codePoint <= 0xFFFF) { // BMP code point\n      codeUnits.push(codePoint);\n    } else { // Astral code point; split in surrogate halves\n      // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      codePoint -= 0x10000;\n      highSurrogate = (codePoint >> 10) + 0xD800;\n      lowSurrogate = (codePoint % 0x400) + 0xDC00;\n      codeUnits.push(highSurrogate, lowSurrogate);\n    }\n    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n      result += String.fromCharCode.apply(null, codeUnits);\n      codeUnits.length = 0;\n    }\n  }\n  return result;\n};\n\n\nconst _JSON = JSON;\n\nconst COLONS_REGEX = /^(?::([^:]+):)(?::skin-tone-(\\d):)?$/;\nconst SKINS = [\n  '1F3FA', '1F3FB', '1F3FC',\n  '1F3FD', '1F3FE', '1F3FF',\n];\n\nfunction unifiedToNative(unified) {\n  let unicodes = unified.split('-'),\n    codePoints = unicodes.map((u) => `0x${u}`);\n\n  return stringFromCodePoint.apply(null, codePoints);\n}\n\nfunction sanitize(emoji) {\n  let { name, short_names, skin_tone, skin_variations, emoticons, unified, custom, imageUrl } = emoji,\n    id = emoji.id || short_names[0],\n    colons = `:${id}:`;\n\n  if (custom) {\n    return {\n      id,\n      name,\n      colons,\n      emoticons,\n      custom,\n      imageUrl,\n    };\n  }\n\n  if (skin_tone) {\n    colons += `:skin-tone-${skin_tone}:`;\n  }\n\n  return {\n    id,\n    name,\n    colons,\n    emoticons,\n    unified: unified.toLowerCase(),\n    skin: skin_tone || (skin_variations ? 1 : null),\n    native: unifiedToNative(unified),\n  };\n}\n\nfunction getSanitizedData() {\n  return sanitize(getData(...arguments));\n}\n\nfunction getData(emoji, skin, set) {\n  let emojiData = {};\n\n  if (typeof emoji === 'string') {\n    let matches = emoji.match(COLONS_REGEX);\n\n    if (matches) {\n      emoji = matches[1];\n\n      if (matches[2]) {\n        skin = parseInt(matches[2]);\n      }\n    }\n\n    if (Object.hasOwn(data.short_names, emoji)) {\n      emoji = data.short_names[emoji];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji)) {\n      emojiData = data.emojis[emoji];\n    }\n  } else if (emoji.id) {\n    if (Object.hasOwn(data.short_names, emoji.id)) {\n      emoji.id = data.short_names[emoji.id];\n    }\n\n    if (Object.hasOwn(data.emojis, emoji.id)) {\n      emojiData = data.emojis[emoji.id];\n      skin = skin || emoji.skin;\n    }\n  }\n\n  if (!Object.keys(emojiData).length) {\n    emojiData = emoji;\n    emojiData.custom = true;\n\n    if (!emojiData.search) {\n      emojiData.search = buildSearch(emoji);\n    }\n  }\n\n  emojiData.emoticons = emojiData.emoticons || [];\n  emojiData.variations = emojiData.variations || [];\n\n  if (emojiData.skin_variations && skin > 1 && set) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n\n    let skinKey = SKINS[skin - 1],\n      variationData = emojiData.skin_variations[skinKey];\n\n    if (!variationData.variations && emojiData.variations) {\n      delete emojiData.variations;\n    }\n\n    if (variationData[`has_img_${set}`]) {\n      emojiData.skin_tone = skin;\n\n      for (let k in variationData) {\n        let v = variationData[k];\n        emojiData[k] = v;\n      }\n    }\n  }\n\n  if (emojiData.variations && emojiData.variations.length) {\n    emojiData = JSON.parse(_JSON.stringify(emojiData));\n    emojiData.unified = emojiData.variations.shift();\n  }\n\n  return emojiData;\n}\n\nfunction uniq(arr) {\n  return arr.reduce((acc, item) => {\n    if (acc.indexOf(item) === -1) {\n      acc.push(item);\n    }\n    return acc;\n  }, []);\n}\n\nfunction intersect(a, b) {\n  const uniqA = uniq(a);\n  const uniqB = uniq(b);\n\n  return uniqA.filter(item => uniqB.indexOf(item) >= 0);\n}\n\nfunction deepMerge(a, b) {\n  let o = {};\n\n  for (let key in a) {\n    let originalValue = a[key],\n      value = originalValue;\n\n    if (Object.hasOwn(b, key)) {\n      value = b[key];\n    }\n\n    if (typeof value === 'object') {\n      value = deepMerge(originalValue, value);\n    }\n\n    o[key] = value;\n  }\n\n  return o;\n}\n\n// https://github.com/sonicdoe/measure-scrollbar\nfunction measureScrollbar() {\n  const div = document.createElement('div');\n\n  div.style.width = '100px';\n  div.style.height = '100px';\n  div.style.overflow = 'scroll';\n  div.style.position = 'absolute';\n  div.style.top = '-9999px';\n\n  document.body.appendChild(div);\n  const scrollbarWidth = div.offsetWidth - div.clientWidth;\n  document.body.removeChild(div);\n\n  return scrollbarWidth;\n}\n\nexport {\n  getData,\n  getSanitizedData,\n  uniq,\n  intersect,\n  deepMerge,\n  unifiedToNative,\n  measureScrollbar,\n};\n","// This code is largely borrowed from:\n// https://github.com/missive/emoji-mart/blob/5f2ffcc/src/utils/emoji-index.js\n\nimport * as data from './emoji_mart_data_light';\nimport { getData, getSanitizedData, uniq, intersect } from './emoji_utils';\n\nlet originalPool = {};\nlet index = {};\nlet emojisList = {};\nlet emoticonsList = {};\nlet customEmojisList = [];\n\nfor (let emoji in data.emojis) {\n  let emojiData = data.emojis[emoji];\n  let { short_names, emoticons } = emojiData;\n  let id = short_names[0];\n\n  if (emoticons) {\n    emoticons.forEach(emoticon => {\n      if (emoticonsList[emoticon]) {\n        return;\n      }\n\n      emoticonsList[emoticon] = id;\n    });\n  }\n\n  emojisList[id] = getSanitizedData(id);\n  originalPool[id] = emojiData;\n}\n\nfunction clearCustomEmojis(pool) {\n  customEmojisList.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    delete pool[emojiId];\n    delete emojisList[emojiId];\n  });\n}\n\nfunction addCustomToPool(custom, pool) {\n  if (customEmojisList.length) clearCustomEmojis(pool);\n\n  custom.forEach((emoji) => {\n    let emojiId = emoji.id || emoji.short_names[0];\n\n    if (emojiId && !pool[emojiId]) {\n      pool[emojiId] = getData(emoji);\n      emojisList[emojiId] = getSanitizedData(emoji);\n    }\n  });\n\n  customEmojisList = custom;\n  index = {};\n}\n\nfunction search(value, { emojisToShowFilter, maxResults, include, exclude, custom } = {}) {\n  if (custom !== undefined) {\n    if (customEmojisList !== custom)\n      addCustomToPool(custom, originalPool);\n  } else {\n    custom = [];\n  }\n\n  maxResults = maxResults || 75;\n  include = include || [];\n  exclude = exclude || [];\n\n  let results = null,\n    pool = originalPool;\n\n  if (value.length) {\n    if (value === '-' || value === '-1') {\n      return [emojisList['-1']];\n    }\n\n    let values = value.toLowerCase().split(/[\\s|,\\-_]+/),\n      allResults = [];\n\n    if (values.length > 2) {\n      values = [values[0], values[1]];\n    }\n\n    if (include.length || exclude.length) {\n      pool = {};\n\n      data.categories.forEach(category => {\n        let isIncluded = include && include.length ? include.indexOf(category.name.toLowerCase()) > -1 : true;\n        let isExcluded = exclude && exclude.length ? exclude.indexOf(category.name.toLowerCase()) > -1 : false;\n        if (!isIncluded || isExcluded) {\n          return;\n        }\n\n        category.emojis.forEach(emojiId => pool[emojiId] = data.emojis[emojiId]);\n      });\n\n      if (custom.length) {\n        let customIsIncluded = include && include.length ? include.indexOf('custom') > -1 : true;\n        let customIsExcluded = exclude && exclude.length ? exclude.indexOf('custom') > -1 : false;\n        if (customIsIncluded && !customIsExcluded) {\n          addCustomToPool(custom, pool);\n        }\n      }\n    }\n\n    const searchValue = (value) => {\n      let aPool = pool,\n        aIndex = index,\n        length = 0;\n\n      for (let charIndex = 0; charIndex < value.length; charIndex++) {\n        const char = value[charIndex];\n        length++;\n\n        aIndex[char] = aIndex[char] || {};\n        aIndex = aIndex[char];\n\n        if (!aIndex.results) {\n          let scores = {};\n\n          aIndex.results = [];\n          aIndex.pool = {};\n\n          for (let id in aPool) {\n            let emoji = aPool[id],\n              { search } = emoji,\n              sub = value.slice(0, length),\n              subIndex = search.indexOf(sub);\n\n            if (subIndex !== -1) {\n              let score = subIndex + 1;\n              if (sub === id) score = 0;\n\n              aIndex.results.push(emojisList[id]);\n              aIndex.pool[id] = emoji;\n\n              scores[id] = score;\n            }\n          }\n\n          aIndex.results.sort((a, b) => {\n            let aScore = scores[a.id],\n              bScore = scores[b.id];\n\n            return aScore - bScore;\n          });\n        }\n\n        aPool = aIndex.pool;\n      }\n\n      return aIndex.results;\n    };\n\n    if (values.length > 1) {\n      results = searchValue(value);\n    } else {\n      results = [];\n    }\n\n    allResults = values.map(searchValue).filter(a => a);\n\n    if (allResults.length > 1) {\n      allResults = intersect.apply(null, allResults);\n    } else if (allResults.length) {\n      allResults = allResults[0];\n    }\n\n    results = uniq(results.concat(allResults));\n  }\n\n  if (results) {\n    if (emojisToShowFilter) {\n      results = results.filter((result) => emojisToShowFilter(data.emojis[result.id]));\n    }\n\n    if (results && results.length > maxResults) {\n      results = results.slice(0, maxResults);\n    }\n  }\n\n  return results;\n}\n\nexport { search };\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiCustomEmojiJSON } from 'mastodon/api_types/custom_emoji';\n\ntype CustomEmojiShape = Required<ApiCustomEmojiJSON>; // no changes from server shape\nexport type CustomEmoji = RecordOf<CustomEmojiShape>;\n\nexport const CustomEmojiFactory = Record<CustomEmojiShape>({\n  shortcode: '',\n  static_url: '',\n  url: '',\n  category: '',\n  visible_in_picker: false,\n});\n","import type { RecordOf } from 'immutable';\nimport { List, Record as ImmutableRecord } from 'immutable';\n\nimport escapeTextContentForBrowser from 'escape-html';\n\nimport type {\n  ApiAccountFieldJSON,\n  ApiAccountRoleJSON,\n  ApiAccountJSON,\n} from 'mastodon/api_types/accounts';\nimport type { ApiCustomEmojiJSON } from 'mastodon/api_types/custom_emoji';\nimport emojify from 'mastodon/features/emoji/emoji';\nimport { unescapeHTML } from 'mastodon/utils/html';\n\nimport { CustomEmojiFactory } from './custom_emoji';\nimport type { CustomEmoji } from './custom_emoji';\n\n// AccountField\ninterface AccountFieldShape extends Required<ApiAccountFieldJSON> {\n  name_emojified: string;\n  value_emojified: string;\n  value_plain: string | null;\n}\n\ntype AccountField = RecordOf<AccountFieldShape>;\n\nconst AccountFieldFactory = ImmutableRecord<AccountFieldShape>({\n  name: '',\n  value: '',\n  verified_at: null,\n  name_emojified: '',\n  value_emojified: '',\n  value_plain: null,\n});\n\n// AccountRole\nexport type AccountRoleShape = ApiAccountRoleJSON;\nexport type AccountRole = RecordOf<AccountRoleShape>;\n\nconst AccountRoleFactory = ImmutableRecord<AccountRoleShape>({\n  color: '',\n  id: '',\n  name: '',\n});\n\n// Account\nexport interface AccountShape\n  extends Required<\n    Omit<ApiAccountJSON, 'emojis' | 'fields' | 'roles' | 'moved'>\n  > {\n  emojis: List<CustomEmoji>;\n  fields: List<AccountField>;\n  roles: List<AccountRole>;\n  display_name_html: string;\n  note_emojified: string;\n  note_plain: string | null;\n  hidden: boolean;\n  moved: string | null;\n}\n\nexport type Account = RecordOf<AccountShape>;\n\nexport const accountDefaultValues: AccountShape = {\n  acct: '',\n  avatar: '',\n  avatar_static: '',\n  bot: false,\n  created_at: '',\n  discoverable: false,\n  indexable: false,\n  display_name: '',\n  display_name_html: '',\n  emojis: List<CustomEmoji>(),\n  fields: List<AccountField>(),\n  group: false,\n  header: '',\n  header_static: '',\n  id: '',\n  last_status_at: '',\n  locked: false,\n  noindex: false,\n  note: '',\n  note_emojified: '',\n  note_plain: 'string',\n  roles: List<AccountRole>(),\n  uri: '',\n  url: '',\n  username: '',\n  followers_count: 0,\n  following_count: 0,\n  statuses_count: 0,\n  hidden: false,\n  suspended: false,\n  memorial: false,\n  limited: false,\n  moved: null,\n  hide_collections: false,\n};\n\nconst AccountFactory = ImmutableRecord<AccountShape>(accountDefaultValues);\n\ntype EmojiMap = Record<string, ApiCustomEmojiJSON>;\n\nfunction makeEmojiMap(emojis: ApiCustomEmojiJSON[]) {\n  return emojis.reduce<EmojiMap>((obj, emoji) => {\n    obj[`:${emoji.shortcode}:`] = emoji;\n    return obj;\n  }, {});\n}\n\nfunction createAccountField(\n  jsonField: ApiAccountFieldJSON,\n  emojiMap: EmojiMap,\n) {\n  return AccountFieldFactory({\n    ...jsonField,\n    name_emojified: emojify(\n      escapeTextContentForBrowser(jsonField.name),\n      emojiMap,\n    ),\n    value_emojified: emojify(jsonField.value, emojiMap),\n    value_plain: unescapeHTML(jsonField.value),\n  });\n}\n\nexport function createAccountFromServerJSON(serverJSON: ApiAccountJSON) {\n  const { moved, ...accountJSON } = serverJSON;\n\n  const emojiMap = makeEmojiMap(accountJSON.emojis);\n\n  const displayName =\n    accountJSON.display_name.trim().length === 0\n      ? accountJSON.username\n      : accountJSON.display_name;\n\n  return AccountFactory({\n    ...accountJSON,\n    moved: moved?.id,\n    fields: List(\n      serverJSON.fields.map((field) => createAccountField(field, emojiMap)),\n    ),\n    emojis: List(serverJSON.emojis.map((emoji) => CustomEmojiFactory(emoji))),\n    roles: List(serverJSON.roles?.map((role) => AccountRoleFactory(role))),\n    display_name_html: emojify(\n      escapeTextContentForBrowser(displayName),\n      emojiMap,\n    ),\n    note_emojified: emojify(accountJSON.note, emojiMap),\n    note_plain: unescapeHTML(accountJSON.note),\n  });\n}\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiCustomEmojiJSON } from 'flavours/glitch/api_types/custom_emoji';\n\ntype CustomEmojiShape = Required<ApiCustomEmojiJSON>; // no changes from server shape\nexport type CustomEmoji = RecordOf<CustomEmojiShape>;\n\nexport const CustomEmojiFactory = Record<CustomEmojiShape>({\n  shortcode: '',\n  static_url: '',\n  url: '',\n  category: '',\n  visible_in_picker: false,\n});\n","import type { RecordOf } from 'immutable';\nimport { List, Record as ImmutableRecord } from 'immutable';\n\nimport escapeTextContentForBrowser from 'escape-html';\n\nimport type {\n  ApiAccountFieldJSON,\n  ApiAccountRoleJSON,\n  ApiAccountJSON,\n} from 'flavours/glitch/api_types/accounts';\nimport type { ApiCustomEmojiJSON } from 'flavours/glitch/api_types/custom_emoji';\nimport emojify from 'flavours/glitch/features/emoji/emoji';\nimport { unescapeHTML } from 'flavours/glitch/utils/html';\n\nimport { CustomEmojiFactory } from './custom_emoji';\nimport type { CustomEmoji } from './custom_emoji';\n\n// AccountField\ninterface AccountFieldShape extends Required<ApiAccountFieldJSON> {\n  name_emojified: string;\n  value_emojified: string;\n  value_plain: string | null;\n}\n\ntype AccountField = RecordOf<AccountFieldShape>;\n\nconst AccountFieldFactory = ImmutableRecord<AccountFieldShape>({\n  name: '',\n  value: '',\n  verified_at: null,\n  name_emojified: '',\n  value_emojified: '',\n  value_plain: null,\n});\n\n// AccountRole\nexport type AccountRoleShape = ApiAccountRoleJSON;\nexport type AccountRole = RecordOf<AccountRoleShape>;\n\nconst AccountRoleFactory = ImmutableRecord<AccountRoleShape>({\n  color: '',\n  id: '',\n  name: '',\n});\n\n// Account\nexport interface AccountShape\n  extends Required<\n    Omit<ApiAccountJSON, 'emojis' | 'fields' | 'roles' | 'moved'>\n  > {\n  emojis: List<CustomEmoji>;\n  fields: List<AccountField>;\n  roles: List<AccountRole>;\n  display_name_html: string;\n  note_emojified: string;\n  note_plain: string | null;\n  hidden: boolean;\n  moved: string | null;\n}\n\nexport type Account = RecordOf<AccountShape>;\n\nexport const accountDefaultValues: AccountShape = {\n  acct: '',\n  avatar: '',\n  avatar_static: '',\n  bot: false,\n  created_at: '',\n  discoverable: false,\n  indexable: false,\n  display_name: '',\n  display_name_html: '',\n  emojis: List<CustomEmoji>(),\n  fields: List<AccountField>(),\n  group: false,\n  header: '',\n  header_static: '',\n  id: '',\n  last_status_at: '',\n  locked: false,\n  noindex: false,\n  note: '',\n  note_emojified: '',\n  note_plain: 'string',\n  roles: List<AccountRole>(),\n  uri: '',\n  url: '',\n  username: '',\n  followers_count: 0,\n  following_count: 0,\n  statuses_count: 0,\n  hidden: false,\n  suspended: false,\n  memorial: false,\n  limited: false,\n  moved: null,\n  hide_collections: false,\n};\n\nconst AccountFactory = ImmutableRecord<AccountShape>(accountDefaultValues);\n\ntype EmojiMap = Record<string, ApiCustomEmojiJSON>;\n\nfunction makeEmojiMap(emojis: ApiCustomEmojiJSON[]) {\n  return emojis.reduce<EmojiMap>((obj, emoji) => {\n    obj[`:${emoji.shortcode}:`] = emoji;\n    return obj;\n  }, {});\n}\n\nfunction createAccountField(\n  jsonField: ApiAccountFieldJSON,\n  emojiMap: EmojiMap,\n) {\n  return AccountFieldFactory({\n    ...jsonField,\n    name_emojified: emojify(\n      escapeTextContentForBrowser(jsonField.name),\n      emojiMap,\n    ),\n    value_emojified: emojify(jsonField.value, emojiMap),\n    value_plain: unescapeHTML(jsonField.value),\n  });\n}\n\nexport function createAccountFromServerJSON(serverJSON: ApiAccountJSON) {\n  const { moved, ...accountJSON } = serverJSON;\n\n  const emojiMap = makeEmojiMap(accountJSON.emojis);\n\n  const displayName =\n    accountJSON.display_name.trim().length === 0\n      ? accountJSON.username\n      : accountJSON.display_name;\n\n  return AccountFactory({\n    ...accountJSON,\n    moved: moved?.id,\n    fields: List(\n      serverJSON.fields.map((field) => createAccountField(field, emojiMap)),\n    ),\n    emojis: List(serverJSON.emojis.map((emoji) => CustomEmojiFactory(emoji))),\n    roles: List(serverJSON.roles?.map((role) => AccountRoleFactory(role))),\n    display_name_html: emojify(\n      escapeTextContentForBrowser(displayName),\n      emojiMap,\n    ),\n    note_emojified: emojify(accountJSON.note, emojiMap),\n    note_plain: unescapeHTML(accountJSON.note),\n  });\n}\n","import api from '../api';\n\nexport const CUSTOM_EMOJIS_FETCH_REQUEST = 'CUSTOM_EMOJIS_FETCH_REQUEST';\nexport const CUSTOM_EMOJIS_FETCH_SUCCESS = 'CUSTOM_EMOJIS_FETCH_SUCCESS';\nexport const CUSTOM_EMOJIS_FETCH_FAIL = 'CUSTOM_EMOJIS_FETCH_FAIL';\n\nexport function fetchCustomEmojis() {\n  return (dispatch) => {\n    dispatch(fetchCustomEmojisRequest());\n\n    api().get('/api/v1/custom_emojis').then(response => {\n      dispatch(fetchCustomEmojisSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchCustomEmojisFail(error));\n    });\n  };\n}\n\nexport function fetchCustomEmojisRequest() {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisSuccess(custom_emojis) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_SUCCESS,\n    custom_emojis,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisFail(error) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n","import { useCallback, useState } from 'react';\n\nexport const useHovering = (animate?: boolean) => {\n  const [hovering, setHovering] = useState<boolean>(animate ?? false);\n\n  const handleMouseEnter = useCallback(() => {\n    if (animate) return;\n    setHovering(true);\n  }, [animate]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (animate) return;\n    setHovering(false);\n  }, [animate]);\n\n  return { hovering, handleMouseEnter, handleMouseLeave };\n};\n","import { saveSettings } from './settings';\n\nexport const LANGUAGE_USE = 'LANGUAGE_USE';\n\nexport const useLanguage = language => dispatch => {\n  dispatch({\n    type: LANGUAGE_USE,\n    language,\n  });\n\n  dispatch(saveSettings());\n};\n","import api from '../api';\n\nimport { openModal } from './modal';\n\nexport const FILTERS_FETCH_REQUEST = 'FILTERS_FETCH_REQUEST';\nexport const FILTERS_FETCH_SUCCESS = 'FILTERS_FETCH_SUCCESS';\nexport const FILTERS_FETCH_FAIL    = 'FILTERS_FETCH_FAIL';\n\nexport const FILTERS_STATUS_CREATE_REQUEST = 'FILTERS_STATUS_CREATE_REQUEST';\nexport const FILTERS_STATUS_CREATE_SUCCESS = 'FILTERS_STATUS_CREATE_SUCCESS';\nexport const FILTERS_STATUS_CREATE_FAIL    = 'FILTERS_STATUS_CREATE_FAIL';\n\nexport const FILTERS_CREATE_REQUEST = 'FILTERS_CREATE_REQUEST';\nexport const FILTERS_CREATE_SUCCESS = 'FILTERS_CREATE_SUCCESS';\nexport const FILTERS_CREATE_FAIL    = 'FILTERS_CREATE_FAIL';\n\nexport const initAddFilter = (status, { contextType }) => dispatch =>\n  dispatch(openModal({\n    modalType: 'FILTER',\n    modalProps: {\n      statusId: status?.get('id'),\n      contextType: contextType,\n    },\n  }));\n\nexport const fetchFilters = () => (dispatch) => {\n  dispatch({\n    type: FILTERS_FETCH_REQUEST,\n    skipLoading: true,\n  });\n\n  api()\n    .get('/api/v2/filters')\n    .then(({ data }) => dispatch({\n      type: FILTERS_FETCH_SUCCESS,\n      filters: data,\n      skipLoading: true,\n    }))\n    .catch(err => dispatch({\n      type: FILTERS_FETCH_FAIL,\n      err,\n      skipLoading: true,\n      skipAlert: true,\n    }));\n};\n\nexport const createFilterStatus = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterStatusRequest());\n\n  api().post(`/api/v2/filters/${params.filter_id}/statuses`, params).then(response => {\n    dispatch(createFilterStatusSuccess(response.data));\n    if (onSuccess) onSuccess();\n  }).catch(error => {\n    dispatch(createFilterStatusFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterStatusRequest = () => ({\n  type: FILTERS_STATUS_CREATE_REQUEST,\n});\n\nexport const createFilterStatusSuccess = filter_status => ({\n  type: FILTERS_STATUS_CREATE_SUCCESS,\n  filter_status,\n});\n\nexport const createFilterStatusFail = error => ({\n  type: FILTERS_STATUS_CREATE_FAIL,\n  error,\n});\n\nexport const createFilter = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterRequest());\n\n  api().post('/api/v2/filters', params).then(response => {\n    dispatch(createFilterSuccess(response.data));\n    if (onSuccess) onSuccess(response.data);\n  }).catch(error => {\n    dispatch(createFilterFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterRequest = () => ({\n  type: FILTERS_CREATE_REQUEST,\n});\n\nexport const createFilterSuccess = filter => ({\n  type: FILTERS_CREATE_SUCCESS,\n  filter,\n});\n\nexport const createFilterFail = error => ({\n  type: FILTERS_CREATE_FAIL,\n  error,\n});\n","import { useCallback, useState } from 'react';\n\ninterface Props {\n  src: string;\n  key: string;\n  alt?: string;\n  lang?: string;\n  width: number;\n  height: number;\n  onClick?: () => void;\n}\n\nexport const GIFV: React.FC<Props> = ({\n  src,\n  alt,\n  lang,\n  width,\n  height,\n  onClick,\n}) => {\n  const [loading, setLoading] = useState(true);\n\n  const handleLoadedData: React.ReactEventHandler<HTMLVideoElement> =\n    useCallback(() => {\n      setLoading(false);\n    }, [setLoading]);\n\n  const handleClick: React.MouseEventHandler = useCallback(\n    (e) => {\n      if (onClick) {\n        e.stopPropagation();\n        onClick();\n      }\n    },\n    [onClick],\n  );\n\n  return (\n    <div className='gifv' style={{ position: 'relative' }}>\n      {loading && (\n        <canvas\n          width={width}\n          height={height}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          onClick={handleClick}\n        />\n      )}\n\n      <video\n        src={src}\n        role='button'\n        tabIndex={0}\n        aria-label={alt}\n        title={alt}\n        lang={lang}\n        muted\n        loop\n        autoPlay\n        playsInline\n        onClick={handleClick}\n        onLoadedData={handleLoadedData}\n        style={{ position: loading ? 'absolute' : 'static', top: 0, left: 0 }}\n      />\n    </div>\n  );\n};\n","const DIGIT_CHARACTERS = [\n  '0',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  'A',\n  'B',\n  'C',\n  'D',\n  'E',\n  'F',\n  'G',\n  'H',\n  'I',\n  'J',\n  'K',\n  'L',\n  'M',\n  'N',\n  'O',\n  'P',\n  'Q',\n  'R',\n  'S',\n  'T',\n  'U',\n  'V',\n  'W',\n  'X',\n  'Y',\n  'Z',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  '#',\n  '$',\n  '%',\n  '*',\n  '+',\n  ',',\n  '-',\n  '.',\n  ':',\n  ';',\n  '=',\n  '?',\n  '@',\n  '[',\n  ']',\n  '^',\n  '_',\n  '{',\n  '|',\n  '}',\n  '~',\n];\n\nexport const decode83 = (str: string) => {\n  let value = 0;\n  let digit;\n\n  for (const c of str) {\n    digit = DIGIT_CHARACTERS.indexOf(c);\n    value = value * 83 + digit;\n  }\n\n  return value;\n};\n\nexport const intToRGB = (int: number) => ({\n  r: Math.max(0, int >> 16),\n  g: Math.max(0, (int >> 8) & 255),\n  b: Math.max(0, int & 255),\n});\n\nexport const getAverageFromBlurhash = (blurhash: string) => {\n  if (!blurhash) {\n    return null;\n  }\n\n  return intToRGB(decode83(blurhash.slice(2, 6)));\n};\n","import api from '../api';\n\nexport const CUSTOM_EMOJIS_FETCH_REQUEST = 'CUSTOM_EMOJIS_FETCH_REQUEST';\nexport const CUSTOM_EMOJIS_FETCH_SUCCESS = 'CUSTOM_EMOJIS_FETCH_SUCCESS';\nexport const CUSTOM_EMOJIS_FETCH_FAIL = 'CUSTOM_EMOJIS_FETCH_FAIL';\n\nexport function fetchCustomEmojis() {\n  return (dispatch) => {\n    dispatch(fetchCustomEmojisRequest());\n\n    api().get('/api/v1/custom_emojis').then(response => {\n      dispatch(fetchCustomEmojisSuccess(response.data));\n    }).catch(error => {\n      dispatch(fetchCustomEmojisFail(error));\n    });\n  };\n}\n\nexport function fetchCustomEmojisRequest() {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisSuccess(custom_emojis) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_SUCCESS,\n    custom_emojis,\n    skipLoading: true,\n  };\n}\n\nexport function fetchCustomEmojisFail(error) {\n  return {\n    type: CUSTOM_EMOJIS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n","export const order = ['public', 'unlisted', 'private', 'direct'];\n\nexport function privacyPreference (a, b) {\n  return order[Math.max(order.indexOf(a), order.indexOf(b), 0)];\n}\n","import { useCallback, useState } from 'react';\n\nexport const useHovering = (animate?: boolean) => {\n  const [hovering, setHovering] = useState<boolean>(animate ?? false);\n\n  const handleMouseEnter = useCallback(() => {\n    if (animate) return;\n    setHovering(true);\n  }, [animate]);\n\n  const handleMouseLeave = useCallback(() => {\n    if (animate) return;\n    setHovering(false);\n  }, [animate]);\n\n  return { hovering, handleMouseEnter, handleMouseLeave };\n};\n","import { saveSettings } from './settings';\n\nexport const LANGUAGE_USE = 'LANGUAGE_USE';\n\nexport const useLanguage = language => dispatch => {\n  dispatch({\n    type: LANGUAGE_USE,\n    language,\n  });\n\n  dispatch(saveSettings());\n};\n","import api from '../api';\n\nimport { openModal } from './modal';\n\nexport const FILTERS_FETCH_REQUEST = 'FILTERS_FETCH_REQUEST';\nexport const FILTERS_FETCH_SUCCESS = 'FILTERS_FETCH_SUCCESS';\nexport const FILTERS_FETCH_FAIL    = 'FILTERS_FETCH_FAIL';\n\nexport const FILTERS_STATUS_CREATE_REQUEST = 'FILTERS_STATUS_CREATE_REQUEST';\nexport const FILTERS_STATUS_CREATE_SUCCESS = 'FILTERS_STATUS_CREATE_SUCCESS';\nexport const FILTERS_STATUS_CREATE_FAIL    = 'FILTERS_STATUS_CREATE_FAIL';\n\nexport const FILTERS_CREATE_REQUEST = 'FILTERS_CREATE_REQUEST';\nexport const FILTERS_CREATE_SUCCESS = 'FILTERS_CREATE_SUCCESS';\nexport const FILTERS_CREATE_FAIL    = 'FILTERS_CREATE_FAIL';\n\nexport const initAddFilter = (status, { contextType }) => dispatch =>\n  dispatch(openModal({\n    modalType: 'FILTER',\n    modalProps: {\n      statusId: status?.get('id'),\n      contextType: contextType,\n    },\n  }));\n\nexport const fetchFilters = () => (dispatch) => {\n  dispatch({\n    type: FILTERS_FETCH_REQUEST,\n    skipLoading: true,\n  });\n\n  api()\n    .get('/api/v2/filters')\n    .then(({ data }) => dispatch({\n      type: FILTERS_FETCH_SUCCESS,\n      filters: data,\n      skipLoading: true,\n    }))\n    .catch(err => dispatch({\n      type: FILTERS_FETCH_FAIL,\n      err,\n      skipLoading: true,\n      skipAlert: true,\n    }));\n};\n\nexport const createFilterStatus = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterStatusRequest());\n\n  api().post(`/api/v2/filters/${params.filter_id}/statuses`, params).then(response => {\n    dispatch(createFilterStatusSuccess(response.data));\n    if (onSuccess) onSuccess();\n  }).catch(error => {\n    dispatch(createFilterStatusFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterStatusRequest = () => ({\n  type: FILTERS_STATUS_CREATE_REQUEST,\n});\n\nexport const createFilterStatusSuccess = filter_status => ({\n  type: FILTERS_STATUS_CREATE_SUCCESS,\n  filter_status,\n});\n\nexport const createFilterStatusFail = error => ({\n  type: FILTERS_STATUS_CREATE_FAIL,\n  error,\n});\n\nexport const createFilter = (params, onSuccess, onFail) => (dispatch) => {\n  dispatch(createFilterRequest());\n\n  api().post('/api/v2/filters', params).then(response => {\n    dispatch(createFilterSuccess(response.data));\n    if (onSuccess) onSuccess(response.data);\n  }).catch(error => {\n    dispatch(createFilterFail(error));\n    if (onFail) onFail();\n  });\n};\n\nexport const createFilterRequest = () => ({\n  type: FILTERS_CREATE_REQUEST,\n});\n\nexport const createFilterSuccess = filter => ({\n  type: FILTERS_CREATE_SUCCESS,\n  filter,\n});\n\nexport const createFilterFail = error => ({\n  type: FILTERS_CREATE_FAIL,\n  error,\n});\n","import { useCallback, useState } from 'react';\n\ninterface Props {\n  src: string;\n  key: string;\n  alt?: string;\n  lang?: string;\n  width: number;\n  height: number;\n  onClick?: () => void;\n}\n\nexport const GIFV: React.FC<Props> = ({\n  src,\n  alt,\n  lang,\n  width,\n  height,\n  onClick,\n}) => {\n  const [loading, setLoading] = useState(true);\n\n  const handleLoadedData: React.ReactEventHandler<HTMLVideoElement> =\n    useCallback(() => {\n      setLoading(false);\n    }, [setLoading]);\n\n  const handleClick: React.MouseEventHandler = useCallback(\n    (e) => {\n      if (onClick) {\n        e.stopPropagation();\n        onClick();\n      }\n    },\n    [onClick],\n  );\n\n  return (\n    <div className='gifv' style={{ position: 'relative' }}>\n      {loading && (\n        <canvas\n          width={width}\n          height={height}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          onClick={handleClick}\n        />\n      )}\n\n      <video\n        src={src}\n        role='button'\n        tabIndex={0}\n        aria-label={alt}\n        title={alt}\n        lang={lang}\n        muted\n        loop\n        autoPlay\n        playsInline\n        onClick={handleClick}\n        onLoadedData={handleLoadedData}\n        style={{ position: loading ? 'absolute' : 'static', top: 0, left: 0 }}\n      />\n    </div>\n  );\n};\n","const DIGIT_CHARACTERS = [\n  '0',\n  '1',\n  '2',\n  '3',\n  '4',\n  '5',\n  '6',\n  '7',\n  '8',\n  '9',\n  'A',\n  'B',\n  'C',\n  'D',\n  'E',\n  'F',\n  'G',\n  'H',\n  'I',\n  'J',\n  'K',\n  'L',\n  'M',\n  'N',\n  'O',\n  'P',\n  'Q',\n  'R',\n  'S',\n  'T',\n  'U',\n  'V',\n  'W',\n  'X',\n  'Y',\n  'Z',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  '#',\n  '$',\n  '%',\n  '*',\n  '+',\n  ',',\n  '-',\n  '.',\n  ':',\n  ';',\n  '=',\n  '?',\n  '@',\n  '[',\n  ']',\n  '^',\n  '_',\n  '{',\n  '|',\n  '}',\n  '~',\n];\n\nexport const decode83 = (str: string) => {\n  let value = 0;\n  let digit;\n\n  for (const c of str) {\n    digit = DIGIT_CHARACTERS.indexOf(c);\n    value = value * 83 + digit;\n  }\n\n  return value;\n};\n\nexport const intToRGB = (int: number) => ({\n  r: Math.max(0, int >> 16),\n  g: Math.max(0, (int >> 8) & 255),\n  b: Math.max(0, int & 255),\n});\n\nexport const getAverageFromBlurhash = (blurhash: string) => {\n  if (!blurhash) {\n    return null;\n  }\n\n  return intToRGB(decode83(blurhash.slice(2, 6)));\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport FullscreenExitIcon from '@/material-icons/400-24px/fullscreen_exit.svg?react';\nimport RectangleIcon from '@/material-icons/400-24px/rectangle.svg?react';\nimport { IconButton } from 'mastodon/components/icon_button';\n\nconst messages = defineMessages({\n  compress: { id: 'lightbox.compress', defaultMessage: 'Compress image view box' },\n  expand: { id: 'lightbox.expand', defaultMessage: 'Expand image view box' },\n});\n\nconst MIN_SCALE = 1;\nconst MAX_SCALE = 4;\nconst NAV_BAR_HEIGHT = 66;\n\nconst getMidpoint = (p1, p2) => ({\n  x: (p1.clientX + p2.clientX) / 2,\n  y: (p1.clientY + p2.clientY) / 2,\n});\n\nconst getDistance = (p1, p2) =>\n  Math.sqrt(Math.pow(p1.clientX - p2.clientX, 2) + Math.pow(p1.clientY - p2.clientY, 2));\n\nconst clamp = (min, max, value) => Math.min(max, Math.max(min, value));\n\n// Normalizing mousewheel speed across browsers\n// copy from: https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\nconst normalizeWheel = event => {\n  // Reasonable defaults\n  const PIXEL_STEP = 10;\n  const LINE_HEIGHT = 40;\n  const PAGE_HEIGHT = 800;\n\n  let sX = 0,\n    sY = 0, // spinX, spinY\n    pX = 0,\n    pY = 0; // pixelX, pixelY\n\n  // Legacy\n  if ('detail' in event) {\n    sY = event.detail;\n  }\n  if ('wheelDelta' in event) {\n    sY = -event.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in event) {\n    sY = -event.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in event) {\n    sX = -event.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in event && event.axis === event.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) {\n    pY = event.deltaY;\n  }\n  if ('deltaX' in event) {\n    pX = event.deltaX;\n  }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode === 1) { // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else { // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = (pX < 1) ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = (pY < 1) ? -1 : 1;\n  }\n\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY,\n  };\n};\n\nclass ZoomableImage extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    scale: MIN_SCALE,\n    zoomMatrix: {\n      type: null, // 'width' 'height'\n      fullScreen: null, // bool\n      rate: null, // full screen scale rate\n      clientWidth: null,\n      clientHeight: null,\n      offsetWidth: null,\n      offsetHeight: null,\n      clientHeightFixed: null,\n      scrollTop: null,\n      scrollLeft: null,\n      translateX: null,\n      translateY: null,\n    },\n    zoomState: 'expand', // 'expand' 'compress'\n    navigationHidden: false,\n    dragPosition: { top: 0, left: 0, x: 0, y: 0 },\n    dragged: false,\n    lockScroll: { x: 0, y: 0 },\n    lockTranslate: { x: 0, y: 0 },\n  };\n\n  removers = [];\n  container = null;\n  image = null;\n  lastTouchEndTime = 0;\n  lastDistance = 0;\n\n  componentDidMount () {\n    let handler = this.handleTouchStart;\n    this.container.addEventListener('touchstart', handler);\n    this.removers.push(() => this.container.removeEventListener('touchstart', handler));\n    handler = this.handleTouchMove;\n    // on Chrome 56+, touch event listeners will default to passive\n    // https://www.chromestatus.com/features/5093566007214080\n    this.container.addEventListener('touchmove', handler, { passive: false });\n    this.removers.push(() => this.container.removeEventListener('touchend', handler));\n\n    handler = this.mouseDownHandler;\n    this.container.addEventListener('mousedown', handler);\n    this.removers.push(() => this.container.removeEventListener('mousedown', handler));\n\n    handler = this.mouseWheelHandler;\n    this.container.addEventListener('wheel', handler);\n    this.removers.push(() => this.container.removeEventListener('wheel', handler));\n    // Old Chrome\n    this.container.addEventListener('mousewheel', handler);\n    this.removers.push(() => this.container.removeEventListener('mousewheel', handler));\n    // Old Firefox\n    this.container.addEventListener('DOMMouseScroll', handler);\n    this.removers.push(() => this.container.removeEventListener('DOMMouseScroll', handler));\n\n    this.initZoomMatrix();\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  componentDidUpdate () {\n    this.setState({ zoomState: this.state.scale >= this.state.zoomMatrix.rate ? 'compress' : 'expand' });\n\n    if (this.state.scale === MIN_SCALE) {\n      this.container.style.removeProperty('cursor');\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps () {\n    // reset when slide to next image\n    if (this.props.zoomButtonHidden) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockTranslate: { x: 0, y: 0 },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    }\n  }\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  mouseWheelHandler = e => {\n    e.preventDefault();\n\n    const event = normalizeWheel(e);\n\n    if (this.state.zoomMatrix.type === 'width') {\n      // full width, scroll vertical\n      this.container.scrollTop = Math.max(this.container.scrollTop + event.pixelY, this.state.lockScroll.y);\n    } else {\n      // full height, scroll horizontal\n      this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelY, this.state.lockScroll.x);\n    }\n\n    // lock horizontal scroll\n    this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelX, this.state.lockScroll.x);\n  };\n\n  mouseDownHandler = e => {\n    this.container.style.cursor = 'grabbing';\n    this.container.style.userSelect = 'none';\n\n    this.setState({ dragPosition: {\n      left: this.container.scrollLeft,\n      top: this.container.scrollTop,\n      // Get the current mouse position\n      x: e.clientX,\n      y: e.clientY,\n    } });\n\n    this.image.addEventListener('mousemove', this.mouseMoveHandler);\n    this.image.addEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  mouseMoveHandler = e => {\n    const dx = e.clientX - this.state.dragPosition.x;\n    const dy = e.clientY - this.state.dragPosition.y;\n\n    this.container.scrollLeft = Math.max(this.state.dragPosition.left - dx, this.state.lockScroll.x);\n    this.container.scrollTop = Math.max(this.state.dragPosition.top - dy, this.state.lockScroll.y);\n\n    this.setState({ dragged: true });\n  };\n\n  mouseUpHandler = () => {\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n\n    this.image.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.image.removeEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  handleTouchStart = e => {\n    if (e.touches.length !== 2) return;\n\n    this.lastDistance = getDistance(...e.touches);\n  };\n\n  handleTouchMove = e => {\n    const { scrollTop, scrollHeight, clientHeight } = this.container;\n    if (e.touches.length === 1 && scrollTop !== scrollHeight - clientHeight) {\n      // prevent propagating event to MediaModal\n      e.stopPropagation();\n      return;\n    }\n    if (e.touches.length !== 2) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const distance = getDistance(...e.touches);\n    const midpoint = getMidpoint(...e.touches);\n    const _MAX_SCALE = Math.max(MAX_SCALE, this.state.zoomMatrix.rate);\n    const scale = clamp(MIN_SCALE, _MAX_SCALE, this.state.scale * distance / this.lastDistance);\n\n    this.zoom(scale, midpoint);\n\n    this.lastMidpoint = midpoint;\n    this.lastDistance = distance;\n  };\n\n  zoom(nextScale, midpoint) {\n    const { scale, zoomMatrix } = this.state;\n    const { scrollLeft, scrollTop } = this.container;\n\n    // math memo:\n    // x = (scrollLeft + midpoint.x) / scrollWidth\n    // x' = (nextScrollLeft + midpoint.x) / nextScrollWidth\n    // scrollWidth = clientWidth * scale\n    // scrollWidth' = clientWidth * nextScale\n    // Solve x = x' for nextScrollLeft\n    const nextScrollLeft = (scrollLeft + midpoint.x) * nextScale / scale - midpoint.x;\n    const nextScrollTop = (scrollTop + midpoint.y) * nextScale / scale - midpoint.y;\n\n    this.setState({ scale: nextScale }, () => {\n      this.container.scrollLeft = nextScrollLeft;\n      this.container.scrollTop = nextScrollTop;\n      // reset the translateX/Y constantly\n      if (nextScale < zoomMatrix.rate) {\n        this.setState({\n          lockTranslate: {\n            x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n            y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n          },\n        });\n      }\n    });\n  }\n\n  handleClick = e => {\n    // don't propagate event to MediaModal\n    e.stopPropagation();\n    const dragged = this.state.dragged;\n    this.setState({ dragged: false });\n    if (dragged) return;\n    const handler = this.props.onClick;\n    if (handler) handler();\n    this.setState({ navigationHidden: !this.state.navigationHidden });\n  };\n\n  handleMouseDown = e => {\n    e.preventDefault();\n  };\n\n  initZoomMatrix = () => {\n    const { width, height } = this.props;\n    const { clientWidth, clientHeight } = this.container;\n    const { offsetWidth, offsetHeight } = this.image;\n    const clientHeightFixed = clientHeight - NAV_BAR_HEIGHT;\n\n    const type = width / height < clientWidth / clientHeightFixed ? 'width' : 'height';\n    const fullScreen = type === 'width' ?  width > clientWidth : height > clientHeightFixed;\n    const rate = type === 'width' ? Math.min(clientWidth, width) / offsetWidth : Math.min(clientHeightFixed, height) / offsetHeight;\n    const scrollTop = type === 'width' ?  (clientHeight - offsetHeight) / 2 - NAV_BAR_HEIGHT : (clientHeightFixed - offsetHeight) / 2;\n    const scrollLeft = (clientWidth - offsetWidth) / 2;\n    const translateX = type === 'width' ? (width - offsetWidth) / (2 * rate) : 0;\n    const translateY = type === 'height' ? (height - offsetHeight) / (2 * rate) : 0;\n\n    this.setState({\n      zoomMatrix: {\n        type: type,\n        fullScreen: fullScreen,\n        rate: rate,\n        clientWidth: clientWidth,\n        clientHeight: clientHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight,\n        clientHeightFixed: clientHeightFixed,\n        scrollTop: scrollTop,\n        scrollLeft: scrollLeft,\n        translateX: translateX,\n        translateY: translateY,\n      },\n    });\n  };\n\n  handleZoomClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { scale, zoomMatrix } = this.state;\n\n    if ( scale >= zoomMatrix.rate ) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockScroll: {\n          x: 0,\n          y: 0,\n        },\n        lockTranslate: {\n          x: 0,\n          y: 0,\n        },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    } else {\n      this.setState({\n        scale: zoomMatrix.rate,\n        lockScroll: {\n          x: zoomMatrix.scrollLeft,\n          y: zoomMatrix.scrollTop,\n        },\n        lockTranslate: {\n          x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX,\n          y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY,\n        },\n      }, () => {\n        this.container.scrollLeft = zoomMatrix.scrollLeft;\n        this.container.scrollTop = zoomMatrix.scrollTop;\n      });\n    }\n\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n  };\n\n  setContainerRef = c => {\n    this.container = c;\n  };\n\n  setImageRef = c => {\n    this.image = c;\n  };\n\n  render () {\n    const { alt, lang, src, width, height, intl } = this.props;\n    const { scale, lockTranslate } = this.state;\n    const overflow = scale === MIN_SCALE ? 'hidden' : 'scroll';\n    const zoomButtonShouldHide = this.state.navigationHidden || this.props.zoomButtonHidden || this.state.zoomMatrix.rate <= MIN_SCALE ? 'media-modal__zoom-button--hidden' : '';\n    const zoomButtonTitle = this.state.zoomState === 'compress' ? intl.formatMessage(messages.compress) : intl.formatMessage(messages.expand);\n\n    return (\n      <>\n        <IconButton\n          className={`media-modal__zoom-button ${zoomButtonShouldHide}`}\n          title={zoomButtonTitle}\n          icon={this.state.zoomState}\n          iconComponent={this.state.zoomState === 'compress' ? FullscreenExitIcon : RectangleIcon}\n          onClick={this.handleZoomClick}\n          size={40}\n          style={{\n            fontSize: '30px', /* Fontawesome's fa-compress fa-expand is larger than fa-close */\n          }}\n        />\n        <div\n          className='zoomable-image'\n          ref={this.setContainerRef}\n          style={{ overflow }}\n        >\n          <img\n            role='presentation'\n            ref={this.setImageRef}\n            alt={alt}\n            title={alt}\n            lang={lang}\n            src={src}\n            width={width}\n            height={height}\n            style={{\n              transform: `scale(${scale}) translate(-${lockTranslate.x}px, -${lockTranslate.y}px)`,\n              transformOrigin: '0 0',\n            }}\n            draggable={false}\n            onClick={this.handleClick}\n            onMouseDown={this.handleMouseDown}\n          />\n        </div>\n      </>\n    );\n  }\n\n}\n\nexport default injectIntl(ZoomableImage);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport classNames from 'classnames';\n\nimport { LoadingBar } from 'react-redux-loading-bar';\n\nimport ZoomableImage from './zoomable_image';\n\nexport default class ImageLoader extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    previewSrc: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    loading: true,\n    error: false,\n    width: null,\n  };\n\n  removers = [];\n  canvas = null;\n\n  get canvasContext() {\n    if (!this.canvas) {\n      return null;\n    }\n    this._canvasContext = this._canvasContext || this.canvas.getContext('2d');\n    return this._canvasContext;\n  }\n\n  componentDidMount () {\n    this.loadImage(this.props);\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.props.src !== nextProps.src) {\n      this.loadImage(nextProps);\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  loadImage (props) {\n    this.removeEventListeners();\n    this.setState({ loading: true, error: false });\n    Promise.all([\n      props.previewSrc && this.loadPreviewCanvas(props),\n      this.hasSize() && this.loadOriginalImage(props),\n    ].filter(Boolean))\n      .then(() => {\n        this.setState({ loading: false, error: false });\n        this.clearPreviewCanvas();\n      })\n      .catch(() => this.setState({ loading: false, error: true }));\n  }\n\n  loadPreviewCanvas = ({ previewSrc, width, height }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      this.canvasContext.drawImage(image, 0, 0, width, height);\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = previewSrc;\n    this.removers.push(removeEventListeners);\n  });\n\n  clearPreviewCanvas () {\n    const { width, height } = this.canvas;\n    this.canvasContext.clearRect(0, 0, width, height);\n  }\n\n  loadOriginalImage = ({ src }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = src;\n    this.removers.push(removeEventListeners);\n  });\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  hasSize () {\n    const { width, height } = this.props;\n    return typeof width === 'number' && typeof height === 'number';\n  }\n\n  setCanvasRef = c => {\n    this.canvas = c;\n    if (c) this.setState({ width: c.offsetWidth });\n  };\n\n  render () {\n    const { alt, lang, src, width, height, onClick } = this.props;\n    const { loading } = this.state;\n\n    const className = classNames('image-loader', {\n      'image-loader--loading': loading,\n      'image-loader--amorphous': !this.hasSize(),\n    });\n\n    return (\n      <div className={className}>\n        {loading ? (\n          <>\n            <div className='loading-bar__container' style={{ width: this.state.width || width }}>\n              <LoadingBar className='loading-bar' loading={1} />\n            </div>\n            <canvas\n              className='image-loader__preview-canvas'\n              ref={this.setCanvasRef}\n              width={width}\n              height={height}\n            />\n          </>\n        ) : (\n          <ZoomableImage\n            alt={alt}\n            lang={lang}\n            src={src}\n            onClick={onClick}\n            width={width}\n            height={height}\n            zoomButtonHidden={this.props.zoomButtonHidden}\n          />\n        )}\n      </div>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport FullscreenExitIcon from '@/material-icons/400-24px/fullscreen_exit.svg?react';\nimport RectangleIcon from '@/material-icons/400-24px/rectangle.svg?react';\nimport { IconButton } from 'flavours/glitch/components/icon_button';\n\nconst messages = defineMessages({\n  compress: { id: 'lightbox.compress', defaultMessage: 'Compress image view box' },\n  expand: { id: 'lightbox.expand', defaultMessage: 'Expand image view box' },\n});\n\nconst MIN_SCALE = 1;\nconst MAX_SCALE = 4;\nconst NAV_BAR_HEIGHT = 66;\n\nconst getMidpoint = (p1, p2) => ({\n  x: (p1.clientX + p2.clientX) / 2,\n  y: (p1.clientY + p2.clientY) / 2,\n});\n\nconst getDistance = (p1, p2) =>\n  Math.sqrt(Math.pow(p1.clientX - p2.clientX, 2) + Math.pow(p1.clientY - p2.clientY, 2));\n\nconst clamp = (min, max, value) => Math.min(max, Math.max(min, value));\n\n// Normalizing mousewheel speed across browsers\n// copy from: https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\nconst normalizeWheel = event => {\n  // Reasonable defaults\n  const PIXEL_STEP = 10;\n  const LINE_HEIGHT = 40;\n  const PAGE_HEIGHT = 800;\n\n  let sX = 0,\n    sY = 0, // spinX, spinY\n    pX = 0,\n    pY = 0; // pixelX, pixelY\n\n  // Legacy\n  if ('detail' in event) {\n    sY = event.detail;\n  }\n  if ('wheelDelta' in event) {\n    sY = -event.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in event) {\n    sY = -event.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in event) {\n    sX = -event.wheelDeltaX / 120;\n  }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ('axis' in event && event.axis === event.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) {\n    pY = event.deltaY;\n  }\n  if ('deltaX' in event) {\n    pX = event.deltaX;\n  }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode === 1) { // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else { // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) {\n    sX = (pX < 1) ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = (pY < 1) ? -1 : 1;\n  }\n\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY,\n  };\n};\n\nclass ZoomableImage extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    scale: MIN_SCALE,\n    zoomMatrix: {\n      type: null, // 'width' 'height'\n      fullScreen: null, // bool\n      rate: null, // full screen scale rate\n      clientWidth: null,\n      clientHeight: null,\n      offsetWidth: null,\n      offsetHeight: null,\n      clientHeightFixed: null,\n      scrollTop: null,\n      scrollLeft: null,\n      translateX: null,\n      translateY: null,\n    },\n    zoomState: 'expand', // 'expand' 'compress'\n    navigationHidden: false,\n    dragPosition: { top: 0, left: 0, x: 0, y: 0 },\n    dragged: false,\n    lockScroll: { x: 0, y: 0 },\n    lockTranslate: { x: 0, y: 0 },\n  };\n\n  removers = [];\n  container = null;\n  image = null;\n  lastTouchEndTime = 0;\n  lastDistance = 0;\n\n  componentDidMount () {\n    let handler = this.handleTouchStart;\n    this.container.addEventListener('touchstart', handler);\n    this.removers.push(() => this.container.removeEventListener('touchstart', handler));\n    handler = this.handleTouchMove;\n    // on Chrome 56+, touch event listeners will default to passive\n    // https://www.chromestatus.com/features/5093566007214080\n    this.container.addEventListener('touchmove', handler, { passive: false });\n    this.removers.push(() => this.container.removeEventListener('touchend', handler));\n\n    handler = this.mouseDownHandler;\n    this.container.addEventListener('mousedown', handler);\n    this.removers.push(() => this.container.removeEventListener('mousedown', handler));\n\n    handler = this.mouseWheelHandler;\n    this.container.addEventListener('wheel', handler);\n    this.removers.push(() => this.container.removeEventListener('wheel', handler));\n    // Old Chrome\n    this.container.addEventListener('mousewheel', handler);\n    this.removers.push(() => this.container.removeEventListener('mousewheel', handler));\n    // Old Firefox\n    this.container.addEventListener('DOMMouseScroll', handler);\n    this.removers.push(() => this.container.removeEventListener('DOMMouseScroll', handler));\n\n    this.initZoomMatrix();\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  componentDidUpdate () {\n    this.setState({ zoomState: this.state.scale >= this.state.zoomMatrix.rate ? 'compress' : 'expand' });\n\n    if (this.state.scale === MIN_SCALE) {\n      this.container.style.removeProperty('cursor');\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps () {\n    // reset when slide to next image\n    if (this.props.zoomButtonHidden) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockTranslate: { x: 0, y: 0 },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    }\n  }\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  mouseWheelHandler = e => {\n    e.preventDefault();\n\n    const event = normalizeWheel(e);\n\n    if (this.state.zoomMatrix.type === 'width') {\n      // full width, scroll vertical\n      this.container.scrollTop = Math.max(this.container.scrollTop + event.pixelY, this.state.lockScroll.y);\n    } else {\n      // full height, scroll horizontal\n      this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelY, this.state.lockScroll.x);\n    }\n\n    // lock horizontal scroll\n    this.container.scrollLeft = Math.max(this.container.scrollLeft + event.pixelX, this.state.lockScroll.x);\n  };\n\n  mouseDownHandler = e => {\n    this.container.style.cursor = 'grabbing';\n    this.container.style.userSelect = 'none';\n\n    this.setState({ dragPosition: {\n      left: this.container.scrollLeft,\n      top: this.container.scrollTop,\n      // Get the current mouse position\n      x: e.clientX,\n      y: e.clientY,\n    } });\n\n    this.image.addEventListener('mousemove', this.mouseMoveHandler);\n    this.image.addEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  mouseMoveHandler = e => {\n    const dx = e.clientX - this.state.dragPosition.x;\n    const dy = e.clientY - this.state.dragPosition.y;\n\n    this.container.scrollLeft = Math.max(this.state.dragPosition.left - dx, this.state.lockScroll.x);\n    this.container.scrollTop = Math.max(this.state.dragPosition.top - dy, this.state.lockScroll.y);\n\n    this.setState({ dragged: true });\n  };\n\n  mouseUpHandler = () => {\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n\n    this.image.removeEventListener('mousemove', this.mouseMoveHandler);\n    this.image.removeEventListener('mouseup', this.mouseUpHandler);\n  };\n\n  handleTouchStart = e => {\n    if (e.touches.length !== 2) return;\n\n    this.lastDistance = getDistance(...e.touches);\n  };\n\n  handleTouchMove = e => {\n    const { scrollTop, scrollHeight, clientHeight } = this.container;\n    if (e.touches.length === 1 && scrollTop !== scrollHeight - clientHeight) {\n      // prevent propagating event to MediaModal\n      e.stopPropagation();\n      return;\n    }\n    if (e.touches.length !== 2) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const distance = getDistance(...e.touches);\n    const midpoint = getMidpoint(...e.touches);\n    const _MAX_SCALE = Math.max(MAX_SCALE, this.state.zoomMatrix.rate);\n    const scale = clamp(MIN_SCALE, _MAX_SCALE, this.state.scale * distance / this.lastDistance);\n\n    this.zoom(scale, midpoint);\n\n    this.lastMidpoint = midpoint;\n    this.lastDistance = distance;\n  };\n\n  zoom(nextScale, midpoint) {\n    const { scale, zoomMatrix } = this.state;\n    const { scrollLeft, scrollTop } = this.container;\n\n    // math memo:\n    // x = (scrollLeft + midpoint.x) / scrollWidth\n    // x' = (nextScrollLeft + midpoint.x) / nextScrollWidth\n    // scrollWidth = clientWidth * scale\n    // scrollWidth' = clientWidth * nextScale\n    // Solve x = x' for nextScrollLeft\n    const nextScrollLeft = (scrollLeft + midpoint.x) * nextScale / scale - midpoint.x;\n    const nextScrollTop = (scrollTop + midpoint.y) * nextScale / scale - midpoint.y;\n\n    this.setState({ scale: nextScale }, () => {\n      this.container.scrollLeft = nextScrollLeft;\n      this.container.scrollTop = nextScrollTop;\n      // reset the translateX/Y constantly\n      if (nextScale < zoomMatrix.rate) {\n        this.setState({\n          lockTranslate: {\n            x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n            y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY * ((nextScale - MIN_SCALE) / (zoomMatrix.rate - MIN_SCALE)),\n          },\n        });\n      }\n    });\n  }\n\n  handleClick = e => {\n    // don't propagate event to MediaModal\n    e.stopPropagation();\n    const dragged = this.state.dragged;\n    this.setState({ dragged: false });\n    if (dragged) return;\n    const handler = this.props.onClick;\n    if (handler) handler();\n    this.setState({ navigationHidden: !this.state.navigationHidden });\n  };\n\n  handleMouseDown = e => {\n    e.preventDefault();\n  };\n\n  initZoomMatrix = () => {\n    const { width, height } = this.props;\n    const { clientWidth, clientHeight } = this.container;\n    const { offsetWidth, offsetHeight } = this.image;\n    const clientHeightFixed = clientHeight - NAV_BAR_HEIGHT;\n\n    const type = width / height < clientWidth / clientHeightFixed ? 'width' : 'height';\n    const fullScreen = type === 'width' ?  width > clientWidth : height > clientHeightFixed;\n    const rate = type === 'width' ? Math.min(clientWidth, width) / offsetWidth : Math.min(clientHeightFixed, height) / offsetHeight;\n    const scrollTop = type === 'width' ?  (clientHeight - offsetHeight) / 2 - NAV_BAR_HEIGHT : (clientHeightFixed - offsetHeight) / 2;\n    const scrollLeft = (clientWidth - offsetWidth) / 2;\n    const translateX = type === 'width' ? (width - offsetWidth) / (2 * rate) : 0;\n    const translateY = type === 'height' ? (height - offsetHeight) / (2 * rate) : 0;\n\n    this.setState({\n      zoomMatrix: {\n        type: type,\n        fullScreen: fullScreen,\n        rate: rate,\n        clientWidth: clientWidth,\n        clientHeight: clientHeight,\n        offsetWidth: offsetWidth,\n        offsetHeight: offsetHeight,\n        clientHeightFixed: clientHeightFixed,\n        scrollTop: scrollTop,\n        scrollLeft: scrollLeft,\n        translateX: translateX,\n        translateY: translateY,\n      },\n    });\n  };\n\n  handleZoomClick = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const { scale, zoomMatrix } = this.state;\n\n    if ( scale >= zoomMatrix.rate ) {\n      this.setState({\n        scale: MIN_SCALE,\n        lockScroll: {\n          x: 0,\n          y: 0,\n        },\n        lockTranslate: {\n          x: 0,\n          y: 0,\n        },\n      }, () => {\n        this.container.scrollLeft = 0;\n        this.container.scrollTop = 0;\n      });\n    } else {\n      this.setState({\n        scale: zoomMatrix.rate,\n        lockScroll: {\n          x: zoomMatrix.scrollLeft,\n          y: zoomMatrix.scrollTop,\n        },\n        lockTranslate: {\n          x: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateX,\n          y: zoomMatrix.fullScreen ? 0 : zoomMatrix.translateY,\n        },\n      }, () => {\n        this.container.scrollLeft = zoomMatrix.scrollLeft;\n        this.container.scrollTop = zoomMatrix.scrollTop;\n      });\n    }\n\n    this.container.style.cursor = 'grab';\n    this.container.style.removeProperty('user-select');\n  };\n\n  setContainerRef = c => {\n    this.container = c;\n  };\n\n  setImageRef = c => {\n    this.image = c;\n  };\n\n  render () {\n    const { alt, lang, src, width, height, intl } = this.props;\n    const { scale, lockTranslate } = this.state;\n    const overflow = scale === MIN_SCALE ? 'hidden' : 'scroll';\n    const zoomButtonShouldHide = this.state.navigationHidden || this.props.zoomButtonHidden || this.state.zoomMatrix.rate <= MIN_SCALE ? 'media-modal__zoom-button--hidden' : '';\n    const zoomButtonTitle = this.state.zoomState === 'compress' ? intl.formatMessage(messages.compress) : intl.formatMessage(messages.expand);\n\n    return (\n      <>\n        <IconButton\n          className={`media-modal__zoom-button ${zoomButtonShouldHide}`}\n          title={zoomButtonTitle}\n          icon={this.state.zoomState}\n          iconComponent={this.state.zoomState === 'compress' ? FullscreenExitIcon : RectangleIcon}\n          onClick={this.handleZoomClick}\n          size={40}\n          style={{\n            fontSize: '30px', /* Fontawesome's fa-compress fa-expand is larger than fa-close */\n          }}\n        />\n        <div\n          className='zoomable-image'\n          ref={this.setContainerRef}\n          style={{ overflow }}\n        >\n          <img\n            role='presentation'\n            ref={this.setImageRef}\n            alt={alt}\n            title={alt}\n            lang={lang}\n            src={src}\n            width={width}\n            height={height}\n            style={{\n              transform: `scale(${scale}) translate(-${lockTranslate.x}px, -${lockTranslate.y}px)`,\n              transformOrigin: '0 0',\n            }}\n            draggable={false}\n            onClick={this.handleClick}\n            onMouseDown={this.handleMouseDown}\n          />\n        </div>\n      </>\n    );\n  }\n\n}\n\nexport default injectIntl(ZoomableImage);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport classNames from 'classnames';\n\nimport { LoadingBar } from 'react-redux-loading-bar';\n\nimport ZoomableImage from './zoomable_image';\n\nexport default class ImageLoader extends PureComponent {\n\n  static propTypes = {\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    previewSrc: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    onClick: PropTypes.func,\n    zoomButtonHidden: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    alt: '',\n    lang: '',\n    width: null,\n    height: null,\n  };\n\n  state = {\n    loading: true,\n    error: false,\n    width: null,\n  };\n\n  removers = [];\n  canvas = null;\n\n  get canvasContext() {\n    if (!this.canvas) {\n      return null;\n    }\n    this._canvasContext = this._canvasContext || this.canvas.getContext('2d');\n    return this._canvasContext;\n  }\n\n  componentDidMount () {\n    this.loadImage(this.props);\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (this.props.src !== nextProps.src) {\n      this.loadImage(nextProps);\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeEventListeners();\n  }\n\n  loadImage (props) {\n    this.removeEventListeners();\n    this.setState({ loading: true, error: false });\n    Promise.all([\n      props.previewSrc && this.loadPreviewCanvas(props),\n      this.hasSize() && this.loadOriginalImage(props),\n    ].filter(Boolean))\n      .then(() => {\n        this.setState({ loading: false, error: false });\n        this.clearPreviewCanvas();\n      })\n      .catch(() => this.setState({ loading: false, error: true }));\n  }\n\n  loadPreviewCanvas = ({ previewSrc, width, height }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      this.canvasContext.drawImage(image, 0, 0, width, height);\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = previewSrc;\n    this.removers.push(removeEventListeners);\n  });\n\n  clearPreviewCanvas () {\n    const { width, height } = this.canvas;\n    this.canvasContext.clearRect(0, 0, width, height);\n  }\n\n  loadOriginalImage = ({ src }) => new Promise((resolve, reject) => {\n    const image = new Image();\n    const removeEventListeners = () => {\n      image.removeEventListener('error', handleError);\n      image.removeEventListener('load', handleLoad);\n    };\n    const handleError = () => {\n      removeEventListeners();\n      reject();\n    };\n    const handleLoad = () => {\n      removeEventListeners();\n      resolve();\n    };\n    image.addEventListener('error', handleError);\n    image.addEventListener('load', handleLoad);\n    image.src = src;\n    this.removers.push(removeEventListeners);\n  });\n\n  removeEventListeners () {\n    this.removers.forEach(listeners => listeners());\n    this.removers = [];\n  }\n\n  hasSize () {\n    const { width, height } = this.props;\n    return typeof width === 'number' && typeof height === 'number';\n  }\n\n  setCanvasRef = c => {\n    this.canvas = c;\n    if (c) this.setState({ width: c.offsetWidth });\n  };\n\n  render () {\n    const { alt, lang, src, width, height, onClick } = this.props;\n    const { loading } = this.state;\n\n    const className = classNames('image-loader', {\n      'image-loader--loading': loading,\n      'image-loader--amorphous': !this.hasSize(),\n    });\n\n    return (\n      <div className={className}>\n        {loading ? (\n          <>\n            <div className='loading-bar__container' style={{ width: this.state.width || width }}>\n              <LoadingBar className='loading-bar' loading={1} />\n            </div>\n            <canvas\n              className='image-loader__preview-canvas'\n              ref={this.setCanvasRef}\n              width={width}\n              height={height}\n            />\n          </>\n        ) : (\n          <ZoomableImage\n            alt={alt}\n            lang={lang}\n            src={src}\n            onClick={onClick}\n            width={width}\n            height={height}\n            zoomButtonHidden={this.props.zoomButtonHidden}\n          />\n        )}\n      </div>\n    );\n  }\n\n}\n","import api from '../api';\n\nimport { importFetchedAccounts } from './importer';\n\nexport const HISTORY_FETCH_REQUEST = 'HISTORY_FETCH_REQUEST';\nexport const HISTORY_FETCH_SUCCESS = 'HISTORY_FETCH_SUCCESS';\nexport const HISTORY_FETCH_FAIL    = 'HISTORY_FETCH_FAIL';\n\nexport const fetchHistory = statusId => (dispatch, getState) => {\n  const loading = getState().getIn(['history', statusId, 'loading']);\n\n  if (loading) {\n    return;\n  }\n\n  dispatch(fetchHistoryRequest(statusId));\n\n  api().get(`/api/v1/statuses/${statusId}/history`).then(({ data }) => {\n    dispatch(importFetchedAccounts(data.map(x => x.account)));\n    dispatch(fetchHistorySuccess(statusId, data));\n  }).catch(error => dispatch(fetchHistoryFail(error)));\n};\n\nexport const fetchHistoryRequest = statusId => ({\n  type: HISTORY_FETCH_REQUEST,\n  statusId,\n});\n\nexport const fetchHistorySuccess = (statusId, history) => ({\n  type: HISTORY_FETCH_SUCCESS,\n  statusId,\n  history,\n});\n\nexport const fetchHistoryFail = error => ({\n  type: HISTORY_FETCH_FAIL,\n  error,\n});\n","import api from '../api';\n\nexport const FEATURED_TAGS_FETCH_REQUEST = 'FEATURED_TAGS_FETCH_REQUEST';\nexport const FEATURED_TAGS_FETCH_SUCCESS = 'FEATURED_TAGS_FETCH_SUCCESS';\nexport const FEATURED_TAGS_FETCH_FAIL    = 'FEATURED_TAGS_FETCH_FAIL';\n\nexport const fetchFeaturedTags = (id) => (dispatch, getState) => {\n  if (getState().getIn(['user_lists', 'featured_tags', id, 'items'])) {\n    return;\n  }\n\n  dispatch(fetchFeaturedTagsRequest(id));\n\n  api().get(`/api/v1/accounts/${id}/featured_tags`)\n    .then(({ data }) => dispatch(fetchFeaturedTagsSuccess(id, data)))\n    .catch(err => dispatch(fetchFeaturedTagsFail(id, err)));\n};\n\nexport const fetchFeaturedTagsRequest = (id) => ({\n  type: FEATURED_TAGS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchFeaturedTagsSuccess = (id, tags) => ({\n  type: FEATURED_TAGS_FETCH_SUCCESS,\n  id,\n  tags,\n});\n\nexport const fetchFeaturedTagsFail = (id, error) => ({\n  type: FEATURED_TAGS_FETCH_FAIL,\n  id,\n  error,\n});\n","import api from '../api';\n\nimport { importFetchedAccounts } from './importer';\n\nexport const HISTORY_FETCH_REQUEST = 'HISTORY_FETCH_REQUEST';\nexport const HISTORY_FETCH_SUCCESS = 'HISTORY_FETCH_SUCCESS';\nexport const HISTORY_FETCH_FAIL    = 'HISTORY_FETCH_FAIL';\n\nexport const fetchHistory = statusId => (dispatch, getState) => {\n  const loading = getState().getIn(['history', statusId, 'loading']);\n\n  if (loading) {\n    return;\n  }\n\n  dispatch(fetchHistoryRequest(statusId));\n\n  api().get(`/api/v1/statuses/${statusId}/history`).then(({ data }) => {\n    dispatch(importFetchedAccounts(data.map(x => x.account)));\n    dispatch(fetchHistorySuccess(statusId, data));\n  }).catch(error => dispatch(fetchHistoryFail(error)));\n};\n\nexport const fetchHistoryRequest = statusId => ({\n  type: HISTORY_FETCH_REQUEST,\n  statusId,\n});\n\nexport const fetchHistorySuccess = (statusId, history) => ({\n  type: HISTORY_FETCH_SUCCESS,\n  statusId,\n  history,\n});\n\nexport const fetchHistoryFail = error => ({\n  type: HISTORY_FETCH_FAIL,\n  error,\n});\n","import api from '../api';\n\nexport const FEATURED_TAGS_FETCH_REQUEST = 'FEATURED_TAGS_FETCH_REQUEST';\nexport const FEATURED_TAGS_FETCH_SUCCESS = 'FEATURED_TAGS_FETCH_SUCCESS';\nexport const FEATURED_TAGS_FETCH_FAIL    = 'FEATURED_TAGS_FETCH_FAIL';\n\nexport const fetchFeaturedTags = (id) => (dispatch, getState) => {\n  if (getState().getIn(['user_lists', 'featured_tags', id, 'items'])) {\n    return;\n  }\n\n  dispatch(fetchFeaturedTagsRequest(id));\n\n  api().get(`/api/v1/accounts/${id}/featured_tags`)\n    .then(({ data }) => dispatch(fetchFeaturedTagsSuccess(id, data)))\n    .catch(err => dispatch(fetchFeaturedTagsFail(id, err)));\n};\n\nexport const fetchFeaturedTagsRequest = (id) => ({\n  type: FEATURED_TAGS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchFeaturedTagsSuccess = (id, tags) => ({\n  type: FEATURED_TAGS_FETCH_SUCCESS,\n  id,\n  tags,\n});\n\nexport const fetchFeaturedTagsFail = (id, error) => ({\n  type: FEATURED_TAGS_FETCH_FAIL,\n  id,\n  error,\n});\n","import punycode from 'punycode';\n\nconst IDNA_PREFIX = 'xn--';\n\nexport const decode = domain => {\n  return domain\n    .split('.')\n    .map(part => part.indexOf(IDNA_PREFIX) === 0 ? punycode.decode(part.slice(IDNA_PREFIX.length)) : part)\n    .join('.');\n};\n","import { createAsyncThunk } from '@reduxjs/toolkit';\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport type { BaseThunkAPI } from '@reduxjs/toolkit/dist/createAsyncThunk';\n\nimport type { AppDispatch, RootState } from './store';\n\nexport const useAppDispatch = useDispatch.withTypes<AppDispatch>();\nexport const useAppSelector = useSelector.withTypes<RootState>();\n\nexport interface AsyncThunkRejectValue {\n  skipAlert?: boolean;\n  skipNotFound?: boolean;\n  error?: unknown;\n}\n\ninterface AppMeta {\n  skipLoading?: boolean;\n}\n\nexport const createAppAsyncThunk = createAsyncThunk.withTypes<{\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n}>();\n\ntype AppThunkApi = Pick<\n  BaseThunkAPI<\n    RootState,\n    unknown,\n    AppDispatch,\n    AsyncThunkRejectValue,\n    AppMeta,\n    AppMeta\n  >,\n  'getState' | 'dispatch'\n>;\n\ninterface AppThunkOptions {\n  skipLoading?: boolean;\n}\n\nconst createBaseAsyncThunk = createAsyncThunk.withTypes<{\n  state: RootState;\n  dispatch: AppDispatch;\n  rejectValue: AsyncThunkRejectValue;\n  fulfilledMeta: AppMeta;\n  rejectedMeta: AppMeta;\n}>();\n\nexport function createThunk<Arg = void, Returned = void>(\n  name: string,\n  creator: (arg: Arg, api: AppThunkApi) => Returned | Promise<Returned>,\n  options: AppThunkOptions = {},\n) {\n  return createBaseAsyncThunk(\n    name,\n    async (\n      arg: Arg,\n      { getState, dispatch, fulfillWithValue, rejectWithValue },\n    ) => {\n      try {\n        const result = await creator(arg, { dispatch, getState });\n\n        return fulfillWithValue(result, {\n          skipLoading: options.skipLoading,\n        });\n      } catch (error) {\n        return rejectWithValue({ error }, { skipLoading: true });\n      }\n    },\n    {\n      getPendingMeta() {\n        if (options.skipLoading) return { skipLoading: true };\n        return {};\n      },\n    },\n  );\n}\n\nconst discardLoadDataInPayload = Symbol('discardLoadDataInPayload');\ntype DiscardLoadData = typeof discardLoadDataInPayload;\n\ntype OnData<ActionArg, LoadDataResult, ReturnedData> = (\n  data: LoadDataResult,\n  api: AppThunkApi & {\n    actionArg: ActionArg;\n    discardLoadData: DiscardLoadData;\n  },\n) => ReturnedData | DiscardLoadData | Promise<ReturnedData | DiscardLoadData>;\n\ntype LoadData<Args, LoadDataResult> = (\n  args: Args,\n  api: AppThunkApi,\n) => Promise<LoadDataResult>;\n\ntype ArgsType = Record<string, unknown> | undefined;\n\n// Overload when there is no `onData` method, the payload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: (args: Args) => Promise<LoadDataResult>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when the `onData` method returns discardLoadDataInPayload, then the payload is empty\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, DiscardLoadData>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, void>>;\n\n// Overload when the `onData` method returns nothing, then the mayload is the `onData` result\nexport function createDataLoadingThunk<LoadDataResult, Args extends ArgsType>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?: AppThunkOptions | OnData<Args, LoadDataResult, void>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, LoadDataResult>>;\n\n// Overload when there is an `onData` method returning something\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, Returned>,\n  thunkOptions?: AppThunkOptions,\n): ReturnType<typeof createThunk<Args, Returned>>;\n\n/**\n * This function creates a Redux Thunk that handles loading data asynchronously (usually from the API), dispatching `pending`, `fullfilled` and `rejected` actions.\n *\n * You can run a callback on the `onData` results to either dispatch side effects or modify the payload.\n *\n * It is a wrapper around RTK's [`createAsyncThunk`](https://redux-toolkit.js.org/api/createAsyncThunk)\n * @param name Prefix for the actions types\n * @param loadData Function that loads the data. It's (object) argument will become the thunk's argument\n * @param onDataOrThunkOptions\n *   Callback called on the results from `loadData`.\n *\n *   First argument will be the return from `loadData`.\n *\n *   Second argument is an object with: `dispatch`, `getState` and `discardLoadData`.\n *   It can return:\n *   - `undefined` (or no explicit return), meaning that the `onData` results will be the payload\n *   - `discardLoadData` to discard the `onData` results and return an empty payload\n *   - anything else, which will be the payload\n *\n *   You can also omit this parameter and pass `thunkOptions` directly\n * @param maybeThunkOptions\n *   Additional Mastodon specific options for the thunk. Currently supports:\n *   - `skipLoading` to avoid showing the loading bar when the request is in progress\n * @returns The created thunk\n */\nexport function createDataLoadingThunk<\n  LoadDataResult,\n  Args extends ArgsType,\n  Returned,\n>(\n  name: string,\n  loadData: LoadData<Args, LoadDataResult>,\n  onDataOrThunkOptions?:\n    | AppThunkOptions\n    | OnData<Args, LoadDataResult, Returned>,\n  maybeThunkOptions?: AppThunkOptions,\n) {\n  let onData: OnData<Args, LoadDataResult, Returned> | undefined;\n  let thunkOptions: AppThunkOptions | undefined;\n\n  if (typeof onDataOrThunkOptions === 'function') onData = onDataOrThunkOptions;\n  else if (typeof onDataOrThunkOptions === 'object')\n    thunkOptions = onDataOrThunkOptions;\n\n  if (maybeThunkOptions) {\n    thunkOptions = maybeThunkOptions;\n  }\n\n  return createThunk<Args, Returned>(\n    name,\n    async (arg, { getState, dispatch }) => {\n      const data = await loadData(arg, {\n        dispatch,\n        getState,\n      });\n\n      if (!onData) return data as Returned;\n\n      const result = await onData(data, {\n        dispatch,\n        getState,\n        discardLoadData: discardLoadDataInPayload,\n        actionArg: arg,\n      });\n\n      // if there is no return in `onData`, we return the `onData` result\n      if (typeof result === 'undefined') return data as Returned;\n      // the user explicitely asked to discard the payload\n      else if (result === discardLoadDataInPayload)\n        return undefined as Returned;\n      else return result;\n    },\n    thunkOptions,\n  );\n}\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\n// taken from:\n// https://github.com/twitter/twemoji/blob/47732c7/twemoji-generator.js#L848-L866\nexports.unicodeToFilename = (str) => {\n  let result = '';\n  let charCode = 0;\n  let p = 0;\n  let i = 0;\n  while (i < str.length) {\n    charCode = str.charCodeAt(i++);\n    if (p) {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += (0x10000 + ((p - 0xD800) << 10) + (charCode - 0xDC00)).toString(16);\n      p = 0;\n    } else if (0xD800 <= charCode && charCode <= 0xDBFF) {\n      p = charCode;\n    } else {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += charCode.toString(16);\n    }\n  }\n  return result;\n};\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\n// taken from:\n// https://github.com/twitter/twemoji/blob/47732c7/twemoji-generator.js#L848-L866\nexports.unicodeToFilename = (str) => {\n  let result = '';\n  let charCode = 0;\n  let p = 0;\n  let i = 0;\n  while (i < str.length) {\n    charCode = str.charCodeAt(i++);\n    if (p) {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += (0x10000 + ((p - 0xD800) << 10) + (charCode - 0xDC00)).toString(16);\n      p = 0;\n    } else if (0xD800 <= charCode && charCode <= 0xDBFF) {\n      p = charCode;\n    } else {\n      if (result.length > 0) {\n        result += '-';\n      }\n      result += charCode.toString(16);\n    }\n  }\n  return result;\n};\n","import { browserHistory } from 'flavours/glitch/components/router';\n\nimport api from '../api';\n\nimport { ensureComposeIsVisible, setComposeToStatus } from './compose';\nimport { importFetchedStatus, importFetchedStatuses, importFetchedAccount } from './importer';\nimport { deleteFromTimelines } from './timelines';\n\nexport const STATUS_FETCH_REQUEST = 'STATUS_FETCH_REQUEST';\nexport const STATUS_FETCH_SUCCESS = 'STATUS_FETCH_SUCCESS';\nexport const STATUS_FETCH_FAIL    = 'STATUS_FETCH_FAIL';\n\nexport const STATUS_DELETE_REQUEST = 'STATUS_DELETE_REQUEST';\nexport const STATUS_DELETE_SUCCESS = 'STATUS_DELETE_SUCCESS';\nexport const STATUS_DELETE_FAIL    = 'STATUS_DELETE_FAIL';\n\nexport const CONTEXT_FETCH_REQUEST = 'CONTEXT_FETCH_REQUEST';\nexport const CONTEXT_FETCH_SUCCESS = 'CONTEXT_FETCH_SUCCESS';\nexport const CONTEXT_FETCH_FAIL    = 'CONTEXT_FETCH_FAIL';\n\nexport const STATUS_MUTE_REQUEST = 'STATUS_MUTE_REQUEST';\nexport const STATUS_MUTE_SUCCESS = 'STATUS_MUTE_SUCCESS';\nexport const STATUS_MUTE_FAIL    = 'STATUS_MUTE_FAIL';\n\nexport const STATUS_UNMUTE_REQUEST = 'STATUS_UNMUTE_REQUEST';\nexport const STATUS_UNMUTE_SUCCESS = 'STATUS_UNMUTE_SUCCESS';\nexport const STATUS_UNMUTE_FAIL    = 'STATUS_UNMUTE_FAIL';\n\nexport const STATUS_REVEAL   = 'STATUS_REVEAL';\nexport const STATUS_HIDE     = 'STATUS_HIDE';\nexport const STATUS_COLLAPSE = 'STATUS_COLLAPSE';\n\nexport const REDRAFT = 'REDRAFT';\n\nexport const STATUS_FETCH_SOURCE_REQUEST = 'STATUS_FETCH_SOURCE_REQUEST';\nexport const STATUS_FETCH_SOURCE_SUCCESS = 'STATUS_FETCH_SOURCE_SUCCESS';\nexport const STATUS_FETCH_SOURCE_FAIL    = 'STATUS_FETCH_SOURCE_FAIL';\n\nexport const STATUS_TRANSLATE_REQUEST = 'STATUS_TRANSLATE_REQUEST';\nexport const STATUS_TRANSLATE_SUCCESS = 'STATUS_TRANSLATE_SUCCESS';\nexport const STATUS_TRANSLATE_FAIL    = 'STATUS_TRANSLATE_FAIL';\nexport const STATUS_TRANSLATE_UNDO    = 'STATUS_TRANSLATE_UNDO';\n\nexport function fetchStatusRequest(id, skipLoading) {\n  return {\n    type: STATUS_FETCH_REQUEST,\n    id,\n    skipLoading,\n  };\n}\n\nexport function fetchStatus(id, forceFetch = false) {\n  return (dispatch, getState) => {\n    const skipLoading = !forceFetch && getState().getIn(['statuses', id], null) !== null;\n\n    dispatch(fetchContext(id));\n\n    if (skipLoading) {\n      return;\n    }\n\n    dispatch(fetchStatusRequest(id, skipLoading));\n\n    api().get(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(fetchStatusSuccess(skipLoading));\n    }).catch(error => {\n      dispatch(fetchStatusFail(id, error, skipLoading));\n    });\n  };\n}\n\nexport function fetchStatusSuccess(skipLoading) {\n  return {\n    type: STATUS_FETCH_SUCCESS,\n    skipLoading,\n  };\n}\n\nexport function fetchStatusFail(id, error, skipLoading) {\n  return {\n    type: STATUS_FETCH_FAIL,\n    id,\n    error,\n    skipLoading,\n    skipAlert: true,\n  };\n}\n\nexport function redraft(status, raw_text, content_type) {\n  return {\n    type: REDRAFT,\n    status,\n    raw_text,\n    content_type,\n  };\n}\n\nexport const editStatus = (id) => (dispatch, getState) => {\n  let status = getState().getIn(['statuses', id]);\n\n  if (status.get('poll')) {\n    status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n  }\n\n  dispatch(fetchStatusSourceRequest());\n\n  api().get(`/api/v1/statuses/${id}/source`).then(response => {\n    dispatch(fetchStatusSourceSuccess());\n    ensureComposeIsVisible(getState);\n    dispatch(setComposeToStatus(status, response.data.text, response.data.spoiler_text, response.data.content_type));\n  }).catch(error => {\n    dispatch(fetchStatusSourceFail(error));\n  });\n};\n\nexport const fetchStatusSourceRequest = () => ({\n  type: STATUS_FETCH_SOURCE_REQUEST,\n});\n\nexport const fetchStatusSourceSuccess = () => ({\n  type: STATUS_FETCH_SOURCE_SUCCESS,\n});\n\nexport const fetchStatusSourceFail = error => ({\n  type: STATUS_FETCH_SOURCE_FAIL,\n  error,\n});\n\nexport function deleteStatus(id, withRedraft = false) {\n  return (dispatch, getState) => {\n    let status = getState().getIn(['statuses', id]);\n\n    if (status.get('poll')) {\n      status = status.set('poll', getState().getIn(['polls', status.get('poll')]));\n    }\n\n    dispatch(deleteStatusRequest(id));\n\n    api().delete(`/api/v1/statuses/${id}`).then(response => {\n      dispatch(deleteStatusSuccess(id));\n      dispatch(deleteFromTimelines(id));\n      dispatch(importFetchedAccount(response.data.account));\n\n      if (withRedraft) {\n        dispatch(redraft(status, response.data.text, response.data.content_type));\n        ensureComposeIsVisible(getState);\n      }\n    }).catch(error => {\n      dispatch(deleteStatusFail(id, error));\n    });\n  };\n}\n\nexport function deleteStatusRequest(id) {\n  return {\n    type: STATUS_DELETE_REQUEST,\n    id: id,\n  };\n}\n\nexport function deleteStatusSuccess(id) {\n  return {\n    type: STATUS_DELETE_SUCCESS,\n    id: id,\n  };\n}\n\nexport function deleteStatusFail(id, error) {\n  return {\n    type: STATUS_DELETE_FAIL,\n    id: id,\n    error: error,\n  };\n}\n\nexport const updateStatus = status => dispatch =>\n  dispatch(importFetchedStatus(status));\n\nexport function fetchContext(id) {\n  return (dispatch) => {\n    dispatch(fetchContextRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/context`).then(response => {\n      dispatch(importFetchedStatuses(response.data.ancestors.concat(response.data.descendants)));\n      dispatch(fetchContextSuccess(id, response.data.ancestors, response.data.descendants));\n\n    }).catch(error => {\n      if (error.response && error.response.status === 404) {\n        dispatch(deleteFromTimelines(id));\n      }\n\n      dispatch(fetchContextFail(id, error));\n    });\n  };\n}\n\nexport function fetchContextRequest(id) {\n  return {\n    type: CONTEXT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchContextSuccess(id, ancestors, descendants) {\n  return {\n    type: CONTEXT_FETCH_SUCCESS,\n    id,\n    ancestors,\n    descendants,\n    statuses: ancestors.concat(descendants),\n  };\n}\n\nexport function fetchContextFail(id, error) {\n  return {\n    type: CONTEXT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function muteStatus(id) {\n  return (dispatch) => {\n    dispatch(muteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/mute`).then(() => {\n      dispatch(muteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(muteStatusFail(id, error));\n    });\n  };\n}\n\nexport function muteStatusRequest(id) {\n  return {\n    type: STATUS_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteStatusSuccess(id) {\n  return {\n    type: STATUS_MUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function muteStatusFail(id, error) {\n  return {\n    type: STATUS_MUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function unmuteStatus(id) {\n  return (dispatch) => {\n    dispatch(unmuteStatusRequest(id));\n\n    api().post(`/api/v1/statuses/${id}/unmute`).then(() => {\n      dispatch(unmuteStatusSuccess(id));\n    }).catch(error => {\n      dispatch(unmuteStatusFail(id, error));\n    });\n  };\n}\n\nexport function unmuteStatusRequest(id) {\n  return {\n    type: STATUS_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteStatusSuccess(id) {\n  return {\n    type: STATUS_UNMUTE_SUCCESS,\n    id,\n  };\n}\n\nexport function unmuteStatusFail(id, error) {\n  return {\n    type: STATUS_UNMUTE_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function hideStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_HIDE,\n    ids,\n  };\n}\n\nexport function revealStatus(ids) {\n  if (!Array.isArray(ids)) {\n    ids = [ids];\n  }\n\n  return {\n    type: STATUS_REVEAL,\n    ids,\n  };\n}\n\nexport function toggleStatusSpoilers(statusId) {\n  return (dispatch, getState) => {\n    const status = getState().statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    if (status.get('hidden')) {\n      dispatch(revealStatus(statusId));\n    } else {\n      dispatch(hideStatus(statusId));\n    }\n  };\n}\n\nexport function toggleStatusCollapse(id, isCollapsed) {\n  return {\n    type: STATUS_COLLAPSE,\n    id,\n    isCollapsed,\n  };\n}\n\nexport const translateStatus = id => (dispatch) => {\n  dispatch(translateStatusRequest(id));\n\n  api().post(`/api/v1/statuses/${id}/translate`).then(response => {\n    dispatch(translateStatusSuccess(id, response.data));\n  }).catch(error => {\n    dispatch(translateStatusFail(id, error));\n  });\n};\n\nexport const translateStatusRequest = id => ({\n  type: STATUS_TRANSLATE_REQUEST,\n  id,\n});\n\nexport const translateStatusSuccess = (id, translation) => ({\n  type: STATUS_TRANSLATE_SUCCESS,\n  id,\n  translation,\n});\n\nexport const translateStatusFail = (id, error) => ({\n  type: STATUS_TRANSLATE_FAIL,\n  id,\n  error,\n});\n\nexport const undoStatusTranslation = (id, pollId) => ({\n  type: STATUS_TRANSLATE_UNDO,\n  id,\n  pollId,\n});\n\nexport const navigateToStatus = (statusId) => {\n  return (_dispatch, getState) => {\n    const state = getState();\n    const accountId = state.statuses.getIn([statusId, 'account']);\n    const acct = state.accounts.getIn([accountId, 'acct']);\n\n    if (acct) {\n      browserHistory.push(`/@${acct}/${statusId}`);\n    }\n  };\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar hasOwn = require('../internals/has-own-property');\n\n// `Object.hasOwn` method\n// https://tc39.es/ecma262/#sec-object.hasown\n$({ target: 'Object', stat: true }, {\n  hasOwn: hasOwn\n});\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * This work is licensed under the W3C Software and Document License\n * (http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document).\n */\n\n(function () {\n  // Return early if we're not running inside of the browser.\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  // Convenience function for converting NodeLists.\n  /** @type {typeof Array.prototype.slice} */\n  var slice = Array.prototype.slice;\n\n  /**\n   * IE has a non-standard name for \"matches\".\n   * @type {typeof Element.prototype.matches}\n   */\n  var matches = Element.prototype.matches || Element.prototype.msMatchesSelector;\n\n  /** @type {string} */\n  var _focusableElementsString = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'details', 'summary', 'iframe', 'object', 'embed', '[contenteditable]'].join(',');\n\n  /**\n   * `InertRoot` manages a single inert subtree, i.e. a DOM subtree whose root element has an `inert`\n   * attribute.\n   *\n   * Its main functions are:\n   *\n   * - to create and maintain a set of managed `InertNode`s, including when mutations occur in the\n   *   subtree. The `makeSubtreeUnfocusable()` method handles collecting `InertNode`s via registering\n   *   each focusable node in the subtree with the singleton `InertManager` which manages all known\n   *   focusable nodes within inert subtrees. `InertManager` ensures that a single `InertNode`\n   *   instance exists for each focusable node which has at least one inert root as an ancestor.\n   *\n   * - to notify all managed `InertNode`s when this subtree stops being inert (i.e. when the `inert`\n   *   attribute is removed from the root node). This is handled in the destructor, which calls the\n   *   `deregister` method on `InertManager` for each managed inert node.\n   */\n\n  var InertRoot = function () {\n    /**\n     * @param {!HTMLElement} rootElement The HTMLElement at the root of the inert subtree.\n     * @param {!InertManager} inertManager The global singleton InertManager object.\n     */\n    function InertRoot(rootElement, inertManager) {\n      _classCallCheck(this, InertRoot);\n\n      /** @type {!InertManager} */\n      this._inertManager = inertManager;\n\n      /** @type {!HTMLElement} */\n      this._rootElement = rootElement;\n\n      /**\n       * @type {!Set<!InertNode>}\n       * All managed focusable nodes in this InertRoot's subtree.\n       */\n      this._managedNodes = new Set();\n\n      // Make the subtree hidden from assistive technology\n      if (this._rootElement.hasAttribute('aria-hidden')) {\n        /** @type {?string} */\n        this._savedAriaHidden = this._rootElement.getAttribute('aria-hidden');\n      } else {\n        this._savedAriaHidden = null;\n      }\n      this._rootElement.setAttribute('aria-hidden', 'true');\n\n      // Make all focusable elements in the subtree unfocusable and add them to _managedNodes\n      this._makeSubtreeUnfocusable(this._rootElement);\n\n      // Watch for:\n      // - any additions in the subtree: make them unfocusable too\n      // - any removals from the subtree: remove them from this inert root's managed nodes\n      // - attribute changes: if `tabindex` is added, or removed from an intrinsically focusable\n      //   element, make that node a managed node.\n      this._observer = new MutationObserver(this._onMutation.bind(this));\n      this._observer.observe(this._rootElement, { attributes: true, childList: true, subtree: true });\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.  This unwinds all of the state\n     * stored in this object and updates the state of all of the managed nodes.\n     */\n\n\n    _createClass(InertRoot, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._observer.disconnect();\n\n        if (this._rootElement) {\n          if (this._savedAriaHidden !== null) {\n            this._rootElement.setAttribute('aria-hidden', this._savedAriaHidden);\n          } else {\n            this._rootElement.removeAttribute('aria-hidden');\n          }\n        }\n\n        this._managedNodes.forEach(function (inertNode) {\n          this._unmanageNode(inertNode.node);\n        }, this);\n\n        // Note we cast the nulls to the ANY type here because:\n        // 1) We want the class properties to be declared as non-null, or else we\n        //    need even more casts throughout this code. All bets are off if an\n        //    instance has been destroyed and a method is called.\n        // 2) We don't want to cast \"this\", because we want type-aware optimizations\n        //    to know which properties we're setting.\n        this._observer = /** @type {?} */null;\n        this._rootElement = /** @type {?} */null;\n        this._managedNodes = /** @type {?} */null;\n        this._inertManager = /** @type {?} */null;\n      }\n\n      /**\n       * @return {!Set<!InertNode>} A copy of this InertRoot's managed nodes set.\n       */\n\n    }, {\n      key: '_makeSubtreeUnfocusable',\n\n\n      /**\n       * @param {!Node} startNode\n       */\n      value: function _makeSubtreeUnfocusable(startNode) {\n        var _this2 = this;\n\n        composedTreeWalk(startNode, function (node) {\n          return _this2._visitNode(node);\n        });\n\n        var activeElement = document.activeElement;\n\n        if (!document.body.contains(startNode)) {\n          // startNode may be in shadow DOM, so find its nearest shadowRoot to get the activeElement.\n          var node = startNode;\n          /** @type {!ShadowRoot|undefined} */\n          var root = undefined;\n          while (node) {\n            if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n              root = /** @type {!ShadowRoot} */node;\n              break;\n            }\n            node = node.parentNode;\n          }\n          if (root) {\n            activeElement = root.activeElement;\n          }\n        }\n        if (startNode.contains(activeElement)) {\n          activeElement.blur();\n          // In IE11, if an element is already focused, and then set to tabindex=-1\n          // calling blur() will not actually move the focus.\n          // To work around this we call focus() on the body instead.\n          if (activeElement === document.activeElement) {\n            document.body.focus();\n          }\n        }\n      }\n\n      /**\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_visitNode',\n      value: function _visitNode(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!HTMLElement} */node;\n\n        // If a descendant inert root becomes un-inert, its descendants will still be inert because of\n        // this inert root, so all of its managed nodes need to be adopted by this InertRoot.\n        if (element !== this._rootElement && element.hasAttribute('inert')) {\n          this._adoptInertRoot(element);\n        }\n\n        if (matches.call(element, _focusableElementsString) || element.hasAttribute('tabindex')) {\n          this._manageNode(element);\n        }\n      }\n\n      /**\n       * Register the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_manageNode',\n      value: function _manageNode(node) {\n        var inertNode = this._inertManager.register(node, this);\n        this._managedNodes.add(inertNode);\n      }\n\n      /**\n       * Unregister the given node with this InertRoot and with InertManager.\n       * @param {!Node} node\n       */\n\n    }, {\n      key: '_unmanageNode',\n      value: function _unmanageNode(node) {\n        var inertNode = this._inertManager.deregister(node, this);\n        if (inertNode) {\n          this._managedNodes['delete'](inertNode);\n        }\n      }\n\n      /**\n       * Unregister the entire subtree starting at `startNode`.\n       * @param {!Node} startNode\n       */\n\n    }, {\n      key: '_unmanageSubtree',\n      value: function _unmanageSubtree(startNode) {\n        var _this3 = this;\n\n        composedTreeWalk(startNode, function (node) {\n          return _this3._unmanageNode(node);\n        });\n      }\n\n      /**\n       * If a descendant node is found with an `inert` attribute, adopt its managed nodes.\n       * @param {!HTMLElement} node\n       */\n\n    }, {\n      key: '_adoptInertRoot',\n      value: function _adoptInertRoot(node) {\n        var inertSubroot = this._inertManager.getInertRoot(node);\n\n        // During initialisation this inert root may not have been registered yet,\n        // so register it now if need be.\n        if (!inertSubroot) {\n          this._inertManager.setInert(node, true);\n          inertSubroot = this._inertManager.getInertRoot(node);\n        }\n\n        inertSubroot.managedNodes.forEach(function (savedInertNode) {\n          this._manageNode(savedInertNode.node);\n        }, this);\n      }\n\n      /**\n       * Callback used when mutation observer detects subtree additions, removals, or attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n\n    }, {\n      key: '_onMutation',\n      value: function _onMutation(records, self) {\n        records.forEach(function (record) {\n          var target = /** @type {!HTMLElement} */record.target;\n          if (record.type === 'childList') {\n            // Manage added nodes\n            slice.call(record.addedNodes).forEach(function (node) {\n              this._makeSubtreeUnfocusable(node);\n            }, this);\n\n            // Un-manage removed nodes\n            slice.call(record.removedNodes).forEach(function (node) {\n              this._unmanageSubtree(node);\n            }, this);\n          } else if (record.type === 'attributes') {\n            if (record.attributeName === 'tabindex') {\n              // Re-initialise inert node if tabindex changes\n              this._manageNode(target);\n            } else if (target !== this._rootElement && record.attributeName === 'inert' && target.hasAttribute('inert')) {\n              // If a new inert root is added, adopt its managed nodes and make sure it knows about the\n              // already managed nodes from this inert subroot.\n              this._adoptInertRoot(target);\n              var inertSubroot = this._inertManager.getInertRoot(target);\n              this._managedNodes.forEach(function (managedNode) {\n                if (target.contains(managedNode.node)) {\n                  inertSubroot._manageNode(managedNode.node);\n                }\n              });\n            }\n          }\n        }, this);\n      }\n    }, {\n      key: 'managedNodes',\n      get: function get() {\n        return new Set(this._managedNodes);\n      }\n\n      /** @return {boolean} */\n\n    }, {\n      key: 'hasSavedAriaHidden',\n      get: function get() {\n        return this._savedAriaHidden !== null;\n      }\n\n      /** @param {?string} ariaHidden */\n\n    }, {\n      key: 'savedAriaHidden',\n      set: function set(ariaHidden) {\n        this._savedAriaHidden = ariaHidden;\n      }\n\n      /** @return {?string} */\n      ,\n      get: function get() {\n        return this._savedAriaHidden;\n      }\n    }]);\n\n    return InertRoot;\n  }();\n\n  /**\n   * `InertNode` initialises and manages a single inert node.\n   * A node is inert if it is a descendant of one or more inert root elements.\n   *\n   * On construction, `InertNode` saves the existing `tabindex` value for the node, if any, and\n   * either removes the `tabindex` attribute or sets it to `-1`, depending on whether the element\n   * is intrinsically focusable or not.\n   *\n   * `InertNode` maintains a set of `InertRoot`s which are descendants of this `InertNode`. When an\n   * `InertRoot` is destroyed, and calls `InertManager.deregister()`, the `InertManager` notifies the\n   * `InertNode` via `removeInertRoot()`, which in turn destroys the `InertNode` if no `InertRoot`s\n   * remain in the set. On destruction, `InertNode` reinstates the stored `tabindex` if one exists,\n   * or removes the `tabindex` attribute if the element is intrinsically focusable.\n   */\n\n\n  var InertNode = function () {\n    /**\n     * @param {!Node} node A focusable element to be made inert.\n     * @param {!InertRoot} inertRoot The inert root element associated with this inert node.\n     */\n    function InertNode(node, inertRoot) {\n      _classCallCheck(this, InertNode);\n\n      /** @type {!Node} */\n      this._node = node;\n\n      /** @type {boolean} */\n      this._overrodeFocusMethod = false;\n\n      /**\n       * @type {!Set<!InertRoot>} The set of descendant inert roots.\n       *    If and only if this set becomes empty, this node is no longer inert.\n       */\n      this._inertRoots = new Set([inertRoot]);\n\n      /** @type {?number} */\n      this._savedTabIndex = null;\n\n      /** @type {boolean} */\n      this._destroyed = false;\n\n      // Save any prior tabindex info and make this node untabbable\n      this.ensureUntabbable();\n    }\n\n    /**\n     * Call this whenever this object is about to become obsolete.\n     * This makes the managed node focusable again and deletes all of the previously stored state.\n     */\n\n\n    _createClass(InertNode, [{\n      key: 'destructor',\n      value: function destructor() {\n        this._throwIfDestroyed();\n\n        if (this._node && this._node.nodeType === Node.ELEMENT_NODE) {\n          var element = /** @type {!HTMLElement} */this._node;\n          if (this._savedTabIndex !== null) {\n            element.setAttribute('tabindex', this._savedTabIndex);\n          } else {\n            element.removeAttribute('tabindex');\n          }\n\n          // Use `delete` to restore native focus method.\n          if (this._overrodeFocusMethod) {\n            delete element.focus;\n          }\n        }\n\n        // See note in InertRoot.destructor for why we cast these nulls to ANY.\n        this._node = /** @type {?} */null;\n        this._inertRoots = /** @type {?} */null;\n        this._destroyed = true;\n      }\n\n      /**\n       * @type {boolean} Whether this object is obsolete because the managed node is no longer inert.\n       * If the object has been destroyed, any attempt to access it will cause an exception.\n       */\n\n    }, {\n      key: '_throwIfDestroyed',\n\n\n      /**\n       * Throw if user tries to access destroyed InertNode.\n       */\n      value: function _throwIfDestroyed() {\n        if (this.destroyed) {\n          throw new Error('Trying to access destroyed InertNode');\n        }\n      }\n\n      /** @return {boolean} */\n\n    }, {\n      key: 'ensureUntabbable',\n\n\n      /** Save the existing tabindex value and make the node untabbable and unfocusable */\n      value: function ensureUntabbable() {\n        if (this.node.nodeType !== Node.ELEMENT_NODE) {\n          return;\n        }\n        var element = /** @type {!HTMLElement} */this.node;\n        if (matches.call(element, _focusableElementsString)) {\n          if ( /** @type {!HTMLElement} */element.tabIndex === -1 && this.hasSavedTabIndex) {\n            return;\n          }\n\n          if (element.hasAttribute('tabindex')) {\n            this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          }\n          element.setAttribute('tabindex', '-1');\n          if (element.nodeType === Node.ELEMENT_NODE) {\n            element.focus = function () {};\n            this._overrodeFocusMethod = true;\n          }\n        } else if (element.hasAttribute('tabindex')) {\n          this._savedTabIndex = /** @type {!HTMLElement} */element.tabIndex;\n          element.removeAttribute('tabindex');\n        }\n      }\n\n      /**\n       * Add another inert root to this inert node's set of managing inert roots.\n       * @param {!InertRoot} inertRoot\n       */\n\n    }, {\n      key: 'addInertRoot',\n      value: function addInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots.add(inertRoot);\n      }\n\n      /**\n       * Remove the given inert root from this inert node's set of managing inert roots.\n       * If the set of managing inert roots becomes empty, this node is no longer inert,\n       * so the object should be destroyed.\n       * @param {!InertRoot} inertRoot\n       */\n\n    }, {\n      key: 'removeInertRoot',\n      value: function removeInertRoot(inertRoot) {\n        this._throwIfDestroyed();\n        this._inertRoots['delete'](inertRoot);\n        if (this._inertRoots.size === 0) {\n          this.destructor();\n        }\n      }\n    }, {\n      key: 'destroyed',\n      get: function get() {\n        return (/** @type {!InertNode} */this._destroyed\n        );\n      }\n    }, {\n      key: 'hasSavedTabIndex',\n      get: function get() {\n        return this._savedTabIndex !== null;\n      }\n\n      /** @return {!Node} */\n\n    }, {\n      key: 'node',\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._node;\n      }\n\n      /** @param {?number} tabIndex */\n\n    }, {\n      key: 'savedTabIndex',\n      set: function set(tabIndex) {\n        this._throwIfDestroyed();\n        this._savedTabIndex = tabIndex;\n      }\n\n      /** @return {?number} */\n      ,\n      get: function get() {\n        this._throwIfDestroyed();\n        return this._savedTabIndex;\n      }\n    }]);\n\n    return InertNode;\n  }();\n\n  /**\n   * InertManager is a per-document singleton object which manages all inert roots and nodes.\n   *\n   * When an element becomes an inert root by having an `inert` attribute set and/or its `inert`\n   * property set to `true`, the `setInert` method creates an `InertRoot` object for the element.\n   * The `InertRoot` in turn registers itself as managing all of the element's focusable descendant\n   * nodes via the `register()` method. The `InertManager` ensures that a single `InertNode` instance\n   * is created for each such node, via the `_managedNodes` map.\n   */\n\n\n  var InertManager = function () {\n    /**\n     * @param {!Document} document\n     */\n    function InertManager(document) {\n      _classCallCheck(this, InertManager);\n\n      if (!document) {\n        throw new Error('Missing required argument; InertManager needs to wrap a document.');\n      }\n\n      /** @type {!Document} */\n      this._document = document;\n\n      /**\n       * All managed nodes known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertNode>}\n       */\n      this._managedNodes = new Map();\n\n      /**\n       * All inert roots known to this InertManager. In a map to allow looking up by Node.\n       * @type {!Map<!Node, !InertRoot>}\n       */\n      this._inertRoots = new Map();\n\n      /**\n       * Observer for mutations on `document.body`.\n       * @type {!MutationObserver}\n       */\n      this._observer = new MutationObserver(this._watchForInert.bind(this));\n\n      // Add inert style.\n      addInertStyle(document.head || document.body || document.documentElement);\n\n      // Wait for document to be loaded.\n      if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', this._onDocumentLoaded.bind(this));\n      } else {\n        this._onDocumentLoaded();\n      }\n    }\n\n    /**\n     * Set whether the given element should be an inert root or not.\n     * @param {!HTMLElement} root\n     * @param {boolean} inert\n     */\n\n\n    _createClass(InertManager, [{\n      key: 'setInert',\n      value: function setInert(root, inert) {\n        if (inert) {\n          if (this._inertRoots.has(root)) {\n            // element is already inert\n            return;\n          }\n\n          var inertRoot = new InertRoot(root, this);\n          root.setAttribute('inert', '');\n          this._inertRoots.set(root, inertRoot);\n          // If not contained in the document, it must be in a shadowRoot.\n          // Ensure inert styles are added there.\n          if (!this._document.body.contains(root)) {\n            var parent = root.parentNode;\n            while (parent) {\n              if (parent.nodeType === 11) {\n                addInertStyle(parent);\n              }\n              parent = parent.parentNode;\n            }\n          }\n        } else {\n          if (!this._inertRoots.has(root)) {\n            // element is already non-inert\n            return;\n          }\n\n          var _inertRoot = this._inertRoots.get(root);\n          _inertRoot.destructor();\n          this._inertRoots['delete'](root);\n          root.removeAttribute('inert');\n        }\n      }\n\n      /**\n       * Get the InertRoot object corresponding to the given inert root element, if any.\n       * @param {!Node} element\n       * @return {!InertRoot|undefined}\n       */\n\n    }, {\n      key: 'getInertRoot',\n      value: function getInertRoot(element) {\n        return this._inertRoots.get(element);\n      }\n\n      /**\n       * Register the given InertRoot as managing the given node.\n       * In the case where the node has a previously existing inert root, this inert root will\n       * be added to its set of inert roots.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {!InertNode} inertNode\n       */\n\n    }, {\n      key: 'register',\n      value: function register(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (inertNode !== undefined) {\n          // node was already in an inert subtree\n          inertNode.addInertRoot(inertRoot);\n        } else {\n          inertNode = new InertNode(node, inertRoot);\n        }\n\n        this._managedNodes.set(node, inertNode);\n\n        return inertNode;\n      }\n\n      /**\n       * De-register the given InertRoot as managing the given inert node.\n       * Removes the inert root from the InertNode's set of managing inert roots, and remove the inert\n       * node from the InertManager's set of managed nodes if it is destroyed.\n       * If the node is not currently managed, this is essentially a no-op.\n       * @param {!Node} node\n       * @param {!InertRoot} inertRoot\n       * @return {?InertNode} The potentially destroyed InertNode associated with this node, if any.\n       */\n\n    }, {\n      key: 'deregister',\n      value: function deregister(node, inertRoot) {\n        var inertNode = this._managedNodes.get(node);\n        if (!inertNode) {\n          return null;\n        }\n\n        inertNode.removeInertRoot(inertRoot);\n        if (inertNode.destroyed) {\n          this._managedNodes['delete'](node);\n        }\n\n        return inertNode;\n      }\n\n      /**\n       * Callback used when document has finished loading.\n       */\n\n    }, {\n      key: '_onDocumentLoaded',\n      value: function _onDocumentLoaded() {\n        // Find all inert roots in document and make them actually inert.\n        var inertElements = slice.call(this._document.querySelectorAll('[inert]'));\n        inertElements.forEach(function (inertElement) {\n          this.setInert(inertElement, true);\n        }, this);\n\n        // Comment this out to use programmatic API only.\n        this._observer.observe(this._document.body || this._document.documentElement, { attributes: true, subtree: true, childList: true });\n      }\n\n      /**\n       * Callback used when mutation observer detects attribute changes.\n       * @param {!Array<!MutationRecord>} records\n       * @param {!MutationObserver} self\n       */\n\n    }, {\n      key: '_watchForInert',\n      value: function _watchForInert(records, self) {\n        var _this = this;\n        records.forEach(function (record) {\n          switch (record.type) {\n            case 'childList':\n              slice.call(record.addedNodes).forEach(function (node) {\n                if (node.nodeType !== Node.ELEMENT_NODE) {\n                  return;\n                }\n                var inertElements = slice.call(node.querySelectorAll('[inert]'));\n                if (matches.call(node, '[inert]')) {\n                  inertElements.unshift(node);\n                }\n                inertElements.forEach(function (inertElement) {\n                  this.setInert(inertElement, true);\n                }, _this);\n              }, _this);\n              break;\n            case 'attributes':\n              if (record.attributeName !== 'inert') {\n                return;\n              }\n              var target = /** @type {!HTMLElement} */record.target;\n              var inert = target.hasAttribute('inert');\n              _this.setInert(target, inert);\n              break;\n          }\n        }, this);\n      }\n    }]);\n\n    return InertManager;\n  }();\n\n  /**\n   * Recursively walk the composed tree from |node|.\n   * @param {!Node} node\n   * @param {(function (!HTMLElement))=} callback Callback to be called for each element traversed,\n   *     before descending into child nodes.\n   * @param {?ShadowRoot=} shadowRootAncestor The nearest ShadowRoot ancestor, if any.\n   */\n\n\n  function composedTreeWalk(node, callback, shadowRootAncestor) {\n    if (node.nodeType == Node.ELEMENT_NODE) {\n      var element = /** @type {!HTMLElement} */node;\n      if (callback) {\n        callback(element);\n      }\n\n      // Descend into node:\n      // If it has a ShadowRoot, ignore all child elements - these will be picked\n      // up by the <content> or <shadow> elements. Descend straight into the\n      // ShadowRoot.\n      var shadowRoot = /** @type {!HTMLElement} */element.shadowRoot;\n      if (shadowRoot) {\n        composedTreeWalk(shadowRoot, callback, shadowRoot);\n        return;\n      }\n\n      // If it is a <content> element, descend into distributed elements - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'content') {\n        var content = /** @type {!HTMLContentElement} */element;\n        // Verifies if ShadowDom v0 is supported.\n        var distributedNodes = content.getDistributedNodes ? content.getDistributedNodes() : [];\n        for (var i = 0; i < distributedNodes.length; i++) {\n          composedTreeWalk(distributedNodes[i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n\n      // If it is a <slot> element, descend into assigned nodes - these\n      // are elements from outside the shadow root which are rendered inside the\n      // shadow DOM.\n      if (element.localName == 'slot') {\n        var slot = /** @type {!HTMLSlotElement} */element;\n        // Verify if ShadowDom v1 is supported.\n        var _distributedNodes = slot.assignedNodes ? slot.assignedNodes({ flatten: true }) : [];\n        for (var _i = 0; _i < _distributedNodes.length; _i++) {\n          composedTreeWalk(_distributedNodes[_i], callback, shadowRootAncestor);\n        }\n        return;\n      }\n    }\n\n    // If it is neither the parent of a ShadowRoot, a <content> element, a <slot>\n    // element, nor a <shadow> element recurse normally.\n    var child = node.firstChild;\n    while (child != null) {\n      composedTreeWalk(child, callback, shadowRootAncestor);\n      child = child.nextSibling;\n    }\n  }\n\n  /**\n   * Adds a style element to the node containing the inert specific styles\n   * @param {!Node} node\n   */\n  function addInertStyle(node) {\n    if (node.querySelector('style#inert-style, link#inert-style')) {\n      return;\n    }\n    var style = document.createElement('style');\n    style.setAttribute('id', 'inert-style');\n    style.textContent = '\\n' + '[inert] {\\n' + '  pointer-events: none;\\n' + '  cursor: default;\\n' + '}\\n' + '\\n' + '[inert], [inert] * {\\n' + '  -webkit-user-select: none;\\n' + '  -moz-user-select: none;\\n' + '  -ms-user-select: none;\\n' + '  user-select: none;\\n' + '}\\n';\n    node.appendChild(style);\n  }\n\n  if (!HTMLElement.prototype.hasOwnProperty('inert')) {\n    /** @type {!InertManager} */\n    var inertManager = new InertManager(document);\n\n    Object.defineProperty(HTMLElement.prototype, 'inert', {\n      enumerable: true,\n      /** @this {!HTMLElement} */\n      get: function get() {\n        return this.hasAttribute('inert');\n      },\n      /** @this {!HTMLElement} */\n      set: function set(inert) {\n        inertManager.setInert(this, inert);\n      }\n    });\n  }\n})();\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { ACCOUNT_LOOKUP_FAIL } from '../actions/accounts';\nimport { importAccounts } from '../actions/accounts_typed';\nimport { domain } from '../initial_state';\n\nexport const normalizeForLookup = str => {\n  str = str.toLowerCase();\n  const trailingIndex = str.indexOf(`@${domain.toLowerCase()}`);\n  return (trailingIndex > 0) ? str.slice(0, trailingIndex) : str;\n};\n\nconst initialState = ImmutableMap();\n\nexport default function accountsMap(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_LOOKUP_FAIL:\n    return action.error?.response?.status === 404 ? state.set(normalizeForLookup(action.acct), null) : state;\n  case importAccounts.type:\n    return state.withMutations(map => action.payload.accounts.forEach(account => map.set(normalizeForLookup(account.acct), account.id)));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { ACCOUNT_LOOKUP_FAIL } from '../actions/accounts';\nimport { importAccounts } from '../actions/accounts_typed';\nimport { domain } from '../initial_state';\n\nexport const normalizeForLookup = str => {\n  str = str.toLowerCase();\n  const trailingIndex = str.indexOf(`@${domain.toLowerCase()}`);\n  return (trailingIndex > 0) ? str.slice(0, trailingIndex) : str;\n};\n\nconst initialState = ImmutableMap();\n\nexport default function accountsMap(state = initialState, action) {\n  switch(action.type) {\n  case ACCOUNT_LOOKUP_FAIL:\n    return action.error?.response?.status === 404 ? state.set(normalizeForLookup(action.acct), null) : state;\n  case importAccounts.type:\n    return state.withMutations(map => action.payload.accounts.forEach(account => map.set(normalizeForLookup(account.acct), account.id)));\n  default:\n    return state;\n  }\n}\n","'use strict';\nvar global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar aConstructor = require('../internals/a-constructor');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar $TypeError = TypeError;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw new $TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","'use strict';\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw new $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n","/**\n * @license React\n * use-sync-external-store-with-selector.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var g=require(\"react\");function n(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var p=\"function\"===typeof Object.is?Object.is:n,q=g.useSyncExternalStore,r=g.useRef,t=g.useEffect,u=g.useMemo,v=g.useDebugValue;\nexports.useSyncExternalStoreWithSelector=function(a,b,e,l,h){var c=r(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=u(function(){function a(a){if(!c){c=!0;d=a;a=l(a);if(void 0!==h&&f.hasValue){var b=f.value;if(h(b,a))return k=b}return k=a}b=k;if(p(d,a))return b;var e=l(a);if(void 0!==h&&h(b,e))return b;d=a;return k=e}var c=!1,d,k,m=void 0===e?null:e;return[function(){return a(b())},null===m?void 0:function(){return a(m())}]},[b,e,l,h]);var d=q(a,c[0],c[1]);\nt(function(){f.hasValue=!0;f.value=d},[d]);v(d);return d};\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mapToZero = require('./mapToZero');\n\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\nvar _stripStyle = require('./stripStyle');\n\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\nvar _stepper3 = require('./stepper');\n\nvar _stepper4 = _interopRequireDefault(_stepper3);\n\nvar _performanceNow = require('performance-now');\n\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\nvar _raf = require('raf');\n\nvar _raf2 = _interopRequireDefault(_raf);\n\nvar _shouldStopAnimation = require('./shouldStopAnimation');\n\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar msPerFrame = 1000 / 60;\n\nfunction shouldStopAnimationAll(currentStyles, styles, currentVelocities) {\n  for (var i = 0; i < currentStyles.length; i++) {\n    if (!_shouldStopAnimation2['default'](currentStyles[i], styles[i], currentVelocities[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nvar StaggeredMotion = (function (_React$Component) {\n  _inherits(StaggeredMotion, _React$Component);\n\n  _createClass(StaggeredMotion, null, [{\n    key: 'propTypes',\n    value: {\n      // TOOD: warn against putting a config in here\n      defaultStyles: _propTypes2['default'].arrayOf(_propTypes2['default'].objectOf(_propTypes2['default'].number)),\n      styles: _propTypes2['default'].func.isRequired,\n      children: _propTypes2['default'].func.isRequired\n    },\n    enumerable: true\n  }]);\n\n  function StaggeredMotion(props) {\n    var _this = this;\n\n    _classCallCheck(this, StaggeredMotion);\n\n    _React$Component.call(this, props);\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyles = null;\n\n    this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _state = _this.state;\n      var currentStyles = _state.currentStyles;\n      var currentVelocities = _state.currentVelocities;\n      var lastIdealStyles = _state.lastIdealStyles;\n      var lastIdealVelocities = _state.lastIdealVelocities;\n\n      var someDirty = false;\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i];\n        var dirty = false;\n\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n\n          var styleValue = unreadPropStyle[key];\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              someDirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n            }\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n          }\n        }\n      }\n\n      if (someDirty) {\n        _this.setState({ currentStyles: currentStyles, currentVelocities: currentVelocities, lastIdealStyles: lastIdealStyles, lastIdealVelocities: lastIdealVelocities });\n      }\n    };\n\n    this.startAnimationIfNecessary = function () {\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        var destStyles = _this.props.styles(_this.state.lastIdealStyles);\n\n        // check if we need to animate in the first place\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\n        var newLastIdealStyles = [];\n        var newLastIdealVelocities = [];\n        var newCurrentStyles = [];\n        var newCurrentVelocities = [];\n\n        for (var i = 0; i < destStyles.length; i++) {\n          var destStyle = destStyles[i];\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n\n          for (var key in destStyle) {\n            if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {\n              continue;\n            }\n\n            var styleValue = destStyle[key];\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = _this.state.lastIdealStyles[i][key];\n              var newLastIdealVelocityValue = _this.state.lastIdealVelocities[i][key];\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n\n              var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n              var nextIdealX = _stepper2[0];\n              var nextIdealV = _stepper2[1];\n\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n        }\n\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities\n        });\n\n        _this.unreadPropStyles = null;\n\n        _this.startAnimationIfNecessary();\n      });\n    };\n\n    this.state = this.defaultState();\n  }\n\n  StaggeredMotion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyles = _props.defaultStyles;\n    var styles = _props.styles;\n\n    var currentStyles = defaultStyles || styles().map(_stripStyle2['default']);\n    var currentVelocities = currentStyles.map(function (currentStyle) {\n      return _mapToZero2['default'](currentStyle);\n    });\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: currentStyles,\n      lastIdealVelocities: currentVelocities\n    };\n  };\n\n  StaggeredMotion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n\n  StaggeredMotion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyles != null) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n\n    this.unreadPropStyles = props.styles(this.state.lastIdealStyles);\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n\n  StaggeredMotion.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n\n  StaggeredMotion.prototype.render = function render() {\n    var renderedChildren = this.props.children(this.state.currentStyles);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n\n  return StaggeredMotion;\n})(_react2['default'].Component);\n\nexports['default'] = StaggeredMotion;\nmodule.exports = exports['default'];\n\n// it's possible that currentStyle's value is stale: if props is immediately\n// changed from 0 to 400 to spring(0) again, the async currentStyle is still\n// at 0 (didn't have time to tick and interpolate even once). If we naively\n// compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n// In reality currentStyle should be 400\n\n// after checking for unreadPropStyles != null, we manually go set the\n// non-interpolating values (those that are a number, without a spring\n// config)","\n\n// core keys merging algorithm. If previous render's keys are [a, b], and the\n// next render's [c, b, d], what's the final merged keys and ordering?\n\n// - c and a must both be before b\n// - b before d\n// - ordering between a and c ambiguous\n\n// this reduces to merging two partially ordered lists (e.g. lists where not\n// every item has a definite ordering, like comparing a and c above). For the\n// ambiguous ordering we deterministically choose to place the next render's\n// item after the previous'; so c after a\n\n// this is called a topological sorting. Except the existing algorithms don't\n// work well with js bc of the amount of allocation, and isn't optimized for our\n// current use-case bc the runtime is linear in terms of edges (see wiki for\n// meaning), which is huge when two lists have many common elements\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = mergeDiff;\n\nfunction mergeDiff(prev, next, onRemove) {\n  // bookkeeping for easier access of a key's index below. This is 2 allocations +\n  // potentially triggering chrome hash map mode for objs (so it might be faster\n\n  var prevKeyIndex = {};\n  for (var i = 0; i < prev.length; i++) {\n    prevKeyIndex[prev[i].key] = i;\n  }\n  var nextKeyIndex = {};\n  for (var i = 0; i < next.length; i++) {\n    nextKeyIndex[next[i].key] = i;\n  }\n\n  // first, an overly elaborate way of merging prev and next, eliminating\n  // duplicates (in terms of keys). If there's dupe, keep the item in next).\n  // This way of writing it saves allocations\n  var ret = [];\n  for (var i = 0; i < next.length; i++) {\n    ret[i] = next[i];\n  }\n  for (var i = 0; i < prev.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(nextKeyIndex, prev[i].key)) {\n      // this is called my TM's `mergeAndSync`, which calls willLeave. We don't\n      // merge in keys that the user desires to kill\n      var fill = onRemove(i, prev[i]);\n      if (fill != null) {\n        ret.push(fill);\n      }\n    }\n  }\n\n  // now all the items all present. Core sorting logic to have the right order\n  return ret.sort(function (a, b) {\n    var nextOrderA = nextKeyIndex[a.key];\n    var nextOrderB = nextKeyIndex[b.key];\n    var prevOrderA = prevKeyIndex[a.key];\n    var prevOrderB = prevKeyIndex[b.key];\n\n    if (nextOrderA != null && nextOrderB != null) {\n      // both keys in next\n      return nextKeyIndex[a.key] - nextKeyIndex[b.key];\n    } else if (prevOrderA != null && prevOrderB != null) {\n      // both keys in prev\n      return prevKeyIndex[a.key] - prevKeyIndex[b.key];\n    } else if (nextOrderA != null) {\n      // key a in next, key b in prev\n\n      // how to determine the order between a and b? We find a \"pivot\" (term\n      // abuse), a key present in both prev and next, that is sandwiched between\n      // a and b. In the context of our above example, if we're comparing a and\n      // d, b's (the only) pivot\n      for (var i = 0; i < next.length; i++) {\n        var pivot = next[i].key;\n        if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {\n          continue;\n        }\n\n        if (nextOrderA < nextKeyIndex[pivot] && prevOrderB > prevKeyIndex[pivot]) {\n          return -1;\n        } else if (nextOrderA > nextKeyIndex[pivot] && prevOrderB < prevKeyIndex[pivot]) {\n          return 1;\n        }\n      }\n      // pluggable. default to: next bigger than prev\n      return 1;\n    }\n    // prevOrderA, nextOrderB\n    for (var i = 0; i < next.length; i++) {\n      var pivot = next[i].key;\n      if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {\n        continue;\n      }\n      if (nextOrderB < nextKeyIndex[pivot] && prevOrderA > prevKeyIndex[pivot]) {\n        return 1;\n      } else if (nextOrderB > nextKeyIndex[pivot] && prevOrderA < prevKeyIndex[pivot]) {\n        return -1;\n      }\n    }\n    // pluggable. default to: next bigger than prev\n    return -1;\n  });\n}\n\nmodule.exports = exports['default'];\n// to loop through and find a key's index each time), but I no longer care","'use strict';\n\nexports.__esModule = true;\nexports['default'] = reorderKeys;\n\nvar hasWarned = false;\n\nfunction reorderKeys() {\n  if (process.env.NODE_ENV === 'development') {\n    if (!hasWarned) {\n      hasWarned = true;\n      console.error('`reorderKeys` has been removed, since it is no longer needed for TransitionMotion\\'s new styles array API.');\n    }\n  }\n}\n\nmodule.exports = exports['default'];","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nfunction componentWillMount() {\n  // Call this.constructor.gDSFP to support sub-classes.\n  var state = this.constructor.getDerivedStateFromProps(this.props, this.state);\n  if (state !== null && state !== undefined) {\n    this.setState(state);\n  }\n}\n\nfunction componentWillReceiveProps(nextProps) {\n  // Call this.constructor.gDSFP to support sub-classes.\n  // Use the setState() updater to ensure state isn't stale in certain edge cases.\n  function updater(prevState) {\n    var state = this.constructor.getDerivedStateFromProps(nextProps, prevState);\n    return state !== null && state !== undefined ? state : null;\n  }\n  // Binding \"this\" is important for shallow renderer support.\n  this.setState(updater.bind(this));\n}\n\nfunction componentWillUpdate(nextProps, nextState) {\n  try {\n    var prevProps = this.props;\n    var prevState = this.state;\n    this.props = nextProps;\n    this.state = nextState;\n    this.__reactInternalSnapshotFlag = true;\n    this.__reactInternalSnapshot = this.getSnapshotBeforeUpdate(\n      prevProps,\n      prevState\n    );\n  } finally {\n    this.props = prevProps;\n    this.state = prevState;\n  }\n}\n\n// React may warn about cWM/cWRP/cWU methods being deprecated.\n// Add a flag to suppress these warnings for this special case.\ncomponentWillMount.__suppressDeprecationWarning = true;\ncomponentWillReceiveProps.__suppressDeprecationWarning = true;\ncomponentWillUpdate.__suppressDeprecationWarning = true;\n\nfunction polyfill(Component) {\n  var prototype = Component.prototype;\n\n  if (!prototype || !prototype.isReactComponent) {\n    throw new Error('Can only polyfill class components');\n  }\n\n  if (\n    typeof Component.getDerivedStateFromProps !== 'function' &&\n    typeof prototype.getSnapshotBeforeUpdate !== 'function'\n  ) {\n    return Component;\n  }\n\n  // If new component APIs are defined, \"unsafe\" lifecycles won't be called.\n  // Error if any of these lifecycles are present,\n  // Because they would work differently between older and newer (16.3+) versions of React.\n  var foundWillMountName = null;\n  var foundWillReceivePropsName = null;\n  var foundWillUpdateName = null;\n  if (typeof prototype.componentWillMount === 'function') {\n    foundWillMountName = 'componentWillMount';\n  } else if (typeof prototype.UNSAFE_componentWillMount === 'function') {\n    foundWillMountName = 'UNSAFE_componentWillMount';\n  }\n  if (typeof prototype.componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'componentWillReceiveProps';\n  } else if (typeof prototype.UNSAFE_componentWillReceiveProps === 'function') {\n    foundWillReceivePropsName = 'UNSAFE_componentWillReceiveProps';\n  }\n  if (typeof prototype.componentWillUpdate === 'function') {\n    foundWillUpdateName = 'componentWillUpdate';\n  } else if (typeof prototype.UNSAFE_componentWillUpdate === 'function') {\n    foundWillUpdateName = 'UNSAFE_componentWillUpdate';\n  }\n  if (\n    foundWillMountName !== null ||\n    foundWillReceivePropsName !== null ||\n    foundWillUpdateName !== null\n  ) {\n    var componentName = Component.displayName || Component.name;\n    var newApiName =\n      typeof Component.getDerivedStateFromProps === 'function'\n        ? 'getDerivedStateFromProps()'\n        : 'getSnapshotBeforeUpdate()';\n\n    throw Error(\n      'Unsafe legacy lifecycles will not be called for components using new component APIs.\\n\\n' +\n        componentName +\n        ' uses ' +\n        newApiName +\n        ' but also contains the following legacy lifecycles:' +\n        (foundWillMountName !== null ? '\\n  ' + foundWillMountName : '') +\n        (foundWillReceivePropsName !== null\n          ? '\\n  ' + foundWillReceivePropsName\n          : '') +\n        (foundWillUpdateName !== null ? '\\n  ' + foundWillUpdateName : '') +\n        '\\n\\nThe above lifecycles should be removed. Learn more about this warning here:\\n' +\n        'https://fb.me/react-async-component-lifecycle-hooks'\n    );\n  }\n\n  // React <= 16.2 does not support static getDerivedStateFromProps.\n  // As a workaround, use cWM and cWRP to invoke the new static lifecycle.\n  // Newer versions of React will ignore these lifecycles if gDSFP exists.\n  if (typeof Component.getDerivedStateFromProps === 'function') {\n    prototype.componentWillMount = componentWillMount;\n    prototype.componentWillReceiveProps = componentWillReceiveProps;\n  }\n\n  // React <= 16.2 does not support getSnapshotBeforeUpdate.\n  // As a workaround, use cWU to invoke the new lifecycle.\n  // Newer versions of React will ignore that lifecycle if gSBU exists.\n  if (typeof prototype.getSnapshotBeforeUpdate === 'function') {\n    if (typeof prototype.componentDidUpdate !== 'function') {\n      throw new Error(\n        'Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype'\n      );\n    }\n\n    prototype.componentWillUpdate = componentWillUpdate;\n\n    var componentDidUpdate = prototype.componentDidUpdate;\n\n    prototype.componentDidUpdate = function componentDidUpdatePolyfill(\n      prevProps,\n      prevState,\n      maybeSnapshot\n    ) {\n      // 16.3+ will not execute our will-update method;\n      // It will pass a snapshot value to did-update though.\n      // Older versions will require our polyfilled will-update value.\n      // We need to handle both cases, but can't just check for the presence of \"maybeSnapshot\",\n      // Because for <= 15.x versions this might be a \"prevContext\" object.\n      // We also can't just check \"__reactInternalSnapshot\",\n      // Because get-snapshot might return a falsy value.\n      // So check for the explicit __reactInternalSnapshotFlag flag to determine behavior.\n      var snapshot = this.__reactInternalSnapshotFlag\n        ? this.__reactInternalSnapshot\n        : maybeSnapshot;\n\n      componentDidUpdate.call(this, prevProps, prevState, snapshot);\n    };\n  }\n\n  return Component;\n}\n\nexport { polyfill };\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = loadingBarMiddleware;\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar defaultTypeSuffixes = ['PENDING', 'FULFILLED', 'REJECTED'];\n\nfunction loadingBarMiddleware() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var promiseTypeSuffixes = config.promiseTypeSuffixes || defaultTypeSuffixes;\n  var scope = config.scope || _loading_bar_ducks.DEFAULT_SCOPE;\n  return function (_ref) {\n    var dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type) {\n          var _promiseTypeSuffixes = _slicedToArray(promiseTypeSuffixes, 3),\n              PENDING = _promiseTypeSuffixes[0],\n              FULFILLED = _promiseTypeSuffixes[1],\n              REJECTED = _promiseTypeSuffixes[2];\n\n          var isPending = new RegExp(\"\".concat(PENDING, \"$\"), 'g');\n          var isFulfilled = new RegExp(\"\".concat(FULFILLED, \"$\"), 'g');\n          var isRejected = new RegExp(\"\".concat(REJECTED, \"$\"), 'g');\n          var actionScope = action.meta && action.meta.scope || action.scope || scope;\n\n          if (action.type.match(isPending)) {\n            dispatch((0, _loading_bar_ducks.showLoading)(actionScope));\n          } else if (action.type.match(isFulfilled) || action.type.match(isRejected)) {\n            dispatch((0, _loading_bar_ducks.hideLoading)(actionScope));\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _loading_bar = require(\"./loading_bar\");\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nvar mapImmutableStateToProps = function mapImmutableStateToProps(state, ownProps) {\n  return {\n    loading: state.get('loadingBar')[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapImmutableStateToProps)(_loading_bar.LoadingBar);\n\nexports[\"default\"] = _default;","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar ArrayBufferModule = require('../internals/array-buffer');\nvar anInstance = require('../internals/an-instance');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isIntegralNumber = require('../internals/is-integral-number');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar toOffset = require('../internals/to-offset');\nvar toUint8Clamped = require('../internals/to-uint8-clamped');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar create = require('../internals/object-create');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar typedArrayFrom = require('../internals/typed-array-from');\nvar forEach = require('../internals/array-iteration').forEach;\nvar setSpecies = require('../internals/set-species');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\nvar InternalStateModule = require('../internals/internal-state');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar enforceInternalState = InternalStateModule.enforce;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar RangeError = global.RangeError;\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataView = ArrayBufferModule.DataView;\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\nvar TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;\nvar TypedArray = ArrayBufferViewCore.TypedArray;\nvar TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;\nvar isTypedArray = ArrayBufferViewCore.isTypedArray;\nvar BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\nvar WRONG_LENGTH = 'Wrong length';\n\nvar addGetter = function (it, key) {\n  defineBuiltInAccessor(it, key, {\n    configurable: true,\n    get: function () {\n      return getInternalState(this)[key];\n    }\n  });\n};\n\nvar isArrayBuffer = function (it) {\n  var klass;\n  return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) === 'ArrayBuffer' || klass === 'SharedArrayBuffer';\n};\n\nvar isTypedArrayIndex = function (target, key) {\n  return isTypedArray(target)\n    && !isSymbol(key)\n    && key in target\n    && isIntegralNumber(+key)\n    && key >= 0;\n};\n\nvar wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {\n  key = toPropertyKey(key);\n  return isTypedArrayIndex(target, key)\n    ? createPropertyDescriptor(2, target[key])\n    : nativeGetOwnPropertyDescriptor(target, key);\n};\n\nvar wrappedDefineProperty = function defineProperty(target, key, descriptor) {\n  key = toPropertyKey(key);\n  if (isTypedArrayIndex(target, key)\n    && isObject(descriptor)\n    && hasOwn(descriptor, 'value')\n    && !hasOwn(descriptor, 'get')\n    && !hasOwn(descriptor, 'set')\n    // TODO: add validation descriptor w/o calling accessors\n    && !descriptor.configurable\n    && (!hasOwn(descriptor, 'writable') || descriptor.writable)\n    && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)\n  ) {\n    target[key] = descriptor.value;\n    return target;\n  } return nativeDefineProperty(target, key, descriptor);\n};\n\nif (DESCRIPTORS) {\n  if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;\n    definePropertyModule.f = wrappedDefineProperty;\n    addGetter(TypedArrayPrototype, 'buffer');\n    addGetter(TypedArrayPrototype, 'byteOffset');\n    addGetter(TypedArrayPrototype, 'byteLength');\n    addGetter(TypedArrayPrototype, 'length');\n  }\n\n  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,\n    defineProperty: wrappedDefineProperty\n  });\n\n  module.exports = function (TYPE, wrapper, CLAMPED) {\n    var BYTES = TYPE.match(/\\d+/)[0] / 8;\n    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + TYPE;\n    var SETTER = 'set' + TYPE;\n    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];\n    var TypedArrayConstructor = NativeTypedArrayConstructor;\n    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;\n    var exported = {};\n\n    var getter = function (that, index) {\n      var data = getInternalState(that);\n      return data.view[GETTER](index * BYTES + data.byteOffset, true);\n    };\n\n    var setter = function (that, index, value) {\n      var data = getInternalState(that);\n      data.view[SETTER](index * BYTES + data.byteOffset, CLAMPED ? toUint8Clamped(value) : value, true);\n    };\n\n    var addElement = function (that, index) {\n      nativeDefineProperty(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n\n    if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {\n        anInstance(that, TypedArrayConstructorPrototype);\n        var index = 0;\n        var byteOffset = 0;\n        var buffer, byteLength, length;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new ArrayBuffer(byteLength);\n        } else if (isArrayBuffer(data)) {\n          buffer = data;\n          byteOffset = toOffset(offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw new RangeError(WRONG_LENGTH);\n            byteLength = $len - byteOffset;\n            if (byteLength < 0) throw new RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + byteOffset > $len) throw new RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (isTypedArray(data)) {\n          return arrayFromConstructorAndList(TypedArrayConstructor, data);\n        } else {\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }\n        setInternalState(that, {\n          buffer: buffer,\n          byteOffset: byteOffset,\n          byteLength: byteLength,\n          length: length,\n          view: new DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);\n    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {\n      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {\n        anInstance(dummy, TypedArrayConstructorPrototype);\n        return inheritIfRequired(function () {\n          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));\n          if (isArrayBuffer(data)) return $length !== undefined\n            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)\n            : typedArrayOffset !== undefined\n              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))\n              : new NativeTypedArrayConstructor(data);\n          if (isTypedArray(data)) return arrayFromConstructorAndList(TypedArrayConstructor, data);\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }(), dummy, TypedArrayConstructor);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {\n        if (!(key in TypedArrayConstructor)) {\n          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);\n        }\n      });\n      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;\n    }\n\n    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);\n    }\n\n    enforceInternalState(TypedArrayConstructorPrototype).TypedArrayConstructor = TypedArrayConstructor;\n\n    if (TYPED_ARRAY_TAG) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);\n    }\n\n    var FORCED = TypedArrayConstructor !== NativeTypedArrayConstructor;\n\n    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;\n\n    $({ global: true, constructor: true, forced: FORCED, sham: !NATIVE_ARRAY_BUFFER_VIEWS }, exported);\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {\n      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    setSpecies(CONSTRUCTOR_NAME);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\n/* eslint-disable no-new -- required for testing */\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar NATIVE_ARRAY_BUFFER_VIEWS = require('../internals/array-buffer-view-core').NATIVE_ARRAY_BUFFER_VIEWS;\n\nvar ArrayBuffer = global.ArrayBuffer;\nvar Int8Array = global.Int8Array;\n\nmodule.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {\n  Int8Array(1);\n}) || !fails(function () {\n  new Int8Array(-1);\n}) || !checkCorrectnessOfIteration(function (iterable) {\n  new Int8Array();\n  new Int8Array(null);\n  new Int8Array(1.5);\n  new Int8Array(iterable);\n}, true) || fails(function () {\n  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill\n  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;\n});\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  try {\n    if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  } catch (error) { return false; } // workaround of old WebKit + `eval` bug\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar FunctionName = require('../internals/function-name');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar fails = require('../internals/fails');\nvar anInstance = require('../internals/an-instance');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar fround = require('../internals/math-fround');\nvar IEEE754 = require('../internals/ieee754');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar arrayFill = require('../internals/array-fill');\nvar arraySlice = require('../internals/array-slice');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length';\nvar WRONG_INDEX = 'Wrong index';\nvar getInternalArrayBufferState = InternalStateModule.getterFor(ARRAY_BUFFER);\nvar getInternalDataViewState = InternalStateModule.getterFor(DATA_VIEW);\nvar setInternalState = InternalStateModule.set;\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\nvar $ArrayBuffer = NativeArrayBuffer;\nvar ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];\nvar $DataView = global[DATA_VIEW];\nvar DataViewPrototype = $DataView && $DataView[PROTOTYPE];\nvar ObjectPrototype = Object.prototype;\nvar Array = global.Array;\nvar RangeError = global.RangeError;\nvar fill = uncurryThis(arrayFill);\nvar reverse = uncurryThis([].reverse);\n\nvar packIEEE754 = IEEE754.pack;\nvar unpackIEEE754 = IEEE754.unpack;\n\nvar packInt8 = function (number) {\n  return [number & 0xFF];\n};\n\nvar packInt16 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF];\n};\n\nvar packInt32 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];\n};\n\nvar unpackInt32 = function (buffer) {\n  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];\n};\n\nvar packFloat32 = function (number) {\n  return packIEEE754(fround(number), 23, 4);\n};\n\nvar packFloat64 = function (number) {\n  return packIEEE754(number, 52, 8);\n};\n\nvar addGetter = function (Constructor, key, getInternalState) {\n  defineBuiltInAccessor(Constructor[PROTOTYPE], key, {\n    configurable: true,\n    get: function () {\n      return getInternalState(this)[key];\n    }\n  });\n};\n\nvar get = function (view, count, index, isLittleEndian) {\n  var store = getInternalDataViewState(view);\n  var intIndex = toIndex(index);\n  var boolIsLittleEndian = !!isLittleEndian;\n  if (intIndex + count > store.byteLength) throw new RangeError(WRONG_INDEX);\n  var bytes = store.bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = arraySlice(bytes, start, start + count);\n  return boolIsLittleEndian ? pack : reverse(pack);\n};\n\nvar set = function (view, count, index, conversion, value, isLittleEndian) {\n  var store = getInternalDataViewState(view);\n  var intIndex = toIndex(index);\n  var pack = conversion(+value);\n  var boolIsLittleEndian = !!isLittleEndian;\n  if (intIndex + count > store.byteLength) throw new RangeError(WRONG_INDEX);\n  var bytes = store.bytes;\n  var start = intIndex + store.byteOffset;\n  for (var i = 0; i < count; i++) bytes[start + i] = pack[boolIsLittleEndian ? i : count - i - 1];\n};\n\nif (!NATIVE_ARRAY_BUFFER) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, ArrayBufferPrototype);\n    var byteLength = toIndex(length);\n    setInternalState(this, {\n      type: ARRAY_BUFFER,\n      bytes: fill(Array(byteLength), 0),\n      byteLength: byteLength\n    });\n    if (!DESCRIPTORS) {\n      this.byteLength = byteLength;\n      this.detached = false;\n    }\n  };\n\n  ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, DataViewPrototype);\n    anInstance(buffer, ArrayBufferPrototype);\n    var bufferState = getInternalArrayBufferState(buffer);\n    var bufferLength = bufferState.byteLength;\n    var offset = toIntegerOrInfinity(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw new RangeError('Wrong offset');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw new RangeError(WRONG_LENGTH);\n    setInternalState(this, {\n      type: DATA_VIEW,\n      buffer: buffer,\n      byteLength: byteLength,\n      byteOffset: offset,\n      bytes: bufferState.bytes\n    });\n    if (!DESCRIPTORS) {\n      this.buffer = buffer;\n      this.byteLength = byteLength;\n      this.byteOffset = offset;\n    }\n  };\n\n  DataViewPrototype = $DataView[PROTOTYPE];\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, 'byteLength', getInternalArrayBufferState);\n    addGetter($DataView, 'buffer', getInternalDataViewState);\n    addGetter($DataView, 'byteLength', getInternalDataViewState);\n    addGetter($DataView, 'byteOffset', getInternalDataViewState);\n  }\n\n  defineBuiltIns(DataViewPrototype, {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : false);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false)) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : false), 23);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : false), 52);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : false);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : false);\n    }\n  });\n} else {\n  var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;\n  /* eslint-disable no-new -- required for testing */\n  if (!fails(function () {\n    NativeArrayBuffer(1);\n  }) || !fails(function () {\n    new NativeArrayBuffer(-1);\n  }) || fails(function () {\n    new NativeArrayBuffer();\n    new NativeArrayBuffer(1.5);\n    new NativeArrayBuffer(NaN);\n    return NativeArrayBuffer.length !== 1 || INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;\n  })) {\n    /* eslint-enable no-new -- required for testing */\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, ArrayBufferPrototype);\n      return inheritIfRequired(new NativeArrayBuffer(toIndex(length)), this, $ArrayBuffer);\n    };\n\n    $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;\n\n    ArrayBufferPrototype.constructor = $ArrayBuffer;\n\n    copyConstructorProperties($ArrayBuffer, NativeArrayBuffer);\n  } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {\n    createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);\n  }\n\n  // WebKit bug - the same parent prototype for typed arrays and data view\n  if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {\n    setPrototypeOf(DataViewPrototype, ObjectPrototype);\n  }\n\n  // iOS Safari 7.x bug\n  var testView = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = uncurryThis(DataViewPrototype.setInt8);\n  testView.setInt8(0, 2147483648);\n  testView.setInt8(1, 2147483649);\n  if (testView.getInt8(0) || !testView.getInt8(1)) defineBuiltIns(DataViewPrototype, {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    }\n  }, { unsafe: true });\n}\n\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\n\nmodule.exports = {\n  ArrayBuffer: $ArrayBuffer,\n  DataView: $DataView\n};\n","'use strict';\nvar floatRound = require('../internals/math-float-round');\n\nvar FLOAT32_EPSILON = 1.1920928955078125e-7; // 2 ** -23;\nvar FLOAT32_MAX_VALUE = 3.4028234663852886e+38; // 2 ** 128 - 2 ** 104\nvar FLOAT32_MIN_VALUE = 1.1754943508222875e-38; // 2 ** -126;\n\n// `Math.fround` method implementation\n// https://tc39.es/ecma262/#sec-math.fround\n// eslint-disable-next-line es/no-math-fround -- safe\nmodule.exports = Math.fround || function fround(x) {\n  return floatRound(x, FLOAT32_EPSILON, FLOAT32_MAX_VALUE, FLOAT32_MIN_VALUE);\n};\n","'use strict';\nvar sign = require('../internals/math-sign');\n\nvar abs = Math.abs;\n\nvar EPSILON = 2.220446049250313e-16; // Number.EPSILON\nvar INVERSE_EPSILON = 1 / EPSILON;\n\nvar roundTiesToEven = function (n) {\n  return n + INVERSE_EPSILON - INVERSE_EPSILON;\n};\n\nmodule.exports = function (x, FLOAT_EPSILON, FLOAT_MAX_VALUE, FLOAT_MIN_VALUE) {\n  var n = +x;\n  var absolute = abs(n);\n  var s = sign(n);\n  if (absolute < FLOAT_MIN_VALUE) return s * roundTiesToEven(absolute / FLOAT_MIN_VALUE / FLOAT_EPSILON) * FLOAT_MIN_VALUE * FLOAT_EPSILON;\n  var a = (1 + FLOAT_EPSILON / EPSILON) * absolute;\n  var result = a - (a - absolute);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (result > FLOAT_MAX_VALUE || result !== result) return s * Infinity;\n  return s * result;\n};\n","'use strict';\n// `Math.sign` method implementation\n// https://tc39.es/ecma262/#sec-math.sign\n// eslint-disable-next-line es/no-math-sign -- safe\nmodule.exports = Math.sign || function sign(x) {\n  var n = +x;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return n === 0 || n !== n ? n : n < 0 ? -1 : 1;\n};\n","'use strict';\n// IEEE754 conversions based on https://github.com/feross/ieee754\nvar $Array = Array;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\nvar pack = function (number, mantissaLength, bytes) {\n  var buffer = $Array(bytes);\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;\n  var index = 0;\n  var exponent, mantissa, c;\n  number = abs(number);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (number !== number || number === Infinity) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    mantissa = number !== number ? 1 : 0;\n    exponent = eMax;\n  } else {\n    exponent = floor(log(number) / LN2);\n    c = pow(2, -exponent);\n    if (number * c < 1) {\n      exponent--;\n      c *= 2;\n    }\n    if (exponent + eBias >= 1) {\n      number += rt / c;\n    } else {\n      number += rt * pow(2, 1 - eBias);\n    }\n    if (number * c >= 2) {\n      exponent++;\n      c /= 2;\n    }\n    if (exponent + eBias >= eMax) {\n      mantissa = 0;\n      exponent = eMax;\n    } else if (exponent + eBias >= 1) {\n      mantissa = (number * c - 1) * pow(2, mantissaLength);\n      exponent += eBias;\n    } else {\n      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);\n      exponent = 0;\n    }\n  }\n  while (mantissaLength >= 8) {\n    buffer[index++] = mantissa & 255;\n    mantissa /= 256;\n    mantissaLength -= 8;\n  }\n  exponent = exponent << mantissaLength | mantissa;\n  exponentLength += mantissaLength;\n  while (exponentLength > 0) {\n    buffer[index++] = exponent & 255;\n    exponent /= 256;\n    exponentLength -= 8;\n  }\n  buffer[--index] |= sign * 128;\n  return buffer;\n};\n\nvar unpack = function (buffer, mantissaLength) {\n  var bytes = buffer.length;\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var nBits = exponentLength - 7;\n  var index = bytes - 1;\n  var sign = buffer[index--];\n  var exponent = sign & 127;\n  var mantissa;\n  sign >>= 7;\n  while (nBits > 0) {\n    exponent = exponent * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  mantissa = exponent & (1 << -nBits) - 1;\n  exponent >>= -nBits;\n  nBits += mantissaLength;\n  while (nBits > 0) {\n    mantissa = mantissa * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  if (exponent === 0) {\n    exponent = 1 - eBias;\n  } else if (exponent === eMax) {\n    return mantissa ? NaN : sign ? -Infinity : Infinity;\n  } else {\n    mantissa += pow(2, mantissaLength);\n    exponent -= eBias;\n  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);\n};\n\nmodule.exports = {\n  pack: pack,\n  unpack: unpack\n};\n","import PropTypes from 'prop-types';\nimport { createContext, useContext } from 'react';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nimport type { InitialState } from 'mastodon/initial_state';\n\nexport interface IdentityContextType {\n  signedIn: boolean;\n  accountId: string | undefined;\n  disabledAccountId: string | undefined;\n  permissions: number;\n}\n\nexport const identityContextPropShape = PropTypes.shape({\n  signedIn: PropTypes.bool.isRequired,\n  accountId: PropTypes.string,\n  disabledAccountId: PropTypes.string,\n}).isRequired;\n\nexport const createIdentityContext = (state: InitialState) => ({\n  signedIn: !!state.meta.me,\n  accountId: state.meta.me,\n  disabledAccountId: state.meta.disabled_account_id,\n  permissions: state.role?.permissions ?? 0,\n});\n\nexport const IdentityContext = createContext<IdentityContextType>({\n  signedIn: false,\n  permissions: 0,\n  accountId: undefined,\n  disabledAccountId: undefined,\n});\n\nexport const useIdentity = () => useContext(IdentityContext);\n\nexport interface IdentityProps {\n  ref?: unknown;\n  wrappedComponentRef?: unknown;\n}\n\n/* Injects an `identity` props into the wrapped component to be able to use the new context in class components */\nexport function withIdentity<\n  ComponentType extends React.ComponentType<IdentityProps>,\n>(Component: ComponentType) {\n  const displayName = `withIdentity(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <IdentityContext.Consumer>\n        {(context) => {\n          return (\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            <Component\n              {...remainingProps}\n              identity={context}\n              ref={wrappedComponentRef}\n            />\n          );\n        }}\n      </IdentityContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n\n  return hoistStatics(C, Component);\n}\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar floor = Math.floor;\n\n// `IsIntegralNumber` abstract operation\n// https://tc39.es/ecma262/#sec-isintegralnumber\n// eslint-disable-next-line es/no-number-isinteger -- safe\nmodule.exports = Number.isInteger || function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw new $RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n","'use strict';\nvar round = Math.round;\n\nmodule.exports = function (it) {\n  var value = round(it);\n  return value < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aConstructor = require('../internals/a-constructor');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar aTypedArrayConstructor = require('../internals/array-buffer-view-core').aTypedArrayConstructor;\nvar toBigInt = require('../internals/to-big-int');\n\nmodule.exports = function from(source /* , mapfn, thisArg */) {\n  var C = aConstructor(this);\n  var O = toObject(source);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var i, length, result, thisIsBigIntArray, value, step, iterator, next;\n  if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    O = [];\n    while (!(step = call(next, iterator)).done) {\n      O.push(step.value);\n    }\n  }\n  if (mapping && argumentsLength > 2) {\n    mapfn = bind(mapfn, arguments[2]);\n  }\n  length = lengthOfArrayLike(O);\n  result = new (aTypedArrayConstructor(C))(length);\n  thisIsBigIntArray = isBigIntArray(result);\n  for (i = 0; length > i; i++) {\n    value = mapping ? mapfn(O[i], i) : O[i];\n    // FF30- typed arrays doesn't properly convert objects to typed array values\n    result[i] = thisIsBigIntArray ? toBigInt(value) : +value;\n  }\n  return result;\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE === 1;\n  var IS_FILTER = TYPE === 2;\n  var IS_SOME = TYPE === 3;\n  var IS_EVERY = TYPE === 4;\n  var IS_FIND_INDEX = TYPE === 6;\n  var IS_FILTER_REJECT = TYPE === 7;\n  var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(self);\n    var boundFunction = bind(callbackfn, that);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","'use strict';\nvar arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineBuiltInAccessor(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","'use strict';\nvar userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","'use strict';\nvar UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = spring;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _presets = require('./presets');\n\nvar _presets2 = _interopRequireDefault(_presets);\n\nvar defaultConfig = _extends({}, _presets2['default'].noWobble, {\n  precision: 0.01\n});\n\nfunction spring(val, config) {\n  return _extends({}, defaultConfig, config, { val: val });\n}\n\nmodule.exports = exports['default'];","'use strict';\nvar userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.toReversed\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed\nmodule.exports = function (O, C) {\n  var len = lengthOfArrayLike(O);\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = O[len - k - 1];\n  return A;\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.with\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar global = require('../internals/global');\nvar tryNodeRequire = require('../internals/try-node-require');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = global.structuredClone;\nvar $ArrayBuffer = global.ArrayBuffer;\nvar $MessageChannel = global.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = tryNodeRequire('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar IS_NODE = require('../internals/engine-is-node');\n\nmodule.exports = function (name) {\n  try {\n    // eslint-disable-next-line no-new-func -- safe\n    if (IS_NODE) return Function('return require(\"' + name + '\")')();\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nmodule.exports = !IS_DENO && !IS_NODE\n  && typeof window == 'object'\n  && typeof document == 'object';\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _utilities = require('./utilities');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (reducers) {\n  var getDefaultState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _immutable2.default.Map;\n\n  var reducerKeys = Object.keys(reducers);\n\n  // eslint-disable-next-line space-infix-ops\n  return function () {\n    var inputState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getDefaultState();\n    var action = arguments[1];\n\n    // eslint-disable-next-line no-process-env\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = (0, _utilities.getUnexpectedInvocationParameterMessage)(inputState, reducers, action);\n\n      if (warningMessage) {\n        // eslint-disable-next-line no-console\n        console.error(warningMessage);\n      }\n    }\n\n    return inputState.withMutations(function (temporaryState) {\n      reducerKeys.forEach(function (reducerName) {\n        var reducer = reducers[reducerName];\n        var currentDomainState = temporaryState.get(reducerName);\n        var nextDomainState = reducer(currentDomainState, action);\n\n        (0, _utilities.validateNextState)(nextDomainState, reducerName, action);\n\n        temporaryState.set(reducerName, nextDomainState);\n      });\n    });\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=combineReducers.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateNextState = exports.getUnexpectedInvocationParameterMessage = exports.getStateName = undefined;\n\nvar _getStateName2 = require('./getStateName');\n\nvar _getStateName3 = _interopRequireDefault(_getStateName2);\n\nvar _getUnexpectedInvocationParameterMessage2 = require('./getUnexpectedInvocationParameterMessage');\n\nvar _getUnexpectedInvocationParameterMessage3 = _interopRequireDefault(_getUnexpectedInvocationParameterMessage2);\n\nvar _validateNextState2 = require('./validateNextState');\n\nvar _validateNextState3 = _interopRequireDefault(_validateNextState2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.getStateName = _getStateName3.default;\nexports.getUnexpectedInvocationParameterMessage = _getUnexpectedInvocationParameterMessage3.default;\nexports.validateNextState = _validateNextState3.default;\n//# sourceMappingURL=index.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _getStateName = require('./getStateName');\n\nvar _getStateName2 = _interopRequireDefault(_getStateName);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (state, reducers, action) {\n  var reducerNames = Object.keys(reducers);\n\n  if (!reducerNames.length) {\n    return 'Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.';\n  }\n\n  var stateName = (0, _getStateName2.default)(action);\n\n  if (_immutable2.default.isImmutable ? !_immutable2.default.isImmutable(state) : !_immutable2.default.Iterable.isIterable(state)) {\n    return 'The ' + stateName + ' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: \"' + reducerNames.join('\", \"') + '\".';\n  }\n\n  var unexpectedStatePropertyNames = state.toSeq().keySeq().toArray().filter(function (name) {\n    return !reducers.hasOwnProperty(name);\n  });\n\n  if (unexpectedStatePropertyNames.length > 0) {\n    return 'Unexpected ' + (unexpectedStatePropertyNames.length === 1 ? 'property' : 'properties') + ' \"' + unexpectedStatePropertyNames.join('\", \"') + '\" found in ' + stateName + '. Expected to find one of the known reducer property names instead: \"' + reducerNames.join('\", \"') + '\". Unexpected properties will be ignored.';\n  }\n\n  return null;\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=getUnexpectedInvocationParameterMessage.js.map","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (nextState, reducerName, action) {\n  // eslint-disable-next-line no-undefined\n  if (nextState === undefined) {\n    throw new Error('Reducer \"' + reducerName + '\" returned undefined when handling \"' + action.type + '\" action. To ignore an action, you must explicitly return the previous state.');\n  }\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=validateNextState.js.map","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDomTreeShapes = getDomTreeShapes;\nexports.findNativeHandler = findNativeHandler;\nexports.default = exports.SwipeableViewsContext = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar _reactSwipeableViewsCore = require(\"react-swipeable-views-core\");\n\nfunction addEventListener(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return {\n    remove: function remove() {\n      node.removeEventListener(event, handler, options);\n    }\n  };\n}\n\nvar styles = {\n  container: {\n    direction: 'ltr',\n    display: 'flex',\n    willChange: 'transform'\n  },\n  slide: {\n    width: '100%',\n    WebkitFlexShrink: 0,\n    flexShrink: 0,\n    overflow: 'auto'\n  }\n};\nvar axisProperties = {\n  root: {\n    x: {\n      overflowX: 'hidden'\n    },\n    'x-reverse': {\n      overflowX: 'hidden'\n    },\n    y: {\n      overflowY: 'hidden'\n    },\n    'y-reverse': {\n      overflowY: 'hidden'\n    }\n  },\n  flexDirection: {\n    x: 'row',\n    'x-reverse': 'row-reverse',\n    y: 'column',\n    'y-reverse': 'column-reverse'\n  },\n  transform: {\n    x: function x(translate) {\n      return \"translate(\".concat(-translate, \"%, 0)\");\n    },\n    'x-reverse': function xReverse(translate) {\n      return \"translate(\".concat(translate, \"%, 0)\");\n    },\n    y: function y(translate) {\n      return \"translate(0, \".concat(-translate, \"%)\");\n    },\n    'y-reverse': function yReverse(translate) {\n      return \"translate(0, \".concat(translate, \"%)\");\n    }\n  },\n  length: {\n    x: 'width',\n    'x-reverse': 'width',\n    y: 'height',\n    'y-reverse': 'height'\n  },\n  rotationMatrix: {\n    x: {\n      x: [1, 0],\n      y: [0, 1]\n    },\n    'x-reverse': {\n      x: [-1, 0],\n      y: [0, 1]\n    },\n    y: {\n      x: [0, 1],\n      y: [1, 0]\n    },\n    'y-reverse': {\n      x: [0, -1],\n      y: [1, 0]\n    }\n  },\n  scrollPosition: {\n    x: 'scrollLeft',\n    'x-reverse': 'scrollLeft',\n    y: 'scrollTop',\n    'y-reverse': 'scrollTop'\n  },\n  scrollLength: {\n    x: 'scrollWidth',\n    'x-reverse': 'scrollWidth',\n    y: 'scrollHeight',\n    'y-reverse': 'scrollHeight'\n  },\n  clientLength: {\n    x: 'clientWidth',\n    'x-reverse': 'clientWidth',\n    y: 'clientHeight',\n    'y-reverse': 'clientHeight'\n  }\n};\n\nfunction createTransition(property, options) {\n  var duration = options.duration,\n      easeFunction = options.easeFunction,\n      delay = options.delay;\n  return \"\".concat(property, \" \").concat(duration, \" \").concat(easeFunction, \" \").concat(delay);\n} // We are using a 2x2 rotation matrix.\n\n\nfunction applyRotationMatrix(touch, axis) {\n  var rotationMatrix = axisProperties.rotationMatrix[axis];\n  return {\n    pageX: rotationMatrix.x[0] * touch.pageX + rotationMatrix.x[1] * touch.pageY,\n    pageY: rotationMatrix.y[0] * touch.pageX + rotationMatrix.y[1] * touch.pageY\n  };\n}\n\nfunction adaptMouse(event) {\n  event.touches = [{\n    pageX: event.pageX,\n    pageY: event.pageY\n  }];\n  return event;\n}\n\nfunction getDomTreeShapes(element, rootNode) {\n  var domTreeShapes = [];\n\n  while (element && element !== rootNode && element !== document.body) {\n    // We reach a Swipeable View, no need to look higher in the dom tree.\n    if (element.hasAttribute('data-swipeable')) {\n      break;\n    }\n\n    var style = window.getComputedStyle(element);\n\n    if ( // Ignore the scroll children if the element is absolute positioned.\n    style.getPropertyValue('position') === 'absolute' || // Ignore the scroll children if the element has an overflowX hidden\n    style.getPropertyValue('overflow-x') === 'hidden') {\n      domTreeShapes = [];\n    } else if (element.clientWidth > 0 && element.scrollWidth > element.clientWidth || element.clientHeight > 0 && element.scrollHeight > element.clientHeight) {\n      // Ignore the nodes that have no width.\n      // Keep elements with a scroll\n      domTreeShapes.push({\n        element: element,\n        scrollWidth: element.scrollWidth,\n        scrollHeight: element.scrollHeight,\n        clientWidth: element.clientWidth,\n        clientHeight: element.clientHeight,\n        scrollLeft: element.scrollLeft,\n        scrollTop: element.scrollTop\n      });\n    }\n\n    element = element.parentNode;\n  }\n\n  return domTreeShapes;\n} // We can only have one node at the time claiming ownership for handling the swipe.\n// Otherwise, the UX would be confusing.\n// That's why we use a singleton here.\n\n\nvar nodeWhoClaimedTheScroll = null;\n\nfunction findNativeHandler(params) {\n  var domTreeShapes = params.domTreeShapes,\n      pageX = params.pageX,\n      startX = params.startX,\n      axis = params.axis;\n  return domTreeShapes.some(function (shape) {\n    // Determine if we are going backward or forward.\n    var goingForward = pageX >= startX;\n\n    if (axis === 'x' || axis === 'y') {\n      goingForward = !goingForward;\n    } // scrollTop is not always be an integer.\n    // https://github.com/jquery/api.jquery.com/issues/608\n\n\n    var scrollPosition = Math.round(shape[axisProperties.scrollPosition[axis]]);\n    var areNotAtStart = scrollPosition > 0;\n    var areNotAtEnd = scrollPosition + shape[axisProperties.clientLength[axis]] < shape[axisProperties.scrollLength[axis]];\n\n    if (goingForward && areNotAtEnd || !goingForward && areNotAtStart) {\n      nodeWhoClaimedTheScroll = shape.element;\n      return true;\n    }\n\n    return false;\n  });\n}\n\nvar SwipeableViewsContext = React.createContext();\nexports.SwipeableViewsContext = SwipeableViewsContext;\n\nif (process.env.NODE_ENV !== 'production') {\n  SwipeableViewsContext.displayName = 'SwipeableViewsContext';\n}\n\nvar SwipeableViews =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inherits2.default)(SwipeableViews, _React$Component);\n\n  function SwipeableViews(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, SwipeableViews);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(SwipeableViews).call(this, props));\n    _this.rootNode = null;\n    _this.containerNode = null;\n    _this.ignoreNextScrollEvents = false;\n    _this.viewLength = 0;\n    _this.startX = 0;\n    _this.lastX = 0;\n    _this.vx = 0;\n    _this.startY = 0;\n    _this.isSwiping = undefined;\n    _this.started = false;\n    _this.startIndex = 0;\n    _this.transitionListener = null;\n    _this.touchMoveListener = null;\n    _this.activeSlide = null;\n    _this.indexCurrent = null;\n    _this.firstRenderTimeout = null;\n\n    _this.setRootNode = function (node) {\n      _this.rootNode = node;\n    };\n\n    _this.setContainerNode = function (node) {\n      _this.containerNode = node;\n    };\n\n    _this.setActiveSlide = function (node) {\n      _this.activeSlide = node;\n\n      _this.updateHeight();\n    };\n\n    _this.handleSwipeStart = function (event) {\n      var axis = _this.props.axis;\n      var touch = applyRotationMatrix(event.touches[0], axis);\n      _this.viewLength = _this.rootNode.getBoundingClientRect()[axisProperties.length[axis]];\n      _this.startX = touch.pageX;\n      _this.lastX = touch.pageX;\n      _this.vx = 0;\n      _this.startY = touch.pageY;\n      _this.isSwiping = undefined;\n      _this.started = true;\n      var computedStyle = window.getComputedStyle(_this.containerNode);\n      var transform = computedStyle.getPropertyValue('-webkit-transform') || computedStyle.getPropertyValue('transform');\n\n      if (transform && transform !== 'none') {\n        var transformValues = transform.split('(')[1].split(')')[0].split(',');\n        var rootStyle = window.getComputedStyle(_this.rootNode);\n        var tranformNormalized = applyRotationMatrix({\n          pageX: parseInt(transformValues[4], 10),\n          pageY: parseInt(transformValues[5], 10)\n        }, axis);\n        _this.startIndex = -tranformNormalized.pageX / (_this.viewLength - parseInt(rootStyle.paddingLeft, 10) - parseInt(rootStyle.paddingRight, 10)) || 0;\n      }\n    };\n\n    _this.handleSwipeMove = function (event) {\n      // The touch start event can be cancel.\n      // Makes sure we set a starting point.\n      if (!_this.started) {\n        _this.handleTouchStart(event);\n\n        return;\n      } // We are not supposed to hanlde this touch move.\n\n\n      if (nodeWhoClaimedTheScroll !== null && nodeWhoClaimedTheScroll !== _this.rootNode) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          axis = _this$props.axis,\n          children = _this$props.children,\n          ignoreNativeScroll = _this$props.ignoreNativeScroll,\n          onSwitching = _this$props.onSwitching,\n          resistance = _this$props.resistance;\n      var touch = applyRotationMatrix(event.touches[0], axis); // We don't know yet.\n\n      if (_this.isSwiping === undefined) {\n        var dx = Math.abs(touch.pageX - _this.startX);\n        var dy = Math.abs(touch.pageY - _this.startY);\n        var isSwiping = dx > dy && dx > _reactSwipeableViewsCore.constant.UNCERTAINTY_THRESHOLD; // We let the parent handle the scroll.\n\n        if (!resistance && (axis === 'y' || axis === 'y-reverse') && (_this.indexCurrent === 0 && _this.startX < touch.pageX || _this.indexCurrent === React.Children.count(_this.props.children) - 1 && _this.startX > touch.pageX)) {\n          _this.isSwiping = false;\n          return;\n        } // We are likely to be swiping, let's prevent the scroll event.\n\n\n        if (dx > dy) {\n          event.preventDefault();\n        }\n\n        if (isSwiping === true || dy > _reactSwipeableViewsCore.constant.UNCERTAINTY_THRESHOLD) {\n          _this.isSwiping = isSwiping;\n          _this.startX = touch.pageX; // Shift the starting point.\n\n          return; // Let's wait the next touch event to move something.\n        }\n      }\n\n      if (_this.isSwiping !== true) {\n        return;\n      } // We are swiping, let's prevent the scroll event.\n\n\n      event.preventDefault(); // Low Pass filter.\n\n      _this.vx = _this.vx * 0.5 + (touch.pageX - _this.lastX) * 0.5;\n      _this.lastX = touch.pageX;\n\n      var _computeIndex = (0, _reactSwipeableViewsCore.computeIndex)({\n        children: children,\n        resistance: resistance,\n        pageX: touch.pageX,\n        startIndex: _this.startIndex,\n        startX: _this.startX,\n        viewLength: _this.viewLength\n      }),\n          index = _computeIndex.index,\n          startX = _computeIndex.startX; // Add support for native scroll elements.\n\n\n      if (nodeWhoClaimedTheScroll === null && !ignoreNativeScroll) {\n        var domTreeShapes = getDomTreeShapes(event.target, _this.rootNode);\n        var hasFoundNativeHandler = findNativeHandler({\n          domTreeShapes: domTreeShapes,\n          startX: _this.startX,\n          pageX: touch.pageX,\n          axis: axis\n        }); // We abort the touch move handler.\n\n        if (hasFoundNativeHandler) {\n          return;\n        }\n      } // We are moving toward the edges.\n\n\n      if (startX) {\n        _this.startX = startX;\n      } else if (nodeWhoClaimedTheScroll === null) {\n        nodeWhoClaimedTheScroll = _this.rootNode;\n      }\n\n      _this.setIndexCurrent(index);\n\n      var callback = function callback() {\n        if (onSwitching) {\n          onSwitching(index, 'move');\n        }\n      };\n\n      if (_this.state.displaySameSlide || !_this.state.isDragging) {\n        _this.setState({\n          displaySameSlide: false,\n          isDragging: true\n        }, callback);\n      }\n\n      callback();\n    };\n\n    _this.handleSwipeEnd = function () {\n      nodeWhoClaimedTheScroll = null; // The touch start event can be cancel.\n      // Makes sure that a starting point is set.\n\n      if (!_this.started) {\n        return;\n      }\n\n      _this.started = false;\n\n      if (_this.isSwiping !== true) {\n        return;\n      }\n\n      var indexLatest = _this.state.indexLatest;\n      var indexCurrent = _this.indexCurrent;\n      var delta = indexLatest - indexCurrent;\n      var indexNew; // Quick movement\n\n      if (Math.abs(_this.vx) > _this.props.threshold) {\n        if (_this.vx > 0) {\n          indexNew = Math.floor(indexCurrent);\n        } else {\n          indexNew = Math.ceil(indexCurrent);\n        }\n      } else if (Math.abs(delta) > _this.props.hysteresis) {\n        // Some hysteresis with indexLatest.\n        indexNew = delta > 0 ? Math.floor(indexCurrent) : Math.ceil(indexCurrent);\n      } else {\n        indexNew = indexLatest;\n      }\n\n      var indexMax = React.Children.count(_this.props.children) - 1;\n\n      if (indexNew < 0) {\n        indexNew = 0;\n      } else if (indexNew > indexMax) {\n        indexNew = indexMax;\n      }\n\n      _this.setIndexCurrent(indexNew);\n\n      _this.setState({\n        indexLatest: indexNew,\n        isDragging: false\n      }, function () {\n        if (_this.props.onSwitching) {\n          _this.props.onSwitching(indexNew, 'end');\n        }\n\n        if (_this.props.onChangeIndex && indexNew !== indexLatest) {\n          _this.props.onChangeIndex(indexNew, indexLatest, {\n            reason: 'swipe'\n          });\n        } // Manually calling handleTransitionEnd in that case as isn't otherwise.\n\n\n        if (indexCurrent === indexLatest) {\n          _this.handleTransitionEnd();\n        }\n      });\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (_this.props.onTouchStart) {\n        _this.props.onTouchStart(event);\n      }\n\n      _this.handleSwipeStart(event);\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (_this.props.onTouchEnd) {\n        _this.props.onTouchEnd(event);\n      }\n\n      _this.handleSwipeEnd(event);\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (_this.props.onMouseDown) {\n        _this.props.onMouseDown(event);\n      }\n\n      event.persist();\n\n      _this.handleSwipeStart(adaptMouse(event));\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (_this.props.onMouseUp) {\n        _this.props.onMouseUp(event);\n      }\n\n      _this.handleSwipeEnd(adaptMouse(event));\n    };\n\n    _this.handleMouseLeave = function (event) {\n      if (_this.props.onMouseLeave) {\n        _this.props.onMouseLeave(event);\n      } // Filter out events\n\n\n      if (_this.started) {\n        _this.handleSwipeEnd(adaptMouse(event));\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (_this.props.onMouseMove) {\n        _this.props.onMouseMove(event);\n      } // Filter out events\n\n\n      if (_this.started) {\n        _this.handleSwipeMove(adaptMouse(event));\n      }\n    };\n\n    _this.handleScroll = function (event) {\n      if (_this.props.onScroll) {\n        _this.props.onScroll(event);\n      } // Ignore events bubbling up.\n\n\n      if (event.target !== _this.rootNode) {\n        return;\n      }\n\n      if (_this.ignoreNextScrollEvents) {\n        _this.ignoreNextScrollEvents = false;\n        return;\n      }\n\n      var indexLatest = _this.state.indexLatest;\n      var indexNew = Math.ceil(event.target.scrollLeft / event.target.clientWidth) + indexLatest;\n      _this.ignoreNextScrollEvents = true; // Reset the scroll position.\n\n      event.target.scrollLeft = 0;\n\n      if (_this.props.onChangeIndex && indexNew !== indexLatest) {\n        _this.props.onChangeIndex(indexNew, indexLatest, {\n          reason: 'focus'\n        });\n      }\n    };\n\n    _this.updateHeight = function () {\n      if (_this.activeSlide !== null) {\n        var child = _this.activeSlide.children[0];\n\n        if (child !== undefined && child.offsetHeight !== undefined && _this.state.heightLatest !== child.offsetHeight) {\n          _this.setState({\n            heightLatest: child.offsetHeight\n          });\n        }\n      }\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _reactSwipeableViewsCore.checkIndexBounds)(props);\n    }\n\n    _this.state = {\n      indexLatest: props.index,\n      // Set to true as soon as the component is swiping.\n      // It's the state counter part of this.isSwiping.\n      isDragging: false,\n      // Help with SSR logic and lazy loading logic.\n      renderOnlyActive: !props.disableLazyLoading,\n      heightLatest: 0,\n      // Let the render method that we are going to display the same slide than previously.\n      displaySameSlide: true\n    };\n\n    _this.setIndexCurrent(props.index);\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(SwipeableViews, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Subscribe to transition end events.\n      this.transitionListener = addEventListener(this.containerNode, 'transitionend', function (event) {\n        if (event.target !== _this2.containerNode) {\n          return;\n        }\n\n        _this2.handleTransitionEnd();\n      }); // Block the thread to handle that event.\n\n      this.touchMoveListener = addEventListener(this.rootNode, 'touchmove', function (event) {\n        // Handling touch events is disabled.\n        if (_this2.props.disabled) {\n          return;\n        }\n\n        _this2.handleSwipeMove(event);\n      }, {\n        passive: false\n      });\n\n      if (!this.props.disableLazyLoading) {\n        this.firstRenderTimeout = setTimeout(function () {\n          _this2.setState({\n            renderOnlyActive: false\n          });\n        }, 0);\n      } // Send all functions in an object if action param is set.\n\n\n      if (this.props.action) {\n        this.props.action({\n          updateHeight: this.updateHeight\n        });\n      }\n    } // eslint-disable-next-line camelcase,react/sort-comp\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var index = nextProps.index;\n\n      if (typeof index === 'number' && index !== this.props.index) {\n        if (process.env.NODE_ENV !== 'production') {\n          (0, _reactSwipeableViewsCore.checkIndexBounds)(nextProps);\n        }\n\n        this.setIndexCurrent(index);\n        this.setState({\n          // If true, we are going to change the children. We shoudn't animate it.\n          displaySameSlide: (0, _reactSwipeableViewsCore.getDisplaySameSlide)(this.props, nextProps),\n          indexLatest: index\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.transitionListener.remove();\n      this.touchMoveListener.remove();\n      clearTimeout(this.firstRenderTimeout);\n    }\n  }, {\n    key: \"getSwipeableViewsContext\",\n    value: function getSwipeableViewsContext() {\n      var _this3 = this;\n\n      return {\n        slideUpdateHeight: function slideUpdateHeight() {\n          _this3.updateHeight();\n        }\n      };\n    }\n  }, {\n    key: \"setIndexCurrent\",\n    value: function setIndexCurrent(indexCurrent) {\n      if (!this.props.animateTransitions && this.indexCurrent !== indexCurrent) {\n        this.handleTransitionEnd();\n      }\n\n      this.indexCurrent = indexCurrent;\n\n      if (this.containerNode) {\n        var axis = this.props.axis;\n        var transform = axisProperties.transform[axis](indexCurrent * 100);\n        this.containerNode.style.WebkitTransform = transform;\n        this.containerNode.style.transform = transform;\n      }\n    }\n  }, {\n    key: \"handleTransitionEnd\",\n    value: function handleTransitionEnd() {\n      if (!this.props.onTransitionEnd) {\n        return;\n      } // Filters out when changing the children\n\n\n      if (this.state.displaySameSlide) {\n        return;\n      } // The rest callback is triggered when swiping. It's just noise.\n      // We filter it out.\n\n\n      if (!this.state.isDragging) {\n        this.props.onTransitionEnd();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props2 = this.props,\n          action = _this$props2.action,\n          animateHeight = _this$props2.animateHeight,\n          animateTransitions = _this$props2.animateTransitions,\n          axis = _this$props2.axis,\n          children = _this$props2.children,\n          containerStyleProp = _this$props2.containerStyle,\n          disabled = _this$props2.disabled,\n          disableLazyLoading = _this$props2.disableLazyLoading,\n          enableMouseEvents = _this$props2.enableMouseEvents,\n          hysteresis = _this$props2.hysteresis,\n          ignoreNativeScroll = _this$props2.ignoreNativeScroll,\n          index = _this$props2.index,\n          onChangeIndex = _this$props2.onChangeIndex,\n          onSwitching = _this$props2.onSwitching,\n          onTransitionEnd = _this$props2.onTransitionEnd,\n          resistance = _this$props2.resistance,\n          slideStyleProp = _this$props2.slideStyle,\n          slideClassName = _this$props2.slideClassName,\n          springConfig = _this$props2.springConfig,\n          style = _this$props2.style,\n          threshold = _this$props2.threshold,\n          other = (0, _objectWithoutProperties2.default)(_this$props2, [\"action\", \"animateHeight\", \"animateTransitions\", \"axis\", \"children\", \"containerStyle\", \"disabled\", \"disableLazyLoading\", \"enableMouseEvents\", \"hysteresis\", \"ignoreNativeScroll\", \"index\", \"onChangeIndex\", \"onSwitching\", \"onTransitionEnd\", \"resistance\", \"slideStyle\", \"slideClassName\", \"springConfig\", \"style\", \"threshold\"]);\n      var _this$state = this.state,\n          displaySameSlide = _this$state.displaySameSlide,\n          heightLatest = _this$state.heightLatest,\n          indexLatest = _this$state.indexLatest,\n          isDragging = _this$state.isDragging,\n          renderOnlyActive = _this$state.renderOnlyActive;\n      var touchEvents = !disabled ? {\n        onTouchStart: this.handleTouchStart,\n        onTouchEnd: this.handleTouchEnd\n      } : {};\n      var mouseEvents = !disabled && enableMouseEvents ? {\n        onMouseDown: this.handleMouseDown,\n        onMouseUp: this.handleMouseUp,\n        onMouseLeave: this.handleMouseLeave,\n        onMouseMove: this.handleMouseMove\n      } : {}; // There is no point to animate if we are already providing a height.\n\n      process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(!animateHeight || !containerStyleProp || !containerStyleProp.height, \"react-swipeable-view: You are setting animateHeight to true but you are\\nalso providing a custom height.\\nThe custom height has a higher priority than the animateHeight property.\\nSo animateHeight is most likely having no effect at all.\") : void 0;\n      var slideStyle = (0, _extends2.default)({}, styles.slide, slideStyleProp);\n      var transition;\n      var WebkitTransition;\n\n      if (isDragging || !animateTransitions || displaySameSlide) {\n        transition = 'all 0s ease 0s';\n        WebkitTransition = 'all 0s ease 0s';\n      } else {\n        transition = createTransition('transform', springConfig);\n        WebkitTransition = createTransition('-webkit-transform', springConfig);\n\n        if (heightLatest !== 0) {\n          var additionalTranstion = \", \".concat(createTransition('height', springConfig));\n          transition += additionalTranstion;\n          WebkitTransition += additionalTranstion;\n        }\n      }\n\n      var containerStyle = {\n        height: null,\n        WebkitFlexDirection: axisProperties.flexDirection[axis],\n        flexDirection: axisProperties.flexDirection[axis],\n        WebkitTransition: WebkitTransition,\n        transition: transition\n      }; // Apply the styles for SSR considerations\n\n      if (!renderOnlyActive) {\n        var transform = axisProperties.transform[axis](this.indexCurrent * 100);\n        containerStyle.WebkitTransform = transform;\n        containerStyle.transform = transform;\n      }\n\n      if (animateHeight) {\n        containerStyle.height = heightLatest;\n      }\n\n      return React.createElement(SwipeableViewsContext.Provider, {\n        value: this.getSwipeableViewsContext()\n      }, React.createElement(\"div\", (0, _extends2.default)({\n        ref: this.setRootNode,\n        style: (0, _extends2.default)({}, axisProperties.root[axis], style)\n      }, other, touchEvents, mouseEvents, {\n        onScroll: this.handleScroll\n      }), React.createElement(\"div\", {\n        ref: this.setContainerNode,\n        style: (0, _extends2.default)({}, containerStyle, styles.container, containerStyleProp),\n        className: \"react-swipeable-view-container\"\n      }, React.Children.map(children, function (child, indexChild) {\n        if (renderOnlyActive && indexChild !== indexLatest) {\n          return null;\n        }\n\n        process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(React.isValidElement(child), \"react-swipeable-view: one of the children provided is invalid: \".concat(child, \".\\n  We are expecting a valid React Element\")) : void 0;\n        var ref;\n        var hidden = true;\n\n        if (indexChild === indexLatest) {\n          hidden = false;\n\n          if (animateHeight) {\n            ref = _this4.setActiveSlide;\n            slideStyle.overflowY = 'hidden';\n          }\n        }\n\n        return React.createElement(\"div\", {\n          ref: ref,\n          style: slideStyle,\n          className: slideClassName,\n          \"aria-hidden\": hidden,\n          \"data-swipeable\": \"true\"\n        }, child);\n      }))));\n    }\n  }]);\n  return SwipeableViews;\n}(React.Component); // Added as an ads for people using the React dev tools in production.\n// So they know, the tool used to build the awesome UI they\n// are looking at/retro engineering.\n\n\nSwipeableViews.displayName = 'ReactSwipableView';\nSwipeableViews.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * This is callback property. It's called by the component on mount.\n   * This is useful when you want to trigger an action programmatically.\n   * It currently only supports updateHeight() action.\n   *\n   * @param {object} actions This object contains all posible actions\n   * that can be triggered programmatically.\n   */\n  action: _propTypes.default.func,\n\n  /**\n   * If `true`, the height of the container will be animated to match the current slide height.\n   * Animating another style property has a negative impact regarding performance.\n   */\n  animateHeight: _propTypes.default.bool,\n\n  /**\n   * If `false`, changes to the index prop will not cause an animated transition.\n   */\n  animateTransitions: _propTypes.default.bool,\n\n  /**\n   * The axis on which the slides will slide.\n   */\n  axis: _propTypes.default.oneOf(['x', 'x-reverse', 'y', 'y-reverse']),\n\n  /**\n   * Use this property to provide your slides.\n   */\n  children: _propTypes.default.node.isRequired,\n\n  /**\n   * This is the inlined style that will be applied\n   * to each slide container.\n   */\n  containerStyle: _propTypes.default.object,\n\n  /**\n   * If `true`, it will disable touch events.\n   * This is useful when you want to prohibit the user from changing slides.\n   */\n  disabled: _propTypes.default.bool,\n\n  /**\n   * This is the config used to disable lazyloding,\n   * if `true` will render all the views in first rendering.\n   */\n  disableLazyLoading: _propTypes.default.bool,\n\n  /**\n   * If `true`, it will enable mouse events.\n   * This will allow the user to perform the relevant swipe actions with a mouse.\n   */\n  enableMouseEvents: _propTypes.default.bool,\n\n  /**\n   * Configure hysteresis between slides. This value determines how far\n   * should user swipe to switch slide.\n   */\n  hysteresis: _propTypes.default.number,\n\n  /**\n   * If `true`, it will ignore native scroll container.\n   * It can be used to filter out false positive that blocks the swipe.\n   */\n  ignoreNativeScroll: _propTypes.default.bool,\n\n  /**\n   * This is the index of the slide to show.\n   * This is useful when you want to change the default slide shown.\n   * Or when you have tabs linked to each slide.\n   */\n  index: _propTypes.default.number,\n\n  /**\n   * This is callback prop. It's call by the\n   * component when the shown slide change after a swipe made by the user.\n   * This is useful when you have tabs linked to each slide.\n   *\n   * @param {integer} index This is the current index of the slide.\n   * @param {integer} indexLatest This is the oldest index of the slide.\n   * @param {object} meta Meta data containing more information about the event.\n   */\n  onChangeIndex: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onMouseDown: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onMouseLeave: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onMouseMove: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onMouseUp: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onScroll: _propTypes.default.func,\n\n  /**\n   * This is callback prop. It's called by the\n   * component when the slide switching.\n   * This is useful when you want to implement something corresponding\n   * to the current slide position.\n   *\n   * @param {integer} index This is the current index of the slide.\n   * @param {string} type Can be either `move` or `end`.\n   */\n  onSwitching: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onTouchEnd: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onTouchMove: _propTypes.default.func,\n\n  /**\n   * @ignore\n   */\n  onTouchStart: _propTypes.default.func,\n\n  /**\n   * The callback that fires when the animation comes to a rest.\n   * This is useful to defer CPU intensive task.\n   */\n  onTransitionEnd: _propTypes.default.func,\n\n  /**\n   * If `true`, it will add bounds effect on the edges.\n   */\n  resistance: _propTypes.default.bool,\n\n  /**\n   * This is the className that will be applied\n   * on the slide component.\n   */\n  slideClassName: _propTypes.default.string,\n\n  /**\n   * This is the inlined style that will be applied\n   * on the slide component.\n   */\n  slideStyle: _propTypes.default.object,\n\n  /**\n   * This is the config used to create CSS transitions.\n   * This is useful to change the dynamic of the transition.\n   */\n  springConfig: _propTypes.default.shape({\n    delay: _propTypes.default.string,\n    duration: _propTypes.default.string,\n    easeFunction: _propTypes.default.string\n  }),\n\n  /**\n   * This is the inlined style that will be applied\n   * on the root component.\n   */\n  style: _propTypes.default.object,\n\n  /**\n   * This is the threshold used for detecting a quick swipe.\n   * If the computed speed is above this value, the index change.\n   */\n  threshold: _propTypes.default.number\n} : {};\nSwipeableViews.defaultProps = {\n  animateHeight: false,\n  animateTransitions: true,\n  axis: 'x',\n  disabled: false,\n  disableLazyLoading: false,\n  enableMouseEvents: false,\n  hysteresis: 0.6,\n  ignoreNativeScroll: false,\n  index: 0,\n  threshold: 5,\n  springConfig: {\n    duration: '0.35s',\n    easeFunction: 'cubic-bezier(0.15, 0.3, 0.25, 1)',\n    delay: '0s'\n  },\n  resistance: false\n};\nvar _default = SwipeableViews;\nexports.default = _default;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import { debounce } from 'lodash';\n\nimport api from '../api';\n\nimport { showAlertForError } from './alerts';\n\nexport const SETTING_CHANGE = 'SETTING_CHANGE';\nexport const SETTING_SAVE   = 'SETTING_SAVE';\n\nexport function changeSetting(path, value) {\n  return dispatch => {\n    dispatch({\n      type: SETTING_CHANGE,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nconst debouncedSave = debounce((dispatch, getState) => {\n  if (getState().getIn(['settings', 'saved']) || !getState().getIn(['meta', 'me'])) {\n    return;\n  }\n\n  const data = getState().get('settings').filter((_, path) => path !== 'saved').toJS();\n\n  api().put('/api/web/settings', { data })\n    .then(() => dispatch({ type: SETTING_SAVE }))\n    .catch(error => dispatch(showAlertForError(error)));\n}, 5000, { trailing: true });\n\nexport function saveSettings() {\n  return (dispatch, getState) => debouncedSave(dispatch, getState);\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"checkIndexBounds\", {\n  enumerable: true,\n  get: function get() {\n    return _checkIndexBounds.default;\n  }\n});\nObject.defineProperty(exports, \"computeIndex\", {\n  enumerable: true,\n  get: function get() {\n    return _computeIndex.default;\n  }\n});\nObject.defineProperty(exports, \"constant\", {\n  enumerable: true,\n  get: function get() {\n    return _constant.default;\n  }\n});\nObject.defineProperty(exports, \"getDisplaySameSlide\", {\n  enumerable: true,\n  get: function get() {\n    return _getDisplaySameSlide.default;\n  }\n});\nObject.defineProperty(exports, \"mod\", {\n  enumerable: true,\n  get: function get() {\n    return _mod.default;\n  }\n});\n\nvar _checkIndexBounds = _interopRequireDefault(require(\"./checkIndexBounds\"));\n\nvar _computeIndex = _interopRequireDefault(require(\"./computeIndex\"));\n\nvar _constant = _interopRequireDefault(require(\"./constant\"));\n\nvar _getDisplaySameSlide = _interopRequireDefault(require(\"./getDisplaySameSlide\"));\n\nvar _mod = _interopRequireDefault(require(\"./mod\"));","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nvar checkIndexBounds = function checkIndexBounds(props) {\n  var index = props.index,\n      children = props.children;\n\n  var childrenCount = _react.default.Children.count(children);\n\n  process.env.NODE_ENV !== \"production\" ? (0, _warning.default)(index >= 0 && index <= childrenCount, \"react-swipeable-view: the new index: \".concat(index, \" is out of bounds: [0-\").concat(childrenCount, \"].\")) : void 0;\n};\n\nvar _default = checkIndexBounds;\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = computeIndex;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _constant = _interopRequireDefault(require(\"./constant\"));\n\nfunction computeIndex(params) {\n  var children = params.children,\n      startIndex = params.startIndex,\n      startX = params.startX,\n      pageX = params.pageX,\n      viewLength = params.viewLength,\n      resistance = params.resistance;\n  var indexMax = _react.default.Children.count(children) - 1;\n  var index = startIndex + (startX - pageX) / viewLength;\n  var newStartX;\n\n  if (!resistance) {\n    // Reset the starting point\n    if (index < 0) {\n      index = 0;\n      newStartX = (index - startIndex) * viewLength + pageX;\n    } else if (index > indexMax) {\n      index = indexMax;\n      newStartX = (index - startIndex) * viewLength + pageX;\n    }\n  } else if (index < 0) {\n    index = Math.exp(index * _constant.default.RESISTANCE_COEF) - 1;\n  } else if (index > indexMax) {\n    index = indexMax + 1 - Math.exp((indexMax - index) * _constant.default.RESISTANCE_COEF);\n  }\n\n  return {\n    index: index,\n    startX: newStartX\n  };\n}","import api, { apiRequest, getLinks } from 'mastodon/api';\nimport type { ApiNotificationGroupsResultJSON } from 'mastodon/api_types/notifications';\n\nexport const apiFetchNotifications = async (params?: {\n  exclude_types?: string[];\n  max_id?: string;\n}) => {\n  const response = await api().request<ApiNotificationGroupsResultJSON>({\n    method: 'GET',\n    url: '/api/v2_alpha/notifications',\n    params,\n  });\n\n  const { statuses, accounts, notification_groups } = response.data;\n\n  return {\n    statuses,\n    accounts,\n    notifications: notification_groups,\n    links: getLinks(response),\n  };\n};\n\nexport const apiClearNotifications = () =>\n  apiRequest<undefined>('POST', 'v1/notifications/clear');\n","// See app/serializers/rest/notification_group_serializer.rb\n\nimport type { AccountWarningAction } from 'mastodon/models/notification_group';\n\nimport type { ApiAccountJSON } from './accounts';\nimport type { ApiReportJSON } from './reports';\nimport type { ApiStatusJSON } from './statuses';\n\n// See app/model/notification.rb\nexport const allNotificationTypes = [\n  'follow',\n  'follow_request',\n  'favourite',\n  'reblog',\n  'mention',\n  'poll',\n  'status',\n  'update',\n  'admin.sign_up',\n  'admin.report',\n  'moderation_warning',\n  'severed_relationships',\n];\n\nexport type NotificationWithStatusType =\n  | 'favourite'\n  | 'reblog'\n  | 'status'\n  | 'mention'\n  | 'poll'\n  | 'update';\n\nexport type NotificationType =\n  | NotificationWithStatusType\n  | 'follow'\n  | 'follow_request'\n  | 'moderation_warning'\n  | 'severed_relationships'\n  | 'admin.sign_up'\n  | 'admin.report';\n\nexport interface BaseNotificationJSON {\n  id: string;\n  type: NotificationType;\n  created_at: string;\n  group_key: string;\n  account: ApiAccountJSON;\n}\n\nexport interface BaseNotificationGroupJSON {\n  group_key: string;\n  notifications_count: number;\n  type: NotificationType;\n  sample_account_ids: string[];\n  latest_page_notification_at: string; // FIXME: This will only be present if the notification group is returned in a paginated list, not requested directly\n  most_recent_notification_id: string;\n  page_min_id?: string;\n  page_max_id?: string;\n}\n\ninterface NotificationGroupWithStatusJSON extends BaseNotificationGroupJSON {\n  type: NotificationWithStatusType;\n  status_id: string;\n}\n\ninterface NotificationWithStatusJSON extends BaseNotificationJSON {\n  type: NotificationWithStatusType;\n  status: ApiStatusJSON;\n}\n\ninterface ReportNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ninterface ReportNotificationJSON extends BaseNotificationJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ntype SimpleNotificationTypes = 'follow' | 'follow_request' | 'admin.sign_up';\ninterface SimpleNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: SimpleNotificationTypes;\n}\n\ninterface SimpleNotificationJSON extends BaseNotificationJSON {\n  type: SimpleNotificationTypes;\n}\n\nexport interface ApiAccountWarningJSON {\n  id: string;\n  action: AccountWarningAction;\n  text: string;\n  status_ids: string[];\n  created_at: string;\n  target_account: ApiAccountJSON;\n  appeal: unknown;\n}\n\ninterface ModerationWarningNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\ninterface ModerationWarningNotificationJSON extends BaseNotificationJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\nexport interface ApiAccountRelationshipSeveranceEventJSON {\n  id: string;\n  type: 'account_suspension' | 'domain_block' | 'user_domain_block';\n  purged: boolean;\n  target_name: string;\n  followers_count: number;\n  following_count: number;\n  created_at: string;\n}\n\ninterface AccountRelationshipSeveranceNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\ninterface AccountRelationshipSeveranceNotificationJSON\n  extends BaseNotificationJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\nexport type ApiNotificationJSON =\n  | SimpleNotificationJSON\n  | ReportNotificationJSON\n  | AccountRelationshipSeveranceNotificationJSON\n  | NotificationWithStatusJSON\n  | ModerationWarningNotificationJSON;\n\nexport type ApiNotificationGroupJSON =\n  | SimpleNotificationGroupJSON\n  | ReportNotificationGroupJSON\n  | AccountRelationshipSeveranceNotificationGroupJSON\n  | NotificationGroupWithStatusJSON\n  | ModerationWarningNotificationGroupJSON;\n\nexport interface ApiNotificationGroupsResultJSON {\n  accounts: ApiAccountJSON[];\n  statuses: ApiStatusJSON[];\n  notification_groups: ApiNotificationGroupJSON[];\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiClearNotifications,\n  apiFetchNotifications,\n} from 'mastodon/api/notifications';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport type {\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n} from 'mastodon/api_types/notifications';\nimport { allNotificationTypes } from 'mastodon/api_types/notifications';\nimport type { ApiStatusJSON } from 'mastodon/api_types/statuses';\nimport type { NotificationGap } from 'mastodon/reducers/notification_groups';\nimport {\n  selectSettingsNotificationsExcludedTypes,\n  selectSettingsNotificationsQuickFilterActive,\n} from 'mastodon/selectors/settings';\nimport type { AppDispatch } from 'mastodon/store';\nimport {\n  createAppAsyncThunk,\n  createDataLoadingThunk,\n} from 'mastodon/store/typed_functions';\n\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\nimport { NOTIFICATIONS_FILTER_SET } from './notifications';\nimport { saveSettings } from './settings';\n\nfunction excludeAllTypesExcept(filter: string) {\n  return allNotificationTypes.filter((item) => item !== filter);\n}\n\nfunction dispatchAssociatedRecords(\n  dispatch: AppDispatch,\n  notifications: ApiNotificationGroupJSON[] | ApiNotificationJSON[],\n) {\n  const fetchedAccounts: ApiAccountJSON[] = [];\n  const fetchedStatuses: ApiStatusJSON[] = [];\n\n  notifications.forEach((notification) => {\n    if (notification.type === 'admin.report') {\n      fetchedAccounts.push(notification.report.target_account);\n    }\n\n    if (notification.type === 'moderation_warning') {\n      fetchedAccounts.push(notification.moderation_warning.target_account);\n    }\n\n    if ('status' in notification) {\n      fetchedStatuses.push(notification.status);\n    }\n  });\n\n  if (fetchedAccounts.length > 0)\n    dispatch(importFetchedAccounts(fetchedAccounts));\n\n  if (fetchedStatuses.length > 0)\n    dispatch(importFetchedStatuses(fetchedStatuses));\n}\n\nexport const fetchNotifications = createDataLoadingThunk(\n  'notificationGroups/fetch',\n  async (_params, { getState }) => {\n    const activeFilter =\n      selectSettingsNotificationsQuickFilterActive(getState());\n\n    return apiFetchNotifications({\n      exclude_types:\n        activeFilter === 'all'\n          ? selectSettingsNotificationsExcludedTypes(getState())\n          : excludeAllTypesExcept(activeFilter),\n    });\n  },\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n    const payload: (ApiNotificationGroupJSON | NotificationGap)[] =\n      notifications;\n\n    // TODO: might be worth not using gaps for that…\n    // if (nextLink) payload.push({ type: 'gap', loadUrl: nextLink.uri });\n    if (notifications.length > 1)\n      payload.push({ type: 'gap', maxId: notifications.at(-1)?.page_min_id });\n\n    return payload;\n    // dispatch(submitMarkers());\n  },\n);\n\nexport const fetchNotificationsGap = createDataLoadingThunk(\n  'notificationGroups/fetchGap',\n  async (params: { gap: NotificationGap }) =>\n    apiFetchNotifications({ max_id: params.gap.maxId }),\n\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications };\n  },\n);\n\nexport const processNewNotificationForGroups = createAppAsyncThunk(\n  'notificationGroups/processNew',\n  (notification: ApiNotificationJSON, { dispatch }) => {\n    dispatchAssociatedRecords(dispatch, [notification]);\n\n    return notification;\n  },\n);\n\nexport const loadPending = createAction('notificationGroups/loadPending');\n\nexport const updateScrollPosition = createAction<{ top: boolean }>(\n  'notificationGroups/updateScrollPosition',\n);\n\nexport const setNotificationsFilter = createAppAsyncThunk(\n  'notifications/filter/set',\n  ({ filterType }: { filterType: string }, { dispatch }) => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    // dispatch(expandNotifications({ forceLoad: true }));\n    void dispatch(fetchNotifications());\n    dispatch(saveSettings());\n  },\n);\n\nexport const clearNotifications = createDataLoadingThunk(\n  'notifications/clear',\n  () => apiClearNotifications(),\n);\n\nexport const markNotificationsAsRead = createAction(\n  'notificationGroups/markAsRead',\n);\n\nexport const mountNotifications = createAction('notificationGroups/mount');\nexport const unmountNotifications = createAction('notificationGroups/unmount');\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar getDisplaySameSlide = function getDisplaySameSlide(props, nextProps) {\n  var displaySameSlide = false;\n\n  var getChildrenKey = function getChildrenKey(child) {\n    return child ? child.key : 'empty';\n  };\n\n  if (props.children.length && nextProps.children.length) {\n    var oldKeys = _react.default.Children.map(props.children, getChildrenKey);\n\n    var oldKey = oldKeys[props.index];\n\n    if (oldKey !== null && oldKey !== undefined) {\n      var newKeys = _react.default.Children.map(nextProps.children, getChildrenKey);\n\n      var newKey = newKeys[nextProps.index];\n\n      if (oldKey === newKey) {\n        displaySameSlide = true;\n      }\n    }\n  }\n\n  return displaySameSlide;\n};\n\nvar _default = getDisplaySameSlide;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n// Extended version of % with negative integer support.\nfunction mod(n, m) {\n  var q = n % m;\n  return q < 0 ? q + m : q;\n}\n\nvar _default = mod;\nexports.default = _default;","import api, { apiRequest, getLinks } from 'flavours/glitch/api';\nimport type { ApiNotificationGroupsResultJSON } from 'flavours/glitch/api_types/notifications';\n\nexport const apiFetchNotifications = async (params?: {\n  exclude_types?: string[];\n  max_id?: string;\n}) => {\n  const response = await api().request<ApiNotificationGroupsResultJSON>({\n    method: 'GET',\n    url: '/api/v2_alpha/notifications',\n    params,\n  });\n\n  const { statuses, accounts, notification_groups } = response.data;\n\n  return {\n    statuses,\n    accounts,\n    notifications: notification_groups,\n    links: getLinks(response),\n  };\n};\n\nexport const apiClearNotifications = () =>\n  apiRequest<undefined>('POST', 'v1/notifications/clear');\n","// See app/serializers/rest/notification_group_serializer.rb\n\nimport type { AccountWarningAction } from 'flavours/glitch/models/notification_group';\n\nimport type { ApiAccountJSON } from './accounts';\nimport type { ApiReportJSON } from './reports';\nimport type { ApiStatusJSON } from './statuses';\n\n// See app/model/notification.rb\nexport const allNotificationTypes = [\n  'follow',\n  'follow_request',\n  'favourite',\n  'reaction',\n  'reblog',\n  'mention',\n  'poll',\n  'status',\n  'update',\n  'admin.sign_up',\n  'admin.report',\n  'moderation_warning',\n  'severed_relationships',\n];\n\nexport type NotificationWithStatusType =\n  | 'favourite'\n  | 'reaction'\n  | 'reblog'\n  | 'status'\n  | 'mention'\n  | 'poll'\n  | 'update';\n\nexport type NotificationType =\n  | NotificationWithStatusType\n  | 'follow'\n  | 'follow_request'\n  | 'moderation_warning'\n  | 'severed_relationships'\n  | 'admin.sign_up'\n  | 'admin.report';\n\nexport interface BaseNotificationJSON {\n  id: string;\n  type: NotificationType;\n  created_at: string;\n  group_key: string;\n  account: ApiAccountJSON;\n}\n\nexport interface BaseNotificationGroupJSON {\n  group_key: string;\n  notifications_count: number;\n  type: NotificationType;\n  sample_account_ids: string[];\n  latest_page_notification_at: string; // FIXME: This will only be present if the notification group is returned in a paginated list, not requested directly\n  most_recent_notification_id: string;\n  page_min_id?: string;\n  page_max_id?: string;\n}\n\ninterface NotificationGroupWithStatusJSON extends BaseNotificationGroupJSON {\n  type: NotificationWithStatusType;\n  status_id: string;\n}\n\ninterface NotificationWithStatusJSON extends BaseNotificationJSON {\n  type: NotificationWithStatusType;\n  status: ApiStatusJSON;\n}\n\ninterface ReportNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ninterface ReportNotificationJSON extends BaseNotificationJSON {\n  type: 'admin.report';\n  report: ApiReportJSON;\n}\n\ntype SimpleNotificationTypes = 'follow' | 'follow_request' | 'admin.sign_up';\ninterface SimpleNotificationGroupJSON extends BaseNotificationGroupJSON {\n  type: SimpleNotificationTypes;\n}\n\ninterface SimpleNotificationJSON extends BaseNotificationJSON {\n  type: SimpleNotificationTypes;\n}\n\nexport interface ApiAccountWarningJSON {\n  id: string;\n  action: AccountWarningAction;\n  text: string;\n  status_ids: string[];\n  created_at: string;\n  target_account: ApiAccountJSON;\n  appeal: unknown;\n}\n\ninterface ModerationWarningNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\ninterface ModerationWarningNotificationJSON extends BaseNotificationJSON {\n  type: 'moderation_warning';\n  moderation_warning: ApiAccountWarningJSON;\n}\n\nexport interface ApiAccountRelationshipSeveranceEventJSON {\n  id: string;\n  type: 'account_suspension' | 'domain_block' | 'user_domain_block';\n  purged: boolean;\n  target_name: string;\n  followers_count: number;\n  following_count: number;\n  created_at: string;\n}\n\ninterface AccountRelationshipSeveranceNotificationGroupJSON\n  extends BaseNotificationGroupJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\ninterface AccountRelationshipSeveranceNotificationJSON\n  extends BaseNotificationJSON {\n  type: 'severed_relationships';\n  event: ApiAccountRelationshipSeveranceEventJSON;\n}\n\nexport type ApiNotificationJSON =\n  | SimpleNotificationJSON\n  | ReportNotificationJSON\n  | AccountRelationshipSeveranceNotificationJSON\n  | NotificationWithStatusJSON\n  | ModerationWarningNotificationJSON;\n\nexport type ApiNotificationGroupJSON =\n  | SimpleNotificationGroupJSON\n  | ReportNotificationGroupJSON\n  | AccountRelationshipSeveranceNotificationGroupJSON\n  | NotificationGroupWithStatusJSON\n  | ModerationWarningNotificationGroupJSON;\n\nexport interface ApiNotificationGroupsResultJSON {\n  accounts: ApiAccountJSON[];\n  statuses: ApiStatusJSON[];\n  notification_groups: ApiNotificationGroupJSON[];\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiClearNotifications,\n  apiFetchNotifications,\n} from 'flavours/glitch/api/notifications';\nimport type { ApiAccountJSON } from 'flavours/glitch/api_types/accounts';\nimport type {\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n} from 'flavours/glitch/api_types/notifications';\nimport { allNotificationTypes } from 'flavours/glitch/api_types/notifications';\nimport type { ApiStatusJSON } from 'flavours/glitch/api_types/statuses';\nimport type { NotificationGap } from 'flavours/glitch/reducers/notification_groups';\nimport {\n  selectSettingsNotificationsExcludedTypes,\n  selectSettingsNotificationsQuickFilterActive,\n} from 'flavours/glitch/selectors/settings';\nimport type { AppDispatch } from 'flavours/glitch/store';\nimport {\n  createAppAsyncThunk,\n  createDataLoadingThunk,\n} from 'flavours/glitch/store/typed_functions';\n\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\nimport { NOTIFICATIONS_FILTER_SET } from './notifications';\nimport { saveSettings } from './settings';\n\nfunction excludeAllTypesExcept(filter: string) {\n  return allNotificationTypes.filter((item) => item !== filter);\n}\n\nfunction dispatchAssociatedRecords(\n  dispatch: AppDispatch,\n  notifications: ApiNotificationGroupJSON[] | ApiNotificationJSON[],\n) {\n  const fetchedAccounts: ApiAccountJSON[] = [];\n  const fetchedStatuses: ApiStatusJSON[] = [];\n\n  notifications.forEach((notification) => {\n    if (notification.type === 'admin.report') {\n      fetchedAccounts.push(notification.report.target_account);\n    }\n\n    if (notification.type === 'moderation_warning') {\n      fetchedAccounts.push(notification.moderation_warning.target_account);\n    }\n\n    if ('status' in notification) {\n      fetchedStatuses.push(notification.status);\n    }\n  });\n\n  if (fetchedAccounts.length > 0)\n    dispatch(importFetchedAccounts(fetchedAccounts));\n\n  if (fetchedStatuses.length > 0)\n    dispatch(importFetchedStatuses(fetchedStatuses));\n}\n\nexport const fetchNotifications = createDataLoadingThunk(\n  'notificationGroups/fetch',\n  async (_params, { getState }) => {\n    const activeFilter =\n      selectSettingsNotificationsQuickFilterActive(getState());\n\n    return apiFetchNotifications({\n      exclude_types:\n        activeFilter === 'all'\n          ? selectSettingsNotificationsExcludedTypes(getState())\n          : excludeAllTypesExcept(activeFilter),\n    });\n  },\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n    const payload: (ApiNotificationGroupJSON | NotificationGap)[] =\n      notifications;\n\n    // TODO: might be worth not using gaps for that…\n    // if (nextLink) payload.push({ type: 'gap', loadUrl: nextLink.uri });\n    if (notifications.length > 1)\n      payload.push({ type: 'gap', maxId: notifications.at(-1)?.page_min_id });\n\n    return payload;\n    // dispatch(submitMarkers());\n  },\n);\n\nexport const fetchNotificationsGap = createDataLoadingThunk(\n  'notificationGroups/fetchGap',\n  async (params: { gap: NotificationGap }) =>\n    apiFetchNotifications({ max_id: params.gap.maxId }),\n\n  ({ notifications, accounts, statuses }, { dispatch }) => {\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importFetchedStatuses(statuses));\n    dispatchAssociatedRecords(dispatch, notifications);\n\n    return { notifications };\n  },\n);\n\nexport const processNewNotificationForGroups = createAppAsyncThunk(\n  'notificationGroups/processNew',\n  (notification: ApiNotificationJSON, { dispatch }) => {\n    dispatchAssociatedRecords(dispatch, [notification]);\n\n    return notification;\n  },\n);\n\nexport const loadPending = createAction('notificationGroups/loadPending');\n\nexport const updateScrollPosition = createAction<{ top: boolean }>(\n  'notificationGroups/updateScrollPosition',\n);\n\nexport const setNotificationsFilter = createAppAsyncThunk(\n  'notifications/filter/set',\n  ({ filterType }: { filterType: string }, { dispatch }) => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    // dispatch(expandNotifications({ forceLoad: true }));\n    void dispatch(fetchNotifications());\n    dispatch(saveSettings());\n  },\n);\n\nexport const clearNotifications = createDataLoadingThunk(\n  'notifications/clear',\n  () => apiClearNotifications(),\n);\n\nexport const markNotificationsAsRead = createAction(\n  'notificationGroups/markAsRead',\n);\n\nexport const mountNotifications = createAction('notificationGroups/mount');\nexport const unmountNotifications = createAction('notificationGroups/unmount');\n","import { apiSubmitAccountNote } from 'mastodon/api/accounts';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const submitAccountNote = createDataLoadingThunk(\n  'account_note/submit',\n  ({ accountId, note }: { accountId: string; note: string }) =>\n    apiSubmitAccountNote(accountId, note),\n  (relationship) => ({ relationship }),\n  { skipLoading: true },\n);\n","import { apiRequestPost } from 'mastodon/api';\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\n\nexport const apiSubmitAccountNote = (id: string, value: string) =>\n  apiRequestPost<ApiRelationshipJSON>(`v1/accounts/${id}/note`, {\n    comment: value,\n  });\n","import { apiSubmitAccountNote } from 'flavours/glitch/api/accounts';\nimport { createDataLoadingThunk } from 'flavours/glitch/store/typed_functions';\n\nexport const submitAccountNote = createDataLoadingThunk(\n  'account_note/submit',\n  ({ accountId, note }: { accountId: string; note: string }) =>\n    apiSubmitAccountNote(accountId, note),\n  (relationship) => ({ relationship }),\n  { skipLoading: true },\n);\n","import { apiRequestPost } from 'flavours/glitch/api';\nimport type { ApiRelationshipJSON } from 'flavours/glitch/api_types/relationships';\n\nexport const apiSubmitAccountNote = (id: string, value: string) =>\n  apiRequestPost<ApiRelationshipJSON>(`v1/accounts/${id}/note`, {\n    comment: value,\n  });\n","(function() {\n\n    var debug = false;\n\n    var root = this;\n\n    var EXIF = function(obj) {\n        if (obj instanceof EXIF) return obj;\n        if (!(this instanceof EXIF)) return new EXIF(obj);\n        this.EXIFwrapped = obj;\n    };\n\n    if (typeof exports !== 'undefined') {\n        if (typeof module !== 'undefined' && module.exports) {\n            exports = module.exports = EXIF;\n        }\n        exports.EXIF = EXIF;\n    } else {\n        root.EXIF = EXIF;\n    }\n\n    var ExifTags = EXIF.Tags = {\n\n        // version tags\n        0x9000 : \"ExifVersion\",             // EXIF version\n        0xA000 : \"FlashpixVersion\",         // Flashpix format version\n\n        // colorspace tags\n        0xA001 : \"ColorSpace\",              // Color space information tag\n\n        // image configuration\n        0xA002 : \"PixelXDimension\",         // Valid width of meaningful image\n        0xA003 : \"PixelYDimension\",         // Valid height of meaningful image\n        0x9101 : \"ComponentsConfiguration\", // Information about channels\n        0x9102 : \"CompressedBitsPerPixel\",  // Compressed bits per pixel\n\n        // user information\n        0x927C : \"MakerNote\",               // Any desired information written by the manufacturer\n        0x9286 : \"UserComment\",             // Comments by user\n\n        // related file\n        0xA004 : \"RelatedSoundFile\",        // Name of related sound file\n\n        // date and time\n        0x9003 : \"DateTimeOriginal\",        // Date and time when the original image was generated\n        0x9004 : \"DateTimeDigitized\",       // Date and time when the image was stored digitally\n        0x9290 : \"SubsecTime\",              // Fractions of seconds for DateTime\n        0x9291 : \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\n        0x9292 : \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\n\n        // picture-taking conditions\n        0x829A : \"ExposureTime\",            // Exposure time (in seconds)\n        0x829D : \"FNumber\",                 // F number\n        0x8822 : \"ExposureProgram\",         // Exposure program\n        0x8824 : \"SpectralSensitivity\",     // Spectral sensitivity\n        0x8827 : \"ISOSpeedRatings\",         // ISO speed rating\n        0x8828 : \"OECF\",                    // Optoelectric conversion factor\n        0x9201 : \"ShutterSpeedValue\",       // Shutter speed\n        0x9202 : \"ApertureValue\",           // Lens aperture\n        0x9203 : \"BrightnessValue\",         // Value of brightness\n        0x9204 : \"ExposureBias\",            // Exposure bias\n        0x9205 : \"MaxApertureValue\",        // Smallest F number of lens\n        0x9206 : \"SubjectDistance\",         // Distance to subject in meters\n        0x9207 : \"MeteringMode\",            // Metering mode\n        0x9208 : \"LightSource\",             // Kind of light source\n        0x9209 : \"Flash\",                   // Flash status\n        0x9214 : \"SubjectArea\",             // Location and area of main subject\n        0x920A : \"FocalLength\",             // Focal length of the lens in mm\n        0xA20B : \"FlashEnergy\",             // Strobe energy in BCPS\n        0xA20C : \"SpatialFrequencyResponse\",    //\n        0xA20E : \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\n        0xA20F : \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\n        0xA210 : \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\n        0xA214 : \"SubjectLocation\",         // Location of subject in image\n        0xA215 : \"ExposureIndex\",           // Exposure index selected on camera\n        0xA217 : \"SensingMethod\",           // Image sensor type\n        0xA300 : \"FileSource\",              // Image source (3 == DSC)\n        0xA301 : \"SceneType\",               // Scene type (1 == directly photographed)\n        0xA302 : \"CFAPattern\",              // Color filter array geometric pattern\n        0xA401 : \"CustomRendered\",          // Special processing\n        0xA402 : \"ExposureMode\",            // Exposure mode\n        0xA403 : \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\n        0xA404 : \"DigitalZoomRation\",       // Digital zoom ratio\n        0xA405 : \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\n        0xA406 : \"SceneCaptureType\",        // Type of scene\n        0xA407 : \"GainControl\",             // Degree of overall image gain adjustment\n        0xA408 : \"Contrast\",                // Direction of contrast processing applied by camera\n        0xA409 : \"Saturation\",              // Direction of saturation processing applied by camera\n        0xA40A : \"Sharpness\",               // Direction of sharpness processing applied by camera\n        0xA40B : \"DeviceSettingDescription\",    //\n        0xA40C : \"SubjectDistanceRange\",    // Distance to subject\n\n        // other tags\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0xA420 : \"ImageUniqueID\"            // Identifier assigned uniquely to each image\n    };\n\n    var TiffTags = EXIF.TiffTags = {\n        0x0100 : \"ImageWidth\",\n        0x0101 : \"ImageHeight\",\n        0x8769 : \"ExifIFDPointer\",\n        0x8825 : \"GPSInfoIFDPointer\",\n        0xA005 : \"InteroperabilityIFDPointer\",\n        0x0102 : \"BitsPerSample\",\n        0x0103 : \"Compression\",\n        0x0106 : \"PhotometricInterpretation\",\n        0x0112 : \"Orientation\",\n        0x0115 : \"SamplesPerPixel\",\n        0x011C : \"PlanarConfiguration\",\n        0x0212 : \"YCbCrSubSampling\",\n        0x0213 : \"YCbCrPositioning\",\n        0x011A : \"XResolution\",\n        0x011B : \"YResolution\",\n        0x0128 : \"ResolutionUnit\",\n        0x0111 : \"StripOffsets\",\n        0x0116 : \"RowsPerStrip\",\n        0x0117 : \"StripByteCounts\",\n        0x0201 : \"JPEGInterchangeFormat\",\n        0x0202 : \"JPEGInterchangeFormatLength\",\n        0x012D : \"TransferFunction\",\n        0x013E : \"WhitePoint\",\n        0x013F : \"PrimaryChromaticities\",\n        0x0211 : \"YCbCrCoefficients\",\n        0x0214 : \"ReferenceBlackWhite\",\n        0x0132 : \"DateTime\",\n        0x010E : \"ImageDescription\",\n        0x010F : \"Make\",\n        0x0110 : \"Model\",\n        0x0131 : \"Software\",\n        0x013B : \"Artist\",\n        0x8298 : \"Copyright\"\n    };\n\n    var GPSTags = EXIF.GPSTags = {\n        0x0000 : \"GPSVersionID\",\n        0x0001 : \"GPSLatitudeRef\",\n        0x0002 : \"GPSLatitude\",\n        0x0003 : \"GPSLongitudeRef\",\n        0x0004 : \"GPSLongitude\",\n        0x0005 : \"GPSAltitudeRef\",\n        0x0006 : \"GPSAltitude\",\n        0x0007 : \"GPSTimeStamp\",\n        0x0008 : \"GPSSatellites\",\n        0x0009 : \"GPSStatus\",\n        0x000A : \"GPSMeasureMode\",\n        0x000B : \"GPSDOP\",\n        0x000C : \"GPSSpeedRef\",\n        0x000D : \"GPSSpeed\",\n        0x000E : \"GPSTrackRef\",\n        0x000F : \"GPSTrack\",\n        0x0010 : \"GPSImgDirectionRef\",\n        0x0011 : \"GPSImgDirection\",\n        0x0012 : \"GPSMapDatum\",\n        0x0013 : \"GPSDestLatitudeRef\",\n        0x0014 : \"GPSDestLatitude\",\n        0x0015 : \"GPSDestLongitudeRef\",\n        0x0016 : \"GPSDestLongitude\",\n        0x0017 : \"GPSDestBearingRef\",\n        0x0018 : \"GPSDestBearing\",\n        0x0019 : \"GPSDestDistanceRef\",\n        0x001A : \"GPSDestDistance\",\n        0x001B : \"GPSProcessingMethod\",\n        0x001C : \"GPSAreaInformation\",\n        0x001D : \"GPSDateStamp\",\n        0x001E : \"GPSDifferential\"\n    };\n\n     // EXIF 2.3 Spec\n    var IFD1Tags = EXIF.IFD1Tags = {\n        0x0100: \"ImageWidth\",\n        0x0101: \"ImageHeight\",\n        0x0102: \"BitsPerSample\",\n        0x0103: \"Compression\",\n        0x0106: \"PhotometricInterpretation\",\n        0x0111: \"StripOffsets\",\n        0x0112: \"Orientation\",\n        0x0115: \"SamplesPerPixel\",\n        0x0116: \"RowsPerStrip\",\n        0x0117: \"StripByteCounts\",\n        0x011A: \"XResolution\",\n        0x011B: \"YResolution\",\n        0x011C: \"PlanarConfiguration\",\n        0x0128: \"ResolutionUnit\",\n        0x0201: \"JpegIFOffset\",    // When image format is JPEG, this value show offset to JPEG data stored.(aka \"ThumbnailOffset\" or \"JPEGInterchangeFormat\")\n        0x0202: \"JpegIFByteCount\", // When image format is JPEG, this value shows data size of JPEG image (aka \"ThumbnailLength\" or \"JPEGInterchangeFormatLength\")\n        0x0211: \"YCbCrCoefficients\",\n        0x0212: \"YCbCrSubSampling\",\n        0x0213: \"YCbCrPositioning\",\n        0x0214: \"ReferenceBlackWhite\"\n    };\n\n    var StringValues = EXIF.StringValues = {\n        ExposureProgram : {\n            0 : \"Not defined\",\n            1 : \"Manual\",\n            2 : \"Normal program\",\n            3 : \"Aperture priority\",\n            4 : \"Shutter priority\",\n            5 : \"Creative program\",\n            6 : \"Action program\",\n            7 : \"Portrait mode\",\n            8 : \"Landscape mode\"\n        },\n        MeteringMode : {\n            0 : \"Unknown\",\n            1 : \"Average\",\n            2 : \"CenterWeightedAverage\",\n            3 : \"Spot\",\n            4 : \"MultiSpot\",\n            5 : \"Pattern\",\n            6 : \"Partial\",\n            255 : \"Other\"\n        },\n        LightSource : {\n            0 : \"Unknown\",\n            1 : \"Daylight\",\n            2 : \"Fluorescent\",\n            3 : \"Tungsten (incandescent light)\",\n            4 : \"Flash\",\n            9 : \"Fine weather\",\n            10 : \"Cloudy weather\",\n            11 : \"Shade\",\n            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\n            13 : \"Day white fluorescent (N 4600 - 5400K)\",\n            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\n            15 : \"White fluorescent (WW 3200 - 3700K)\",\n            17 : \"Standard light A\",\n            18 : \"Standard light B\",\n            19 : \"Standard light C\",\n            20 : \"D55\",\n            21 : \"D65\",\n            22 : \"D75\",\n            23 : \"D50\",\n            24 : \"ISO studio tungsten\",\n            255 : \"Other\"\n        },\n        Flash : {\n            0x0000 : \"Flash did not fire\",\n            0x0001 : \"Flash fired\",\n            0x0005 : \"Strobe return light not detected\",\n            0x0007 : \"Strobe return light detected\",\n            0x0009 : \"Flash fired, compulsory flash mode\",\n            0x000D : \"Flash fired, compulsory flash mode, return light not detected\",\n            0x000F : \"Flash fired, compulsory flash mode, return light detected\",\n            0x0010 : \"Flash did not fire, compulsory flash mode\",\n            0x0018 : \"Flash did not fire, auto mode\",\n            0x0019 : \"Flash fired, auto mode\",\n            0x001D : \"Flash fired, auto mode, return light not detected\",\n            0x001F : \"Flash fired, auto mode, return light detected\",\n            0x0020 : \"No flash function\",\n            0x0041 : \"Flash fired, red-eye reduction mode\",\n            0x0045 : \"Flash fired, red-eye reduction mode, return light not detected\",\n            0x0047 : \"Flash fired, red-eye reduction mode, return light detected\",\n            0x0049 : \"Flash fired, compulsory flash mode, red-eye reduction mode\",\n            0x004D : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\n            0x004F : \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\n            0x0059 : \"Flash fired, auto mode, red-eye reduction mode\",\n            0x005D : \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\n            0x005F : \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\n        },\n        SensingMethod : {\n            1 : \"Not defined\",\n            2 : \"One-chip color area sensor\",\n            3 : \"Two-chip color area sensor\",\n            4 : \"Three-chip color area sensor\",\n            5 : \"Color sequential area sensor\",\n            7 : \"Trilinear sensor\",\n            8 : \"Color sequential linear sensor\"\n        },\n        SceneCaptureType : {\n            0 : \"Standard\",\n            1 : \"Landscape\",\n            2 : \"Portrait\",\n            3 : \"Night scene\"\n        },\n        SceneType : {\n            1 : \"Directly photographed\"\n        },\n        CustomRendered : {\n            0 : \"Normal process\",\n            1 : \"Custom process\"\n        },\n        WhiteBalance : {\n            0 : \"Auto white balance\",\n            1 : \"Manual white balance\"\n        },\n        GainControl : {\n            0 : \"None\",\n            1 : \"Low gain up\",\n            2 : \"High gain up\",\n            3 : \"Low gain down\",\n            4 : \"High gain down\"\n        },\n        Contrast : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        Saturation : {\n            0 : \"Normal\",\n            1 : \"Low saturation\",\n            2 : \"High saturation\"\n        },\n        Sharpness : {\n            0 : \"Normal\",\n            1 : \"Soft\",\n            2 : \"Hard\"\n        },\n        SubjectDistanceRange : {\n            0 : \"Unknown\",\n            1 : \"Macro\",\n            2 : \"Close view\",\n            3 : \"Distant view\"\n        },\n        FileSource : {\n            3 : \"DSC\"\n        },\n\n        Components : {\n            0 : \"\",\n            1 : \"Y\",\n            2 : \"Cb\",\n            3 : \"Cr\",\n            4 : \"R\",\n            5 : \"G\",\n            6 : \"B\"\n        }\n    };\n\n    function addEvent(element, event, handler) {\n        if (element.addEventListener) {\n            element.addEventListener(event, handler, false);\n        } else if (element.attachEvent) {\n            element.attachEvent(\"on\" + event, handler);\n        }\n    }\n\n    function imageHasData(img) {\n        return !!(img.exifdata);\n    }\n\n\n    function base64ToArrayBuffer(base64, contentType) {\n        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\n        base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\n        var binary = atob(base64);\n        var len = binary.length;\n        var buffer = new ArrayBuffer(len);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < len; i++) {\n            view[i] = binary.charCodeAt(i);\n        }\n        return buffer;\n    }\n\n    function objectURLToBlob(url, callback) {\n        var http = new XMLHttpRequest();\n        http.open(\"GET\", url, true);\n        http.responseType = \"blob\";\n        http.onload = function(e) {\n            if (this.status == 200 || this.status === 0) {\n                callback(this.response);\n            }\n        };\n        http.send();\n    }\n\n    function getImageData(img, callback) {\n        function handleBinaryFile(binFile) {\n            var data = findEXIFinJPEG(binFile);\n            img.exifdata = data || {};\n            var iptcdata = findIPTCinJPEG(binFile);\n            img.iptcdata = iptcdata || {};\n            if (EXIF.isXmpEnabled) {\n               var xmpdata= findXMPinJPEG(binFile);\n               img.xmpdata = xmpdata || {};               \n            }\n            if (callback) {\n                callback.call(img);\n            }\n        }\n\n        if (img.src) {\n            if (/^data\\:/i.test(img.src)) { // Data URI\n                var arrayBuffer = base64ToArrayBuffer(img.src);\n                handleBinaryFile(arrayBuffer);\n\n            } else if (/^blob\\:/i.test(img.src)) { // Object URL\n                var fileReader = new FileReader();\n                fileReader.onload = function(e) {\n                    handleBinaryFile(e.target.result);\n                };\n                objectURLToBlob(img.src, function (blob) {\n                    fileReader.readAsArrayBuffer(blob);\n                });\n            } else {\n                var http = new XMLHttpRequest();\n                http.onload = function() {\n                    if (this.status == 200 || this.status === 0) {\n                        handleBinaryFile(http.response);\n                    } else {\n                        throw \"Could not load image\";\n                    }\n                    http = null;\n                };\n                http.open(\"GET\", img.src, true);\n                http.responseType = \"arraybuffer\";\n                http.send(null);\n            }\n        } else if (self.FileReader && (img instanceof self.Blob || img instanceof self.File)) {\n            var fileReader = new FileReader();\n            fileReader.onload = function(e) {\n                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\n                handleBinaryFile(e.target.result);\n            };\n\n            fileReader.readAsArrayBuffer(img);\n        }\n    }\n\n    function findEXIFinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            marker;\n\n        while (offset < length) {\n            if (dataView.getUint8(offset) != 0xFF) {\n                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\n                return false; // not a valid marker, something is wrong\n            }\n\n            marker = dataView.getUint8(offset + 1);\n            if (debug) console.log(marker);\n\n            // we could implement handling for other markers here,\n            // but we're only looking for 0xFFE1 for EXIF data\n\n            if (marker == 225) {\n                if (debug) console.log(\"Found 0xFFE1 marker\");\n\n                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\n\n                // offset += 2 + file.getShortAt(offset+2, true);\n\n            } else {\n                offset += 2 + dataView.getUint16(offset+2);\n            }\n\n        }\n\n    }\n\n    function findIPTCinJPEG(file) {\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n            if (debug) console.log(\"Not a valid JPEG\");\n            return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength;\n\n\n        var isFieldSegmentStart = function(dataView, offset){\n            return (\n                dataView.getUint8(offset) === 0x38 &&\n                dataView.getUint8(offset+1) === 0x42 &&\n                dataView.getUint8(offset+2) === 0x49 &&\n                dataView.getUint8(offset+3) === 0x4D &&\n                dataView.getUint8(offset+4) === 0x04 &&\n                dataView.getUint8(offset+5) === 0x04\n            );\n        };\n\n        while (offset < length) {\n\n            if ( isFieldSegmentStart(dataView, offset )){\n\n                // Get the length of the name header (which is padded to an even number of bytes)\n                var nameHeaderLength = dataView.getUint8(offset+7);\n                if(nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\n                // Check for pre photoshop 6 format\n                if(nameHeaderLength === 0) {\n                    // Always 4\n                    nameHeaderLength = 4;\n                }\n\n                var startOffset = offset + 8 + nameHeaderLength;\n                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\n\n                return readIPTCData(file, startOffset, sectionLength);\n\n                break;\n\n            }\n\n\n            // Not the marker, continue searching\n            offset++;\n\n        }\n\n    }\n    var IptcFieldMap = {\n        0x78 : 'caption',\n        0x6E : 'credit',\n        0x19 : 'keywords',\n        0x37 : 'dateCreated',\n        0x50 : 'byline',\n        0x55 : 'bylineTitle',\n        0x7A : 'captionWriter',\n        0x69 : 'headline',\n        0x74 : 'copyright',\n        0x0F : 'category'\n    };\n    function readIPTCData(file, startOffset, sectionLength){\n        var dataView = new DataView(file);\n        var data = {};\n        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\n        var segmentStartPos = startOffset;\n        while(segmentStartPos < startOffset+sectionLength) {\n            if(dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos+1) === 0x02){\n                segmentType = dataView.getUint8(segmentStartPos+2);\n                if(segmentType in IptcFieldMap) {\n                    dataSize = dataView.getInt16(segmentStartPos+3);\n                    segmentSize = dataSize + 5;\n                    fieldName = IptcFieldMap[segmentType];\n                    fieldValue = getStringFromDB(dataView, segmentStartPos+5, dataSize);\n                    // Check if we already stored a value with this name\n                    if(data.hasOwnProperty(fieldName)) {\n                        // Value already stored with this name, create multivalue field\n                        if(data[fieldName] instanceof Array) {\n                            data[fieldName].push(fieldValue);\n                        }\n                        else {\n                            data[fieldName] = [data[fieldName], fieldValue];\n                        }\n                    }\n                    else {\n                        data[fieldName] = fieldValue;\n                    }\n                }\n\n            }\n            segmentStartPos++;\n        }\n        return data;\n    }\n\n\n\n    function readTags(file, tiffStart, dirStart, strings, bigEnd) {\n        var entries = file.getUint16(dirStart, !bigEnd),\n            tags = {},\n            entryOffset, tag,\n            i;\n\n        for (i=0;i<entries;i++) {\n            entryOffset = dirStart + i*12 + 2;\n            tag = strings[file.getUint16(entryOffset, !bigEnd)];\n            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\n            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\n        }\n        return tags;\n    }\n\n\n    function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\n        var type = file.getUint16(entryOffset+2, !bigEnd),\n            numValues = file.getUint32(entryOffset+4, !bigEnd),\n            valueOffset = file.getUint32(entryOffset+8, !bigEnd) + tiffStart,\n            offset,\n            vals, val, n,\n            numerator, denominator;\n\n        switch (type) {\n            case 1: // byte, 8-bit unsigned int\n            case 7: // undefined, 8-bit byte, value depending on field\n                if (numValues == 1) {\n                    return file.getUint8(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint8(offset + n);\n                    }\n                    return vals;\n                }\n\n            case 2: // ascii, 8-bit byte\n                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\n                return getStringFromDB(file, offset, numValues-1);\n\n            case 3: // short, 16 bit int\n                if (numValues == 1) {\n                    return file.getUint16(entryOffset + 8, !bigEnd);\n                } else {\n                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint16(offset + 2*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 4: // long, 32 bit int\n                if (numValues == 1) {\n                    return file.getUint32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getUint32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 5:    // rational = two long values, first is numerator, second is denominator\n                if (numValues == 1) {\n                    numerator = file.getUint32(valueOffset, !bigEnd);\n                    denominator = file.getUint32(valueOffset+4, !bigEnd);\n                    val = new Number(numerator / denominator);\n                    val.numerator = numerator;\n                    val.denominator = denominator;\n                    return val;\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        numerator = file.getUint32(valueOffset + 8*n, !bigEnd);\n                        denominator = file.getUint32(valueOffset+4 + 8*n, !bigEnd);\n                        vals[n] = new Number(numerator / denominator);\n                        vals[n].numerator = numerator;\n                        vals[n].denominator = denominator;\n                    }\n                    return vals;\n                }\n\n            case 9: // slong, 32 bit signed int\n                if (numValues == 1) {\n                    return file.getInt32(entryOffset + 8, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 4*n, !bigEnd);\n                    }\n                    return vals;\n                }\n\n            case 10: // signed rational, two slongs, first is numerator, second is denominator\n                if (numValues == 1) {\n                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset+4, !bigEnd);\n                } else {\n                    vals = [];\n                    for (n=0;n<numValues;n++) {\n                        vals[n] = file.getInt32(valueOffset + 8*n, !bigEnd) / file.getInt32(valueOffset+4 + 8*n, !bigEnd);\n                    }\n                    return vals;\n                }\n        }\n    }\n\n    /**\n    * Given an IFD (Image File Directory) start offset\n    * returns an offset to next IFD or 0 if it's the last IFD.\n    */\n    function getNextIFDOffset(dataView, dirStart, bigEnd){\n        //the first 2bytes means the number of directory entries contains in this IFD\n        var entries = dataView.getUint16(dirStart, !bigEnd);\n\n        // After last directory entry, there is a 4bytes of data,\n        // it means an offset to next IFD.\n        // If its value is '0x00000000', it means this is the last IFD and there is no linked IFD.\n\n        return dataView.getUint32(dirStart + 2 + entries * 12, !bigEnd); // each entry is 12 bytes long\n    }\n\n    function readThumbnailImage(dataView, tiffStart, firstIFDOffset, bigEnd){\n        // get the IFD1 offset\n        var IFD1OffsetPointer = getNextIFDOffset(dataView, tiffStart+firstIFDOffset, bigEnd);\n\n        if (!IFD1OffsetPointer) {\n            // console.log('******** IFD1Offset is empty, image thumb not found ********');\n            return {};\n        }\n        else if (IFD1OffsetPointer > dataView.byteLength) { // this should not happen\n            // console.log('******** IFD1Offset is outside the bounds of the DataView ********');\n            return {};\n        }\n        // console.log('*******  thumbnail IFD offset (IFD1) is: %s', IFD1OffsetPointer);\n\n        var thumbTags = readTags(dataView, tiffStart, tiffStart + IFD1OffsetPointer, IFD1Tags, bigEnd)\n\n        // EXIF 2.3 specification for JPEG format thumbnail\n\n        // If the value of Compression(0x0103) Tag in IFD1 is '6', thumbnail image format is JPEG.\n        // Most of Exif image uses JPEG format for thumbnail. In that case, you can get offset of thumbnail\n        // by JpegIFOffset(0x0201) Tag in IFD1, size of thumbnail by JpegIFByteCount(0x0202) Tag.\n        // Data format is ordinary JPEG format, starts from 0xFFD8 and ends by 0xFFD9. It seems that\n        // JPEG format and 160x120pixels of size are recommended thumbnail format for Exif2.1 or later.\n\n        if (thumbTags['Compression']) {\n            // console.log('Thumbnail image found!');\n\n            switch (thumbTags['Compression']) {\n                case 6:\n                    // console.log('Thumbnail image format is JPEG');\n                    if (thumbTags.JpegIFOffset && thumbTags.JpegIFByteCount) {\n                    // extract the thumbnail\n                        var tOffset = tiffStart + thumbTags.JpegIFOffset;\n                        var tLength = thumbTags.JpegIFByteCount;\n                        thumbTags['blob'] = new Blob([new Uint8Array(dataView.buffer, tOffset, tLength)], {\n                            type: 'image/jpeg'\n                        });\n                    }\n                break;\n\n            case 1:\n                console.log(\"Thumbnail image format is TIFF, which is not implemented.\");\n                break;\n            default:\n                console.log(\"Unknown thumbnail image format '%s'\", thumbTags['Compression']);\n            }\n        }\n        else if (thumbTags['PhotometricInterpretation'] == 2) {\n            console.log(\"Thumbnail image format is RGB, which is not implemented.\");\n        }\n        return thumbTags;\n    }\n\n    function getStringFromDB(buffer, start, length) {\n        var outstr = \"\";\n        for (n = start; n < start+length; n++) {\n            outstr += String.fromCharCode(buffer.getUint8(n));\n        }\n        return outstr;\n    }\n\n    function readEXIFData(file, start) {\n        if (getStringFromDB(file, start, 4) != \"Exif\") {\n            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\n            return false;\n        }\n\n        var bigEnd,\n            tags, tag,\n            exifData, gpsData,\n            tiffOffset = start + 6;\n\n        // test for TIFF validity and endianness\n        if (file.getUint16(tiffOffset) == 0x4949) {\n            bigEnd = false;\n        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\n            bigEnd = true;\n        } else {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\n            return false;\n        }\n\n        if (file.getUint16(tiffOffset+2, !bigEnd) != 0x002A) {\n            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\n            return false;\n        }\n\n        var firstIFDOffset = file.getUint32(tiffOffset+4, !bigEnd);\n\n        if (firstIFDOffset < 0x00000008) {\n            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset+4, !bigEnd));\n            return false;\n        }\n\n        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\n\n        if (tags.ExifIFDPointer) {\n            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\n            for (tag in exifData) {\n                switch (tag) {\n                    case \"LightSource\" :\n                    case \"Flash\" :\n                    case \"MeteringMode\" :\n                    case \"ExposureProgram\" :\n                    case \"SensingMethod\" :\n                    case \"SceneCaptureType\" :\n                    case \"SceneType\" :\n                    case \"CustomRendered\" :\n                    case \"WhiteBalance\" :\n                    case \"GainControl\" :\n                    case \"Contrast\" :\n                    case \"Saturation\" :\n                    case \"Sharpness\" :\n                    case \"SubjectDistanceRange\" :\n                    case \"FileSource\" :\n                        exifData[tag] = StringValues[tag][exifData[tag]];\n                        break;\n\n                    case \"ExifVersion\" :\n                    case \"FlashpixVersion\" :\n                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\n                        break;\n\n                    case \"ComponentsConfiguration\" :\n                        exifData[tag] =\n                            StringValues.Components[exifData[tag][0]] +\n                            StringValues.Components[exifData[tag][1]] +\n                            StringValues.Components[exifData[tag][2]] +\n                            StringValues.Components[exifData[tag][3]];\n                        break;\n                }\n                tags[tag] = exifData[tag];\n            }\n        }\n\n        if (tags.GPSInfoIFDPointer) {\n            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\n            for (tag in gpsData) {\n                switch (tag) {\n                    case \"GPSVersionID\" :\n                        gpsData[tag] = gpsData[tag][0] +\n                            \".\" + gpsData[tag][1] +\n                            \".\" + gpsData[tag][2] +\n                            \".\" + gpsData[tag][3];\n                        break;\n                }\n                tags[tag] = gpsData[tag];\n            }\n        }\n\n        // extract thumbnail\n        tags['thumbnail'] = readThumbnailImage(file, tiffOffset, firstIFDOffset, bigEnd);\n\n        return tags;\n    }\n\n   function findXMPinJPEG(file) {\n\n        if (!('DOMParser' in self)) {\n            // console.warn('XML parsing not supported without DOMParser');\n            return;\n        }\n        var dataView = new DataView(file);\n\n        if (debug) console.log(\"Got file of length \" + file.byteLength);\n        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\n           if (debug) console.log(\"Not a valid JPEG\");\n           return false; // not a valid jpeg\n        }\n\n        var offset = 2,\n            length = file.byteLength,\n            dom = new DOMParser();\n\n        while (offset < (length-4)) {\n            if (getStringFromDB(dataView, offset, 4) == \"http\") {\n                var startOffset = offset - 1;\n                var sectionLength = dataView.getUint16(offset - 2) - 1;\n                var xmpString = getStringFromDB(dataView, startOffset, sectionLength)\n                var xmpEndIndex = xmpString.indexOf('xmpmeta>') + 8;\n                xmpString = xmpString.substring( xmpString.indexOf( '<x:xmpmeta' ), xmpEndIndex );\n\n                var indexOfXmp = xmpString.indexOf('x:xmpmeta') + 10\n                //Many custom written programs embed xmp/xml without any namespace. Following are some of them.\n                //Without these namespaces, XML is thought to be invalid by parsers\n                xmpString = xmpString.slice(0, indexOfXmp)\n                            + 'xmlns:Iptc4xmpCore=\"http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/\" '\n                            + 'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" '\n                            + 'xmlns:tiff=\"http://ns.adobe.com/tiff/1.0/\" '\n                            + 'xmlns:plus=\"http://schemas.android.com/apk/lib/com.google.android.gms.plus\" '\n                            + 'xmlns:ext=\"http://www.gettyimages.com/xsltExtension/1.0\" '\n                            + 'xmlns:exif=\"http://ns.adobe.com/exif/1.0/\" '\n                            + 'xmlns:stEvt=\"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#\" '\n                            + 'xmlns:stRef=\"http://ns.adobe.com/xap/1.0/sType/ResourceRef#\" '\n                            + 'xmlns:crs=\"http://ns.adobe.com/camera-raw-settings/1.0/\" '\n                            + 'xmlns:xapGImg=\"http://ns.adobe.com/xap/1.0/g/img/\" '\n                            + 'xmlns:Iptc4xmpExt=\"http://iptc.org/std/Iptc4xmpExt/2008-02-29/\" '\n                            + xmpString.slice(indexOfXmp)\n\n                var domDocument = dom.parseFromString( xmpString, 'text/xml' );\n                return xml2Object(domDocument);\n            } else{\n             offset++;\n            }\n        }\n    }\n\n    function xml2json(xml) {\n        var json = {};\n      \n        if (xml.nodeType == 1) { // element node\n          if (xml.attributes.length > 0) {\n            json['@attributes'] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n              var attribute = xml.attributes.item(j);\n              json['@attributes'][attribute.nodeName] = attribute.nodeValue;\n            }\n          }\n        } else if (xml.nodeType == 3) { // text node\n          return xml.nodeValue;\n        }\n      \n        // deal with children\n        if (xml.hasChildNodes()) {\n          for(var i = 0; i < xml.childNodes.length; i++) {\n            var child = xml.childNodes.item(i);\n            var nodeName = child.nodeName;\n            if (json[nodeName] == null) {\n              json[nodeName] = xml2json(child);\n            } else {\n              if (json[nodeName].push == null) {\n                var old = json[nodeName];\n                json[nodeName] = [];\n                json[nodeName].push(old);\n              }\n              json[nodeName].push(xml2json(child));\n            }\n          }\n        }\n        \n        return json;\n    }\n\n    function xml2Object(xml) {\n        try {\n            var obj = {};\n            if (xml.children.length > 0) {\n              for (var i = 0; i < xml.children.length; i++) {\n                var item = xml.children.item(i);\n                var attributes = item.attributes;\n                for(var idx in attributes) {\n                    var itemAtt = attributes[idx];\n                    var dataKey = itemAtt.nodeName;\n                    var dataValue = itemAtt.nodeValue;\n\n                    if(dataKey !== undefined) {\n                        obj[dataKey] = dataValue;\n                    }\n                }\n                var nodeName = item.nodeName;\n\n                if (typeof (obj[nodeName]) == \"undefined\") {\n                  obj[nodeName] = xml2json(item);\n                } else {\n                  if (typeof (obj[nodeName].push) == \"undefined\") {\n                    var old = obj[nodeName];\n\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                  }\n                  obj[nodeName].push(xml2json(item));\n                }\n              }\n            } else {\n              obj = xml.textContent;\n            }\n            return obj;\n          } catch (e) {\n              console.log(e.message);\n          }\n    }\n\n    EXIF.enableXmp = function() {\n        EXIF.isXmpEnabled = true;\n    }\n\n    EXIF.disableXmp = function() {\n        EXIF.isXmpEnabled = false;\n    }\n\n    EXIF.getData = function(img, callback) {\n        if (((self.Image && img instanceof self.Image)\n            || (self.HTMLImageElement && img instanceof self.HTMLImageElement))\n            && !img.complete)\n            return false;\n\n        if (!imageHasData(img)) {\n            getImageData(img, callback);\n        } else {\n            if (callback) {\n                callback.call(img);\n            }\n        }\n        return true;\n    }\n\n    EXIF.getTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.exifdata[tag];\n    }\n    \n    EXIF.getIptcTag = function(img, tag) {\n        if (!imageHasData(img)) return;\n        return img.iptcdata[tag];\n    }\n\n    EXIF.getAllTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.exifdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n    \n    EXIF.getAllIptcTags = function(img) {\n        if (!imageHasData(img)) return {};\n        var a,\n            data = img.iptcdata,\n            tags = {};\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                tags[a] = data[a];\n            }\n        }\n        return tags;\n    }\n\n    EXIF.pretty = function(img) {\n        if (!imageHasData(img)) return \"\";\n        var a,\n            data = img.exifdata,\n            strPretty = \"\";\n        for (a in data) {\n            if (data.hasOwnProperty(a)) {\n                if (typeof data[a] == \"object\") {\n                    if (data[a] instanceof Number) {\n                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\n                    } else {\n                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\n                    }\n                } else {\n                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\n                }\n            }\n        }\n        return strPretty;\n    }\n\n    EXIF.readFromBinaryFile = function(file) {\n        return findEXIFinJPEG(file);\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        define('exif-js', [], function() {\n            return EXIF;\n        });\n    }\n}.call(this));\n\n","import { debounce } from 'lodash';\n\nimport api from '../api';\n\nimport { showAlertForError } from './alerts';\n\nexport const SETTING_CHANGE = 'SETTING_CHANGE';\nexport const SETTING_SAVE   = 'SETTING_SAVE';\n\nexport function changeSetting(path, value) {\n  return dispatch => {\n    dispatch({\n      type: SETTING_CHANGE,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nconst debouncedSave = debounce((dispatch, getState) => {\n  if (getState().getIn(['settings', 'saved']) || !getState().getIn(['meta', 'me'])) {\n    return;\n  }\n\n  const data = getState().get('settings').filter((_, path) => path !== 'saved').toJS();\n\n  api().put('/api/web/settings', { data })\n    .then(() => dispatch({ type: SETTING_SAVE }))\n    .catch(error => dispatch(showAlertForError(error)));\n}, 5000, { trailing: true });\n\nexport function saveSettings() {\n  return (dispatch, getState) => debouncedSave(dispatch, getState);\n}\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = global.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgRepeat(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M280-80 120-240l160-160 56 58-62 62h406v-160h80v240H274l62 62-56 58Zm-80-440v-240h486l-62-62 56-58 160 160-160 160-56-58 62-62H280v160h-80Z\"\n  })));\n}\nexport default SvgRepeat;","import classNames from 'classnames';\n\nimport type { Account } from 'flavours/glitch/models/account';\n\nimport { useHovering } from '../hooks/useHovering';\nimport { autoPlayGif } from '../initial_state';\n\ninterface Props {\n  account: Account | undefined; // FIXME: remove `undefined` once we know for sure its always there\n  size: number;\n  style?: React.CSSProperties;\n  inline?: boolean;\n  animate?: boolean;\n  counter?: number | string;\n  counterBorderColor?: string;\n}\n\nexport const Avatar: React.FC<Props> = ({\n  account,\n  animate = autoPlayGif,\n  size = 20,\n  inline = false,\n  style: styleFromParent,\n  counter,\n  counterBorderColor,\n}) => {\n  const { hovering, handleMouseEnter, handleMouseLeave } = useHovering(animate);\n\n  const style = {\n    ...styleFromParent,\n    width: `${size}px`,\n    height: `${size}px`,\n  };\n\n  const src =\n    hovering || animate\n      ? account?.get('avatar')\n      : account?.get('avatar_static');\n\n  return (\n    <div\n      className={classNames('account__avatar', {\n        'account__avatar-inline': inline,\n      })}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={style}\n      data-avatar-of={account && `@${account.get('acct')}`}\n    >\n      {src && <img src={src} alt='' />}\n      {counter && (\n        <div\n          className='account__avatar__counter'\n          style={{ borderColor: counterBorderColor }}\n        >\n          {counter}\n        </div>\n      )}\n    </div>\n  );\n};\n","export const toServerSideType = (columnType: string) => {\n  switch (columnType) {\n    case 'home':\n    case 'notifications':\n    case 'public':\n    case 'thread':\n    case 'account':\n      return columnType;\n    default:\n      if (columnType.includes('list:')) {\n        return 'home';\n      } else {\n        return 'public'; // community, account, hashtag\n      }\n  }\n};\n","import { useCallback, useState } from 'react';\n\nimport { TransitionMotion, spring } from 'react-motion';\n\nimport { reduceMotion } from '../initial_state';\n\nimport { ShortNumber } from './short_number';\n\ninterface Props {\n  value: number;\n}\nexport const AnimatedNumber: React.FC<Props> = ({ value }) => {\n  const [previousValue, setPreviousValue] = useState(value);\n  const [direction, setDirection] = useState<1 | -1>(1);\n\n  if (previousValue !== value) {\n    setPreviousValue(value);\n    setDirection(value > previousValue ? 1 : -1);\n  }\n\n  const willEnter = useCallback(() => ({ y: -1 * direction }), [direction]);\n  const willLeave = useCallback(\n    () => ({ y: spring(1 * direction, { damping: 35, stiffness: 400 }) }),\n    [direction],\n  );\n\n  if (reduceMotion) {\n    return <ShortNumber value={value} />;\n  }\n\n  const styles = [\n    {\n      key: `${value}`,\n      data: value,\n      style: { y: spring(0, { damping: 35, stiffness: 400 }) },\n    },\n  ];\n\n  return (\n    <TransitionMotion\n      styles={styles}\n      willEnter={willEnter}\n      willLeave={willLeave}\n    >\n      {(items) => (\n        <span className='animated-number'>\n          {items.map(({ key, data, style }) => (\n            <span\n              key={key}\n              style={{\n                position:\n                  direction * (style.y ?? 0) > 0 ? 'absolute' : 'static',\n                transform: `translateY(${(style.y ?? 0) * 100}%)`,\n              }}\n            >\n              <ShortNumber value={data as number} />\n            </span>\n          ))}\n        </span>\n      )}\n    </TransitionMotion>\n  );\n};\n","import api from '../api';\nimport { me } from '../initial_state';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const PINNED_STATUSES_FETCH_REQUEST = 'PINNED_STATUSES_FETCH_REQUEST';\nexport const PINNED_STATUSES_FETCH_SUCCESS = 'PINNED_STATUSES_FETCH_SUCCESS';\nexport const PINNED_STATUSES_FETCH_FAIL = 'PINNED_STATUSES_FETCH_FAIL';\n\nexport function fetchPinnedStatuses() {\n  return (dispatch) => {\n    dispatch(fetchPinnedStatusesRequest());\n\n    api().get(`/api/v1/accounts/${me}/statuses`, { params: { pinned: true } }).then(response => {\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchPinnedStatusesSuccess(response.data, null));\n    }).catch(error => {\n      dispatch(fetchPinnedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchPinnedStatusesRequest() {\n  return {\n    type: PINNED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedStatusesSuccess(statuses, next) {\n  return {\n    type: PINNED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchPinnedStatusesFail(error) {\n  return {\n    type: PINNED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n","import api from '../api';\nimport { me } from '../initial_state';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const PINNED_STATUSES_FETCH_REQUEST = 'PINNED_STATUSES_FETCH_REQUEST';\nexport const PINNED_STATUSES_FETCH_SUCCESS = 'PINNED_STATUSES_FETCH_SUCCESS';\nexport const PINNED_STATUSES_FETCH_FAIL = 'PINNED_STATUSES_FETCH_FAIL';\n\nexport function fetchPinnedStatuses() {\n  return (dispatch) => {\n    dispatch(fetchPinnedStatusesRequest());\n\n    api().get(`/api/v1/accounts/${me}/statuses`, { params: { pinned: true } }).then(response => {\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchPinnedStatusesSuccess(response.data, null));\n    }).catch(error => {\n      dispatch(fetchPinnedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchPinnedStatusesRequest() {\n  return {\n    type: PINNED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedStatusesSuccess(statuses, next) {\n  return {\n    type: PINNED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchPinnedStatusesFail(error) {\n  return {\n    type: PINNED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\nfunction padLeft(str, num) {\n  while (str.length < num) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nexports.unicodeToUnifiedName = (str) => {\n  let output = '';\n\n  for (let i = 0; i < str.length; i += 2) {\n    if (i > 0) {\n      output += '-';\n    }\n\n    output += padLeft(str.codePointAt(i).toString(16).toUpperCase(), 4);\n  }\n\n  return output;\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport 'wicg-inert';\n\nimport { multiply } from 'color-blend';\nimport { createBrowserHistory } from 'history';\n\nimport { WithOptionalRouterPropTypes, withOptionalRouter } from 'mastodon/utils/react_router';\n\nclass ModalRoot extends PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node,\n    onClose: PropTypes.func.isRequired,\n    backgroundColor: PropTypes.shape({\n      r: PropTypes.number,\n      g: PropTypes.number,\n      b: PropTypes.number,\n    }),\n    ignoreFocus: PropTypes.bool,\n    ...WithOptionalRouterPropTypes,\n  };\n\n  activeElement = this.props.children ? document.activeElement : null;\n\n  handleKeyUp = (e) => {\n    if ((e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27)\n         && !!this.props.children) {\n      this.props.onClose();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Tab') {\n      const focusable = Array.from(this.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])')).filter((x) => window.getComputedStyle(x).display !== 'none');\n      const index = focusable.indexOf(e.target);\n\n      let element;\n\n      if (e.shiftKey) {\n        element = focusable[index - 1] || focusable[focusable.length - 1];\n      } else {\n        element = focusable[index + 1] || focusable[0];\n      }\n\n      if (element) {\n        element.focus();\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n    window.addEventListener('keydown', this.handleKeyDown, false);\n    this.history = this.props.history || createBrowserHistory();\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!!nextProps.children && !this.props.children) {\n      this.activeElement = document.activeElement;\n\n      this.getSiblings().forEach(sibling => sibling.setAttribute('inert', true));\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (!this.props.children && !!prevProps.children) {\n      this.getSiblings().forEach(sibling => sibling.removeAttribute('inert'));\n\n      // Because of the wicg-inert polyfill, the activeElement may not be\n      // immediately selectable, we have to wait for observers to run, as\n      // described in https://github.com/WICG/inert#performance-and-gotchas\n      Promise.resolve().then(() => {\n        if (!this.props.ignoreFocus) {\n          this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = null;\n      }).catch(console.error);\n\n      this._handleModalClose();\n    }\n    if (this.props.children && !prevProps.children) {\n      this._handleModalOpen();\n    }\n    if (this.props.children) {\n      this._ensureHistoryBuffer();\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  _handleModalOpen () {\n    this._modalHistoryKey = Date.now();\n    this.unlistenHistory = this.history.listen((_, action) => {\n      if (action === 'POP') {\n        this.props.onClose();\n      }\n    });\n  }\n\n  _handleModalClose () {\n    if (this.unlistenHistory) {\n      this.unlistenHistory();\n    }\n    const { state } = this.history.location;\n    if (state && state.mastodonModalKey === this._modalHistoryKey) {\n      this.history.goBack();\n    }\n  }\n\n  _ensureHistoryBuffer () {\n    const { pathname, state } = this.history.location;\n    if (!state || state.mastodonModalKey !== this._modalHistoryKey) {\n      this.history.push(pathname, { ...state, mastodonModalKey: this._modalHistoryKey });\n    }\n  }\n\n  getSiblings = () => {\n    return Array(...this.node.parentElement.childNodes).filter(node => node !== this.node);\n  };\n\n  setRef = ref => {\n    this.node = ref;\n  };\n\n  render () {\n    const { children, onClose } = this.props;\n    const visible = !!children;\n\n    if (!visible) {\n      return (\n        <div className='modal-root' ref={this.setRef} style={{ opacity: 0 }} />\n      );\n    }\n\n    let backgroundColor = null;\n\n    if (this.props.backgroundColor) {\n      backgroundColor = multiply({ ...this.props.backgroundColor, a: 1 }, { r: 0, g: 0, b: 0, a: 0.7 });\n    }\n\n    return (\n      <div className='modal-root' ref={this.setRef}>\n        <div style={{ pointerEvents: visible ? 'auto' : 'none' }}>\n          <div role='presentation' className='modal-root__overlay' onClick={onClose} style={{ backgroundColor: backgroundColor ? `rgba(${backgroundColor.r}, ${backgroundColor.g}, ${backgroundColor.b}, 0.7)` : null }} />\n          <div role='dialog' className='modal-root__container'>{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default withOptionalRouter(ModalRoot);\n","import { isMobile } from '../is_mobile';\n\nlet cachedScrollbarWidth: number | null = null;\n\nconst getActualScrollbarWidth = () => {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.remove();\n\n  return scrollbarWidth;\n};\n\nexport const getScrollbarWidth = () => {\n  if (cachedScrollbarWidth !== null) {\n    return cachedScrollbarWidth;\n  }\n\n  const scrollbarWidth = isMobile(window.innerWidth)\n    ? 0\n    : getActualScrollbarWidth();\n  cachedScrollbarWidth = scrollbarWidth;\n\n  return scrollbarWidth;\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport escapeTextContentForBrowser from 'escape-html';\nimport spring from 'react-motion/lib/spring';\n\nimport CheckIcon from '@/material-icons/400-24px/check.svg?react';\nimport { Icon }  from 'mastodon/components/icon';\nimport emojify from 'mastodon/features/emoji/emoji';\nimport Motion from 'mastodon/features/ui/util/optional_motion';\nimport { identityContextPropShape, withIdentity } from 'mastodon/identity_context';\n\nimport { RelativeTimestamp } from './relative_timestamp';\n\nconst messages = defineMessages({\n  closed: {\n    id: 'poll.closed',\n    defaultMessage: 'Closed',\n  },\n  voted: {\n    id: 'poll.voted',\n    defaultMessage: 'You voted for this answer',\n  },\n  votes: {\n    id: 'poll.votes',\n    defaultMessage: '{votes, plural, one {# vote} other {# votes}}',\n  },\n});\n\nconst makeEmojiMap = record => record.get('emojis').reduce((obj, emoji) => {\n  obj[`:${emoji.get('shortcode')}:`] = emoji.toJS();\n  return obj;\n}, {});\n\nclass Poll extends ImmutablePureComponent {\n  static propTypes = {\n    identity: identityContextPropShape,\n    poll: ImmutablePropTypes.map,\n    lang: PropTypes.string,\n    intl: PropTypes.object.isRequired,\n    disabled: PropTypes.bool,\n    refresh: PropTypes.func,\n    onVote: PropTypes.func,\n  };\n\n  state = {\n    selected: {},\n    expired: null,\n  };\n\n  static getDerivedStateFromProps (props, state) {\n    const { poll } = props;\n    const expires_at = poll.get('expires_at');\n    const expired = poll.get('expired') || expires_at !== null && (new Date(expires_at)).getTime() < Date.now();\n    return (expired === state.expired) ? null : { expired };\n  }\n\n  componentDidMount () {\n    this._setupTimer();\n  }\n\n  componentDidUpdate () {\n    this._setupTimer();\n  }\n\n  componentWillUnmount () {\n    clearTimeout(this._timer);\n  }\n\n  _setupTimer () {\n    const { poll } = this.props;\n    clearTimeout(this._timer);\n    if (!this.state.expired) {\n      const delay = (new Date(poll.get('expires_at'))).getTime() - Date.now();\n      this._timer = setTimeout(() => {\n        this.setState({ expired: true });\n      }, delay);\n    }\n  }\n\n  _toggleOption = value => {\n    if (this.props.poll.get('multiple')) {\n      const tmp = { ...this.state.selected };\n      if (tmp[value]) {\n        delete tmp[value];\n      } else {\n        tmp[value] = true;\n      }\n      this.setState({ selected: tmp });\n    } else {\n      const tmp = {};\n      tmp[value] = true;\n      this.setState({ selected: tmp });\n    }\n  };\n\n  handleOptionChange = ({ target: { value } }) => {\n    this._toggleOption(value);\n  };\n\n  handleOptionKeyPress = (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this._toggleOption(e.target.getAttribute('data-index'));\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  handleVote = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.props.onVote(Object.keys(this.state.selected));\n  };\n\n  handleRefresh = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.props.refresh();\n  };\n\n  handleReveal = () => {\n    this.setState({ revealed: true });\n  };\n\n  renderOption (option, optionIndex, showResults) {\n    const { poll, lang, disabled, intl } = this.props;\n    const pollVotesCount  = poll.get('voters_count') || poll.get('votes_count');\n    const percent         = pollVotesCount === 0 ? 0 : (option.get('votes_count') / pollVotesCount) * 100;\n    const leading         = poll.get('options').filterNot(other => other.get('title') === option.get('title')).every(other => option.get('votes_count') >= other.get('votes_count'));\n    const active          = !!this.state.selected[`${optionIndex}`];\n    const voted           = option.get('voted') || (poll.get('own_votes') && poll.get('own_votes').includes(optionIndex));\n\n    const title = option.getIn(['translation', 'title']) || option.get('title');\n    let titleHtml = option.getIn(['translation', 'titleHtml']) || option.get('titleHtml');\n\n    if (!titleHtml) {\n      const emojiMap = makeEmojiMap(poll);\n      titleHtml = emojify(escapeTextContentForBrowser(title), emojiMap);\n    }\n\n    return (\n      <li key={option.get('title')}>\n        <label className={classNames('poll__option', { selectable: !showResults })}>\n          <input\n            name='vote-options'\n            type={poll.get('multiple') ? 'checkbox' : 'radio'}\n            value={optionIndex}\n            checked={active}\n            onChange={this.handleOptionChange}\n            disabled={disabled}\n          />\n\n          {!showResults && (\n            <span\n              className={classNames('poll__input', { checkbox: poll.get('multiple'), active })}\n              tabIndex={0}\n              role={poll.get('multiple') ? 'checkbox' : 'radio'}\n              onKeyPress={this.handleOptionKeyPress}\n              aria-checked={active}\n              aria-label={title}\n              lang={lang}\n              data-index={optionIndex}\n            />\n          )}\n          {showResults && (\n            <span\n              className='poll__number'\n              title={intl.formatMessage(messages.votes, {\n                votes: option.get('votes_count'),\n              })}\n            >\n              {Math.round(percent)}%\n            </span>\n          )}\n\n          <span\n            className='poll__option__text translate'\n            lang={lang}\n            dangerouslySetInnerHTML={{ __html: titleHtml }}\n          />\n\n          {!!voted && <span className='poll__voted'>\n            <Icon id='check' icon={CheckIcon} className='poll__voted__mark' title={intl.formatMessage(messages.voted)} />\n          </span>}\n        </label>\n\n        {showResults && (\n          <Motion defaultStyle={{ width: 0 }} style={{ width: spring(percent, { stiffness: 180, damping: 12 }) }}>\n            {({ width }) =>\n              <span className={classNames('poll__chart', { leading })} style={{ width: `${width}%` }} />\n            }\n          </Motion>\n        )}\n      </li>\n    );\n  }\n\n  render () {\n    const { poll, intl } = this.props;\n    const { revealed, expired } = this.state;\n\n    if (!poll) {\n      return null;\n    }\n\n    const timeRemaining = expired ? intl.formatMessage(messages.closed) : <RelativeTimestamp timestamp={poll.get('expires_at')} futureDate />;\n    const showResults   = poll.get('voted') || revealed || expired;\n    const disabled      = this.props.disabled || Object.entries(this.state.selected).every(item => !item);\n\n    let votesCount = null;\n\n    if (poll.get('voters_count') !== null && poll.get('voters_count') !== undefined) {\n      votesCount = <FormattedMessage id='poll.total_people' defaultMessage='{count, plural, one {# person} other {# people}}' values={{ count: poll.get('voters_count') }} />;\n    } else {\n      votesCount = <FormattedMessage id='poll.total_votes' defaultMessage='{count, plural, one {# vote} other {# votes}}' values={{ count: poll.get('votes_count') }} />;\n    }\n\n    return (\n      <div className='poll'>\n        <ul>\n          {poll.get('options').map((option, i) => this.renderOption(option, i, showResults))}\n        </ul>\n\n        <div className='poll__footer'>\n          {!showResults && <button className='button button-secondary' disabled={disabled || !this.props.identity.signedIn} onClick={this.handleVote}><FormattedMessage id='poll.vote' defaultMessage='Vote' /></button>}\n          {!showResults && <><button className='poll__link' onClick={this.handleReveal}><FormattedMessage id='poll.reveal' defaultMessage='See results' /></button> · </>}\n          {showResults && !this.props.disabled && <><button className='poll__link' onClick={this.handleRefresh}><FormattedMessage id='poll.refresh' defaultMessage='Refresh' /></button> · </>}\n          {votesCount}\n          {poll.get('expires_at') && <> · {timeRemaining}</>}\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(withIdentity(Poll));\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport ReactSwipeableViews from 'react-swipeable-views';\n\nimport ChevronLeftIcon from '@/material-icons/400-24px/chevron_left.svg?react';\nimport ChevronRightIcon from '@/material-icons/400-24px/chevron_right.svg?react';\nimport CloseIcon from '@/material-icons/400-24px/close.svg?react';\nimport { getAverageFromBlurhash } from 'mastodon/blurhash';\nimport { GIFV } from 'mastodon/components/gifv';\nimport { Icon }  from 'mastodon/components/icon';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport Footer from 'mastodon/features/picture_in_picture/components/footer';\nimport Video from 'mastodon/features/video';\nimport { disableSwiping } from 'mastodon/initial_state';\n\nimport ImageLoader from './image_loader';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n  previous: { id: 'lightbox.previous', defaultMessage: 'Previous' },\n  next: { id: 'lightbox.next', defaultMessage: 'Next' },\n});\n\nclass MediaModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    statusId: PropTypes.string,\n    lang: PropTypes.string,\n    index: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n  };\n\n  state = {\n    index: null,\n    navigationHidden: false,\n    zoomButtonHidden: false,\n  };\n\n  handleSwipe = (index) => {\n    this.setState({ index: index % this.props.media.size });\n  };\n\n  handleTransitionEnd = () => {\n    this.setState({\n      zoomButtonHidden: false,\n    });\n  };\n\n  handleNextClick = () => {\n    this.setState({\n      index: (this.getIndex() + 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handlePrevClick = () => {\n    this.setState({\n      index: (this.props.media.size + this.getIndex() - 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleChangeIndex = (e) => {\n    const index = Number(e.currentTarget.getAttribute('data-index'));\n\n    this.setState({\n      index: index % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    switch(e.key) {\n    case 'ArrowLeft':\n      this.handlePrevClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    case 'ArrowRight':\n      this.handleNextClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keydown', this.handleKeyDown, false);\n\n    this._sendBackgroundColor();\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.index !== this.state.index) {\n      this._sendBackgroundColor();\n    }\n  }\n\n  _sendBackgroundColor () {\n    const { media, onChangeBackgroundColor } = this.props;\n    const index = this.getIndex();\n    const blurhash = media.getIn([index, 'blurhash']);\n\n    if (blurhash) {\n      const backgroundColor = getAverageFromBlurhash(blurhash);\n      onChangeBackgroundColor(backgroundColor);\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    this.props.onChangeBackgroundColor(null);\n  }\n\n  getIndex () {\n    return this.state.index !== null ? this.state.index : this.props.index;\n  }\n\n  toggleNavigation = () => {\n    this.setState(prevState => ({\n      navigationHidden: !prevState.navigationHidden,\n    }));\n  };\n\n  render () {\n    const { media, statusId, lang, intl, onClose } = this.props;\n    const { navigationHidden } = this.state;\n\n    const index = this.getIndex();\n\n    const leftNav  = media.size > 1 && <button tabIndex={0} className='media-modal__nav media-modal__nav--left' onClick={this.handlePrevClick} aria-label={intl.formatMessage(messages.previous)}><Icon id='chevron-left' icon={ChevronLeftIcon} /></button>;\n    const rightNav = media.size > 1 && <button tabIndex={0} className='media-modal__nav  media-modal__nav--right' onClick={this.handleNextClick} aria-label={intl.formatMessage(messages.next)}><Icon id='chevron-right' icon={ChevronRightIcon} /></button>;\n\n    const content = media.map((image) => {\n      const width  = image.getIn(['meta', 'original', 'width']) || null;\n      const height = image.getIn(['meta', 'original', 'height']) || null;\n      const description = image.getIn(['translation', 'description']) || image.get('description');\n\n      if (image.get('type') === 'image') {\n        return (\n          <ImageLoader\n            previewSrc={image.get('preview_url')}\n            src={image.get('url')}\n            width={width}\n            height={height}\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n            onClick={this.toggleNavigation}\n            zoomButtonHidden={this.state.zoomButtonHidden}\n          />\n        );\n      } else if (image.get('type') === 'video') {\n        const { currentTime, autoPlay, volume } = this.props;\n\n        return (\n          <Video\n            preview={image.get('preview_url')}\n            blurhash={image.get('blurhash')}\n            src={image.get('url')}\n            width={image.get('width')}\n            height={image.get('height')}\n            frameRate={image.getIn(['meta', 'original', 'frame_rate'])}\n            aspectRatio={`${image.getIn(['meta', 'original', 'width'])} / ${image.getIn(['meta', 'original', 'height'])}`}\n            currentTime={currentTime || 0}\n            autoPlay={autoPlay || false}\n            volume={volume || 1}\n            onCloseVideo={onClose}\n            detailed\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n          />\n        );\n      } else if (image.get('type') === 'gifv') {\n        return (\n          <GIFV\n            src={image.get('url')}\n            width={width}\n            height={height}\n            key={image.get('url')}\n            alt={description}\n            lang={lang}\n            onClick={this.toggleNavigation}\n          />\n        );\n      }\n\n      return null;\n    }).toArray();\n\n    // you can't use 100vh, because the viewport height is taller\n    // than the visible part of the document in some mobile\n    // browsers when it's address bar is visible.\n    // https://developers.google.com/web/updates/2016/12/url-bar-resizing\n    const swipeableViewsStyle = {\n      width: '100%',\n      height: '100%',\n    };\n\n    const containerStyle = {\n      alignItems: 'center', // center vertically\n    };\n\n    const navigationClassName = classNames('media-modal__navigation', {\n      'media-modal__navigation--hidden': navigationHidden,\n    });\n\n    let pagination;\n\n    if (media.size > 1) {\n      pagination = media.map((item, i) => (\n        <button key={i} className={classNames('media-modal__page-dot', { active: i === index })} data-index={i} onClick={this.handleChangeIndex}>\n          {i + 1}\n        </button>\n      ));\n    }\n\n    return (\n      <div className='modal-root__modal media-modal'>\n        <div className='media-modal__closer' role='presentation' onClick={onClose} >\n          <ReactSwipeableViews\n            style={swipeableViewsStyle}\n            containerStyle={containerStyle}\n            onChangeIndex={this.handleSwipe}\n            onTransitionEnd={this.handleTransitionEnd}\n            index={index}\n            disabled={disableSwiping}\n          >\n            {content}\n          </ReactSwipeableViews>\n        </div>\n\n        <div className={navigationClassName}>\n          <IconButton className='media-modal__close' title={intl.formatMessage(messages.close)} icon='times' iconComponent={CloseIcon} onClick={onClose} size={40} />\n\n          {leftNav}\n          {rightNav}\n\n          <div className='media-modal__overlay'>\n            {pagination && <ul className='media-modal__pagination'>{pagination}</ul>}\n            {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(MediaModal);\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here as its imported into a preval file (`emoji_compressed.js`) */\n\nfunction padLeft(str, num) {\n  while (str.length < num) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n\nexports.unicodeToUnifiedName = (str) => {\n  let output = '';\n\n  for (let i = 0; i < str.length; i += 2) {\n    if (i > 0) {\n      output += '-';\n    }\n\n    output += padLeft(str.codePointAt(i).toString(16).toUpperCase(), 4);\n  }\n\n  return output;\n};\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport 'wicg-inert';\n\nimport { multiply } from 'color-blend';\nimport { createBrowserHistory } from 'history';\n\nimport { WithOptionalRouterPropTypes, withOptionalRouter } from 'flavours/glitch/utils/react_router';\n\nclass ModalRoot extends PureComponent {\n\n  static propTypes = {\n    children: PropTypes.node,\n    onClose: PropTypes.func.isRequired,\n    backgroundColor: PropTypes.shape({\n      r: PropTypes.number,\n      g: PropTypes.number,\n      b: PropTypes.number,\n    }),\n    noEsc: PropTypes.bool,\n    ignoreFocus: PropTypes.bool,\n    ...WithOptionalRouterPropTypes,\n  };\n\n  activeElement = this.props.children ? document.activeElement : null;\n\n  handleKeyUp = (e) => {\n    if ((e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27)\n         && !!this.props.children && !this.props.noEsc) {\n      this.props.onClose();\n    }\n  };\n\n  handleKeyDown = (e) => {\n    if (e.key === 'Tab') {\n      const focusable = Array.from(this.node.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])')).filter((x) => window.getComputedStyle(x).display !== 'none');\n      const index = focusable.indexOf(e.target);\n\n      let element;\n\n      if (e.shiftKey) {\n        element = focusable[index - 1] || focusable[focusable.length - 1];\n      } else {\n        element = focusable[index + 1] || focusable[0];\n      }\n\n      if (element) {\n        element.focus();\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keyup', this.handleKeyUp, false);\n    window.addEventListener('keydown', this.handleKeyDown, false);\n    this.history = this.props.history || createBrowserHistory();\n\n    if (this.props.children) {\n      this._handleModalOpen();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!!nextProps.children && !this.props.children) {\n      this.activeElement = document.activeElement;\n\n      this.getSiblings().forEach(sibling => sibling.setAttribute('inert', true));\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (!this.props.children && !!prevProps.children) {\n      this.getSiblings().forEach(sibling => sibling.removeAttribute('inert'));\n\n      // Because of the wicg-inert polyfill, the activeElement may not be\n      // immediately selectable, we have to wait for observers to run, as\n      // described in https://github.com/WICG/inert#performance-and-gotchas\n      Promise.resolve().then(() => {\n        if (!this.props.ignoreFocus) {\n          this.activeElement.focus({ preventScroll: true });\n        }\n        this.activeElement = null;\n      }).catch(console.error);\n\n      this._handleModalClose();\n    }\n    if (this.props.children && !prevProps.children) {\n      this._handleModalOpen();\n    }\n    if (this.props.children) {\n      this._ensureHistoryBuffer();\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keyup', this.handleKeyUp);\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  _handleModalOpen () {\n    this._modalHistoryKey = Date.now();\n    this.unlistenHistory = this.history.listen((_, action) => {\n      if (action === 'POP') {\n        this.props.onClose();\n      }\n    });\n  }\n\n  _handleModalClose () {\n    if (this.unlistenHistory) {\n      this.unlistenHistory();\n    }\n    const { state } = this.history.location;\n    if (state && state.mastodonModalKey === this._modalHistoryKey) {\n      this.history.goBack();\n    }\n  }\n\n  _ensureHistoryBuffer () {\n    const { pathname, state } = this.history.location;\n    if (!state || state.mastodonModalKey !== this._modalHistoryKey) {\n      this.history.push(pathname, { ...state, mastodonModalKey: this._modalHistoryKey });\n    }\n  }\n\n  getSiblings = () => {\n    return Array(...this.node.parentElement.childNodes).filter(node => node !== this.node);\n  };\n\n  setRef = ref => {\n    this.node = ref;\n  };\n\n  render () {\n    const { children, onClose } = this.props;\n    const visible = !!children;\n\n    if (!visible) {\n      return (\n        <div className='modal-root' ref={this.setRef} style={{ opacity: 0 }} />\n      );\n    }\n\n    let backgroundColor = null;\n\n    if (this.props.backgroundColor) {\n      backgroundColor = multiply({ ...this.props.backgroundColor, a: 1 }, { r: 0, g: 0, b: 0, a: 0.7 });\n    }\n\n    return (\n      <div className='modal-root' ref={this.setRef}>\n        <div style={{ pointerEvents: visible ? 'auto' : 'none' }}>\n          <div role='presentation' className='modal-root__overlay' onClick={onClose} style={{ backgroundColor: backgroundColor ? `rgba(${backgroundColor.r}, ${backgroundColor.g}, ${backgroundColor.b}, 0.7)` : null }} />\n          <div role='dialog' className='modal-root__container'>{children}</div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default withOptionalRouter(ModalRoot);\n","import { isMobile } from '../is_mobile';\n\nlet cachedScrollbarWidth: number | null = null;\n\nconst getActualScrollbarWidth = () => {\n  const outer = document.createElement('div');\n  outer.style.visibility = 'hidden';\n  outer.style.overflow = 'scroll';\n  document.body.appendChild(outer);\n\n  const inner = document.createElement('div');\n  outer.appendChild(inner);\n\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.remove();\n\n  return scrollbarWidth;\n};\n\nexport const getScrollbarWidth = () => {\n  if (cachedScrollbarWidth !== null) {\n    return cachedScrollbarWidth;\n  }\n\n  const scrollbarWidth = isMobile(window.innerWidth)\n    ? 0\n    : getActualScrollbarWidth();\n  cachedScrollbarWidth = scrollbarWidth;\n\n  return scrollbarWidth;\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\n\nimport ReactSwipeableViews from 'react-swipeable-views';\n\nimport ChevronLeftIcon from '@/material-icons/400-24px/chevron_left.svg?react';\nimport ChevronRightIcon from '@/material-icons/400-24px/chevron_right.svg?react';\nimport CloseIcon from '@/material-icons/400-24px/close.svg?react';\nimport { getAverageFromBlurhash } from 'flavours/glitch/blurhash';\nimport { GIFV } from 'flavours/glitch/components/gifv';\nimport { Icon }  from 'flavours/glitch/components/icon';\nimport { IconButton } from 'flavours/glitch/components/icon_button';\nimport Footer from 'flavours/glitch/features/picture_in_picture/components/footer';\nimport Video from 'flavours/glitch/features/video';\nimport { disableSwiping } from 'flavours/glitch/initial_state';\n\nimport ImageLoader from './image_loader';\n\nconst messages = defineMessages({\n  close: { id: 'lightbox.close', defaultMessage: 'Close' },\n  previous: { id: 'lightbox.previous', defaultMessage: 'Previous' },\n  next: { id: 'lightbox.next', defaultMessage: 'Next' },\n});\n\nclass MediaModal extends ImmutablePureComponent {\n\n  static propTypes = {\n    media: ImmutablePropTypes.list.isRequired,\n    statusId: PropTypes.string,\n    lang: PropTypes.string,\n    index: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    intl: PropTypes.object.isRequired,\n    onChangeBackgroundColor: PropTypes.func.isRequired,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n  };\n\n  state = {\n    index: null,\n    navigationHidden: false,\n    zoomButtonHidden: false,\n  };\n\n  handleSwipe = (index) => {\n    this.setState({ index: index % this.props.media.size });\n  };\n\n  handleTransitionEnd = () => {\n    this.setState({\n      zoomButtonHidden: false,\n    });\n  };\n\n  handleNextClick = () => {\n    this.setState({\n      index: (this.getIndex() + 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handlePrevClick = () => {\n    this.setState({\n      index: (this.props.media.size + this.getIndex() - 1) % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleChangeIndex = (e) => {\n    const index = Number(e.currentTarget.getAttribute('data-index'));\n\n    this.setState({\n      index: index % this.props.media.size,\n      zoomButtonHidden: true,\n    });\n  };\n\n  handleKeyDown = (e) => {\n    switch(e.key) {\n    case 'ArrowLeft':\n      this.handlePrevClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    case 'ArrowRight':\n      this.handleNextClick();\n      e.preventDefault();\n      e.stopPropagation();\n      break;\n    }\n  };\n\n  componentDidMount () {\n    window.addEventListener('keydown', this.handleKeyDown, false);\n\n    this._sendBackgroundColor();\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.index !== this.state.index) {\n      this._sendBackgroundColor();\n    }\n  }\n\n  _sendBackgroundColor () {\n    const { media, onChangeBackgroundColor } = this.props;\n    const index = this.getIndex();\n    const blurhash = media.getIn([index, 'blurhash']);\n\n    if (blurhash) {\n      const backgroundColor = getAverageFromBlurhash(blurhash);\n      onChangeBackgroundColor(backgroundColor);\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this.handleKeyDown);\n\n    this.props.onChangeBackgroundColor(null);\n  }\n\n  getIndex () {\n    return this.state.index !== null ? this.state.index : this.props.index;\n  }\n\n  toggleNavigation = () => {\n    this.setState(prevState => ({\n      navigationHidden: !prevState.navigationHidden,\n    }));\n  };\n\n  render () {\n    const { media, statusId, lang, intl, onClose } = this.props;\n    const { navigationHidden } = this.state;\n\n    const index = this.getIndex();\n\n    const leftNav  = media.size > 1 && <button tabIndex={0} className='media-modal__nav media-modal__nav--left' onClick={this.handlePrevClick} aria-label={intl.formatMessage(messages.previous)}><Icon id='chevron-left' icon={ChevronLeftIcon} /></button>;\n    const rightNav = media.size > 1 && <button tabIndex={0} className='media-modal__nav  media-modal__nav--right' onClick={this.handleNextClick} aria-label={intl.formatMessage(messages.next)}><Icon id='chevron-right' icon={ChevronRightIcon} /></button>;\n\n    const content = media.map((image) => {\n      const width  = image.getIn(['meta', 'original', 'width']) || null;\n      const height = image.getIn(['meta', 'original', 'height']) || null;\n      const description = image.getIn(['translation', 'description']) || image.get('description');\n\n      if (image.get('type') === 'image') {\n        return (\n          <ImageLoader\n            previewSrc={image.get('preview_url')}\n            src={image.get('url')}\n            width={width}\n            height={height}\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n            onClick={this.toggleNavigation}\n            zoomButtonHidden={this.state.zoomButtonHidden}\n          />\n        );\n      } else if (image.get('type') === 'video') {\n        const { currentTime, autoPlay, volume } = this.props;\n\n        return (\n          <Video\n            preview={image.get('preview_url')}\n            blurhash={image.get('blurhash')}\n            src={image.get('url')}\n            width={image.get('width')}\n            height={image.get('height')}\n            frameRate={image.getIn(['meta', 'original', 'frame_rate'])}\n            currentTime={currentTime || 0}\n            autoPlay={autoPlay || false}\n            volume={volume || 1}\n            onCloseVideo={onClose}\n            detailed\n            alt={description}\n            lang={lang}\n            key={image.get('url')}\n          />\n        );\n      } else if (image.get('type') === 'gifv') {\n        return (\n          <GIFV\n            src={image.get('url')}\n            width={width}\n            height={height}\n            key={image.get('url')}\n            alt={description}\n            lang={lang}\n            onClick={this.toggleNavigation}\n          />\n        );\n      }\n\n      return null;\n    }).toArray();\n\n    // you can't use 100vh, because the viewport height is taller\n    // than the visible part of the document in some mobile\n    // browsers when it's address bar is visible.\n    // https://developers.google.com/web/updates/2016/12/url-bar-resizing\n    const swipeableViewsStyle = {\n      width: '100%',\n      height: '100%',\n    };\n\n    const containerStyle = {\n      alignItems: 'center', // center vertically\n    };\n\n    const navigationClassName = classNames('media-modal__navigation', {\n      'media-modal__navigation--hidden': navigationHidden,\n    });\n\n    let pagination;\n\n    if (media.size > 1) {\n      pagination = media.map((item, i) => (\n        <button key={i} className={classNames('media-modal__page-dot', { active: i === index })} data-index={i} onClick={this.handleChangeIndex}>\n          {i + 1}\n        </button>\n      ));\n    }\n\n    return (\n      <div className='modal-root__modal media-modal'>\n        <div className='media-modal__closer' role='presentation' onClick={onClose} >\n          <ReactSwipeableViews\n            style={swipeableViewsStyle}\n            containerStyle={containerStyle}\n            onChangeIndex={this.handleSwipe}\n            onTransitionEnd={this.handleTransitionEnd}\n            index={index}\n            disabled={disableSwiping}\n          >\n            {content}\n          </ReactSwipeableViews>\n        </div>\n\n        <div className={navigationClassName}>\n          <IconButton className='media-modal__close' title={intl.formatMessage(messages.close)} icon='times' iconComponent={CloseIcon} onClick={onClose} size={40} />\n\n          {leftNav}\n          {rightNav}\n\n          <div className='media-modal__overlay'>\n            {pagination && <ul className='media-modal__pagination'>{pagination}</ul>}\n            {statusId && <Footer statusId={statusId} withOpenButton onClose={onClose} />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(MediaModal);\n","import { fromJS } from 'immutable';\n\nimport { searchHistory } from 'mastodon/settings';\n\nimport api from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\n\nexport const SEARCH_CHANGE = 'SEARCH_CHANGE';\nexport const SEARCH_CLEAR  = 'SEARCH_CLEAR';\nexport const SEARCH_SHOW   = 'SEARCH_SHOW';\n\nexport const SEARCH_FETCH_REQUEST = 'SEARCH_FETCH_REQUEST';\nexport const SEARCH_FETCH_SUCCESS = 'SEARCH_FETCH_SUCCESS';\nexport const SEARCH_FETCH_FAIL    = 'SEARCH_FETCH_FAIL';\n\nexport const SEARCH_EXPAND_REQUEST = 'SEARCH_EXPAND_REQUEST';\nexport const SEARCH_EXPAND_SUCCESS = 'SEARCH_EXPAND_SUCCESS';\nexport const SEARCH_EXPAND_FAIL    = 'SEARCH_EXPAND_FAIL';\n\nexport const SEARCH_HISTORY_UPDATE  = 'SEARCH_HISTORY_UPDATE';\n\nexport function changeSearch(value) {\n  return {\n    type: SEARCH_CHANGE,\n    value,\n  };\n}\n\nexport function clearSearch() {\n  return {\n    type: SEARCH_CLEAR,\n  };\n}\n\nexport function submitSearch(type) {\n  return (dispatch, getState) => {\n    const value    = getState().getIn(['search', 'value']);\n    const signedIn = !!getState().getIn(['meta', 'me']);\n\n    if (value.length === 0) {\n      dispatch(fetchSearchSuccess({ accounts: [], statuses: [], hashtags: [] }, '', type));\n      return;\n    }\n\n    dispatch(fetchSearchRequest(type));\n\n    api().get('/api/v2/search', {\n      params: {\n        q: value,\n        resolve: signedIn,\n        limit: 11,\n        type,\n      },\n    }).then(response => {\n      if (response.data.accounts) {\n        dispatch(importFetchedAccounts(response.data.accounts));\n      }\n\n      if (response.data.statuses) {\n        dispatch(importFetchedStatuses(response.data.statuses));\n      }\n\n      dispatch(fetchSearchSuccess(response.data, value, type));\n      dispatch(fetchRelationships(response.data.accounts.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchSearchFail(error));\n    });\n  };\n}\n\nexport function fetchSearchRequest(searchType) {\n  return {\n    type: SEARCH_FETCH_REQUEST,\n    searchType,\n  };\n}\n\nexport function fetchSearchSuccess(results, searchTerm, searchType) {\n  return {\n    type: SEARCH_FETCH_SUCCESS,\n    results,\n    searchType,\n    searchTerm,\n  };\n}\n\nexport function fetchSearchFail(error) {\n  return {\n    type: SEARCH_FETCH_FAIL,\n    error,\n  };\n}\n\nexport const expandSearch = type => (dispatch, getState) => {\n  const value  = getState().getIn(['search', 'value']);\n  const offset = getState().getIn(['search', 'results', type]).size - 1;\n\n  dispatch(expandSearchRequest(type));\n\n  api().get('/api/v2/search', {\n    params: {\n      q: value,\n      type,\n      offset,\n      limit: 11,\n    },\n  }).then(({ data }) => {\n    if (data.accounts) {\n      dispatch(importFetchedAccounts(data.accounts));\n    }\n\n    if (data.statuses) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    dispatch(expandSearchSuccess(data, value, type));\n    dispatch(fetchRelationships(data.accounts.map(item => item.id)));\n  }).catch(error => {\n    dispatch(expandSearchFail(error));\n  });\n};\n\nexport const expandSearchRequest = (searchType) => ({\n  type: SEARCH_EXPAND_REQUEST,\n  searchType,\n});\n\nexport const expandSearchSuccess = (results, searchTerm, searchType) => ({\n  type: SEARCH_EXPAND_SUCCESS,\n  results,\n  searchTerm,\n  searchType,\n});\n\nexport const expandSearchFail = error => ({\n  type: SEARCH_EXPAND_FAIL,\n  error,\n});\n\nexport const showSearch = () => ({\n  type: SEARCH_SHOW,\n});\n\nexport const openURL = (value, history, onFailure) => (dispatch, getState) => {\n  const signedIn = !!getState().getIn(['meta', 'me']);\n\n  if (!signedIn) {\n    if (onFailure) {\n      onFailure();\n    }\n\n    return;\n  }\n\n  dispatch(fetchSearchRequest());\n\n  api().get('/api/v2/search', { params: { q: value, resolve: true } }).then(response => {\n    if (response.data.accounts?.length > 0) {\n      dispatch(importFetchedAccounts(response.data.accounts));\n      history.push(`/@${response.data.accounts[0].acct}`);\n    } else if (response.data.statuses?.length > 0) {\n      dispatch(importFetchedStatuses(response.data.statuses));\n      history.push(`/@${response.data.statuses[0].account.acct}/${response.data.statuses[0].id}`);\n    } else if (onFailure) {\n      onFailure();\n    }\n\n    dispatch(fetchSearchSuccess(response.data, value));\n  }).catch(err => {\n    dispatch(fetchSearchFail(err));\n\n    if (onFailure) {\n      onFailure();\n    }\n  });\n};\n\nexport const clickSearchResult = (q, type) => (dispatch, getState) => {\n  const previous = getState().getIn(['search', 'recent']);\n\n  if (previous.some(x => x.get('q') === q && x.get('type') === type)) {\n    return;\n  }\n\n  const me = getState().getIn(['meta', 'me']);\n  const current = previous.add(fromJS({ type, q })).takeLast(4);\n\n  searchHistory.set(me, current.toJS());\n  dispatch(updateSearchHistory(current));\n};\n\nexport const forgetSearchResult = q => (dispatch, getState) => {\n  const previous = getState().getIn(['search', 'recent']);\n  const me = getState().getIn(['meta', 'me']);\n  const current = previous.filterNot(result => result.get('q') === q);\n\n  searchHistory.set(me, current.toJS());\n  dispatch(updateSearchHistory(current));\n};\n\nexport const updateSearchHistory = recent => ({\n  type: SEARCH_HISTORY_UPDATE,\n  recent,\n});\n\nexport const hydrateSearch = () => (dispatch, getState) => {\n  const me = getState().getIn(['meta', 'me']);\n  const history = searchHistory.get(me);\n\n  if (history !== null) {\n    dispatch(updateSearchHistory(history));\n  }\n};\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// src/devModeChecks/identityFunctionCheck.ts\nvar runIdentityFunctionCheck = (resultFunc, inputSelectorsResults, outputSelectorResult) => {\n  if (inputSelectorsResults.length === 1 && inputSelectorsResults[0] === outputSelectorResult) {\n    let isInputSameAsOutput = false;\n    try {\n      const emptyObject = {};\n      if (resultFunc(emptyObject) === emptyObject)\n        isInputSameAsOutput = true;\n    } catch (e) {\n    }\n    if (isInputSameAsOutput) {\n      let stack = void 0;\n      try {\n        throw new Error();\n      } catch (e) {\n        ;\n        ({ stack } = e);\n      }\n      console.warn(\n        \"The result function returned its own inputs without modification. e.g\\n`createSelector([state => state.todos], todos => todos)`\\nThis could lead to inefficient memoization and unnecessary re-renders.\\nEnsure transformation logic is in the result function, and extraction logic is in the input selectors.\",\n        { stack }\n      );\n    }\n  }\n};\n\n// src/devModeChecks/inputStabilityCheck.ts\nvar runInputStabilityCheck = (inputSelectorResultsObject, options, inputSelectorArgs) => {\n  const { memoize, memoizeOptions } = options;\n  const { inputSelectorResults, inputSelectorResultsCopy } = inputSelectorResultsObject;\n  const createAnEmptyObject = memoize(() => ({}), ...memoizeOptions);\n  const areInputSelectorResultsEqual = createAnEmptyObject.apply(null, inputSelectorResults) === createAnEmptyObject.apply(null, inputSelectorResultsCopy);\n  if (!areInputSelectorResultsEqual) {\n    let stack = void 0;\n    try {\n      throw new Error();\n    } catch (e) {\n      ;\n      ({ stack } = e);\n    }\n    console.warn(\n      \"An input selector returned a different result when passed same arguments.\\nThis means your output selector will likely run more frequently than intended.\\nAvoid returning a new reference inside your input selector, e.g.\\n`createSelector([state => state.todos.map(todo => todo.id)], todoIds => todoIds.length)`\",\n      {\n        arguments: inputSelectorArgs,\n        firstInputs: inputSelectorResults,\n        secondInputs: inputSelectorResultsCopy,\n        stack\n      }\n    );\n  }\n};\n\n// src/devModeChecks/setGlobalDevModeChecks.ts\nvar globalDevModeChecks = {\n  inputStabilityCheck: \"once\",\n  identityFunctionCheck: \"once\"\n};\nvar setGlobalDevModeChecks = (devModeChecks) => {\n  Object.assign(globalDevModeChecks, devModeChecks);\n};\n\n// src/utils.ts\nvar NOT_FOUND = \"NOT_FOUND\";\nfunction assertIsFunction(func, errorMessage = `expected a function, instead received ${typeof func}`) {\n  if (typeof func !== \"function\") {\n    throw new TypeError(errorMessage);\n  }\n}\nfunction assertIsObject(object, errorMessage = `expected an object, instead received ${typeof object}`) {\n  if (typeof object !== \"object\") {\n    throw new TypeError(errorMessage);\n  }\n}\nfunction assertIsArrayOfFunctions(array, errorMessage = `expected all items to be functions, instead received the following types: `) {\n  if (!array.every((item) => typeof item === \"function\")) {\n    const itemTypes = array.map(\n      (item) => typeof item === \"function\" ? `function ${item.name || \"unnamed\"}()` : typeof item\n    ).join(\", \");\n    throw new TypeError(`${errorMessage}[${itemTypes}]`);\n  }\n}\nvar ensureIsArray = (item) => {\n  return Array.isArray(item) ? item : [item];\n};\nfunction getDependencies(createSelectorArgs) {\n  const dependencies = Array.isArray(createSelectorArgs[0]) ? createSelectorArgs[0] : createSelectorArgs;\n  assertIsArrayOfFunctions(\n    dependencies,\n    `createSelector expects all input-selectors to be functions, but received the following types: `\n  );\n  return dependencies;\n}\nfunction collectInputSelectorResults(dependencies, inputSelectorArgs) {\n  const inputSelectorResults = [];\n  const { length } = dependencies;\n  for (let i = 0; i < length; i++) {\n    inputSelectorResults.push(dependencies[i].apply(null, inputSelectorArgs));\n  }\n  return inputSelectorResults;\n}\nvar getDevModeChecksExecutionInfo = (firstRun, devModeChecks) => {\n  const { identityFunctionCheck, inputStabilityCheck } = __spreadValues(__spreadValues({}, globalDevModeChecks), devModeChecks);\n  return {\n    identityFunctionCheck: {\n      shouldRun: identityFunctionCheck === \"always\" || identityFunctionCheck === \"once\" && firstRun,\n      run: runIdentityFunctionCheck\n    },\n    inputStabilityCheck: {\n      shouldRun: inputStabilityCheck === \"always\" || inputStabilityCheck === \"once\" && firstRun,\n      run: runInputStabilityCheck\n    }\n  };\n};\n\n// src/autotrackMemoize/autotracking.ts\nvar $REVISION = 0;\nvar CURRENT_TRACKER = null;\nvar Cell = class {\n  constructor(initialValue, isEqual = tripleEq) {\n    __publicField(this, \"revision\", $REVISION);\n    __publicField(this, \"_value\");\n    __publicField(this, \"_lastValue\");\n    __publicField(this, \"_isEqual\", tripleEq);\n    this._value = this._lastValue = initialValue;\n    this._isEqual = isEqual;\n  }\n  // Whenever a storage value is read, it'll add itself to the current tracker if\n  // one exists, entangling its state with that cache.\n  get value() {\n    CURRENT_TRACKER == null ? void 0 : CURRENT_TRACKER.add(this);\n    return this._value;\n  }\n  // Whenever a storage value is updated, we bump the global revision clock,\n  // assign the revision for this storage to the new value, _and_ we schedule a\n  // rerender. This is important, and it's what makes autotracking  _pull_\n  // based. We don't actively tell the caches which depend on the storage that\n  // anything has happened. Instead, we recompute the caches when needed.\n  set value(newValue) {\n    if (this.value === newValue)\n      return;\n    this._value = newValue;\n    this.revision = ++$REVISION;\n  }\n};\nfunction tripleEq(a, b) {\n  return a === b;\n}\nvar TrackingCache = class {\n  constructor(fn) {\n    __publicField(this, \"_cachedValue\");\n    __publicField(this, \"_cachedRevision\", -1);\n    __publicField(this, \"_deps\", []);\n    __publicField(this, \"hits\", 0);\n    __publicField(this, \"fn\");\n    this.fn = fn;\n  }\n  clear() {\n    this._cachedValue = void 0;\n    this._cachedRevision = -1;\n    this._deps = [];\n    this.hits = 0;\n  }\n  get value() {\n    if (this.revision > this._cachedRevision) {\n      const { fn } = this;\n      const currentTracker = /* @__PURE__ */ new Set();\n      const prevTracker = CURRENT_TRACKER;\n      CURRENT_TRACKER = currentTracker;\n      this._cachedValue = fn();\n      CURRENT_TRACKER = prevTracker;\n      this.hits++;\n      this._deps = Array.from(currentTracker);\n      this._cachedRevision = this.revision;\n    }\n    CURRENT_TRACKER == null ? void 0 : CURRENT_TRACKER.add(this);\n    return this._cachedValue;\n  }\n  get revision() {\n    return Math.max(...this._deps.map((d) => d.revision), 0);\n  }\n};\nfunction getValue(cell) {\n  if (!(cell instanceof Cell)) {\n    console.warn(\"Not a valid cell! \", cell);\n  }\n  return cell.value;\n}\nfunction setValue(storage, value) {\n  if (!(storage instanceof Cell)) {\n    throw new TypeError(\n      \"setValue must be passed a tracked store created with `createStorage`.\"\n    );\n  }\n  storage.value = storage._lastValue = value;\n}\nfunction createCell(initialValue, isEqual = tripleEq) {\n  return new Cell(initialValue, isEqual);\n}\nfunction createCache(fn) {\n  assertIsFunction(\n    fn,\n    \"the first parameter to `createCache` must be a function\"\n  );\n  return new TrackingCache(fn);\n}\n\n// src/autotrackMemoize/tracking.ts\nvar neverEq = (a, b) => false;\nfunction createTag() {\n  return createCell(null, neverEq);\n}\nfunction dirtyTag(tag, value) {\n  setValue(tag, value);\n}\nvar consumeCollection = (node) => {\n  let tag = node.collectionTag;\n  if (tag === null) {\n    tag = node.collectionTag = createTag();\n  }\n  getValue(tag);\n};\nvar dirtyCollection = (node) => {\n  const tag = node.collectionTag;\n  if (tag !== null) {\n    dirtyTag(tag, null);\n  }\n};\n\n// src/autotrackMemoize/proxy.ts\nvar REDUX_PROXY_LABEL = Symbol();\nvar nextId = 0;\nvar proto = Object.getPrototypeOf({});\nvar ObjectTreeNode = class {\n  constructor(value) {\n    this.value = value;\n    __publicField(this, \"proxy\", new Proxy(this, objectProxyHandler));\n    __publicField(this, \"tag\", createTag());\n    __publicField(this, \"tags\", {});\n    __publicField(this, \"children\", {});\n    __publicField(this, \"collectionTag\", null);\n    __publicField(this, \"id\", nextId++);\n    this.value = value;\n    this.tag.value = value;\n  }\n};\nvar objectProxyHandler = {\n  get(node, key) {\n    function calculateResult() {\n      const { value } = node;\n      const childValue = Reflect.get(value, key);\n      if (typeof key === \"symbol\") {\n        return childValue;\n      }\n      if (key in proto) {\n        return childValue;\n      }\n      if (typeof childValue === \"object\" && childValue !== null) {\n        let childNode = node.children[key];\n        if (childNode === void 0) {\n          childNode = node.children[key] = createNode(childValue);\n        }\n        if (childNode.tag) {\n          getValue(childNode.tag);\n        }\n        return childNode.proxy;\n      } else {\n        let tag = node.tags[key];\n        if (tag === void 0) {\n          tag = node.tags[key] = createTag();\n          tag.value = childValue;\n        }\n        getValue(tag);\n        return childValue;\n      }\n    }\n    const res = calculateResult();\n    return res;\n  },\n  ownKeys(node) {\n    consumeCollection(node);\n    return Reflect.ownKeys(node.value);\n  },\n  getOwnPropertyDescriptor(node, prop) {\n    return Reflect.getOwnPropertyDescriptor(node.value, prop);\n  },\n  has(node, prop) {\n    return Reflect.has(node.value, prop);\n  }\n};\nvar ArrayTreeNode = class {\n  constructor(value) {\n    this.value = value;\n    __publicField(this, \"proxy\", new Proxy([this], arrayProxyHandler));\n    __publicField(this, \"tag\", createTag());\n    __publicField(this, \"tags\", {});\n    __publicField(this, \"children\", {});\n    __publicField(this, \"collectionTag\", null);\n    __publicField(this, \"id\", nextId++);\n    this.value = value;\n    this.tag.value = value;\n  }\n};\nvar arrayProxyHandler = {\n  get([node], key) {\n    if (key === \"length\") {\n      consumeCollection(node);\n    }\n    return objectProxyHandler.get(node, key);\n  },\n  ownKeys([node]) {\n    return objectProxyHandler.ownKeys(node);\n  },\n  getOwnPropertyDescriptor([node], prop) {\n    return objectProxyHandler.getOwnPropertyDescriptor(node, prop);\n  },\n  has([node], prop) {\n    return objectProxyHandler.has(node, prop);\n  }\n};\nfunction createNode(value) {\n  if (Array.isArray(value)) {\n    return new ArrayTreeNode(value);\n  }\n  return new ObjectTreeNode(value);\n}\nfunction updateNode(node, newValue) {\n  const { value, tags, children } = node;\n  node.value = newValue;\n  if (Array.isArray(value) && Array.isArray(newValue) && value.length !== newValue.length) {\n    dirtyCollection(node);\n  } else {\n    if (value !== newValue) {\n      let oldKeysSize = 0;\n      let newKeysSize = 0;\n      let anyKeysAdded = false;\n      for (const _key in value) {\n        oldKeysSize++;\n      }\n      for (const key in newValue) {\n        newKeysSize++;\n        if (!(key in value)) {\n          anyKeysAdded = true;\n          break;\n        }\n      }\n      const isDifferent = anyKeysAdded || oldKeysSize !== newKeysSize;\n      if (isDifferent) {\n        dirtyCollection(node);\n      }\n    }\n  }\n  for (const key in tags) {\n    const childValue = value[key];\n    const newChildValue = newValue[key];\n    if (childValue !== newChildValue) {\n      dirtyCollection(node);\n      dirtyTag(tags[key], newChildValue);\n    }\n    if (typeof newChildValue === \"object\" && newChildValue !== null) {\n      delete tags[key];\n    }\n  }\n  for (const key in children) {\n    const childNode = children[key];\n    const newChildValue = newValue[key];\n    const childValue = childNode.value;\n    if (childValue === newChildValue) {\n      continue;\n    } else if (typeof newChildValue === \"object\" && newChildValue !== null) {\n      updateNode(childNode, newChildValue);\n    } else {\n      deleteNode(childNode);\n      delete children[key];\n    }\n  }\n}\nfunction deleteNode(node) {\n  if (node.tag) {\n    dirtyTag(node.tag, null);\n  }\n  dirtyCollection(node);\n  for (const key in node.tags) {\n    dirtyTag(node.tags[key], null);\n  }\n  for (const key in node.children) {\n    deleteNode(node.children[key]);\n  }\n}\n\n// src/lruMemoize.ts\nfunction createSingletonCache(equals) {\n  let entry;\n  return {\n    get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n      return NOT_FOUND;\n    },\n    put(key, value) {\n      entry = { key, value };\n    },\n    getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear() {\n      entry = void 0;\n    }\n  };\n}\nfunction createLruCache(maxSize, equals) {\n  let entries = [];\n  function get(key) {\n    const cacheIndex = entries.findIndex((entry) => equals(key, entry.key));\n    if (cacheIndex > -1) {\n      const entry = entries[cacheIndex];\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n      return entry.value;\n    }\n    return NOT_FOUND;\n  }\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      entries.unshift({ key, value });\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n  function getEntries() {\n    return entries;\n  }\n  function clear() {\n    entries = [];\n  }\n  return { get, put, getEntries, clear };\n}\nvar referenceEqualityCheck = (a, b) => a === b;\nfunction createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    }\n    const { length } = prev;\n    for (let i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n    return true;\n  };\n}\nfunction lruMemoize(func, equalityCheckOrOptions) {\n  const providedOptions = typeof equalityCheckOrOptions === \"object\" ? equalityCheckOrOptions : { equalityCheck: equalityCheckOrOptions };\n  const {\n    equalityCheck = referenceEqualityCheck,\n    maxSize = 1,\n    resultEqualityCheck\n  } = providedOptions;\n  const comparator = createCacheKeyComparator(equalityCheck);\n  let resultsCount = 0;\n  const cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator);\n  function memoized() {\n    let value = cache.get(arguments);\n    if (value === NOT_FOUND) {\n      value = func.apply(null, arguments);\n      resultsCount++;\n      if (resultEqualityCheck) {\n        const entries = cache.getEntries();\n        const matchingEntry = entries.find(\n          (entry) => resultEqualityCheck(entry.value, value)\n        );\n        if (matchingEntry) {\n          value = matchingEntry.value;\n          resultsCount !== 0 && resultsCount--;\n        }\n      }\n      cache.put(arguments, value);\n    }\n    return value;\n  }\n  memoized.clearCache = () => {\n    cache.clear();\n    memoized.resetResultsCount();\n  };\n  memoized.resultsCount = () => resultsCount;\n  memoized.resetResultsCount = () => {\n    resultsCount = 0;\n  };\n  return memoized;\n}\n\n// src/autotrackMemoize/autotrackMemoize.ts\nfunction autotrackMemoize(func) {\n  const node = createNode(\n    []\n  );\n  let lastArgs = null;\n  const shallowEqual = createCacheKeyComparator(referenceEqualityCheck);\n  const cache = createCache(() => {\n    const res = func.apply(null, node.proxy);\n    return res;\n  });\n  function memoized() {\n    if (!shallowEqual(lastArgs, arguments)) {\n      updateNode(node, arguments);\n      lastArgs = arguments;\n    }\n    return cache.value;\n  }\n  memoized.clearCache = () => {\n    return cache.clear();\n  };\n  return memoized;\n}\n\n// src/weakMapMemoize.ts\nvar StrongRef = class {\n  constructor(value) {\n    this.value = value;\n  }\n  deref() {\n    return this.value;\n  }\n};\nvar Ref = typeof WeakRef !== \"undefined\" ? WeakRef : StrongRef;\nvar UNTERMINATED = 0;\nvar TERMINATED = 1;\nfunction createCacheNode() {\n  return {\n    s: UNTERMINATED,\n    v: void 0,\n    o: null,\n    p: null\n  };\n}\nfunction weakMapMemoize(func, options = {}) {\n  let fnNode = createCacheNode();\n  const { resultEqualityCheck } = options;\n  let lastResult;\n  let resultsCount = 0;\n  function memoized() {\n    var _a, _b;\n    let cacheNode = fnNode;\n    const { length } = arguments;\n    for (let i = 0, l = length; i < l; i++) {\n      const arg = arguments[i];\n      if (typeof arg === \"function\" || typeof arg === \"object\" && arg !== null) {\n        let objectCache = cacheNode.o;\n        if (objectCache === null) {\n          cacheNode.o = objectCache = /* @__PURE__ */ new WeakMap();\n        }\n        const objectNode = objectCache.get(arg);\n        if (objectNode === void 0) {\n          cacheNode = createCacheNode();\n          objectCache.set(arg, cacheNode);\n        } else {\n          cacheNode = objectNode;\n        }\n      } else {\n        let primitiveCache = cacheNode.p;\n        if (primitiveCache === null) {\n          cacheNode.p = primitiveCache = /* @__PURE__ */ new Map();\n        }\n        const primitiveNode = primitiveCache.get(arg);\n        if (primitiveNode === void 0) {\n          cacheNode = createCacheNode();\n          primitiveCache.set(arg, cacheNode);\n        } else {\n          cacheNode = primitiveNode;\n        }\n      }\n    }\n    const terminatedNode = cacheNode;\n    let result;\n    if (cacheNode.s === TERMINATED) {\n      result = cacheNode.v;\n    } else {\n      result = func.apply(null, arguments);\n      resultsCount++;\n    }\n    terminatedNode.s = TERMINATED;\n    if (resultEqualityCheck) {\n      const lastResultValue = (_b = (_a = lastResult == null ? void 0 : lastResult.deref) == null ? void 0 : _a.call(lastResult)) != null ? _b : lastResult;\n      if (lastResultValue != null && resultEqualityCheck(lastResultValue, result)) {\n        result = lastResultValue;\n        resultsCount !== 0 && resultsCount--;\n      }\n      const needsWeakRef = typeof result === \"object\" && result !== null || typeof result === \"function\";\n      lastResult = needsWeakRef ? new Ref(result) : result;\n    }\n    terminatedNode.v = result;\n    return result;\n  }\n  memoized.clearCache = () => {\n    fnNode = createCacheNode();\n    memoized.resetResultsCount();\n  };\n  memoized.resultsCount = () => resultsCount;\n  memoized.resetResultsCount = () => {\n    resultsCount = 0;\n  };\n  return memoized;\n}\n\n// src/createSelectorCreator.ts\nfunction createSelectorCreator(memoizeOrOptions, ...memoizeOptionsFromArgs) {\n  const createSelectorCreatorOptions = typeof memoizeOrOptions === \"function\" ? {\n    memoize: memoizeOrOptions,\n    memoizeOptions: memoizeOptionsFromArgs\n  } : memoizeOrOptions;\n  const createSelector2 = (...createSelectorArgs) => {\n    let recomputations = 0;\n    let dependencyRecomputations = 0;\n    let lastResult;\n    let directlyPassedOptions = {};\n    let resultFunc = createSelectorArgs.pop();\n    if (typeof resultFunc === \"object\") {\n      directlyPassedOptions = resultFunc;\n      resultFunc = createSelectorArgs.pop();\n    }\n    assertIsFunction(\n      resultFunc,\n      `createSelector expects an output function after the inputs, but received: [${typeof resultFunc}]`\n    );\n    const combinedOptions = __spreadValues(__spreadValues({}, createSelectorCreatorOptions), directlyPassedOptions);\n    const {\n      memoize,\n      memoizeOptions = [],\n      argsMemoize = weakMapMemoize,\n      argsMemoizeOptions = [],\n      devModeChecks = {}\n    } = combinedOptions;\n    const finalMemoizeOptions = ensureIsArray(memoizeOptions);\n    const finalArgsMemoizeOptions = ensureIsArray(argsMemoizeOptions);\n    const dependencies = getDependencies(createSelectorArgs);\n    const memoizedResultFunc = memoize(function recomputationWrapper() {\n      recomputations++;\n      return resultFunc.apply(\n        null,\n        arguments\n      );\n    }, ...finalMemoizeOptions);\n    let firstRun = true;\n    const selector = argsMemoize(function dependenciesChecker() {\n      dependencyRecomputations++;\n      const inputSelectorResults = collectInputSelectorResults(\n        dependencies,\n        arguments\n      );\n      lastResult = memoizedResultFunc.apply(null, inputSelectorResults);\n      if (process.env.NODE_ENV !== \"production\") {\n        const { identityFunctionCheck, inputStabilityCheck } = getDevModeChecksExecutionInfo(firstRun, devModeChecks);\n        if (identityFunctionCheck.shouldRun) {\n          identityFunctionCheck.run(\n            resultFunc,\n            inputSelectorResults,\n            lastResult\n          );\n        }\n        if (inputStabilityCheck.shouldRun) {\n          const inputSelectorResultsCopy = collectInputSelectorResults(\n            dependencies,\n            arguments\n          );\n          inputStabilityCheck.run(\n            { inputSelectorResults, inputSelectorResultsCopy },\n            { memoize, memoizeOptions: finalMemoizeOptions },\n            arguments\n          );\n        }\n        if (firstRun)\n          firstRun = false;\n      }\n      return lastResult;\n    }, ...finalArgsMemoizeOptions);\n    return Object.assign(selector, {\n      resultFunc,\n      memoizedResultFunc,\n      dependencies,\n      dependencyRecomputations: () => dependencyRecomputations,\n      resetDependencyRecomputations: () => {\n        dependencyRecomputations = 0;\n      },\n      lastResult: () => lastResult,\n      recomputations: () => recomputations,\n      resetRecomputations: () => {\n        recomputations = 0;\n      },\n      memoize,\n      argsMemoize\n    });\n  };\n  Object.assign(createSelector2, {\n    withTypes: () => createSelector2\n  });\n  return createSelector2;\n}\nvar createSelector = /* @__PURE__ */ createSelectorCreator(weakMapMemoize);\n\n// src/createStructuredSelector.ts\nvar createStructuredSelector = Object.assign(\n  (inputSelectorsObject, selectorCreator = createSelector) => {\n    assertIsObject(\n      inputSelectorsObject,\n      `createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof inputSelectorsObject}`\n    );\n    const inputSelectorKeys = Object.keys(inputSelectorsObject);\n    const dependencies = inputSelectorKeys.map(\n      (key) => inputSelectorsObject[key]\n    );\n    const structuredSelector = selectorCreator(\n      dependencies,\n      (...inputSelectorResults) => {\n        return inputSelectorResults.reduce((composition, value, index) => {\n          composition[inputSelectorKeys[index]] = value;\n          return composition;\n        }, {});\n      }\n    );\n    return structuredSelector;\n  },\n  { withTypes: () => createStructuredSelector }\n);\nexport {\n  createSelector,\n  createSelectorCreator,\n  createStructuredSelector,\n  lruMemoize,\n  referenceEqualityCheck,\n  setGlobalDevModeChecks,\n  autotrackMemoize as unstable_autotrackMemoize,\n  weakMapMemoize\n};\n//# sourceMappingURL=reselect.legacy-esm.js.map","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  unexpectedTitle: { id: 'alert.unexpected.title', defaultMessage: 'Oops!' },\n  unexpectedMessage: { id: 'alert.unexpected.message', defaultMessage: 'An unexpected error occurred.' },\n  rateLimitedTitle: { id: 'alert.rate_limited.title', defaultMessage: 'Rate limited' },\n  rateLimitedMessage: { id: 'alert.rate_limited.message', defaultMessage: 'Please retry after {retry_time, time, medium}.' },\n});\n\nexport const ALERT_SHOW    = 'ALERT_SHOW';\nexport const ALERT_DISMISS = 'ALERT_DISMISS';\nexport const ALERT_CLEAR   = 'ALERT_CLEAR';\nexport const ALERT_NOOP    = 'ALERT_NOOP';\n\nexport const dismissAlert = alert => ({\n  type: ALERT_DISMISS,\n  alert,\n});\n\nexport const clearAlert = () => ({\n  type: ALERT_CLEAR,\n});\n\nexport const showAlert = alert => ({\n  type: ALERT_SHOW,\n  alert,\n});\n\nexport const showAlertForError = (error, skipNotFound = false) => {\n  if (error.response) {\n    const { data, status, statusText, headers } = error.response;\n\n    // Skip these errors as they are reflected in the UI\n    if (skipNotFound && (status === 404 || status === 410)) {\n      return { type: ALERT_NOOP };\n    }\n\n    // Rate limit errors\n    if (status === 429 && headers['x-ratelimit-reset']) {\n      return showAlert({\n        title: messages.rateLimitedTitle,\n        message: messages.rateLimitedMessage,\n        values: { 'retry_time': new Date(headers['x-ratelimit-reset']) },\n      });\n    }\n\n    return showAlert({\n      title: `${status}`,\n      message: data.error || statusText,\n    });\n  }\n\n  console.error(error);\n\n  return showAlert({\n    title: messages.unexpectedTitle,\n    message: messages.unexpectedMessage,\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_RESULT || !properErrorOnNonWritableLength();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return setArrayLength(O, len + argCount);\n  }\n});\n","import { fromJS } from 'immutable';\n\nimport { searchHistory } from 'flavours/glitch/settings';\n\nimport api from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatuses } from './importer';\n\nexport const SEARCH_CHANGE = 'SEARCH_CHANGE';\nexport const SEARCH_CLEAR  = 'SEARCH_CLEAR';\nexport const SEARCH_SHOW   = 'SEARCH_SHOW';\n\nexport const SEARCH_FETCH_REQUEST = 'SEARCH_FETCH_REQUEST';\nexport const SEARCH_FETCH_SUCCESS = 'SEARCH_FETCH_SUCCESS';\nexport const SEARCH_FETCH_FAIL    = 'SEARCH_FETCH_FAIL';\n\nexport const SEARCH_EXPAND_REQUEST = 'SEARCH_EXPAND_REQUEST';\nexport const SEARCH_EXPAND_SUCCESS = 'SEARCH_EXPAND_SUCCESS';\nexport const SEARCH_EXPAND_FAIL    = 'SEARCH_EXPAND_FAIL';\n\nexport const SEARCH_HISTORY_UPDATE  = 'SEARCH_HISTORY_UPDATE';\n\nexport function changeSearch(value) {\n  return {\n    type: SEARCH_CHANGE,\n    value,\n  };\n}\n\nexport function clearSearch() {\n  return {\n    type: SEARCH_CLEAR,\n  };\n}\n\nexport function submitSearch(type) {\n  return (dispatch, getState) => {\n    const value    = getState().getIn(['search', 'value']);\n    const signedIn = !!getState().getIn(['meta', 'me']);\n\n    if (value.length === 0) {\n      dispatch(fetchSearchSuccess({ accounts: [], statuses: [], hashtags: [] }, '', type));\n      return;\n    }\n\n    dispatch(fetchSearchRequest(type));\n\n    api().get('/api/v2/search', {\n      params: {\n        q: value,\n        resolve: signedIn,\n        limit: 11,\n        type,\n      },\n    }).then(response => {\n      if (response.data.accounts) {\n        dispatch(importFetchedAccounts(response.data.accounts));\n      }\n\n      if (response.data.statuses) {\n        dispatch(importFetchedStatuses(response.data.statuses));\n      }\n\n      dispatch(fetchSearchSuccess(response.data, value, type));\n      dispatch(fetchRelationships(response.data.accounts.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchSearchFail(error));\n    });\n  };\n}\n\nexport function fetchSearchRequest(searchType) {\n  return {\n    type: SEARCH_FETCH_REQUEST,\n    searchType,\n  };\n}\n\nexport function fetchSearchSuccess(results, searchTerm, searchType) {\n  return {\n    type: SEARCH_FETCH_SUCCESS,\n    results,\n    searchType,\n    searchTerm,\n  };\n}\n\nexport function fetchSearchFail(error) {\n  return {\n    type: SEARCH_FETCH_FAIL,\n    error,\n  };\n}\n\nexport const expandSearch = type => (dispatch, getState) => {\n  const value  = getState().getIn(['search', 'value']);\n  const offset = getState().getIn(['search', 'results', type]).size - 1;\n\n  dispatch(expandSearchRequest(type));\n\n  api().get('/api/v2/search', {\n    params: {\n      q: value,\n      type,\n      offset,\n      limit: 11,\n    },\n  }).then(({ data }) => {\n    if (data.accounts) {\n      dispatch(importFetchedAccounts(data.accounts));\n    }\n\n    if (data.statuses) {\n      dispatch(importFetchedStatuses(data.statuses));\n    }\n\n    dispatch(expandSearchSuccess(data, value, type));\n    dispatch(fetchRelationships(data.accounts.map(item => item.id)));\n  }).catch(error => {\n    dispatch(expandSearchFail(error));\n  });\n};\n\nexport const expandSearchRequest = (searchType) => ({\n  type: SEARCH_EXPAND_REQUEST,\n  searchType,\n});\n\nexport const expandSearchSuccess = (results, searchTerm, searchType) => ({\n  type: SEARCH_EXPAND_SUCCESS,\n  results,\n  searchTerm,\n  searchType,\n});\n\nexport const expandSearchFail = error => ({\n  type: SEARCH_EXPAND_FAIL,\n  error,\n});\n\nexport const showSearch = () => ({\n  type: SEARCH_SHOW,\n});\n\nexport const openURL = (value, history, onFailure) => (dispatch, getState) => {\n  const signedIn = !!getState().getIn(['meta', 'me']);\n\n  if (!signedIn) {\n    if (onFailure) {\n      onFailure();\n    }\n\n    return;\n  }\n\n  dispatch(fetchSearchRequest());\n\n  api().get('/api/v2/search', { params: { q: value, resolve: true } }).then(response => {\n    if (response.data.accounts?.length > 0) {\n      dispatch(importFetchedAccounts(response.data.accounts));\n      history.push(`/@${response.data.accounts[0].acct}`);\n    } else if (response.data.statuses?.length > 0) {\n      dispatch(importFetchedStatuses(response.data.statuses));\n      history.push(`/@${response.data.statuses[0].account.acct}/${response.data.statuses[0].id}`);\n    } else if (onFailure) {\n      onFailure();\n    }\n\n    dispatch(fetchSearchSuccess(response.data, value));\n  }).catch(err => {\n    dispatch(fetchSearchFail(err));\n\n    if (onFailure) {\n      onFailure();\n    }\n  });\n};\n\nexport const clickSearchResult = (q, type) => (dispatch, getState) => {\n  const previous = getState().getIn(['search', 'recent']);\n\n  if (previous.some(x => x.get('q') === q && x.get('type') === type)) {\n    return;\n  }\n\n  const me = getState().getIn(['meta', 'me']);\n  const current = previous.add(fromJS({ type, q })).takeLast(4);\n\n  searchHistory.set(me, current.toJS());\n  dispatch(updateSearchHistory(current));\n};\n\nexport const forgetSearchResult = q => (dispatch, getState) => {\n  const previous = getState().getIn(['search', 'recent']);\n  const me = getState().getIn(['meta', 'me']);\n  const current = previous.filterNot(result => result.get('q') === q);\n\n  searchHistory.set(me, current.toJS());\n  dispatch(updateSearchHistory(current));\n};\n\nexport const updateSearchHistory = recent => ({\n  type: SEARCH_HISTORY_UPDATE,\n  recent,\n});\n\nexport const hydrateSearch = () => (dispatch, getState) => {\n  const me = getState().getIn(['meta', 'me']);\n  const history = searchHistory.get(me);\n\n  if (history !== null) {\n    dispatch(updateSearchHistory(history));\n  }\n};\n","import type { Action, ActionCreator, StoreEnhancer } from 'redux';\nimport { compose } from 'redux';\n\n/**\n * @public\n */\nexport interface DevToolsEnhancerOptions {\n  /**\n   * the instance name to be showed on the monitor page. Default value is `document.title`.\n   * If not specified and there's no document title, it will consist of `tabId` and `instanceId`.\n   */\n  name?: string;\n  /**\n   * action creators functions to be available in the Dispatcher.\n   */\n  actionCreators?: ActionCreator<any>[] | {\n    [key: string]: ActionCreator<any>;\n  };\n  /**\n   * if more than one action is dispatched in the indicated interval, all new actions will be collected and sent at once.\n   * It is the joint between performance and speed. When set to `0`, all actions will be sent instantly.\n   * Set it to a higher value when experiencing perf issues (also `maxAge` to a lower value).\n   *\n   * @default 500 ms.\n   */\n  latency?: number;\n  /**\n   * (> 1) - maximum allowed actions to be stored in the history tree. The oldest actions are removed once maxAge is reached. It's critical for performance.\n   *\n   * @default 50\n   */\n  maxAge?: number;\n  /**\n   * Customizes how actions and state are serialized and deserialized. Can be a boolean or object. If given a boolean, the behavior is the same as if you\n   * were to pass an object and specify `options` as a boolean. Giving an object allows fine-grained customization using the `replacer` and `reviver`\n   * functions.\n   */\n  serialize?: boolean | {\n    /**\n     * - `undefined` - will use regular `JSON.stringify` to send data (it's the fast mode).\n     * - `false` - will handle also circular references.\n     * - `true` - will handle also date, regex, undefined, error objects, symbols, maps, sets and functions.\n     * - object, which contains `date`, `regex`, `undefined`, `error`, `symbol`, `map`, `set` and `function` keys.\n     *   For each of them you can indicate if to include (by setting as `true`).\n     *   For `function` key you can also specify a custom function which handles serialization.\n     *   See [`jsan`](https://github.com/kolodny/jsan) for more details.\n     */\n    options?: undefined | boolean | {\n      date?: true;\n      regex?: true;\n      undefined?: true;\n      error?: true;\n      symbol?: true;\n      map?: true;\n      set?: true;\n      function?: true | ((fn: (...args: any[]) => any) => string);\n    };\n    /**\n     * [JSON replacer function](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#The_replacer_parameter) used for both actions and states stringify.\n     * In addition, you can specify a data type by adding a [`__serializedType__`](https://github.com/zalmoxisus/remotedev-serialize/blob/master/helpers/index.js#L4)\n     * key. So you can deserialize it back while importing or persisting data.\n     * Moreover, it will also [show a nice preview showing the provided custom type](https://cloud.githubusercontent.com/assets/7957859/21814330/a17d556a-d761-11e6-85ef-159dd12f36c5.png):\n     */\n    replacer?: (key: string, value: unknown) => any;\n    /**\n     * [JSON `reviver` function](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse#Using_the_reviver_parameter)\n     * used for parsing the imported actions and states. See [`remotedev-serialize`](https://github.com/zalmoxisus/remotedev-serialize/blob/master/immutable/serialize.js#L8-L41)\n     * as an example on how to serialize special data types and get them back.\n     */\n    reviver?: (key: string, value: unknown) => any;\n    /**\n     * Automatically serialize/deserialize immutablejs via [remotedev-serialize](https://github.com/zalmoxisus/remotedev-serialize).\n     * Just pass the Immutable library. It will support all ImmutableJS structures. You can even export them into a file and get them back.\n     * The only exception is `Record` class, for which you should pass this in addition the references to your classes in `refs`.\n     */\n    immutable?: any;\n    /**\n     * ImmutableJS `Record` classes used to make possible restore its instances back when importing, persisting...\n     */\n    refs?: any;\n  };\n  /**\n   * function which takes `action` object and id number as arguments, and should return `action` object back.\n   */\n  actionSanitizer?: <A extends Action>(action: A, id: number) => A;\n  /**\n   * function which takes `state` object and index as arguments, and should return `state` object back.\n   */\n  stateSanitizer?: <S>(state: S, index: number) => S;\n  /**\n   * *string or array of strings as regex* - actions types to be hidden / shown in the monitors (while passed to the reducers).\n   * If `actionsAllowlist` specified, `actionsDenylist` is ignored.\n   */\n  actionsDenylist?: string | string[];\n  /**\n   * *string or array of strings as regex* - actions types to be hidden / shown in the monitors (while passed to the reducers).\n   * If `actionsAllowlist` specified, `actionsDenylist` is ignored.\n   */\n  actionsAllowlist?: string | string[];\n  /**\n   * called for every action before sending, takes `state` and `action` object, and returns `true` in case it allows sending the current data to the monitor.\n   * Use it as a more advanced version of `actionsDenylist`/`actionsAllowlist` parameters.\n   */\n  predicate?: <S, A extends Action>(state: S, action: A) => boolean;\n  /**\n   * if specified as `false`, it will not record the changes till clicking on `Start recording` button.\n   * Available only for Redux enhancer, for others use `autoPause`.\n   *\n   * @default true\n   */\n  shouldRecordChanges?: boolean;\n  /**\n   * if specified, whenever clicking on `Pause recording` button and there are actions in the history log, will add this action type.\n   * If not specified, will commit when paused. Available only for Redux enhancer.\n   *\n   * @default \"@@PAUSED\"\"\n   */\n  pauseActionType?: string;\n  /**\n   * auto pauses when the extension’s window is not opened, and so has zero impact on your app when not in use.\n   * Not available for Redux enhancer (as it already does it but storing the data to be sent).\n   *\n   * @default false\n   */\n  autoPause?: boolean;\n  /**\n   * if specified as `true`, it will not allow any non-monitor actions to be dispatched till clicking on `Unlock changes` button.\n   * Available only for Redux enhancer.\n   *\n   * @default false\n   */\n  shouldStartLocked?: boolean;\n  /**\n   * if set to `false`, will not recompute the states on hot reloading (or on replacing the reducers). Available only for Redux enhancer.\n   *\n   * @default true\n   */\n  shouldHotReload?: boolean;\n  /**\n   * if specified as `true`, whenever there's an exception in reducers, the monitors will show the error message, and next actions will not be dispatched.\n   *\n   * @default false\n   */\n  shouldCatchErrors?: boolean;\n  /**\n   * If you want to restrict the extension, specify the features you allow.\n   * If not specified, all of the features are enabled. When set as an object, only those included as `true` will be allowed.\n   * Note that except `true`/`false`, `import` and `export` can be set as `custom` (which is by default for Redux enhancer), meaning that the importing/exporting occurs on the client side.\n   * Otherwise, you'll get/set the data right from the monitor part.\n   */\n  features?: {\n    /**\n     * start/pause recording of dispatched actions\n     */\n    pause?: boolean;\n    /**\n     * lock/unlock dispatching actions and side effects\n     */\n    lock?: boolean;\n    /**\n     * persist states on page reloading\n     */\n    persist?: boolean;\n    /**\n     * export history of actions in a file\n     */\n    export?: boolean | 'custom';\n    /**\n     * import history of actions from a file\n     */\n    import?: boolean | 'custom';\n    /**\n     * jump back and forth (time travelling)\n     */\n    jump?: boolean;\n    /**\n     * skip (cancel) actions\n     */\n    skip?: boolean;\n    /**\n     * drag and drop actions in the history list\n     */\n    reorder?: boolean;\n    /**\n     * dispatch custom actions or action creators\n     */\n    dispatch?: boolean;\n    /**\n     * generate tests for the selected actions\n     */\n    test?: boolean;\n  };\n  /**\n   * Set to true or a stacktrace-returning function to record call stack traces for dispatched actions.\n   * Defaults to false.\n   */\n  trace?: boolean | (<A extends Action>(action: A) => string);\n  /**\n   * The maximum number of stack trace entries to record per action. Defaults to 10.\n   */\n  traceLimit?: number;\n}\ntype Compose = typeof compose;\ninterface ComposeWithDevTools {\n  (options: DevToolsEnhancerOptions): Compose;\n  <StoreExt extends {}>(...funcs: StoreEnhancer<StoreExt>[]): StoreEnhancer<StoreExt>;\n}\n\n/**\n * @public\n */\nexport const composeWithDevTools: ComposeWithDevTools = typeof window !== 'undefined' && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ : function () {\n  if (arguments.length === 0) return undefined;\n  if (typeof arguments[0] === 'object') return compose;\n  return compose.apply(null, ((arguments as any) as Function[]));\n};\n\n/**\n * @public\n */\nexport const devToolsEnhancer: {\n  (options: DevToolsEnhancerOptions): StoreEnhancer<any>;\n} = typeof window !== 'undefined' && (window as any).__REDUX_DEVTOOLS_EXTENSION__ ? (window as any).__REDUX_DEVTOOLS_EXTENSION__ : function () {\n  return function (noop) {\n    return noop;\n  };\n};","import { current, isDraft } from 'immer';\nimport { createSelectorCreator, weakMapMemoize } from 'reselect';\nexport const createDraftSafeSelectorCreator: typeof createSelectorCreator = (...args: unknown[]) => {\n  const createSelector = (createSelectorCreator as any)(...args);\n  const createDraftSafeSelector = Object.assign((...args: unknown[]) => {\n    const selector = createSelector(...args);\n    const wrappedSelector = (value: unknown, ...rest: unknown[]) => selector(isDraft(value) ? current(value) : value, ...rest);\n    Object.assign(wrappedSelector, selector);\n    return (wrappedSelector as any);\n  }, {\n    withTypes: () => createDraftSafeSelector\n  });\n  return createDraftSafeSelector;\n};\n\n/**\n * \"Draft-Safe\" version of `reselect`'s `createSelector`:\n * If an `immer`-drafted object is passed into the resulting selector's first argument,\n * the selector will act on the current draft value, instead of returning a cached value\n * that might be possibly outdated if the draft has been modified since.\n * @public\n */\nexport const createDraftSafeSelector = createDraftSafeSelectorCreator(weakMapMemoize);","import type { Middleware, StoreEnhancer } from 'redux';\nimport type { Tuple } from './utils';\nexport function safeAssign<T extends object>(target: T, ...args: Array<Partial<NoInfer<T>>>) {\n  Object.assign(target, ...args);\n}\n\n/**\n * return True if T is `any`, otherwise return False\n * taken from https://github.com/joonhocho/tsdef\n *\n * @internal\n */\nexport type IsAny<T, True, False = never> =\n// test if we are going the left AND right path in the condition\ntrue | false extends (T extends never ? true : false) ? True : False;\nexport type CastAny<T, CastTo> = IsAny<T, CastTo, T>;\n\n/**\n * return True if T is `unknown`, otherwise return False\n * taken from https://github.com/joonhocho/tsdef\n *\n * @internal\n */\nexport type IsUnknown<T, True, False = never> = unknown extends T ? IsAny<T, False, True> : False;\nexport type FallbackIfUnknown<T, Fallback> = IsUnknown<T, Fallback, T>;\n\n/**\n * @internal\n */\nexport type IfMaybeUndefined<P, True, False> = [undefined] extends [P] ? True : False;\n\n/**\n * @internal\n */\nexport type IfVoid<P, True, False> = [void] extends [P] ? True : False;\n\n/**\n * @internal\n */\nexport type IsEmptyObj<T, True, False = never> = T extends any ? keyof T extends never ? IsUnknown<T, False, IfMaybeUndefined<T, False, IfVoid<T, False, True>>> : False : never;\n\n/**\n * returns True if TS version is above 3.5, False if below.\n * uses feature detection to detect TS version >= 3.5\n * * versions below 3.5 will return `{}` for unresolvable interference\n * * versions above will return `unknown`\n *\n * @internal\n */\nexport type AtLeastTS35<True, False> = [True, False][IsUnknown<ReturnType<<T>() => T>, 0, 1>];\n\n/**\n * @internal\n */\nexport type IsUnknownOrNonInferrable<T, True, False> = AtLeastTS35<IsUnknown<T, True, False>, IsEmptyObj<T, True, IsUnknown<T, True, False>>>;\n\n/**\n * Convert a Union type `(A|B)` to an intersection type `(A&B)`\n */\nexport type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never;\n\n// Appears to have a convenient side effect of ignoring `never` even if that's not what you specified\nexport type ExcludeFromTuple<T, E, Acc extends unknown[] = []> = T extends [infer Head, ...infer Tail] ? ExcludeFromTuple<Tail, E, [...Acc, ...([Head] extends [E] ? [] : [Head])]> : Acc;\ntype ExtractDispatchFromMiddlewareTuple<MiddlewareTuple extends readonly any[], Acc extends {}> = MiddlewareTuple extends [infer Head, ...infer Tail] ? ExtractDispatchFromMiddlewareTuple<Tail, Acc & (Head extends Middleware<infer D> ? IsAny<D, {}, D> : {})> : Acc;\nexport type ExtractDispatchExtensions<M> = M extends Tuple<infer MiddlewareTuple> ? ExtractDispatchFromMiddlewareTuple<MiddlewareTuple, {}> : M extends ReadonlyArray<Middleware> ? ExtractDispatchFromMiddlewareTuple<[...M], {}> : never;\ntype ExtractStoreExtensionsFromEnhancerTuple<EnhancerTuple extends readonly any[], Acc extends {}> = EnhancerTuple extends [infer Head, ...infer Tail] ? ExtractStoreExtensionsFromEnhancerTuple<Tail, Acc & (Head extends StoreEnhancer<infer Ext> ? IsAny<Ext, {}, Ext> : {})> : Acc;\nexport type ExtractStoreExtensions<E> = E extends Tuple<infer EnhancerTuple> ? ExtractStoreExtensionsFromEnhancerTuple<EnhancerTuple, {}> : E extends ReadonlyArray<StoreEnhancer> ? UnionToIntersection<E[number] extends StoreEnhancer<infer Ext> ? Ext extends {} ? IsAny<Ext, {}, Ext> : {} : {}> : never;\ntype ExtractStateExtensionsFromEnhancerTuple<EnhancerTuple extends readonly any[], Acc extends {}> = EnhancerTuple extends [infer Head, ...infer Tail] ? ExtractStateExtensionsFromEnhancerTuple<Tail, Acc & (Head extends StoreEnhancer<any, infer StateExt> ? IsAny<StateExt, {}, StateExt> : {})> : Acc;\nexport type ExtractStateExtensions<E> = E extends Tuple<infer EnhancerTuple> ? ExtractStateExtensionsFromEnhancerTuple<EnhancerTuple, {}> : E extends ReadonlyArray<StoreEnhancer> ? UnionToIntersection<E[number] extends StoreEnhancer<any, infer StateExt> ? StateExt extends {} ? IsAny<StateExt, {}, StateExt> : {} : {}> : never;\n\n/**\n * Helper type. Passes T out again, but boxes it in a way that it cannot\n * \"widen\" the type by accident if it is a generic that should be inferred\n * from elsewhere.\n *\n * @internal\n */\nexport type NoInfer<T> = [T][T extends any ? 0 : never];\nexport type NonUndefined<T> = T extends undefined ? never : T;\nexport type Omit<T, K extends keyof any> = Pick<T, Exclude<keyof T, K>>;\nexport type WithRequiredProp<T, K extends keyof T> = Omit<T, K> & Required<Pick<T, K>>;\nexport type WithOptionalProp<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\nexport interface TypeGuard<T> {\n  (value: any): value is T;\n}\nexport interface HasMatchFunction<T> {\n  match: TypeGuard<T>;\n}\nexport const hasMatchFunction = <T,>(v: Matcher<T>): v is HasMatchFunction<T> => {\n  return v && typeof (v as HasMatchFunction<T>).match === 'function';\n};\n\n/** @public */\nexport type Matcher<T> = HasMatchFunction<T> | TypeGuard<T>;\n\n/** @public */\nexport type ActionFromMatcher<M extends Matcher<any>> = M extends Matcher<infer T> ? T : never;\nexport type Id<T> = { [K in keyof T]: T[K] } & {};\nexport type Tail<T extends any[]> = T extends [any, ...infer Tail] ? Tail : never;\nexport type UnknownIfNonSpecific<T> = {} extends T ? unknown : T;\n\n/**\n * A Promise that will never reject.\n * @see https://github.com/reduxjs/redux-toolkit/issues/4101\n */\nexport type SafePromise<T> = Promise<T> & {\n  __linterBrands: 'SafePromise';\n};\n\n/**\n * Properly wraps a Promise as a {@link SafePromise} with .catch(fallback).\n */\nexport function asSafePromise<Resolved, Rejected>(promise: Promise<Resolved>, fallback: (error: unknown) => Rejected) {\n  return (promise.catch(fallback) as SafePromise<Resolved | Rejected>);\n}","import { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport { isAction } from 'redux';\nimport type { IsUnknownOrNonInferrable, IfMaybeUndefined, IfVoid, IsAny } from './tsHelpers';\nimport { hasMatchFunction } from './tsHelpers';\n\n/**\n * An action with a string type and an associated payload. This is the\n * type of action returned by `createAction()` action creators.\n *\n * @template P The type of the action's payload.\n * @template T the type used for the action type.\n * @template M The type of the action's meta (optional)\n * @template E The type of the action's error (optional)\n *\n * @public\n */\nexport type PayloadAction<P = void, T extends string = string, M = never, E = never> = {\n  payload: P;\n  type: T;\n} & ([M] extends [never] ? {} : {\n  meta: M;\n}) & ([E] extends [never] ? {} : {\n  error: E;\n});\n\n/**\n * A \"prepare\" method to be used as the second parameter of `createAction`.\n * Takes any number of arguments and returns a Flux Standard Action without\n * type (will be added later) that *must* contain a payload (might be undefined).\n *\n * @public\n */\nexport type PrepareAction<P> = ((...args: any[]) => {\n  payload: P;\n}) | ((...args: any[]) => {\n  payload: P;\n  meta: any;\n}) | ((...args: any[]) => {\n  payload: P;\n  error: any;\n}) | ((...args: any[]) => {\n  payload: P;\n  meta: any;\n  error: any;\n});\n\n/**\n * Internal version of `ActionCreatorWithPreparedPayload`. Not to be used externally.\n *\n * @internal\n */\nexport type _ActionCreatorWithPreparedPayload<PA extends PrepareAction<any> | void, T extends string = string> = PA extends PrepareAction<infer P> ? ActionCreatorWithPreparedPayload<Parameters<PA>, P, T, ReturnType<PA> extends {\n  error: infer E;\n} ? E : never, ReturnType<PA> extends {\n  meta: infer M;\n} ? M : never> : void;\n\n/**\n * Basic type for all action creators.\n *\n * @inheritdoc {redux#ActionCreator}\n */\nexport interface BaseActionCreator<P, T extends string, M = never, E = never> {\n  type: T;\n  match: (action: unknown) => action is PayloadAction<P, T, M, E>;\n}\n\n/**\n * An action creator that takes multiple arguments that are passed\n * to a `PrepareAction` method to create the final Action.\n * @typeParam Args arguments for the action creator function\n * @typeParam P `payload` type\n * @typeParam T `type` name\n * @typeParam E optional `error` type\n * @typeParam M optional `meta` type\n *\n * @inheritdoc {redux#ActionCreator}\n *\n * @public\n */\nexport interface ActionCreatorWithPreparedPayload<Args extends unknown[], P, T extends string = string, E = never, M = never> extends BaseActionCreator<P, T, M, E> {\n  /**\n   * Calling this {@link redux#ActionCreator} with `Args` will return\n   * an Action with a payload of type `P` and (depending on the `PrepareAction`\n   * method used) a `meta`- and `error` property of types `M` and `E` respectively.\n   */\n  (...args: Args): PayloadAction<P, T, M, E>;\n}\n\n/**\n * An action creator of type `T` that takes an optional payload of type `P`.\n *\n * @inheritdoc {redux#ActionCreator}\n *\n * @public\n */\nexport interface ActionCreatorWithOptionalPayload<P, T extends string = string> extends BaseActionCreator<P, T> {\n  /**\n   * Calling this {@link redux#ActionCreator} with an argument will\n   * return a {@link PayloadAction} of type `T` with a payload of `P`.\n   * Calling it without an argument will return a PayloadAction with a payload of `undefined`.\n   */\n  (payload?: P): PayloadAction<P, T>;\n}\n\n/**\n * An action creator of type `T` that takes no payload.\n *\n * @inheritdoc {redux#ActionCreator}\n *\n * @public\n */\nexport interface ActionCreatorWithoutPayload<T extends string = string> extends BaseActionCreator<undefined, T> {\n  /**\n   * Calling this {@link redux#ActionCreator} will\n   * return a {@link PayloadAction} of type `T` with a payload of `undefined`\n   */\n  (noArgument: void): PayloadAction<undefined, T>;\n}\n\n/**\n * An action creator of type `T` that requires a payload of type P.\n *\n * @inheritdoc {redux#ActionCreator}\n *\n * @public\n */\nexport interface ActionCreatorWithPayload<P, T extends string = string> extends BaseActionCreator<P, T> {\n  /**\n   * Calling this {@link redux#ActionCreator} with an argument will\n   * return a {@link PayloadAction} of type `T` with a payload of `P`\n   */\n  (payload: P): PayloadAction<P, T>;\n}\n\n/**\n * An action creator of type `T` whose `payload` type could not be inferred. Accepts everything as `payload`.\n *\n * @inheritdoc {redux#ActionCreator}\n *\n * @public\n */\nexport interface ActionCreatorWithNonInferrablePayload<T extends string = string> extends BaseActionCreator<unknown, T> {\n  /**\n   * Calling this {@link redux#ActionCreator} with an argument will\n   * return a {@link PayloadAction} of type `T` with a payload\n   * of exactly the type of the argument.\n   */\n  <PT extends unknown>(payload: PT): PayloadAction<PT, T>;\n}\n\n/**\n * An action creator that produces actions with a `payload` attribute.\n *\n * @typeParam P the `payload` type\n * @typeParam T the `type` of the resulting action\n * @typeParam PA if the resulting action is preprocessed by a `prepare` method, the signature of said method.\n *\n * @public\n */\nexport type PayloadActionCreator<P = void, T extends string = string, PA extends PrepareAction<P> | void = void> = IfPrepareActionMethodProvided<PA, _ActionCreatorWithPreparedPayload<PA, T>,\n// else\nIsAny<P, ActionCreatorWithPayload<any, T>, IsUnknownOrNonInferrable<P, ActionCreatorWithNonInferrablePayload<T>,\n// else\nIfVoid<P, ActionCreatorWithoutPayload<T>,\n// else\nIfMaybeUndefined<P, ActionCreatorWithOptionalPayload<P, T>,\n// else\nActionCreatorWithPayload<P, T>>>>>>;\n\n/**\n * A utility function to create an action creator for the given action type\n * string. The action creator accepts a single argument, which will be included\n * in the action object as a field called payload. The action creator function\n * will also have its toString() overridden so that it returns the action type.\n *\n * @param type The action type to use for created actions.\n * @param prepare (optional) a method that takes any number of arguments and returns { payload } or { payload, meta }.\n *                If this is given, the resulting action creator will pass its arguments to this method to calculate payload & meta.\n *\n * @public\n */\nexport function createAction<P = void, T extends string = string>(type: T): PayloadActionCreator<P, T>;\n\n/**\n * A utility function to create an action creator for the given action type\n * string. The action creator accepts a single argument, which will be included\n * in the action object as a field called payload. The action creator function\n * will also have its toString() overridden so that it returns the action type.\n *\n * @param type The action type to use for created actions.\n * @param prepare (optional) a method that takes any number of arguments and returns { payload } or { payload, meta }.\n *                If this is given, the resulting action creator will pass its arguments to this method to calculate payload & meta.\n *\n * @public\n */\nexport function createAction<PA extends PrepareAction<any>, T extends string = string>(type: T, prepareAction: PA): PayloadActionCreator<ReturnType<PA>['payload'], T, PA>;\nexport function createAction(type: string, prepareAction?: Function): any {\n  function actionCreator(...args: any[]) {\n    if (prepareAction) {\n      let prepared = prepareAction(...args);\n      if (!prepared) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(0) : 'prepareAction did not return an object');\n      }\n      return {\n        type,\n        payload: prepared.payload,\n        ...('meta' in prepared && {\n          meta: prepared.meta\n        }),\n        ...('error' in prepared && {\n          error: prepared.error\n        })\n      };\n    }\n    return {\n      type,\n      payload: args[0]\n    };\n  }\n  actionCreator.toString = () => `${type}`;\n  actionCreator.type = type;\n  actionCreator.match = (action: unknown): action is PayloadAction => isAction(action) && action.type === type;\n  return actionCreator;\n}\n\n/**\n * Returns true if value is an RTK-like action creator, with a static type property and match method.\n */\nexport function isActionCreator(action: unknown): action is BaseActionCreator<unknown, string> & Function {\n  return typeof action === 'function' && 'type' in action &&\n  // hasMatchFunction only wants Matchers but I don't see the point in rewriting it\n  hasMatchFunction((action as any));\n}\n\n/**\n * Returns true if value is an action with a string type and valid Flux Standard Action keys.\n */\nexport function isFSA(action: unknown): action is {\n  type: string;\n  payload?: unknown;\n  error?: unknown;\n  meta?: unknown;\n} {\n  return isAction(action) && Object.keys(action).every(isValidKey);\n}\nfunction isValidKey(key: string) {\n  return ['type', 'payload', 'error', 'meta'].indexOf(key) > -1;\n}\n\n// helper types for more readable typings\n\ntype IfPrepareActionMethodProvided<PA extends PrepareAction<any> | void, True, False> = PA extends (...args: any[]) => any ? True : False;","import { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport { produce as createNextState, isDraftable } from 'immer';\nexport function getTimeMeasureUtils(maxDelay: number, fnName: string) {\n  let elapsed = 0;\n  return {\n    measureTime<T>(fn: () => T): T {\n      const started = Date.now();\n      try {\n        return fn();\n      } finally {\n        const finished = Date.now();\n        elapsed += finished - started;\n      }\n    },\n    warnIfExceeded() {\n      if (elapsed > maxDelay) {\n        console.warn(`${fnName} took ${elapsed}ms, which is more than the warning threshold of ${maxDelay}ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.`);\n      }\n    }\n  };\n}\nexport function delay(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\nexport function find<T>(iterable: Iterable<T>, comparator: (item: T) => boolean): T | undefined {\n  for (const entry of iterable) {\n    if (comparator(entry)) {\n      return entry;\n    }\n  }\n  return undefined;\n}\nexport class Tuple<Items extends ReadonlyArray<unknown> = []> extends Array<Items[number]> {\n  constructor(length: number);\n  constructor(...items: Items);\n  constructor(...items: any[]) {\n    super(...items);\n    Object.setPrototypeOf(this, Tuple.prototype);\n  }\n  static get [Symbol.species]() {\n    return (Tuple as any);\n  }\n  concat<AdditionalItems extends ReadonlyArray<unknown>>(items: Tuple<AdditionalItems>): Tuple<[...Items, ...AdditionalItems]>;\n  concat<AdditionalItems extends ReadonlyArray<unknown>>(items: AdditionalItems): Tuple<[...Items, ...AdditionalItems]>;\n  concat<AdditionalItems extends ReadonlyArray<unknown>>(...items: AdditionalItems): Tuple<[...Items, ...AdditionalItems]>;\n  concat(...arr: any[]) {\n    return super.concat.apply(this, arr);\n  }\n  prepend<AdditionalItems extends ReadonlyArray<unknown>>(items: Tuple<AdditionalItems>): Tuple<[...AdditionalItems, ...Items]>;\n  prepend<AdditionalItems extends ReadonlyArray<unknown>>(items: AdditionalItems): Tuple<[...AdditionalItems, ...Items]>;\n  prepend<AdditionalItems extends ReadonlyArray<unknown>>(...items: AdditionalItems): Tuple<[...AdditionalItems, ...Items]>;\n  prepend(...arr: any[]) {\n    if (arr.length === 1 && Array.isArray(arr[0])) {\n      return new Tuple(...arr[0].concat(this));\n    }\n    return new Tuple(...arr.concat(this));\n  }\n}\nexport function freezeDraftable<T>(val: T) {\n  return isDraftable(val) ? createNextState(val, () => {}) : val;\n}\ninterface WeakMapEmplaceHandler<K extends object, V> {\n  /**\n   * Will be called to get value, if no value is currently in map.\n   */\n  insert?(key: K, map: WeakMap<K, V>): V;\n  /**\n   * Will be called to update a value, if one exists already.\n   */\n  update?(previous: V, key: K, map: WeakMap<K, V>): V;\n}\ninterface MapEmplaceHandler<K, V> {\n  /**\n   * Will be called to get value, if no value is currently in map.\n   */\n  insert?(key: K, map: Map<K, V>): V;\n  /**\n   * Will be called to update a value, if one exists already.\n   */\n  update?(previous: V, key: K, map: Map<K, V>): V;\n}\nexport function emplace<K, V>(map: Map<K, V>, key: K, handler: MapEmplaceHandler<K, V>): V;\nexport function emplace<K extends object, V>(map: WeakMap<K, V>, key: K, handler: WeakMapEmplaceHandler<K, V>): V;\n/**\n * Allow inserting a new value, or updating an existing one\n * @throws if called for a key with no current value and no `insert` handler is provided\n * @returns current value in map (after insertion/updating)\n * ```ts\n * // return current value if already in map, otherwise initialise to 0 and return that\n * const num = emplace(map, key, {\n *   insert: () => 0\n * })\n *\n * // increase current value by one if already in map, otherwise initialise to 0\n * const num = emplace(map, key, {\n *   update: (n) => n + 1,\n *   insert: () => 0,\n * })\n *\n * // only update if value's already in the map - and increase it by one\n * if (map.has(key)) {\n *   const num = emplace(map, key, {\n *     update: (n) => n + 1,\n *   })\n * }\n * ```\n *\n * @remarks\n * Based on https://github.com/tc39/proposal-upsert currently in Stage 2 - maybe in a few years we'll be able to replace this with direct method calls\n */\nexport function emplace<K extends object, V>(map: WeakMap<K, V>, key: K, handler: WeakMapEmplaceHandler<K, V>): V {\n  if (map.has(key)) {\n    let value = (map.get(key) as V);\n    if (handler.update) {\n      value = handler.update(value, key, map);\n      map.set(key, value);\n    }\n    return value;\n  }\n  if (!handler.insert) throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(10) : 'No insert provided for key not already in map');\n  const inserted = handler.insert(key, map);\n  map.set(key, inserted);\n  return inserted;\n}","import type { Middleware, UnknownAction } from 'redux';\nimport type { ThunkMiddleware } from 'redux-thunk';\nimport { thunk as thunkMiddleware, withExtraArgument } from 'redux-thunk';\nimport type { ActionCreatorInvariantMiddlewareOptions } from './actionCreatorInvariantMiddleware';\nimport { createActionCreatorInvariantMiddleware } from './actionCreatorInvariantMiddleware';\nimport type { ImmutableStateInvariantMiddlewareOptions } from './immutableStateInvariantMiddleware';\n/* PROD_START_REMOVE_UMD */\nimport { createImmutableStateInvariantMiddleware } from './immutableStateInvariantMiddleware';\n/* PROD_STOP_REMOVE_UMD */\n\nimport type { SerializableStateInvariantMiddlewareOptions } from './serializableStateInvariantMiddleware';\nimport { createSerializableStateInvariantMiddleware } from './serializableStateInvariantMiddleware';\nimport type { ExcludeFromTuple } from './tsHelpers';\nimport { Tuple } from './utils';\nfunction isBoolean(x: any): x is boolean {\n  return typeof x === 'boolean';\n}\ninterface ThunkOptions<E = any> {\n  extraArgument: E;\n}\ninterface GetDefaultMiddlewareOptions {\n  thunk?: boolean | ThunkOptions;\n  immutableCheck?: boolean | ImmutableStateInvariantMiddlewareOptions;\n  serializableCheck?: boolean | SerializableStateInvariantMiddlewareOptions;\n  actionCreatorCheck?: boolean | ActionCreatorInvariantMiddlewareOptions;\n}\nexport type ThunkMiddlewareFor<S, O extends GetDefaultMiddlewareOptions = {}> = O extends {\n  thunk: false;\n} ? never : O extends {\n  thunk: {\n    extraArgument: infer E;\n  };\n} ? ThunkMiddleware<S, UnknownAction, E> : ThunkMiddleware<S, UnknownAction>;\nexport type GetDefaultMiddleware<S = any> = <O extends GetDefaultMiddlewareOptions = {\n  thunk: true;\n  immutableCheck: true;\n  serializableCheck: true;\n  actionCreatorCheck: true;\n}>(options?: O) => Tuple<ExcludeFromTuple<[ThunkMiddlewareFor<S, O>], never>>;\nexport const buildGetDefaultMiddleware = <S = any,>(): GetDefaultMiddleware<S> => function getDefaultMiddleware(options) {\n  const {\n    thunk = true,\n    immutableCheck = true,\n    serializableCheck = true,\n    actionCreatorCheck = true\n  } = options ?? {};\n  let middlewareArray = new Tuple<Middleware[]>();\n  if (thunk) {\n    if (isBoolean(thunk)) {\n      middlewareArray.push(thunkMiddleware);\n    } else {\n      middlewareArray.push(withExtraArgument(thunk.extraArgument));\n    }\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (immutableCheck) {\n      /* PROD_START_REMOVE_UMD */\n      let immutableOptions: ImmutableStateInvariantMiddlewareOptions = {};\n      if (!isBoolean(immutableCheck)) {\n        immutableOptions = immutableCheck;\n      }\n      middlewareArray.unshift(createImmutableStateInvariantMiddleware(immutableOptions));\n      /* PROD_STOP_REMOVE_UMD */\n    }\n    if (serializableCheck) {\n      let serializableOptions: SerializableStateInvariantMiddlewareOptions = {};\n      if (!isBoolean(serializableCheck)) {\n        serializableOptions = serializableCheck;\n      }\n      middlewareArray.push(createSerializableStateInvariantMiddleware(serializableOptions));\n    }\n    if (actionCreatorCheck) {\n      let actionCreatorOptions: ActionCreatorInvariantMiddlewareOptions = {};\n      if (!isBoolean(actionCreatorCheck)) {\n        actionCreatorOptions = actionCreatorCheck;\n      }\n      middlewareArray.unshift(createActionCreatorInvariantMiddleware(actionCreatorOptions));\n    }\n  }\n  return (middlewareArray as any);\n};","import type { StoreEnhancer } from 'redux';\nexport const SHOULD_AUTOBATCH = 'RTK_autoBatch';\nexport const prepareAutoBatched = <T,>() => (payload: T): {\n  payload: T;\n  meta: unknown;\n} => ({\n  payload,\n  meta: {\n    [SHOULD_AUTOBATCH]: true\n  }\n});\nconst createQueueWithTimer = (timeout: number) => {\n  return (notify: () => void) => {\n    setTimeout(notify, timeout);\n  };\n};\n\n// requestAnimationFrame won't exist in SSR environments.\n// Fall back to a vague approximation just to keep from erroring.\nconst rAF = typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame : createQueueWithTimer(10);\nexport type AutoBatchOptions = {\n  type: 'tick';\n} | {\n  type: 'timer';\n  timeout: number;\n} | {\n  type: 'raf';\n} | {\n  type: 'callback';\n  queueNotification: (notify: () => void) => void;\n};\n\n/**\n * A Redux store enhancer that watches for \"low-priority\" actions, and delays\n * notifying subscribers until either the queued callback executes or the\n * next \"standard-priority\" action is dispatched.\n *\n * This allows dispatching multiple \"low-priority\" actions in a row with only\n * a single subscriber notification to the UI after the sequence of actions\n * is finished, thus improving UI re-render performance.\n *\n * Watches for actions with the `action.meta[SHOULD_AUTOBATCH]` attribute.\n * This can be added to `action.meta` manually, or by using the\n * `prepareAutoBatched` helper.\n *\n * By default, it will queue a notification for the end of the event loop tick.\n * However, you can pass several other options to configure the behavior:\n * - `{type: 'tick'}`: queues using `queueMicrotask`\n * - `{type: 'timer', timeout: number}`: queues using `setTimeout`\n * - `{type: 'raf'}`: queues using `requestAnimationFrame` (default)\n * - `{type: 'callback', queueNotification: (notify: () => void) => void}`: lets you provide your own callback\n *\n *\n */\nexport const autoBatchEnhancer = (options: AutoBatchOptions = {\n  type: 'raf'\n}): StoreEnhancer => next => (...args) => {\n  const store = next(...args);\n  let notifying = true;\n  let shouldNotifyAtEndOfTick = false;\n  let notificationQueued = false;\n  const listeners = new Set<() => void>();\n  const queueCallback = options.type === 'tick' ? queueMicrotask : options.type === 'raf' ? rAF : options.type === 'callback' ? options.queueNotification : createQueueWithTimer(options.timeout);\n  const notifyListeners = () => {\n    // We're running at the end of the event loop tick.\n    // Run the real listener callbacks to actually update the UI.\n    notificationQueued = false;\n    if (shouldNotifyAtEndOfTick) {\n      shouldNotifyAtEndOfTick = false;\n      listeners.forEach(l => l());\n    }\n  };\n  return Object.assign({}, store, {\n    // Override the base `store.subscribe` method to keep original listeners\n    // from running if we're delaying notifications\n    subscribe(listener: () => void) {\n      // Each wrapped listener will only call the real listener if\n      // the `notifying` flag is currently active when it's called.\n      // This lets the base store work as normal, while the actual UI\n      // update becomes controlled by this enhancer.\n      const wrappedListener: typeof listener = () => notifying && listener();\n      const unsubscribe = store.subscribe(wrappedListener);\n      listeners.add(listener);\n      return () => {\n        unsubscribe();\n        listeners.delete(listener);\n      };\n    },\n    // Override the base `store.dispatch` method so that we can check actions\n    // for the `shouldAutoBatch` flag and determine if batching is active\n    dispatch(action: any) {\n      try {\n        // If the action does _not_ have the `shouldAutoBatch` flag,\n        // we resume/continue normal notify-after-each-dispatch behavior\n        notifying = !action?.meta?.[SHOULD_AUTOBATCH];\n        // If a `notifyListeners` microtask was queued, you can't cancel it.\n        // Instead, we set a flag so that it's a no-op when it does run\n        shouldNotifyAtEndOfTick = !notifying;\n        if (shouldNotifyAtEndOfTick) {\n          // We've seen at least 1 action with `SHOULD_AUTOBATCH`. Try to queue\n          // a microtask to notify listeners at the end of the event loop tick.\n          // Make sure we only enqueue this _once_ per tick.\n          if (!notificationQueued) {\n            notificationQueued = true;\n            queueCallback(notifyListeners);\n          }\n        }\n        // Go ahead and process the action as usual, including reducers.\n        // If normal notification behavior is enabled, the store will notify\n        // all of its own listeners, and the wrapper callbacks above will\n        // see `notifying` is true and pass on to the real listener callbacks.\n        // If we're \"batching\" behavior, then the wrapped callbacks will\n        // bail out, causing the base store notification behavior to be no-ops.\n        return store.dispatch(action);\n      } finally {\n        // Assume we're back to normal behavior after each action\n        notifying = true;\n      }\n    }\n  });\n};","import type { StoreEnhancer } from 'redux';\nimport type { AutoBatchOptions } from './autoBatchEnhancer';\nimport { autoBatchEnhancer } from './autoBatchEnhancer';\nimport { Tuple } from './utils';\nimport type { Middlewares } from './configureStore';\nimport type { ExtractDispatchExtensions } from './tsHelpers';\ntype GetDefaultEnhancersOptions = {\n  autoBatch?: boolean | AutoBatchOptions;\n};\nexport type GetDefaultEnhancers<M extends Middlewares<any>> = (options?: GetDefaultEnhancersOptions) => Tuple<[StoreEnhancer<{\n  dispatch: ExtractDispatchExtensions<M>;\n}>]>;\nexport const buildGetDefaultEnhancers = <M extends Middlewares<any>,>(middlewareEnhancer: StoreEnhancer<{\n  dispatch: ExtractDispatchExtensions<M>;\n}>): GetDefaultEnhancers<M> => function getDefaultEnhancers(options) {\n  const {\n    autoBatch = true\n  } = options ?? {};\n  let enhancerArray = new Tuple<StoreEnhancer[]>(middlewareEnhancer);\n  if (autoBatch) {\n    enhancerArray.push(autoBatchEnhancer(typeof autoBatch === 'object' ? autoBatch : undefined));\n  }\n  return (enhancerArray as any);\n};","import { formatProdErrorMessage as _formatProdErrorMessage7 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage6 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage5 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage4 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage3 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage2 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { Reducer, ReducersMapObject, Middleware, Action, StoreEnhancer, Store, UnknownAction } from 'redux';\nimport { applyMiddleware, createStore, compose, combineReducers, isPlainObject } from 'redux';\nimport type { DevToolsEnhancerOptions as DevToolsOptions } from './devtoolsExtension';\nimport { composeWithDevTools } from './devtoolsExtension';\nimport type { ThunkMiddlewareFor, GetDefaultMiddleware } from './getDefaultMiddleware';\nimport { buildGetDefaultMiddleware } from './getDefaultMiddleware';\nimport type { ExtractDispatchExtensions, ExtractStoreExtensions, ExtractStateExtensions, UnknownIfNonSpecific } from './tsHelpers';\nimport type { Tuple } from './utils';\nimport type { GetDefaultEnhancers } from './getDefaultEnhancers';\nimport { buildGetDefaultEnhancers } from './getDefaultEnhancers';\nconst IS_PRODUCTION = process.env.NODE_ENV === 'production';\n\n/**\n * Options for `configureStore()`.\n *\n * @public\n */\nexport interface ConfigureStoreOptions<S = any, A extends Action = UnknownAction, M extends Tuple<Middlewares<S>> = Tuple<Middlewares<S>>, E extends Tuple<Enhancers> = Tuple<Enhancers>, P = S> {\n  /**\n   * A single reducer function that will be used as the root reducer, or an\n   * object of slice reducers that will be passed to `combineReducers()`.\n   */\n  reducer: Reducer<S, A, P> | ReducersMapObject<S, A, P>;\n\n  /**\n   * An array of Redux middleware to install, or a callback receiving `getDefaultMiddleware` and returning a Tuple of middleware.\n   * If not supplied, defaults to the set of middleware returned by `getDefaultMiddleware()`.\n   *\n   * @example `middleware: (gDM) => gDM().concat(logger, apiMiddleware, yourCustomMiddleware)`\n   * @see https://redux-toolkit.js.org/api/getDefaultMiddleware#intended-usage\n   */\n  middleware?: (getDefaultMiddleware: GetDefaultMiddleware<S>) => M;\n\n  /**\n   * Whether to enable Redux DevTools integration. Defaults to `true`.\n   *\n   * Additional configuration can be done by passing Redux DevTools options\n   */\n  devTools?: boolean | DevToolsOptions;\n\n  /**\n   * The initial state, same as Redux's createStore.\n   * You may optionally specify it to hydrate the state\n   * from the server in universal apps, or to restore a previously serialized\n   * user session. If you use `combineReducers()` to produce the root reducer\n   * function (either directly or indirectly by passing an object as `reducer`),\n   * this must be an object with the same shape as the reducer map keys.\n   */\n  // we infer here, and instead complain if the reducer doesn't match\n  preloadedState?: P;\n\n  /**\n   * The store enhancers to apply. See Redux's `createStore()`.\n   * All enhancers will be included before the DevTools Extension enhancer.\n   * If you need to customize the order of enhancers, supply a callback\n   * function that will receive a `getDefaultEnhancers` function that returns a Tuple,\n   * and should return a Tuple of enhancers (such as `getDefaultEnhancers().concat(offline)`).\n   * If you only need to add middleware, you can use the `middleware` parameter instead.\n   */\n  enhancers?: (getDefaultEnhancers: GetDefaultEnhancers<M>) => E;\n}\nexport type Middlewares<S> = ReadonlyArray<Middleware<{}, S>>;\ntype Enhancers = ReadonlyArray<StoreEnhancer>;\n\n/**\n * A Redux store returned by `configureStore()`. Supports dispatching\n * side-effectful _thunks_ in addition to plain actions.\n *\n * @public\n */\nexport type EnhancedStore<S = any, A extends Action = UnknownAction, E extends Enhancers = Enhancers> = ExtractStoreExtensions<E> & Store<S, A, UnknownIfNonSpecific<ExtractStateExtensions<E>>>;\n\n/**\n * A friendly abstraction over the standard Redux `createStore()` function.\n *\n * @param options The store configuration.\n * @returns A configured Redux store.\n *\n * @public\n */\nexport function configureStore<S = any, A extends Action = UnknownAction, M extends Tuple<Middlewares<S>> = Tuple<[ThunkMiddlewareFor<S>]>, E extends Tuple<Enhancers> = Tuple<[StoreEnhancer<{\n  dispatch: ExtractDispatchExtensions<M>;\n}>, StoreEnhancer]>, P = S>(options: ConfigureStoreOptions<S, A, M, E, P>): EnhancedStore<S, A, E> {\n  const getDefaultMiddleware = buildGetDefaultMiddleware<S>();\n  const {\n    reducer = undefined,\n    middleware,\n    devTools = true,\n    preloadedState = undefined,\n    enhancers = undefined\n  } = options || {};\n  let rootReducer: Reducer<S, A, P>;\n  if (typeof reducer === 'function') {\n    rootReducer = reducer;\n  } else if (isPlainObject(reducer)) {\n    rootReducer = ((combineReducers(reducer) as unknown) as Reducer<S, A, P>);\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(1) : '`reducer` is a required argument, and must be a function or an object of functions that can be passed to combineReducers');\n  }\n  if (!IS_PRODUCTION && middleware && typeof middleware !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(2) : '`middleware` field must be a callback');\n  }\n  let finalMiddleware: Tuple<Middlewares<S>>;\n  if (typeof middleware === 'function') {\n    finalMiddleware = middleware(getDefaultMiddleware);\n    if (!IS_PRODUCTION && !Array.isArray(finalMiddleware)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage3(3) : 'when using a middleware builder function, an array of middleware must be returned');\n    }\n  } else {\n    finalMiddleware = getDefaultMiddleware();\n  }\n  if (!IS_PRODUCTION && finalMiddleware.some((item: any) => typeof item !== 'function')) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage4(4) : 'each middleware provided to configureStore must be a function');\n  }\n  let finalCompose = compose;\n  if (devTools) {\n    finalCompose = composeWithDevTools({\n      // Enable capture of stack traces for dispatched Redux actions\n      trace: !IS_PRODUCTION,\n      ...(typeof devTools === 'object' && devTools)\n    });\n  }\n  const middlewareEnhancer = applyMiddleware(...finalMiddleware);\n  const getDefaultEnhancers = buildGetDefaultEnhancers<M>(middlewareEnhancer);\n  if (!IS_PRODUCTION && enhancers && typeof enhancers !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage5(5) : '`enhancers` field must be a callback');\n  }\n  let storeEnhancers = typeof enhancers === 'function' ? enhancers(getDefaultEnhancers) : getDefaultEnhancers();\n  if (!IS_PRODUCTION && !Array.isArray(storeEnhancers)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage6(6) : '`enhancers` callback must return an array');\n  }\n  if (!IS_PRODUCTION && storeEnhancers.some((item: any) => typeof item !== 'function')) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage7(7) : 'each enhancer provided to configureStore must be a function');\n  }\n  if (!IS_PRODUCTION && finalMiddleware.length && !storeEnhancers.includes(middlewareEnhancer)) {\n    console.error('middlewares were provided, but middleware enhancer was not included in final enhancers - make sure to call `getDefaultEnhancers`');\n  }\n  const composedEnhancer: StoreEnhancer<any> = finalCompose(...storeEnhancers);\n  return createStore(rootReducer, (preloadedState as P), composedEnhancer);\n}","import { formatProdErrorMessage as _formatProdErrorMessage6 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage5 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage4 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage3 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage2 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { Action } from 'redux';\nimport type { CaseReducer, CaseReducers, ActionMatcherDescriptionCollection } from './createReducer';\nimport type { TypeGuard } from './tsHelpers';\nexport interface TypedActionCreator<Type extends string> {\n  (...args: any[]): Action<Type>;\n  type: Type;\n}\n\n/**\n * A builder for an action <-> reducer map.\n *\n * @public\n */\nexport interface ActionReducerMapBuilder<State> {\n  /**\n   * Adds a case reducer to handle a single exact action type.\n   * @remarks\n   * All calls to `builder.addCase` must come before any calls to `builder.addMatcher` or `builder.addDefaultCase`.\n   * @param actionCreator - Either a plain action type string, or an action creator generated by [`createAction`](./createAction) that can be used to determine the action type.\n   * @param reducer - The actual case reducer function.\n   */\n  addCase<ActionCreator extends TypedActionCreator<string>>(actionCreator: ActionCreator, reducer: CaseReducer<State, ReturnType<ActionCreator>>): ActionReducerMapBuilder<State>;\n  /**\n   * Adds a case reducer to handle a single exact action type.\n   * @remarks\n   * All calls to `builder.addCase` must come before any calls to `builder.addMatcher` or `builder.addDefaultCase`.\n   * @param actionCreator - Either a plain action type string, or an action creator generated by [`createAction`](./createAction) that can be used to determine the action type.\n   * @param reducer - The actual case reducer function.\n   */\n  addCase<Type extends string, A extends Action<Type>>(type: Type, reducer: CaseReducer<State, A>): ActionReducerMapBuilder<State>;\n\n  /**\n   * Allows you to match your incoming actions against your own filter function instead of only the `action.type` property.\n   * @remarks\n   * If multiple matcher reducers match, all of them will be executed in the order\n   * they were defined in - even if a case reducer already matched.\n   * All calls to `builder.addMatcher` must come after any calls to `builder.addCase` and before any calls to `builder.addDefaultCase`.\n   * @param matcher - A matcher function. In TypeScript, this should be a [type predicate](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates)\n   *   function\n   * @param reducer - The actual case reducer function.\n   *\n   * @example\n  ```ts\n  import {\n  createAction,\n  createReducer,\n  AsyncThunk,\n  UnknownAction,\n  } from \"@reduxjs/toolkit\";\n  type GenericAsyncThunk = AsyncThunk<unknown, unknown, any>;\n  type PendingAction = ReturnType<GenericAsyncThunk[\"pending\"]>;\n  type RejectedAction = ReturnType<GenericAsyncThunk[\"rejected\"]>;\n  type FulfilledAction = ReturnType<GenericAsyncThunk[\"fulfilled\"]>;\n  const initialState: Record<string, string> = {};\n  const resetAction = createAction(\"reset-tracked-loading-state\");\n  function isPendingAction(action: UnknownAction): action is PendingAction {\n  return typeof action.type === \"string\" && action.type.endsWith(\"/pending\");\n  }\n  const reducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(resetAction, () => initialState)\n    // matcher can be defined outside as a type predicate function\n    .addMatcher(isPendingAction, (state, action) => {\n      state[action.meta.requestId] = \"pending\";\n    })\n    .addMatcher(\n      // matcher can be defined inline as a type predicate function\n      (action): action is RejectedAction => action.type.endsWith(\"/rejected\"),\n      (state, action) => {\n        state[action.meta.requestId] = \"rejected\";\n      }\n    )\n    // matcher can just return boolean and the matcher can receive a generic argument\n    .addMatcher<FulfilledAction>(\n      (action) => action.type.endsWith(\"/fulfilled\"),\n      (state, action) => {\n        state[action.meta.requestId] = \"fulfilled\";\n      }\n    );\n  });\n  ```\n   */\n  addMatcher<A>(matcher: TypeGuard<A> | ((action: any) => boolean), reducer: CaseReducer<State, A extends Action ? A : A & Action>): Omit<ActionReducerMapBuilder<State>, 'addCase'>;\n\n  /**\n   * Adds a \"default case\" reducer that is executed if no case reducer and no matcher\n   * reducer was executed for this action.\n   * @param reducer - The fallback \"default case\" reducer function.\n   *\n   * @example\n  ```ts\n  import { createReducer } from '@reduxjs/toolkit'\n  const initialState = { otherActions: 0 }\n  const reducer = createReducer(initialState, builder => {\n  builder\n    // .addCase(...)\n    // .addMatcher(...)\n    .addDefaultCase((state, action) => {\n      state.otherActions++\n    })\n  })\n  ```\n   */\n  addDefaultCase(reducer: CaseReducer<State, Action>): {};\n}\nexport function executeReducerBuilderCallback<S>(builderCallback: (builder: ActionReducerMapBuilder<S>) => void): [CaseReducers<S, any>, ActionMatcherDescriptionCollection<S>, CaseReducer<S, Action> | undefined] {\n  const actionsMap: CaseReducers<S, any> = {};\n  const actionMatchers: ActionMatcherDescriptionCollection<S> = [];\n  let defaultCaseReducer: CaseReducer<S, Action> | undefined;\n  const builder = {\n    addCase(typeOrActionCreator: string | TypedActionCreator<any>, reducer: CaseReducer<S>) {\n      if (process.env.NODE_ENV !== 'production') {\n        /*\n         to keep the definition by the user in line with actual behavior,\n         we enforce `addCase` to always be called before calling `addMatcher`\n         as matching cases take precedence over matchers\n         */\n        if (actionMatchers.length > 0) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(26) : '`builder.addCase` should only be called before calling `builder.addMatcher`');\n        }\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(27) : '`builder.addCase` should only be called before calling `builder.addDefaultCase`');\n        }\n      }\n      const type = typeof typeOrActionCreator === 'string' ? typeOrActionCreator : typeOrActionCreator.type;\n      if (!type) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage3(28) : '`builder.addCase` cannot be called with an empty action type');\n      }\n      if (type in actionsMap) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage4(29) : '`builder.addCase` cannot be called with two reducers for the same action type ' + `'${type}'`);\n      }\n      actionsMap[type] = reducer;\n      return builder;\n    },\n    addMatcher<A>(matcher: TypeGuard<A>, reducer: CaseReducer<S, A extends Action ? A : A & Action>) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage5(30) : '`builder.addMatcher` should only be called before calling `builder.addDefaultCase`');\n        }\n      }\n      actionMatchers.push({\n        matcher,\n        reducer\n      });\n      return builder;\n    },\n    addDefaultCase(reducer: CaseReducer<S, Action>) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (defaultCaseReducer) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage6(31) : '`builder.addDefaultCase` can only be called once');\n        }\n      }\n      defaultCaseReducer = reducer;\n      return builder;\n    }\n  };\n  builderCallback(builder);\n  return [actionsMap, actionMatchers, defaultCaseReducer];\n}","import { formatProdErrorMessage as _formatProdErrorMessage2 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { Draft } from 'immer';\nimport { produce as createNextState, isDraft, isDraftable } from 'immer';\nimport type { Action, Reducer, UnknownAction } from 'redux';\nimport type { ActionReducerMapBuilder } from './mapBuilders';\nimport { executeReducerBuilderCallback } from './mapBuilders';\nimport type { NoInfer, TypeGuard } from './tsHelpers';\nimport { freezeDraftable } from './utils';\n\n/**\n * Defines a mapping from action types to corresponding action object shapes.\n *\n * @deprecated This should not be used manually - it is only used for internal\n *             inference purposes and should not have any further value.\n *             It might be removed in the future.\n * @public\n */\nexport type Actions<T extends keyof any = string> = Record<T, Action>;\nexport type ActionMatcherDescription<S, A extends Action> = {\n  matcher: TypeGuard<A>;\n  reducer: CaseReducer<S, NoInfer<A>>;\n};\nexport type ReadonlyActionMatcherDescriptionCollection<S> = ReadonlyArray<ActionMatcherDescription<S, any>>;\nexport type ActionMatcherDescriptionCollection<S> = Array<ActionMatcherDescription<S, any>>;\n\n/**\n * A *case reducer* is a reducer function for a specific action type. Case\n * reducers can be composed to full reducers using `createReducer()`.\n *\n * Unlike a normal Redux reducer, a case reducer is never called with an\n * `undefined` state to determine the initial state. Instead, the initial\n * state is explicitly specified as an argument to `createReducer()`.\n *\n * In addition, a case reducer can choose to mutate the passed-in `state`\n * value directly instead of returning a new state. This does not actually\n * cause the store state to be mutated directly; instead, thanks to\n * [immer](https://github.com/mweststrate/immer), the mutations are\n * translated to copy operations that result in a new state.\n *\n * @public\n */\nexport type CaseReducer<S = any, A extends Action = UnknownAction> = (state: Draft<S>, action: A) => NoInfer<S> | void | Draft<NoInfer<S>>;\n\n/**\n * A mapping from action types to case reducers for `createReducer()`.\n *\n * @deprecated This should not be used manually - it is only used\n *             for internal inference purposes and using it manually\n *             would lead to type erasure.\n *             It might be removed in the future.\n * @public\n */\nexport type CaseReducers<S, AS extends Actions> = { [T in keyof AS]: AS[T] extends Action ? CaseReducer<S, AS[T]> : void };\nexport type NotFunction<T> = T extends Function ? never : T;\nfunction isStateFunction<S>(x: unknown): x is () => S {\n  return typeof x === 'function';\n}\nexport type ReducerWithInitialState<S extends NotFunction<any>> = Reducer<S> & {\n  getInitialState: () => S;\n};\n\n/**\n * A utility function that allows defining a reducer as a mapping from action\n * type to *case reducer* functions that handle these action types. The\n * reducer's initial state is passed as the first argument.\n *\n * @remarks\n * The body of every case reducer is implicitly wrapped with a call to\n * `produce()` from the [immer](https://github.com/mweststrate/immer) library.\n * This means that rather than returning a new state object, you can also\n * mutate the passed-in state object directly; these mutations will then be\n * automatically and efficiently translated into copies, giving you both\n * convenience and immutability.\n *\n * @overloadSummary\n * This function accepts a callback that receives a `builder` object as its argument.\n * That builder provides `addCase`, `addMatcher` and `addDefaultCase` functions that may be\n * called to define what actions this reducer will handle.\n *\n * @param initialState - `State | (() => State)`: The initial state that should be used when the reducer is called the first time. This may also be a \"lazy initializer\" function, which should return an initial state value when called. This will be used whenever the reducer is called with `undefined` as its state value, and is primarily useful for cases like reading initial state from `localStorage`.\n * @param builderCallback - `(builder: Builder) => void` A callback that receives a *builder* object to define\n *   case reducers via calls to `builder.addCase(actionCreatorOrType, reducer)`.\n * @example\n```ts\nimport {\n  createAction,\n  createReducer,\n  UnknownAction,\n  PayloadAction,\n} from \"@reduxjs/toolkit\";\n\nconst increment = createAction<number>(\"increment\");\nconst decrement = createAction<number>(\"decrement\");\n\nfunction isActionWithNumberPayload(\n  action: UnknownAction\n): action is PayloadAction<number> {\n  return typeof action.payload === \"number\";\n}\n\nconst reducer = createReducer(\n  {\n    counter: 0,\n    sumOfNumberPayloads: 0,\n    unhandledActions: 0,\n  },\n  (builder) => {\n    builder\n      .addCase(increment, (state, action) => {\n        // action is inferred correctly here\n        state.counter += action.payload;\n      })\n      // You can chain calls, or have separate `builder.addCase()` lines each time\n      .addCase(decrement, (state, action) => {\n        state.counter -= action.payload;\n      })\n      // You can apply a \"matcher function\" to incoming actions\n      .addMatcher(isActionWithNumberPayload, (state, action) => {})\n      // and provide a default case if no other handlers matched\n      .addDefaultCase((state, action) => {});\n  }\n);\n```\n * @public\n */\nexport function createReducer<S extends NotFunction<any>>(initialState: S | (() => S), mapOrBuilderCallback: (builder: ActionReducerMapBuilder<S>) => void): ReducerWithInitialState<S> {\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof mapOrBuilderCallback === 'object') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(8) : \"The object notation for `createReducer` has been removed. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer\");\n    }\n  }\n  let [actionsMap, finalActionMatchers, finalDefaultCaseReducer] = executeReducerBuilderCallback(mapOrBuilderCallback);\n\n  // Ensure the initial state gets frozen either way (if draftable)\n  let getInitialState: () => S;\n  if (isStateFunction(initialState)) {\n    getInitialState = () => freezeDraftable(initialState());\n  } else {\n    const frozenInitialState = freezeDraftable(initialState);\n    getInitialState = () => frozenInitialState;\n  }\n  function reducer(state = getInitialState(), action: any): S {\n    let caseReducers = [actionsMap[action.type], ...finalActionMatchers.filter(({\n      matcher\n    }) => matcher(action)).map(({\n      reducer\n    }) => reducer)];\n    if (caseReducers.filter(cr => !!cr).length === 0) {\n      caseReducers = [finalDefaultCaseReducer];\n    }\n    return caseReducers.reduce((previousState, caseReducer): S => {\n      if (caseReducer) {\n        if (isDraft(previousState)) {\n          // If it's already a draft, we must already be inside a `createNextState` call,\n          // likely because this is being wrapped in `createReducer`, `createSlice`, or nested\n          // inside an existing draft. It's safe to just pass the draft to the mutator.\n          const draft = (previousState as Draft<S>); // We can assume this is already a draft\n          const result = caseReducer(draft, action);\n          if (result === undefined) {\n            return previousState;\n          }\n          return (result as S);\n        } else if (!isDraftable(previousState)) {\n          // If state is not draftable (ex: a primitive, such as 0), we want to directly\n          // return the caseReducer func and not wrap it with produce.\n          const result = caseReducer((previousState as any), action);\n          if (result === undefined) {\n            if (previousState === null) {\n              return previousState;\n            }\n            throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(9) : 'A case reducer on a non-draftable value must not return undefined');\n          }\n          return (result as S);\n        } else {\n          // @ts-ignore createNextState() produces an Immutable<Draft<S>> rather\n          // than an Immutable<S>, and TypeScript cannot find out how to reconcile\n          // these two types.\n          return createNextState(previousState, (draft: Draft<S>) => {\n            return caseReducer(draft, action);\n          });\n        }\n      }\n      return previousState;\n    }, state);\n  }\n  reducer.getInitialState = getInitialState;\n  return (reducer as ReducerWithInitialState<S>);\n}","// Borrowed from https://github.com/ai/nanoid/blob/3.0.2/non-secure/index.js\n// This alphabet uses `A-Za-z0-9_-` symbols. A genetic algorithm helped\n// optimize the gzip compression for this alphabet.\nlet urlAlphabet = 'ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW';\n\n/**\n *\n * @public\n */\nexport let nanoid = (size = 21) => {\n  let id = '';\n  // A compact alternative for `for (var i = 0; i < step; i++)`.\n  let i = size;\n  while (i--) {\n    // `| 0` is more compact and faster than `Math.floor()`.\n    id += urlAlphabet[Math.random() * 64 | 0];\n  }\n  return id;\n};","import type { ActionFromMatcher, Matcher, UnionToIntersection } from './tsHelpers';\nimport { hasMatchFunction } from './tsHelpers';\nimport type { AsyncThunk, AsyncThunkFulfilledActionCreator, AsyncThunkPendingActionCreator, AsyncThunkRejectedActionCreator } from './createAsyncThunk';\n\n/** @public */\nexport type ActionMatchingAnyOf<Matchers extends Matcher<any>[]> = ActionFromMatcher<Matchers[number]>;\n\n/** @public */\nexport type ActionMatchingAllOf<Matchers extends Matcher<any>[]> = UnionToIntersection<ActionMatchingAnyOf<Matchers>>;\nconst matches = (matcher: Matcher<any>, action: any) => {\n  if (hasMatchFunction(matcher)) {\n    return matcher.match(action);\n  } else {\n    return matcher(action);\n  }\n};\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action matches any one of the supplied type guards or action\n * creators.\n *\n * @param matchers The type guards or action creators to match against.\n *\n * @public\n */\nexport function isAnyOf<Matchers extends Matcher<any>[]>(...matchers: Matchers) {\n  return (action: any): action is ActionMatchingAnyOf<Matchers> => {\n    return matchers.some(matcher => matches(matcher, action));\n  };\n}\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action matches all of the supplied type guards or action\n * creators.\n *\n * @param matchers The type guards or action creators to match against.\n *\n * @public\n */\nexport function isAllOf<Matchers extends Matcher<any>[]>(...matchers: Matchers) {\n  return (action: any): action is ActionMatchingAllOf<Matchers> => {\n    return matchers.every(matcher => matches(matcher, action));\n  };\n}\n\n/**\n * @param action A redux action\n * @param validStatus An array of valid meta.requestStatus values\n *\n * @internal\n */\nexport function hasExpectedRequestMetadata(action: any, validStatus: readonly string[]) {\n  if (!action || !action.meta) return false;\n  const hasValidRequestId = typeof action.meta.requestId === 'string';\n  const hasValidRequestStatus = validStatus.indexOf(action.meta.requestStatus) > -1;\n  return hasValidRequestId && hasValidRequestStatus;\n}\nfunction isAsyncThunkArray(a: [any] | AnyAsyncThunk[]): a is AnyAsyncThunk[] {\n  return typeof a[0] === 'function' && 'pending' in a[0] && 'fulfilled' in a[0] && 'rejected' in a[0];\n}\nexport type UnknownAsyncThunkPendingAction = ReturnType<AsyncThunkPendingActionCreator<unknown>>;\nexport type PendingActionFromAsyncThunk<T extends AnyAsyncThunk> = ActionFromMatcher<T['pending']>;\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action was created by an async thunk action creator, and that\n * the action is pending.\n *\n * @public\n */\nexport function isPending(): (action: any) => action is UnknownAsyncThunkPendingAction;\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action belongs to one of the provided async thunk action creators,\n * and that the action is pending.\n *\n * @param asyncThunks (optional) The async thunk action creators to match against.\n *\n * @public\n */\nexport function isPending<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks): (action: any) => action is PendingActionFromAsyncThunk<AsyncThunks[number]>;\n/**\n * Tests if `action` is a pending thunk action\n * @public\n */\nexport function isPending(action: any): action is UnknownAsyncThunkPendingAction;\nexport function isPending<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks | [any]) {\n  if (asyncThunks.length === 0) {\n    return (action: any) => hasExpectedRequestMetadata(action, ['pending']);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isPending()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map(asyncThunk => asyncThunk.pending));\n}\nexport type UnknownAsyncThunkRejectedAction = ReturnType<AsyncThunkRejectedActionCreator<unknown, unknown>>;\nexport type RejectedActionFromAsyncThunk<T extends AnyAsyncThunk> = ActionFromMatcher<T['rejected']>;\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action was created by an async thunk action creator, and that\n * the action is rejected.\n *\n * @public\n */\nexport function isRejected(): (action: any) => action is UnknownAsyncThunkRejectedAction;\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action belongs to one of the provided async thunk action creators,\n * and that the action is rejected.\n *\n * @param asyncThunks (optional) The async thunk action creators to match against.\n *\n * @public\n */\nexport function isRejected<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks): (action: any) => action is RejectedActionFromAsyncThunk<AsyncThunks[number]>;\n/**\n * Tests if `action` is a rejected thunk action\n * @public\n */\nexport function isRejected(action: any): action is UnknownAsyncThunkRejectedAction;\nexport function isRejected<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks | [any]) {\n  if (asyncThunks.length === 0) {\n    return (action: any) => hasExpectedRequestMetadata(action, ['rejected']);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejected()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map(asyncThunk => asyncThunk.rejected));\n}\nexport type UnknownAsyncThunkRejectedWithValueAction = ReturnType<AsyncThunkRejectedActionCreator<unknown, unknown>>;\nexport type RejectedWithValueActionFromAsyncThunk<T extends AnyAsyncThunk> = ActionFromMatcher<T['rejected']> & (T extends AsyncThunk<any, any, {\n  rejectValue: infer RejectedValue;\n}> ? {\n  payload: RejectedValue;\n} : unknown);\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action was created by an async thunk action creator, and that\n * the action is rejected with value.\n *\n * @public\n */\nexport function isRejectedWithValue(): (action: any) => action is UnknownAsyncThunkRejectedAction;\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action belongs to one of the provided async thunk action creators,\n * and that the action is rejected with value.\n *\n * @param asyncThunks (optional) The async thunk action creators to match against.\n *\n * @public\n */\nexport function isRejectedWithValue<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks): (action: any) => action is RejectedWithValueActionFromAsyncThunk<AsyncThunks[number]>;\n/**\n * Tests if `action` is a rejected thunk action with value\n * @public\n */\nexport function isRejectedWithValue(action: any): action is UnknownAsyncThunkRejectedAction;\nexport function isRejectedWithValue<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks | [any]) {\n  const hasFlag = (action: any): action is any => {\n    return action && action.meta && action.meta.rejectedWithValue;\n  };\n  if (asyncThunks.length === 0) {\n    return isAllOf(isRejected(...asyncThunks), hasFlag);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isRejectedWithValue()(asyncThunks[0]);\n  }\n  return isAllOf(isRejected(...asyncThunks), hasFlag);\n}\nexport type UnknownAsyncThunkFulfilledAction = ReturnType<AsyncThunkFulfilledActionCreator<unknown, unknown>>;\nexport type FulfilledActionFromAsyncThunk<T extends AnyAsyncThunk> = ActionFromMatcher<T['fulfilled']>;\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action was created by an async thunk action creator, and that\n * the action is fulfilled.\n *\n * @public\n */\nexport function isFulfilled(): (action: any) => action is UnknownAsyncThunkFulfilledAction;\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action belongs to one of the provided async thunk action creators,\n * and that the action is fulfilled.\n *\n * @param asyncThunks (optional) The async thunk action creators to match against.\n *\n * @public\n */\nexport function isFulfilled<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks): (action: any) => action is FulfilledActionFromAsyncThunk<AsyncThunks[number]>;\n/**\n * Tests if `action` is a fulfilled thunk action\n * @public\n */\nexport function isFulfilled(action: any): action is UnknownAsyncThunkFulfilledAction;\nexport function isFulfilled<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks | [any]) {\n  if (asyncThunks.length === 0) {\n    return (action: any) => hasExpectedRequestMetadata(action, ['fulfilled']);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isFulfilled()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.map(asyncThunk => asyncThunk.fulfilled));\n}\nexport type UnknownAsyncThunkAction = UnknownAsyncThunkPendingAction | UnknownAsyncThunkRejectedAction | UnknownAsyncThunkFulfilledAction;\nexport type AnyAsyncThunk = {\n  pending: {\n    match: (action: any) => action is any;\n  };\n  fulfilled: {\n    match: (action: any) => action is any;\n  };\n  rejected: {\n    match: (action: any) => action is any;\n  };\n};\nexport type ActionsFromAsyncThunk<T extends AnyAsyncThunk> = ActionFromMatcher<T['pending']> | ActionFromMatcher<T['fulfilled']> | ActionFromMatcher<T['rejected']>;\n\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action was created by an async thunk action creator.\n *\n * @public\n */\nexport function isAsyncThunkAction(): (action: any) => action is UnknownAsyncThunkAction;\n/**\n * A higher-order function that returns a function that may be used to check\n * whether an action belongs to one of the provided async thunk action creators.\n *\n * @param asyncThunks (optional) The async thunk action creators to match against.\n *\n * @public\n */\nexport function isAsyncThunkAction<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks): (action: any) => action is ActionsFromAsyncThunk<AsyncThunks[number]>;\n/**\n * Tests if `action` is a thunk action\n * @public\n */\nexport function isAsyncThunkAction(action: any): action is UnknownAsyncThunkAction;\nexport function isAsyncThunkAction<AsyncThunks extends [AnyAsyncThunk, ...AnyAsyncThunk[]]>(...asyncThunks: AsyncThunks | [any]) {\n  if (asyncThunks.length === 0) {\n    return (action: any) => hasExpectedRequestMetadata(action, ['pending', 'fulfilled', 'rejected']);\n  }\n  if (!isAsyncThunkArray(asyncThunks)) {\n    return isAsyncThunkAction()(asyncThunks[0]);\n  }\n  return isAnyOf(...asyncThunks.flatMap(asyncThunk => [asyncThunk.pending, asyncThunk.rejected, asyncThunk.fulfilled]));\n}","import type { Dispatch, UnknownAction } from 'redux';\nimport type { PayloadAction, ActionCreatorWithPreparedPayload } from './createAction';\nimport { createAction } from './createAction';\nimport type { ThunkDispatch } from 'redux-thunk';\nimport type { ActionFromMatcher, FallbackIfUnknown, Id, IsAny, IsUnknown, SafePromise, TypeGuard } from './tsHelpers';\nimport { nanoid } from './nanoid';\nimport { isAnyOf } from './matchers';\n\n// @ts-ignore we need the import of these types due to a bundling issue.\ntype _Keep = PayloadAction | ActionCreatorWithPreparedPayload<any, unknown>;\nexport type BaseThunkAPI<S, E, D extends Dispatch = Dispatch, RejectedValue = unknown, RejectedMeta = unknown, FulfilledMeta = unknown> = {\n  dispatch: D;\n  getState: () => S;\n  extra: E;\n  requestId: string;\n  signal: AbortSignal;\n  abort: (reason?: string) => void;\n  rejectWithValue: IsUnknown<RejectedMeta, (value: RejectedValue) => RejectWithValue<RejectedValue, RejectedMeta>, (value: RejectedValue, meta: RejectedMeta) => RejectWithValue<RejectedValue, RejectedMeta>>;\n  fulfillWithValue: IsUnknown<FulfilledMeta, <FulfilledValue>(value: FulfilledValue) => FulfilledValue, <FulfilledValue>(value: FulfilledValue, meta: FulfilledMeta) => FulfillWithMeta<FulfilledValue, FulfilledMeta>>;\n};\n\n/**\n * @public\n */\nexport interface SerializedError {\n  name?: string;\n  message?: string;\n  stack?: string;\n  code?: string;\n}\nconst commonProperties: Array<keyof SerializedError> = ['name', 'message', 'stack', 'code'];\nclass RejectWithValue<Payload, RejectedMeta> {\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  private readonly _type!: 'RejectWithValue';\n  constructor(public readonly payload: Payload, public readonly meta: RejectedMeta) {}\n}\nclass FulfillWithMeta<Payload, FulfilledMeta> {\n  /*\n  type-only property to distinguish between RejectWithValue and FulfillWithMeta\n  does not exist at runtime\n  */\n  private readonly _type!: 'FulfillWithMeta';\n  constructor(public readonly payload: Payload, public readonly meta: FulfilledMeta) {}\n}\n\n/**\n * Serializes an error into a plain object.\n * Reworked from https://github.com/sindresorhus/serialize-error\n *\n * @public\n */\nexport const miniSerializeError = (value: any): SerializedError => {\n  if (typeof value === 'object' && value !== null) {\n    const simpleError: SerializedError = {};\n    for (const property of commonProperties) {\n      if (typeof value[property] === 'string') {\n        simpleError[property] = value[property];\n      }\n    }\n    return simpleError;\n  }\n  return {\n    message: String(value)\n  };\n};\nexport type AsyncThunkConfig = {\n  state?: unknown;\n  dispatch?: ThunkDispatch<unknown, unknown, UnknownAction>;\n  extra?: unknown;\n  rejectValue?: unknown;\n  serializedErrorType?: unknown;\n  pendingMeta?: unknown;\n  fulfilledMeta?: unknown;\n  rejectedMeta?: unknown;\n};\ntype GetState<ThunkApiConfig> = ThunkApiConfig extends {\n  state: infer State;\n} ? State : unknown;\ntype GetExtra<ThunkApiConfig> = ThunkApiConfig extends {\n  extra: infer Extra;\n} ? Extra : unknown;\ntype GetDispatch<ThunkApiConfig> = ThunkApiConfig extends {\n  dispatch: infer Dispatch;\n} ? FallbackIfUnknown<Dispatch, ThunkDispatch<GetState<ThunkApiConfig>, GetExtra<ThunkApiConfig>, UnknownAction>> : ThunkDispatch<GetState<ThunkApiConfig>, GetExtra<ThunkApiConfig>, UnknownAction>;\nexport type GetThunkAPI<ThunkApiConfig> = BaseThunkAPI<GetState<ThunkApiConfig>, GetExtra<ThunkApiConfig>, GetDispatch<ThunkApiConfig>, GetRejectValue<ThunkApiConfig>, GetRejectedMeta<ThunkApiConfig>, GetFulfilledMeta<ThunkApiConfig>>;\ntype GetRejectValue<ThunkApiConfig> = ThunkApiConfig extends {\n  rejectValue: infer RejectValue;\n} ? RejectValue : unknown;\ntype GetPendingMeta<ThunkApiConfig> = ThunkApiConfig extends {\n  pendingMeta: infer PendingMeta;\n} ? PendingMeta : unknown;\ntype GetFulfilledMeta<ThunkApiConfig> = ThunkApiConfig extends {\n  fulfilledMeta: infer FulfilledMeta;\n} ? FulfilledMeta : unknown;\ntype GetRejectedMeta<ThunkApiConfig> = ThunkApiConfig extends {\n  rejectedMeta: infer RejectedMeta;\n} ? RejectedMeta : unknown;\ntype GetSerializedErrorType<ThunkApiConfig> = ThunkApiConfig extends {\n  serializedErrorType: infer GetSerializedErrorType;\n} ? GetSerializedErrorType : SerializedError;\ntype MaybePromise<T> = T | Promise<T> | (T extends any ? Promise<T> : never);\n\n/**\n * A type describing the return value of the `payloadCreator` argument to `createAsyncThunk`.\n * Might be useful for wrapping `createAsyncThunk` in custom abstractions.\n *\n * @public\n */\nexport type AsyncThunkPayloadCreatorReturnValue<Returned, ThunkApiConfig extends AsyncThunkConfig> = MaybePromise<IsUnknown<GetFulfilledMeta<ThunkApiConfig>, Returned, FulfillWithMeta<Returned, GetFulfilledMeta<ThunkApiConfig>>> | RejectWithValue<GetRejectValue<ThunkApiConfig>, GetRejectedMeta<ThunkApiConfig>>>;\n/**\n * A type describing the `payloadCreator` argument to `createAsyncThunk`.\n * Might be useful for wrapping `createAsyncThunk` in custom abstractions.\n *\n * @public\n */\nexport type AsyncThunkPayloadCreator<Returned, ThunkArg = void, ThunkApiConfig extends AsyncThunkConfig = {}> = (arg: ThunkArg, thunkAPI: GetThunkAPI<ThunkApiConfig>) => AsyncThunkPayloadCreatorReturnValue<Returned, ThunkApiConfig>;\n\n/**\n * A ThunkAction created by `createAsyncThunk`.\n * Dispatching it returns a Promise for either a\n * fulfilled or rejected action.\n * Also, the returned value contains an `abort()` method\n * that allows the asyncAction to be cancelled from the outside.\n *\n * @public\n */\nexport type AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig extends AsyncThunkConfig> = (dispatch: NonNullable<GetDispatch<ThunkApiConfig>>, getState: () => GetState<ThunkApiConfig>, extra: GetExtra<ThunkApiConfig>) => SafePromise<ReturnType<AsyncThunkFulfilledActionCreator<Returned, ThunkArg>> | ReturnType<AsyncThunkRejectedActionCreator<ThunkArg, ThunkApiConfig>>> & {\n  abort: (reason?: string) => void;\n  requestId: string;\n  arg: ThunkArg;\n  unwrap: () => Promise<Returned>;\n};\ntype AsyncThunkActionCreator<Returned, ThunkArg, ThunkApiConfig extends AsyncThunkConfig> = IsAny<ThunkArg,\n// any handling\n(arg: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig>,\n// unknown handling\nunknown extends ThunkArg ? (arg: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig> /* argument not specified or specified as void or undefined*/ : [ThunkArg] extends [void] | [undefined] ? () => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig> /* argument contains void*/ : [void] extends [ThunkArg] // make optional\n? (arg?: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig> /* argument contains undefined*/ : [undefined] extends [ThunkArg] ? WithStrictNullChecks<\n// with strict nullChecks: make optional\n(arg?: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig>,\n// without strict null checks this will match everything, so don't make it optional\n(arg: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig>> /* default case: normal argument*/ : (arg: ThunkArg) => AsyncThunkAction<Returned, ThunkArg, ThunkApiConfig>>;\n\n/**\n * Options object for `createAsyncThunk`.\n *\n * @public\n */\nexport type AsyncThunkOptions<ThunkArg = void, ThunkApiConfig extends AsyncThunkConfig = {}> = {\n  /**\n   * A method to control whether the asyncThunk should be executed. Has access to the\n   * `arg`, `api.getState()` and `api.extra` arguments.\n   *\n   * @returns `false` if it should be skipped\n   */\n  condition?(arg: ThunkArg, api: Pick<GetThunkAPI<ThunkApiConfig>, 'getState' | 'extra'>): MaybePromise<boolean | undefined>;\n  /**\n   * If `condition` returns `false`, the asyncThunk will be skipped.\n   * This option allows you to control whether a `rejected` action with `meta.condition == false`\n   * will be dispatched or not.\n   *\n   * @default `false`\n   */\n  dispatchConditionRejection?: boolean;\n  serializeError?: (x: unknown) => GetSerializedErrorType<ThunkApiConfig>;\n\n  /**\n   * A function to use when generating the `requestId` for the request sequence.\n   *\n   * @default `nanoid`\n   */\n  idGenerator?: (arg: ThunkArg) => string;\n} & IsUnknown<GetPendingMeta<ThunkApiConfig>, {\n  /**\n   * A method to generate additional properties to be added to `meta` of the pending action.\n   *\n   * Using this optional overload will not modify the types correctly, this overload is only in place to support JavaScript users.\n   * Please use the `ThunkApiConfig` parameter `pendingMeta` to get access to a correctly typed overload\n   */\n  getPendingMeta?(base: {\n    arg: ThunkArg;\n    requestId: string;\n  }, api: Pick<GetThunkAPI<ThunkApiConfig>, 'getState' | 'extra'>): GetPendingMeta<ThunkApiConfig>;\n}, {\n  /**\n   * A method to generate additional properties to be added to `meta` of the pending action.\n   */\n  getPendingMeta(base: {\n    arg: ThunkArg;\n    requestId: string;\n  }, api: Pick<GetThunkAPI<ThunkApiConfig>, 'getState' | 'extra'>): GetPendingMeta<ThunkApiConfig>;\n}>;\nexport type AsyncThunkPendingActionCreator<ThunkArg, ThunkApiConfig = {}> = ActionCreatorWithPreparedPayload<[string, ThunkArg, GetPendingMeta<ThunkApiConfig>?], undefined, string, never, {\n  arg: ThunkArg;\n  requestId: string;\n  requestStatus: 'pending';\n} & GetPendingMeta<ThunkApiConfig>>;\nexport type AsyncThunkRejectedActionCreator<ThunkArg, ThunkApiConfig = {}> = ActionCreatorWithPreparedPayload<[Error | null, string, ThunkArg, GetRejectValue<ThunkApiConfig>?, GetRejectedMeta<ThunkApiConfig>?], GetRejectValue<ThunkApiConfig> | undefined, string, GetSerializedErrorType<ThunkApiConfig>, {\n  arg: ThunkArg;\n  requestId: string;\n  requestStatus: 'rejected';\n  aborted: boolean;\n  condition: boolean;\n} & (({\n  rejectedWithValue: false;\n} & { [K in keyof GetRejectedMeta<ThunkApiConfig>]?: undefined }) | ({\n  rejectedWithValue: true;\n} & GetRejectedMeta<ThunkApiConfig>))>;\nexport type AsyncThunkFulfilledActionCreator<Returned, ThunkArg, ThunkApiConfig = {}> = ActionCreatorWithPreparedPayload<[Returned, string, ThunkArg, GetFulfilledMeta<ThunkApiConfig>?], Returned, string, never, {\n  arg: ThunkArg;\n  requestId: string;\n  requestStatus: 'fulfilled';\n} & GetFulfilledMeta<ThunkApiConfig>>;\n\n/**\n * A type describing the return value of `createAsyncThunk`.\n * Might be useful for wrapping `createAsyncThunk` in custom abstractions.\n *\n * @public\n */\nexport type AsyncThunk<Returned, ThunkArg, ThunkApiConfig extends AsyncThunkConfig> = AsyncThunkActionCreator<Returned, ThunkArg, ThunkApiConfig> & {\n  pending: AsyncThunkPendingActionCreator<ThunkArg, ThunkApiConfig>;\n  rejected: AsyncThunkRejectedActionCreator<ThunkArg, ThunkApiConfig>;\n  fulfilled: AsyncThunkFulfilledActionCreator<Returned, ThunkArg, ThunkApiConfig>;\n  // matchSettled?\n  settled: (action: any) => action is ReturnType<AsyncThunkRejectedActionCreator<ThunkArg, ThunkApiConfig> | AsyncThunkFulfilledActionCreator<Returned, ThunkArg, ThunkApiConfig>>;\n  typePrefix: string;\n};\nexport type OverrideThunkApiConfigs<OldConfig, NewConfig> = Id<NewConfig & Omit<OldConfig, keyof NewConfig>>;\ntype CreateAsyncThunk<CurriedThunkApiConfig extends AsyncThunkConfig> = {\n  /**\n   *\n   * @param typePrefix\n   * @param payloadCreator\n   * @param options\n   *\n   * @public\n   */\n  // separate signature without `AsyncThunkConfig` for better inference\n  <Returned, ThunkArg = void>(typePrefix: string, payloadCreator: AsyncThunkPayloadCreator<Returned, ThunkArg, CurriedThunkApiConfig>, options?: AsyncThunkOptions<ThunkArg, CurriedThunkApiConfig>): AsyncThunk<Returned, ThunkArg, CurriedThunkApiConfig>;\n\n  /**\n   *\n   * @param typePrefix\n   * @param payloadCreator\n   * @param options\n   *\n   * @public\n   */\n  <Returned, ThunkArg, ThunkApiConfig extends AsyncThunkConfig>(typePrefix: string, payloadCreator: AsyncThunkPayloadCreator<Returned, ThunkArg, OverrideThunkApiConfigs<CurriedThunkApiConfig, ThunkApiConfig>>, options?: AsyncThunkOptions<ThunkArg, OverrideThunkApiConfigs<CurriedThunkApiConfig, ThunkApiConfig>>): AsyncThunk<Returned, ThunkArg, OverrideThunkApiConfigs<CurriedThunkApiConfig, ThunkApiConfig>>;\n  withTypes<ThunkApiConfig extends AsyncThunkConfig>(): CreateAsyncThunk<OverrideThunkApiConfigs<CurriedThunkApiConfig, ThunkApiConfig>>;\n};\nexport const createAsyncThunk = /* @__PURE__ */(() => {\n  function createAsyncThunk<Returned, ThunkArg, ThunkApiConfig extends AsyncThunkConfig>(typePrefix: string, payloadCreator: AsyncThunkPayloadCreator<Returned, ThunkArg, ThunkApiConfig>, options?: AsyncThunkOptions<ThunkArg, ThunkApiConfig>): AsyncThunk<Returned, ThunkArg, ThunkApiConfig> {\n    type RejectedValue = GetRejectValue<ThunkApiConfig>;\n    type PendingMeta = GetPendingMeta<ThunkApiConfig>;\n    type FulfilledMeta = GetFulfilledMeta<ThunkApiConfig>;\n    type RejectedMeta = GetRejectedMeta<ThunkApiConfig>;\n    const fulfilled: AsyncThunkFulfilledActionCreator<Returned, ThunkArg, ThunkApiConfig> = createAction(typePrefix + '/fulfilled', (payload: Returned, requestId: string, arg: ThunkArg, meta?: FulfilledMeta) => ({\n      payload,\n      meta: {\n        ...((meta as any) || {}),\n        arg,\n        requestId,\n        requestStatus: ('fulfilled' as const)\n      }\n    }));\n    const pending: AsyncThunkPendingActionCreator<ThunkArg, ThunkApiConfig> = createAction(typePrefix + '/pending', (requestId: string, arg: ThunkArg, meta?: PendingMeta) => ({\n      payload: undefined,\n      meta: {\n        ...((meta as any) || {}),\n        arg,\n        requestId,\n        requestStatus: ('pending' as const)\n      }\n    }));\n    const rejected: AsyncThunkRejectedActionCreator<ThunkArg, ThunkApiConfig> = createAction(typePrefix + '/rejected', (error: Error | null, requestId: string, arg: ThunkArg, payload?: RejectedValue, meta?: RejectedMeta) => ({\n      payload,\n      error: ((options && options.serializeError || miniSerializeError)(error || 'Rejected') as GetSerializedErrorType<ThunkApiConfig>),\n      meta: {\n        ...((meta as any) || {}),\n        arg,\n        requestId,\n        rejectedWithValue: !!payload,\n        requestStatus: ('rejected' as const),\n        aborted: error?.name === 'AbortError',\n        condition: error?.name === 'ConditionError'\n      }\n    }));\n    function actionCreator(arg: ThunkArg): AsyncThunkAction<Returned, ThunkArg, Required<ThunkApiConfig>> {\n      return (dispatch, getState, extra) => {\n        const requestId = options?.idGenerator ? options.idGenerator(arg) : nanoid();\n        const abortController = new AbortController();\n        let abortHandler: (() => void) | undefined;\n        let abortReason: string | undefined;\n        function abort(reason?: string) {\n          abortReason = reason;\n          abortController.abort();\n        }\n        const promise = async function () {\n          let finalAction: ReturnType<typeof fulfilled | typeof rejected>;\n          try {\n            let conditionResult = options?.condition?.(arg, {\n              getState,\n              extra\n            });\n            if (isThenable(conditionResult)) {\n              conditionResult = await conditionResult;\n            }\n            if (conditionResult === false || abortController.signal.aborted) {\n              // eslint-disable-next-line no-throw-literal\n              throw {\n                name: 'ConditionError',\n                message: 'Aborted due to condition callback returning false.'\n              };\n            }\n            const abortedPromise = new Promise<never>((_, reject) => {\n              abortHandler = () => {\n                reject({\n                  name: 'AbortError',\n                  message: abortReason || 'Aborted'\n                });\n              };\n              abortController.signal.addEventListener('abort', abortHandler);\n            });\n            dispatch((pending(requestId, arg, options?.getPendingMeta?.({\n              requestId,\n              arg\n            }, {\n              getState,\n              extra\n            })) as any));\n            finalAction = await Promise.race([abortedPromise, Promise.resolve(payloadCreator(arg, {\n              dispatch,\n              getState,\n              extra,\n              requestId,\n              signal: abortController.signal,\n              abort,\n              rejectWithValue: (((value: RejectedValue, meta?: RejectedMeta) => {\n                return new RejectWithValue(value, meta);\n              }) as any),\n              fulfillWithValue: (((value: unknown, meta?: FulfilledMeta) => {\n                return new FulfillWithMeta(value, meta);\n              }) as any)\n            })).then(result => {\n              if (result instanceof RejectWithValue) {\n                throw result;\n              }\n              if (result instanceof FulfillWithMeta) {\n                return fulfilled(result.payload, requestId, arg, result.meta);\n              }\n              return fulfilled((result as any), requestId, arg);\n            })]);\n          } catch (err) {\n            finalAction = err instanceof RejectWithValue ? rejected(null, requestId, arg, err.payload, err.meta) : rejected((err as any), requestId, arg);\n          } finally {\n            if (abortHandler) {\n              abortController.signal.removeEventListener('abort', abortHandler);\n            }\n          }\n          // We dispatch the result action _after_ the catch, to avoid having any errors\n          // here get swallowed by the try/catch block,\n          // per https://twitter.com/dan_abramov/status/770914221638942720\n          // and https://github.com/reduxjs/redux-toolkit/blob/e85eb17b39a2118d859f7b7746e0f3fee523e089/docs/tutorials/advanced-tutorial.md#async-error-handling-logic-in-thunks\n\n          const skipDispatch = options && !options.dispatchConditionRejection && rejected.match(finalAction) && (finalAction as any).meta.condition;\n          if (!skipDispatch) {\n            dispatch((finalAction as any));\n          }\n          return finalAction;\n        }();\n        return Object.assign((promise as SafePromise<any>), {\n          abort,\n          requestId,\n          arg,\n          unwrap() {\n            return promise.then<any>(unwrapResult);\n          }\n        });\n      };\n    }\n    return Object.assign((actionCreator as AsyncThunkActionCreator<Returned, ThunkArg, ThunkApiConfig>), {\n      pending,\n      rejected,\n      fulfilled,\n      settled: isAnyOf(rejected, fulfilled),\n      typePrefix\n    });\n  }\n  createAsyncThunk.withTypes = () => createAsyncThunk;\n  return (createAsyncThunk as CreateAsyncThunk<AsyncThunkConfig>);\n})();\ninterface UnwrappableAction {\n  payload: any;\n  meta?: any;\n  error?: any;\n}\ntype UnwrappedActionPayload<T extends UnwrappableAction> = Exclude<T, {\n  error: any;\n}>['payload'];\n\n/**\n * @public\n */\nexport function unwrapResult<R extends UnwrappableAction>(action: R): UnwrappedActionPayload<R> {\n  if (action.meta && action.meta.rejectedWithValue) {\n    throw action.payload;\n  }\n  if (action.error) {\n    throw action.error;\n  }\n  return action.payload;\n}\ntype WithStrictNullChecks<True, False> = undefined extends boolean ? False : True;\nfunction isThenable(value: any): value is PromiseLike<any> {\n  return value !== null && typeof value === 'object' && typeof value.then === 'function';\n}","import { produce as createNextState, isDraft } from 'immer';\nimport type { Draft } from 'immer';\nimport type { EntityId, DraftableEntityState, PreventAny } from './models';\nimport type { PayloadAction } from '../createAction';\nimport { isFSA } from '../createAction';\nexport const isDraftTyped = (isDraft as <T>(value: T | Draft<T>) => value is Draft<T>);\nexport function createSingleArgumentStateOperator<T, Id extends EntityId>(mutator: (state: DraftableEntityState<T, Id>) => void) {\n  const operator = createStateOperator((_: undefined, state: DraftableEntityState<T, Id>) => mutator(state));\n  return function operation<S extends DraftableEntityState<T, Id>>(state: PreventAny<S, T, Id>): S {\n    return operator((state as S), undefined);\n  };\n}\nexport function createStateOperator<T, Id extends EntityId, R>(mutator: (arg: R, state: DraftableEntityState<T, Id>) => void) {\n  return function operation<S extends DraftableEntityState<T, Id>>(state: S, arg: R | PayloadAction<R>): S {\n    function isPayloadActionArgument(arg: R | PayloadAction<R>): arg is PayloadAction<R> {\n      return isFSA(arg);\n    }\n    const runMutator = (draft: DraftableEntityState<T, Id>) => {\n      if (isPayloadActionArgument(arg)) {\n        mutator(arg.payload, draft);\n      } else {\n        mutator(arg, draft);\n      }\n    };\n    if (isDraftTyped<DraftableEntityState<T, Id>>(state)) {\n      // we must already be inside a `createNextState` call, likely because\n      // this is being wrapped in `createReducer` or `createSlice`.\n      // It's safe to just pass the draft to the mutator.\n      runMutator(state);\n\n      // since it's a draft, we'll just return it\n      return state;\n    }\n    return createNextState(state, runMutator);\n  };\n}","import type { SerializedError } from '@reduxjs/toolkit';\nconst task = 'task';\nconst listener = 'listener';\nconst completed = 'completed';\nconst cancelled = 'cancelled';\n\n/* TaskAbortError error codes  */\nexport const taskCancelled = (`task-${cancelled}` as const);\nexport const taskCompleted = (`task-${completed}` as const);\nexport const listenerCancelled = (`${listener}-${cancelled}` as const);\nexport const listenerCompleted = (`${listener}-${completed}` as const);\nexport class TaskAbortError implements SerializedError {\n  name = 'TaskAbortError';\n  message: string;\n  constructor(public code: string | undefined) {\n    this.message = `${task} ${cancelled} (reason: ${code})`;\n  }\n}","import { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { AbortSignalWithReason } from './types';\nexport const assertFunction: (func: unknown, expected: string) => asserts func is (...args: unknown[]) => unknown = (func: unknown, expected: string) => {\n  if (typeof func !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(32) : `${expected} is not a function`);\n  }\n};\nexport const noop = () => {};\nexport const catchRejection = <T,>(promise: Promise<T>, onError = noop): Promise<T> => {\n  promise.catch(onError);\n  return promise;\n};\nexport const addAbortSignalListener = (abortSignal: AbortSignal, callback: (evt: Event) => void) => {\n  abortSignal.addEventListener('abort', callback, {\n    once: true\n  });\n  return () => abortSignal.removeEventListener('abort', callback);\n};\n\n/**\n * Calls `abortController.abort(reason)` and patches `signal.reason`.\n * if it is not supported.\n *\n * At the time of writing `signal.reason` is available in FF chrome, edge node 17 and deno.\n * @param abortController\n * @param reason\n * @returns\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal/reason\n */\nexport const abortControllerWithReason = <T,>(abortController: AbortController, reason: T): void => {\n  type Consumer<T> = (val: T) => void;\n  const signal = (abortController.signal as AbortSignalWithReason<T>);\n  if (signal.aborted) {\n    return;\n  }\n\n  // Patch `reason` if necessary.\n  // - We use defineProperty here because reason is a getter of `AbortSignal.__proto__`.\n  // - We need to patch 'reason' before calling `.abort()` because listeners to the 'abort'\n  // event are are notified immediately.\n  if (!('reason' in signal)) {\n    Object.defineProperty(signal, 'reason', {\n      enumerable: true,\n      value: reason,\n      configurable: true,\n      writable: true\n    });\n  }\n  ;\n  (abortController.abort as Consumer<typeof reason>)(reason);\n};","import { TaskAbortError } from './exceptions';\nimport type { AbortSignalWithReason, TaskResult } from './types';\nimport { addAbortSignalListener, catchRejection, noop } from './utils';\n\n/**\n * Synchronously raises {@link TaskAbortError} if the task tied to the input `signal` has been cancelled.\n * @param signal\n * @param reason\n * @see {TaskAbortError}\n */\nexport const validateActive = (signal: AbortSignal): void => {\n  if (signal.aborted) {\n    const {\n      reason\n    } = (signal as AbortSignalWithReason<string>);\n    throw new TaskAbortError(reason);\n  }\n};\n\n/**\n * Generates a race between the promise(s) and the AbortSignal\n * This avoids `Promise.race()`-related memory leaks:\n * https://github.com/nodejs/node/issues/17469#issuecomment-349794909\n */\nexport function raceWithSignal<T>(signal: AbortSignalWithReason<string>, promise: Promise<T>): Promise<T> {\n  let cleanup = noop;\n  return new Promise<T>((resolve, reject) => {\n    const notifyRejection = () => reject(new TaskAbortError(signal.reason));\n    if (signal.aborted) {\n      notifyRejection();\n      return;\n    }\n    cleanup = addAbortSignalListener(signal, notifyRejection);\n    promise.finally(() => cleanup()).then(resolve, reject);\n  }).finally(() => {\n    // after this point, replace `cleanup` with a noop, so there is no reference to `signal` any more\n    cleanup = noop;\n  });\n}\n\n/**\n * Runs a task and returns promise that resolves to {@link TaskResult}.\n * Second argument is an optional `cleanUp` function that always runs after task.\n *\n * **Note:** `runTask` runs the executor in the next microtask.\n * @returns\n */\nexport const runTask = async <T,>(task: () => Promise<T>, cleanUp?: () => void): Promise<TaskResult<T>> => {\n  try {\n    await Promise.resolve();\n    const value = await task();\n    return {\n      status: 'ok',\n      value\n    };\n  } catch (error: any) {\n    return {\n      status: error instanceof TaskAbortError ? 'cancelled' : 'rejected',\n      error\n    };\n  } finally {\n    cleanUp?.();\n  }\n};\n\n/**\n * Given an input `AbortSignal` and a promise returns another promise that resolves\n * as soon the input promise is provided or rejects as soon as\n * `AbortSignal.abort` is `true`.\n * @param signal\n * @returns\n */\nexport const createPause = <T,>(signal: AbortSignal) => {\n  return (promise: Promise<T>): Promise<T> => {\n    return catchRejection(raceWithSignal(signal, promise).then(output => {\n      validateActive(signal);\n      return output;\n    }));\n  };\n};\n\n/**\n * Given an input `AbortSignal` and `timeoutMs` returns a promise that resolves\n * after `timeoutMs` or rejects as soon as `AbortSignal.abort` is `true`.\n * @param signal\n * @returns\n */\nexport const createDelay = (signal: AbortSignal) => {\n  const pause = createPause<void>(signal);\n  return (timeoutMs: number): Promise<void> => {\n    return pause(new Promise<void>(resolve => setTimeout(resolve, timeoutMs)));\n  };\n};","import { formatProdErrorMessage as _formatProdErrorMessage3 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage2 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { Action, Dispatch, MiddlewareAPI, UnknownAction } from 'redux';\nimport { isAction } from 'redux';\nimport type { ThunkDispatch } from 'redux-thunk';\nimport { createAction } from '../createAction';\nimport { nanoid } from '../nanoid';\nimport { find } from '../utils';\nimport { TaskAbortError, listenerCancelled, listenerCompleted, taskCancelled, taskCompleted } from './exceptions';\nimport { createDelay, createPause, raceWithSignal, runTask, validateActive } from './task';\nimport type { AbortSignalWithReason, AddListenerOverloads, AnyListenerPredicate, CreateListenerMiddlewareOptions, FallbackAddListenerOptions, ForkOptions, ForkedTask, ForkedTaskExecutor, ListenerEntry, ListenerErrorHandler, ListenerErrorInfo, ListenerMiddleware, ListenerMiddlewareInstance, TakePattern, TaskResult, TypedAddListener, TypedCreateListenerEntry, TypedRemoveListener, UnsubscribeListener, UnsubscribeListenerOptions } from './types';\nimport { abortControllerWithReason, addAbortSignalListener, assertFunction, catchRejection, noop } from './utils';\nexport { TaskAbortError } from './exceptions';\nexport type { AsyncTaskExecutor, CreateListenerMiddlewareOptions, ForkedTask, ForkedTaskAPI, ForkedTaskExecutor, ListenerEffect, ListenerEffectAPI, ListenerErrorHandler, ListenerMiddleware, ListenerMiddlewareInstance, SyncTaskExecutor, TaskCancelled, TaskRejected, TaskResolved, TaskResult, TypedAddListener, TypedRemoveListener, TypedStartListening, TypedStopListening, UnsubscribeListener, UnsubscribeListenerOptions } from './types';\n\n//Overly-aggressive byte-shaving\nconst {\n  assign\n} = Object;\n/**\n * @internal\n */\nconst INTERNAL_NIL_TOKEN = ({} as const);\nconst alm = ('listenerMiddleware' as const);\nconst createFork = (parentAbortSignal: AbortSignalWithReason<unknown>, parentBlockingPromises: Promise<any>[]) => {\n  const linkControllers = (controller: AbortController) => addAbortSignalListener(parentAbortSignal, () => abortControllerWithReason(controller, parentAbortSignal.reason));\n  return <T,>(taskExecutor: ForkedTaskExecutor<T>, opts?: ForkOptions): ForkedTask<T> => {\n    assertFunction(taskExecutor, 'taskExecutor');\n    const childAbortController = new AbortController();\n    linkControllers(childAbortController);\n    const result = runTask<T>(async (): Promise<T> => {\n      validateActive(parentAbortSignal);\n      validateActive(childAbortController.signal);\n      const result = (await taskExecutor({\n        pause: createPause(childAbortController.signal),\n        delay: createDelay(childAbortController.signal),\n        signal: childAbortController.signal\n      }) as T);\n      validateActive(childAbortController.signal);\n      return result;\n    }, () => abortControllerWithReason(childAbortController, taskCompleted));\n    if (opts?.autoJoin) {\n      parentBlockingPromises.push(result.catch(noop));\n    }\n    return {\n      result: createPause<TaskResult<T>>(parentAbortSignal)(result),\n      cancel() {\n        abortControllerWithReason(childAbortController, taskCancelled);\n      }\n    };\n  };\n};\nconst createTakePattern = <S,>(startListening: AddListenerOverloads<UnsubscribeListener, S, Dispatch>, signal: AbortSignal): TakePattern<S> => {\n  /**\n   * A function that takes a ListenerPredicate and an optional timeout,\n   * and resolves when either the predicate returns `true` based on an action\n   * state combination or when the timeout expires.\n   * If the parent listener is canceled while waiting, this will throw a\n   * TaskAbortError.\n   */\n  const take = async <P extends AnyListenerPredicate<S>,>(predicate: P, timeout: number | undefined) => {\n    validateActive(signal);\n\n    // Placeholder unsubscribe function until the listener is added\n    let unsubscribe: UnsubscribeListener = () => {};\n    const tuplePromise = new Promise<[Action, S, S]>((resolve, reject) => {\n      // Inside the Promise, we synchronously add the listener.\n      let stopListening = startListening({\n        predicate: (predicate as any),\n        effect: (action, listenerApi): void => {\n          // One-shot listener that cleans up as soon as the predicate passes\n          listenerApi.unsubscribe();\n          // Resolve the promise with the same arguments the predicate saw\n          resolve([action, listenerApi.getState(), listenerApi.getOriginalState()]);\n        }\n      });\n      unsubscribe = () => {\n        stopListening();\n        reject();\n      };\n    });\n    const promises: (Promise<null> | Promise<[Action, S, S]>)[] = [tuplePromise];\n    if (timeout != null) {\n      promises.push(new Promise<null>(resolve => setTimeout(resolve, timeout, null)));\n    }\n    try {\n      const output = await raceWithSignal(signal, Promise.race(promises));\n      validateActive(signal);\n      return output;\n    } finally {\n      // Always clean up the listener\n      unsubscribe();\n    }\n  };\n  return (((predicate: AnyListenerPredicate<S>, timeout: number | undefined) => catchRejection(take(predicate, timeout))) as TakePattern<S>);\n};\nconst getListenerEntryPropsFrom = (options: FallbackAddListenerOptions) => {\n  let {\n    type,\n    actionCreator,\n    matcher,\n    predicate,\n    effect\n  } = options;\n  if (type) {\n    predicate = createAction(type).match;\n  } else if (actionCreator) {\n    type = actionCreator!.type;\n    predicate = actionCreator.match;\n  } else if (matcher) {\n    predicate = matcher;\n  } else if (predicate) {\n    // pass\n  } else {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(21) : 'Creating or removing a listener requires one of the known fields for matching an action');\n  }\n  assertFunction(effect, 'options.listener');\n  return {\n    predicate,\n    type,\n    effect\n  };\n};\n\n/** Accepts the possible options for creating a listener, and returns a formatted listener entry */\nexport const createListenerEntry: TypedCreateListenerEntry<unknown> = ((Object.assign((options: FallbackAddListenerOptions) => {\n  const {\n    type,\n    predicate,\n    effect\n  } = getListenerEntryPropsFrom(options);\n  const id = nanoid();\n  const entry: ListenerEntry<unknown> = {\n    id,\n    effect,\n    type,\n    predicate,\n    pending: new Set<AbortController>(),\n    unsubscribe: () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(22) : 'Unsubscribe not initialized');\n    }\n  };\n  return entry;\n}, {\n  withTypes: () => createListenerEntry\n}) as unknown) as TypedCreateListenerEntry<unknown>);\nconst cancelActiveListeners = (entry: ListenerEntry<unknown, Dispatch<UnknownAction>>) => {\n  entry.pending.forEach(controller => {\n    abortControllerWithReason(controller, listenerCancelled);\n  });\n};\nconst createClearListenerMiddleware = (listenerMap: Map<string, ListenerEntry>) => {\n  return () => {\n    listenerMap.forEach(cancelActiveListeners);\n    listenerMap.clear();\n  };\n};\n\n/**\n * Safely reports errors to the `errorHandler` provided.\n * Errors that occur inside `errorHandler` are notified in a new task.\n * Inspired by [rxjs reportUnhandledError](https://github.com/ReactiveX/rxjs/blob/6fafcf53dc9e557439b25debaeadfd224b245a66/src/internal/util/reportUnhandledError.ts)\n * @param errorHandler\n * @param errorToNotify\n */\nconst safelyNotifyError = (errorHandler: ListenerErrorHandler, errorToNotify: unknown, errorInfo: ListenerErrorInfo): void => {\n  try {\n    errorHandler(errorToNotify, errorInfo);\n  } catch (errorHandlerError) {\n    // We cannot let an error raised here block the listener queue.\n    // The error raised here will be picked up by `window.onerror`, `process.on('error')` etc...\n    setTimeout(() => {\n      throw errorHandlerError;\n    }, 0);\n  }\n};\n\n/**\n * @public\n */\nexport const addListener = ((Object.assign(createAction(`${alm}/add`), {\n  withTypes: () => addListener\n}) as unknown) as TypedAddListener<unknown>);\n\n/**\n * @public\n */\nexport const clearAllListeners = createAction(`${alm}/removeAll`);\n\n/**\n * @public\n */\nexport const removeListener = ((Object.assign(createAction(`${alm}/remove`), {\n  withTypes: () => removeListener\n}) as unknown) as TypedRemoveListener<unknown>);\nconst defaultErrorHandler: ListenerErrorHandler = (...args: unknown[]) => {\n  console.error(`${alm}/error`, ...args);\n};\n\n/**\n * @public\n */\nexport const createListenerMiddleware = <StateType = unknown, DispatchType extends Dispatch<Action> = ThunkDispatch<StateType, unknown, UnknownAction>, ExtraArgument = unknown>(middlewareOptions: CreateListenerMiddlewareOptions<ExtraArgument> = {}) => {\n  const listenerMap = new Map<string, ListenerEntry>();\n  const {\n    extra,\n    onError = defaultErrorHandler\n  } = middlewareOptions;\n  assertFunction(onError, 'onError');\n  const insertEntry = (entry: ListenerEntry) => {\n    entry.unsubscribe = () => listenerMap.delete(entry!.id);\n    listenerMap.set(entry.id, entry);\n    return (cancelOptions?: UnsubscribeListenerOptions) => {\n      entry.unsubscribe();\n      if (cancelOptions?.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    };\n  };\n  const startListening = (((options: FallbackAddListenerOptions) => {\n    let entry = find(Array.from(listenerMap.values()), existingEntry => existingEntry.effect === options.effect);\n    if (!entry) {\n      entry = createListenerEntry((options as any));\n    }\n    return insertEntry(entry);\n  }) as AddListenerOverloads<any>);\n  Object.assign(startListening, {\n    withTypes: () => startListening\n  });\n  const stopListening = (options: FallbackAddListenerOptions & UnsubscribeListenerOptions): boolean => {\n    const {\n      type,\n      effect,\n      predicate\n    } = getListenerEntryPropsFrom(options);\n    const entry = find(Array.from(listenerMap.values()), entry => {\n      const matchPredicateOrType = typeof type === 'string' ? entry.type === type : entry.predicate === predicate;\n      return matchPredicateOrType && entry.effect === effect;\n    });\n    if (entry) {\n      entry.unsubscribe();\n      if (options.cancelActive) {\n        cancelActiveListeners(entry);\n      }\n    }\n    return !!entry;\n  };\n  Object.assign(stopListening, {\n    withTypes: () => stopListening\n  });\n  const notifyListener = async (entry: ListenerEntry<unknown, Dispatch<UnknownAction>>, action: unknown, api: MiddlewareAPI, getOriginalState: () => StateType) => {\n    const internalTaskController = new AbortController();\n    const take = createTakePattern((startListening as AddListenerOverloads<any>), internalTaskController.signal);\n    const autoJoinPromises: Promise<any>[] = [];\n    try {\n      entry.pending.add(internalTaskController);\n      await Promise.resolve(entry.effect(action,\n      // Use assign() rather than ... to avoid extra helper functions added to bundle\n      assign({}, api, {\n        getOriginalState,\n        condition: (predicate: AnyListenerPredicate<any>, timeout?: number) => take(predicate, timeout).then(Boolean),\n        take,\n        delay: createDelay(internalTaskController.signal),\n        pause: createPause<any>(internalTaskController.signal),\n        extra,\n        signal: internalTaskController.signal,\n        fork: createFork(internalTaskController.signal, autoJoinPromises),\n        unsubscribe: entry.unsubscribe,\n        subscribe: () => {\n          listenerMap.set(entry.id, entry);\n        },\n        cancelActiveListeners: () => {\n          entry.pending.forEach((controller, _, set) => {\n            if (controller !== internalTaskController) {\n              abortControllerWithReason(controller, listenerCancelled);\n              set.delete(controller);\n            }\n          });\n        },\n        cancel: () => {\n          abortControllerWithReason(internalTaskController, listenerCancelled);\n          entry.pending.delete(internalTaskController);\n        },\n        throwIfCancelled: () => {\n          validateActive(internalTaskController.signal);\n        }\n      })));\n    } catch (listenerError) {\n      if (!(listenerError instanceof TaskAbortError)) {\n        safelyNotifyError(onError, listenerError, {\n          raisedBy: 'effect'\n        });\n      }\n    } finally {\n      await Promise.all(autoJoinPromises);\n      abortControllerWithReason(internalTaskController, listenerCompleted); // Notify that the task has completed\n      entry.pending.delete(internalTaskController);\n    }\n  };\n  const clearListenerMiddleware = createClearListenerMiddleware(listenerMap);\n  const middleware: ListenerMiddleware<StateType, DispatchType, ExtraArgument> = api => next => action => {\n    if (!isAction(action)) {\n      // we only want to notify listeners for action objects\n      return next(action);\n    }\n    if (addListener.match(action)) {\n      return startListening((action.payload as any));\n    }\n    if (clearAllListeners.match(action)) {\n      clearListenerMiddleware();\n      return;\n    }\n    if (removeListener.match(action)) {\n      return stopListening(action.payload);\n    }\n\n    // Need to get this state _before_ the reducer processes the action\n    let originalState: StateType | typeof INTERNAL_NIL_TOKEN = api.getState();\n\n    // `getOriginalState` can only be called synchronously.\n    // @see https://github.com/reduxjs/redux-toolkit/discussions/1648#discussioncomment-1932820\n    const getOriginalState = (): StateType => {\n      if (originalState === INTERNAL_NIL_TOKEN) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage3(23) : `${alm}: getOriginalState can only be called synchronously`);\n      }\n      return (originalState as StateType);\n    };\n    let result: unknown;\n    try {\n      // Actually forward the action to the reducer before we handle listeners\n      result = next(action);\n      if (listenerMap.size > 0) {\n        const currentState = api.getState();\n        // Work around ESBuild+TS transpilation issue\n        const listenerEntries = Array.from(listenerMap.values());\n        for (const entry of listenerEntries) {\n          let runListener = false;\n          try {\n            runListener = entry.predicate(action, currentState, originalState);\n          } catch (predicateError) {\n            runListener = false;\n            safelyNotifyError(onError, predicateError, {\n              raisedBy: 'predicate'\n            });\n          }\n          if (!runListener) {\n            continue;\n          }\n          notifyListener(entry, action, api, getOriginalState);\n        }\n      }\n    } finally {\n      // Remove `originalState` store from this scope.\n      originalState = INTERNAL_NIL_TOKEN;\n    }\n    return result;\n  };\n  return ({\n    middleware,\n    startListening,\n    stopListening,\n    clearListeners: clearListenerMiddleware\n  } as ListenerMiddlewareInstance<StateType, DispatchType, ExtraArgument>);\n};","import { formatProdErrorMessage as _formatProdErrorMessage2 } from \"@reduxjs/toolkit\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"@reduxjs/toolkit\";\nimport type { UnknownAction, Reducer, StateFromReducersMapObject } from 'redux';\nimport { combineReducers } from 'redux';\nimport { nanoid } from './nanoid';\nimport type { Id, NonUndefined, Tail, UnionToIntersection, WithOptionalProp } from './tsHelpers';\nimport { emplace } from './utils';\ntype SliceLike<ReducerPath extends string, State> = {\n  reducerPath: ReducerPath;\n  reducer: Reducer<State>;\n};\ntype AnySliceLike = SliceLike<string, any>;\ntype SliceLikeReducerPath<A extends AnySliceLike> = A extends SliceLike<infer ReducerPath, any> ? ReducerPath : never;\ntype SliceLikeState<A extends AnySliceLike> = A extends SliceLike<any, infer State> ? State : never;\nexport type WithSlice<A extends AnySliceLike> = { [Path in SliceLikeReducerPath<A>]: SliceLikeState<A> };\ntype ReducerMap = Record<string, Reducer>;\ntype ExistingSliceLike<DeclaredState> = { [ReducerPath in keyof DeclaredState]: SliceLike<ReducerPath & string, NonUndefined<DeclaredState[ReducerPath]>> }[keyof DeclaredState];\nexport type InjectConfig = {\n  /**\n   * Allow replacing reducer with a different reference. Normally, an error will be thrown if a different reducer instance to the one already injected is used.\n   */\n  overrideExisting?: boolean;\n};\n\n/**\n * A reducer that allows for slices/reducers to be injected after initialisation.\n */\nexport interface CombinedSliceReducer<InitialState, DeclaredState = InitialState> extends Reducer<DeclaredState, UnknownAction, Partial<DeclaredState>> {\n  /**\n   * Provide a type for slices that will be injected lazily.\n   *\n   * One way to do this would be with interface merging:\n   * ```ts\n   *\n   * export interface LazyLoadedSlices {}\n   *\n   * export const rootReducer = combineSlices(stringSlice).withLazyLoadedSlices<LazyLoadedSlices>();\n   *\n   * // elsewhere\n   *\n   * declare module './reducer' {\n   *   export interface LazyLoadedSlices extends WithSlice<typeof booleanSlice> {}\n   * }\n   *\n   * const withBoolean = rootReducer.inject(booleanSlice);\n   *\n   * // elsewhere again\n   *\n   * declare module './reducer' {\n   *   export interface LazyLoadedSlices {\n   *     customName: CustomState\n   *   }\n   * }\n   *\n   * const withCustom = rootReducer.inject({ reducerPath: \"customName\", reducer: customSlice.reducer })\n   * ```\n   */\n  withLazyLoadedSlices<Lazy = {}>(): CombinedSliceReducer<InitialState, Id<DeclaredState & Partial<Lazy>>>;\n\n  /**\n   * Inject a slice.\n   *\n   * Accepts an individual slice, RTKQ API instance, or a \"slice-like\" { reducerPath, reducer } object.\n   *\n   * ```ts\n   * rootReducer.inject(booleanSlice)\n   * rootReducer.inject(baseApi)\n   * rootReducer.inject({ reducerPath: 'boolean' as const, reducer: newReducer }, { overrideExisting: true })\n   * ```\n   *\n   */\n  inject<Sl extends Id<ExistingSliceLike<DeclaredState>>>(slice: Sl, config?: InjectConfig): CombinedSliceReducer<InitialState, Id<DeclaredState & WithSlice<Sl>>>;\n\n  /**\n   * Inject a slice.\n   *\n   * Accepts an individual slice, RTKQ API instance, or a \"slice-like\" { reducerPath, reducer } object.\n   *\n   * ```ts\n   * rootReducer.inject(booleanSlice)\n   * rootReducer.inject(baseApi)\n   * rootReducer.inject({ reducerPath: 'boolean' as const, reducer: newReducer }, { overrideExisting: true })\n   * ```\n   *\n   */\n  inject<ReducerPath extends string, State>(slice: SliceLike<ReducerPath, State & (ReducerPath extends keyof DeclaredState ? never : State)>, config?: InjectConfig): CombinedSliceReducer<InitialState, Id<DeclaredState & WithSlice<SliceLike<ReducerPath, State>>>>;\n\n  /**\n   * Create a selector that guarantees that the slices injected will have a defined value when selector is run.\n   *\n   * ```ts\n   * const selectBooleanWithoutInjection = (state: RootState) => state.boolean;\n   * //                                                                ^? boolean | undefined\n   *\n   * const selectBoolean = rootReducer.inject(booleanSlice).selector((state) => {\n   *   // if action hasn't been dispatched since slice was injected, this would usually be undefined\n   *   // however selector() uses a Proxy around the first parameter to ensure that it evaluates to the initial state instead, if undefined\n   *   return state.boolean;\n   *   //           ^? boolean\n   * })\n   * ```\n   *\n   * If the reducer is nested inside the root state, a selectState callback can be passed to retrieve the reducer's state.\n   *\n   * ```ts\n   *\n   * export interface LazyLoadedSlices {};\n   *\n   * export const innerReducer = combineSlices(stringSlice).withLazyLoadedSlices<LazyLoadedSlices>();\n   *\n   * export const rootReducer = combineSlices({ inner: innerReducer });\n   *\n   * export type RootState = ReturnType<typeof rootReducer>;\n   *\n   * // elsewhere\n   *\n   * declare module \"./reducer.ts\" {\n   *  export interface LazyLoadedSlices extends WithSlice<typeof booleanSlice> {}\n   * }\n   *\n   * const withBool = innerReducer.inject(booleanSlice);\n   *\n   * const selectBoolean = withBool.selector(\n   *   (state) => state.boolean,\n   *   (rootState: RootState) => state.inner\n   * );\n   * //    now expects to be passed RootState instead of innerReducer state\n   *\n   * ```\n   *\n   * Value passed to selectorFn will be a Proxy - use selector.original(proxy) to get original state value (useful for debugging)\n   *\n   * ```ts\n   * const injectedReducer = rootReducer.inject(booleanSlice);\n   * const selectBoolean = injectedReducer.selector((state) => {\n   *   console.log(injectedReducer.selector.original(state).boolean) // possibly undefined\n   *   return state.boolean\n   * })\n   * ```\n   */\n  selector: {\n    /**\n     * Create a selector that guarantees that the slices injected will have a defined value when selector is run.\n     *\n     * ```ts\n     * const selectBooleanWithoutInjection = (state: RootState) => state.boolean;\n     * //                                                                ^? boolean | undefined\n     *\n     * const selectBoolean = rootReducer.inject(booleanSlice).selector((state) => {\n     *   // if action hasn't been dispatched since slice was injected, this would usually be undefined\n     *   // however selector() uses a Proxy around the first parameter to ensure that it evaluates to the initial state instead, if undefined\n     *   return state.boolean;\n     *   //           ^? boolean\n     * })\n     * ```\n     *\n     * Value passed to selectorFn will be a Proxy - use selector.original(proxy) to get original state value (useful for debugging)\n     *\n     * ```ts\n     * const injectedReducer = rootReducer.inject(booleanSlice);\n     * const selectBoolean = injectedReducer.selector((state) => {\n     *   console.log(injectedReducer.selector.original(state).boolean) // undefined\n     *   return state.boolean\n     * })\n     * ```\n     */\n    <Selector extends (state: DeclaredState, ...args: any[]) => unknown>(selectorFn: Selector): (state: WithOptionalProp<Parameters<Selector>[0], Exclude<keyof DeclaredState, keyof InitialState>>, ...args: Tail<Parameters<Selector>>) => ReturnType<Selector>;\n\n    /**\n     * Create a selector that guarantees that the slices injected will have a defined value when selector is run.\n     *\n     * ```ts\n     * const selectBooleanWithoutInjection = (state: RootState) => state.boolean;\n     * //                                                                ^? boolean | undefined\n     *\n     * const selectBoolean = rootReducer.inject(booleanSlice).selector((state) => {\n     *   // if action hasn't been dispatched since slice was injected, this would usually be undefined\n     *   // however selector() uses a Proxy around the first parameter to ensure that it evaluates to the initial state instead, if undefined\n     *   return state.boolean;\n     *   //           ^? boolean\n     * })\n     * ```\n     *\n     * If the reducer is nested inside the root state, a selectState callback can be passed to retrieve the reducer's state.\n     *\n     * ```ts\n     *\n     * interface LazyLoadedSlices {};\n     *\n     * const innerReducer = combineSlices(stringSlice).withLazyLoadedSlices<LazyLoadedSlices>();\n     *\n     * const rootReducer = combineSlices({ inner: innerReducer });\n     *\n     * type RootState = ReturnType<typeof rootReducer>;\n     *\n     * // elsewhere\n     *\n     * declare module \"./reducer.ts\" {\n     *  interface LazyLoadedSlices extends WithSlice<typeof booleanSlice> {}\n     * }\n     *\n     * const withBool = innerReducer.inject(booleanSlice);\n     *\n     * const selectBoolean = withBool.selector(\n     *   (state) => state.boolean,\n     *   (rootState: RootState) => state.inner\n     * );\n     * //    now expects to be passed RootState instead of innerReducer state\n     *\n     * ```\n     *\n     * Value passed to selectorFn will be a Proxy - use selector.original(proxy) to get original state value (useful for debugging)\n     *\n     * ```ts\n     * const injectedReducer = rootReducer.inject(booleanSlice);\n     * const selectBoolean = injectedReducer.selector((state) => {\n     *   console.log(injectedReducer.selector.original(state).boolean) // possibly undefined\n     *   return state.boolean\n     * })\n     * ```\n     */\n    <Selector extends (state: DeclaredState, ...args: any[]) => unknown, RootState>(selectorFn: Selector, selectState: (rootState: RootState, ...args: Tail<Parameters<Selector>>) => WithOptionalProp<Parameters<Selector>[0], Exclude<keyof DeclaredState, keyof InitialState>>): (state: RootState, ...args: Tail<Parameters<Selector>>) => ReturnType<Selector>;\n    /**\n     * Returns the unproxied state. Useful for debugging.\n     * @param state state Proxy, that ensures injected reducers have value\n     * @returns original, unproxied state\n     * @throws if value passed is not a state Proxy\n     */\n    original: (state: DeclaredState) => InitialState & Partial<DeclaredState>;\n  };\n}\ntype InitialState<Slices extends Array<AnySliceLike | ReducerMap>> = UnionToIntersection<Slices[number] extends infer Slice ? Slice extends AnySliceLike ? WithSlice<Slice> : StateFromReducersMapObject<Slice> : never>;\nconst isSliceLike = (maybeSliceLike: AnySliceLike | ReducerMap): maybeSliceLike is AnySliceLike => 'reducerPath' in maybeSliceLike && typeof maybeSliceLike.reducerPath === 'string';\nconst getReducers = (slices: Array<AnySliceLike | ReducerMap>) => slices.flatMap(sliceOrMap => isSliceLike(sliceOrMap) ? [([sliceOrMap.reducerPath, sliceOrMap.reducer] as const)] : Object.entries(sliceOrMap));\nconst ORIGINAL_STATE = Symbol.for('rtk-state-proxy-original');\nconst isStateProxy = (value: any) => !!value && !!value[ORIGINAL_STATE];\nconst stateProxyMap = new WeakMap<object, object>();\nconst createStateProxy = <State extends object,>(state: State, reducerMap: Partial<Record<string, Reducer>>) => (emplace(stateProxyMap, state, {\n  insert: () => new Proxy(state, {\n    get: (target, prop, receiver) => {\n      if (prop === ORIGINAL_STATE) return target;\n      const result = Reflect.get(target, prop, receiver);\n      if (typeof result === 'undefined') {\n        const reducer = reducerMap[prop.toString()];\n        if (reducer) {\n          // ensure action type is random, to prevent reducer treating it differently\n          const reducerResult = reducer(undefined, {\n            type: nanoid()\n          });\n          if (typeof reducerResult === 'undefined') {\n            throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(24) : `The slice reducer for key \"${prop.toString()}\" returned undefined when called for selector(). ` + `If the state passed to the reducer is undefined, you must ` + `explicitly return the initial state. The initial state may ` + `not be undefined. If you don't want to set a value for this reducer, ` + `you can use null instead of undefined.`);\n          }\n          return reducerResult;\n        }\n      }\n      return result;\n    }\n  })\n}) as State);\nconst original = (state: any) => {\n  if (!isStateProxy(state)) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(25) : 'original must be used on state Proxy');\n  }\n  return state[ORIGINAL_STATE];\n};\nconst noopReducer: Reducer<Record<string, any>> = (state = {}) => state;\nexport function combineSlices<Slices extends Array<AnySliceLike | ReducerMap>>(...slices: Slices): CombinedSliceReducer<Id<InitialState<Slices>>> {\n  const reducerMap = Object.fromEntries<Reducer>(getReducers(slices));\n  const getReducer = () => Object.keys(reducerMap).length ? combineReducers(reducerMap) : noopReducer;\n  let reducer = getReducer();\n  function combinedReducer(state: Record<string, unknown>, action: UnknownAction) {\n    return reducer(state, action);\n  }\n  combinedReducer.withLazyLoadedSlices = () => combinedReducer;\n  const inject = (slice: AnySliceLike, config: InjectConfig = {}): typeof combinedReducer => {\n    const {\n      reducerPath,\n      reducer: reducerToInject\n    } = slice;\n    const currentReducer = reducerMap[reducerPath];\n    if (!config.overrideExisting && currentReducer && currentReducer !== reducerToInject) {\n      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'development') {\n        console.error(`called \\`inject\\` to override already-existing reducer ${reducerPath} without specifying \\`overrideExisting: true\\``);\n      }\n      return combinedReducer;\n    }\n    reducerMap[reducerPath] = reducerToInject;\n    reducer = getReducer();\n    return combinedReducer;\n  };\n  const selector = Object.assign(function makeSelector<State extends object, RootState, Args extends any[]>(selectorFn: (state: State, ...args: Args) => any, selectState?: (rootState: RootState, ...args: Args) => State) {\n    return function selector(state: State, ...args: Args) {\n      return selectorFn(createStateProxy(selectState ? selectState((state as any), ...args) : state, reducerMap), ...args);\n    };\n  }, {\n    original\n  });\n  return (Object.assign(combinedReducer, {\n    inject,\n    selector\n  }) as any);\n}","/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nexport function formatProdErrorMessage(code: number) {\n  return `Minified Redux Toolkit error #${code}; visit https://redux-toolkit.js.org/Errors?code=${code} for the full message or ` + 'use the non-minified dev environment for full errors. ';\n}","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  unexpectedTitle: { id: 'alert.unexpected.title', defaultMessage: 'Oops!' },\n  unexpectedMessage: { id: 'alert.unexpected.message', defaultMessage: 'An unexpected error occurred.' },\n  rateLimitedTitle: { id: 'alert.rate_limited.title', defaultMessage: 'Rate limited' },\n  rateLimitedMessage: { id: 'alert.rate_limited.message', defaultMessage: 'Please retry after {retry_time, time, medium}.' },\n});\n\nexport const ALERT_SHOW    = 'ALERT_SHOW';\nexport const ALERT_DISMISS = 'ALERT_DISMISS';\nexport const ALERT_CLEAR   = 'ALERT_CLEAR';\nexport const ALERT_NOOP    = 'ALERT_NOOP';\n\nexport const dismissAlert = alert => ({\n  type: ALERT_DISMISS,\n  alert,\n});\n\nexport const clearAlert = () => ({\n  type: ALERT_CLEAR,\n});\n\nexport const showAlert = alert => ({\n  type: ALERT_SHOW,\n  alert,\n});\n\nexport const showAlertForError = (error, skipNotFound = false) => {\n  if (error.response) {\n    const { data, status, statusText, headers } = error.response;\n\n    // Skip these errors as they are reflected in the UI\n    if (skipNotFound && (status === 404 || status === 410)) {\n      return { type: ALERT_NOOP };\n    }\n\n    // Rate limit errors\n    if (status === 429 && headers['x-ratelimit-reset']) {\n      return showAlert({\n        title: messages.rateLimitedTitle,\n        message: messages.rateLimitedMessage,\n        values: { 'retry_time': new Date(headers['x-ratelimit-reset']) },\n      });\n    }\n\n    return showAlert({\n      title: `${status}`,\n      message: data.error || statusText,\n    });\n  }\n\n  console.error(error);\n\n  return showAlert({\n    title: messages.unexpectedTitle,\n    message: messages.unexpectedMessage,\n  });\n};\n","import Trie from 'substring-trie';\n\nimport { assetHost } from 'mastodon/utils/config';\n\nimport { autoPlayGif } from '../../initial_state';\n\nimport { unicodeMapping } from './emoji_unicode_mapping_light';\n\nconst trie = new Trie(Object.keys(unicodeMapping));\n\n// Convert to file names from emojis. (For different variation selector emojis)\nconst emojiFilenames = (emojis) => {\n  return emojis.map(v => unicodeMapping[v].filename);\n};\n\n// Emoji requiring extra borders depending on theme\nconst darkEmoji = emojiFilenames(['🎱', '🐜', '⚫', '🖤', '⬛', '◼️', '◾', '◼️', '✒️', '▪️', '💣', '🎳', '📷', '📸', '♣️', '🕶️', '✴️', '🔌', '💂‍♀️', '📽️', '🍳', '🦍', '💂', '🔪', '🕳️', '🕹️', '🕋', '🖊️', '🖋️', '💂‍♂️', '🎤', '🎓', '🎥', '🎼', '♠️', '🎩', '🦃', '📼', '📹', '🎮', '🐃', '🏴', '🐞', '🕺', '📱', '📲', '🚲', '🪮', '🐦‍⬛']);\nconst lightEmoji = emojiFilenames(['👽', '⚾', '🐔', '☁️', '💨', '🕊️', '👀', '🍥', '👻', '🐐', '❕', '❔', '⛸️', '🌩️', '🔊', '🔇', '📃', '🌧️', '🐏', '🍚', '🍙', '🐓', '🐑', '💀', '☠️', '🌨️', '🔉', '🔈', '💬', '💭', '🏐', '🏳️', '⚪', '⬜', '◽', '◻️', '▫️', '🪽', '🪿']);\n\n/**\n * @param {string} filename\n * @param {\"light\" | \"dark\" } colorScheme\n * @returns {string}\n */\nconst emojiFilename = (filename, colorScheme) => {\n  const borderedEmoji = colorScheme === \"light\" ? lightEmoji : darkEmoji;\n  return borderedEmoji.includes(filename) ? (filename + '_border') : filename;\n};\n\nconst emojifyTextNode = (node, customEmojis) => {\n  const VS15 = 0xFE0E;\n  const VS16 = 0xFE0F;\n\n  let str = node.textContent;\n\n  const fragment = new DocumentFragment();\n  let i = 0;\n\n  for (;;) {\n    let unicode_emoji;\n\n    // Skip to the next potential emoji to replace (either custom emoji or custom emoji :shortcode:\n    if (customEmojis === null) {\n      while (i < str.length && !(unicode_emoji = trie.search(str.slice(i)))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    } else {\n      while (i < str.length && str[i] !== ':' && !(unicode_emoji = trie.search(str.slice(i)))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    }\n\n    // We reached the end of the string, nothing to replace\n    if (i === str.length) {\n      break;\n    }\n\n    let rend, replacement = null;\n    if (str[i] === ':') { // Potentially the start of a custom emoji :shortcode:\n      rend = str.indexOf(':', i + 1) + 1;\n\n      // no matching ending ':', skip\n      if (!rend) {\n        i++;\n        continue;\n      }\n\n      const shortcode = str.slice(i, rend);\n      const custom_emoji = customEmojis[shortcode];\n\n      // not a recognized shortcode, skip\n      if (!custom_emoji) {\n        i++;\n        continue;\n      }\n\n      // now got a replacee as ':shortcode:'\n      // if you want additional emoji handler, add statements below which set replacement and return true.\n      const filename = autoPlayGif ? custom_emoji.url : custom_emoji.static_url;\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione custom-emoji');\n      replacement.setAttribute('alt', shortcode);\n      replacement.setAttribute('title', shortcode);\n      replacement.setAttribute('src', filename);\n      replacement.setAttribute('data-original', custom_emoji.url);\n      replacement.setAttribute('data-static', custom_emoji.static_url);\n    } else { // start of an unicode emoji\n      rend = i + unicode_emoji.length;\n\n      // If the matched character was followed by VS15 (for selecting text presentation), skip it.\n      if (str.codePointAt(rend - 1) !== VS16 && str.codePointAt(rend) === VS15) {\n        i = rend + 1;\n        continue;\n      }\n\n      const { filename, shortCode } = unicodeMapping[unicode_emoji];\n      const title = shortCode ? `:${shortCode}:` : '';\n\n      replacement = document.createElement('picture');\n\n      const isSystemTheme = !!document.body?.classList.contains('theme-system');\n\n      if(isSystemTheme) {\n        let source = document.createElement('source');\n        source.setAttribute('media', '(prefers-color-scheme: dark)');\n        source.setAttribute('srcset', `${assetHost}/emoji/${emojiFilename(filename, \"dark\")}.svg`);\n        replacement.appendChild(source);\n      }\n\n      let img = document.createElement('img');\n      img.setAttribute('draggable', 'false');\n      img.setAttribute('class', 'emojione');\n      img.setAttribute('alt', unicode_emoji);\n      img.setAttribute('title', title);\n\n      let theme = \"light\";\n\n      if(!isSystemTheme && !document.body?.classList.contains('theme-mastodon-light'))\n        theme = \"dark\";\n\n      img.setAttribute('src', `${assetHost}/emoji/${emojiFilename(filename, theme)}.svg`);\n      replacement.appendChild(img);\n    }\n\n    // Add the processed-up-to-now string and the emoji replacement\n    fragment.append(document.createTextNode(str.slice(0, i)));\n    fragment.append(replacement);\n    str = str.slice(rend);\n    i = 0;\n  }\n\n  fragment.append(document.createTextNode(str));\n  node.parentElement.replaceChild(fragment, node);\n};\n\nconst emojifyNode = (node, customEmojis) => {\n  for (const child of node.childNodes) {\n    switch(child.nodeType) {\n    case Node.TEXT_NODE:\n      emojifyTextNode(child, customEmojis);\n      break;\n    case Node.ELEMENT_NODE:\n      if (!child.classList.contains('invisible'))\n        emojifyNode(child, customEmojis);\n      break;\n    }\n  }\n};\n\nconst emojify = (str, customEmojis = {}) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = str;\n\n  if (!Object.keys(customEmojis).length)\n    customEmojis = null;\n\n  emojifyNode(wrapper, customEmojis);\n\n  return wrapper.innerHTML;\n};\n\nexport default emojify;\n\nexport const buildCustomEmojis = (customEmojis) => {\n  const emojis = [];\n\n  customEmojis.forEach(emoji => {\n    const shortcode = emoji.get('shortcode');\n    const url       = autoPlayGif ? emoji.get('url') : emoji.get('static_url');\n    const name      = shortcode.replace(':', '');\n\n    emojis.push({\n      id: name,\n      name,\n      short_names: [name],\n      text: '',\n      emoticons: [],\n      keywords: [name],\n      imageUrl: url,\n      custom: true,\n      customCategory: emoji.get('category'),\n    });\n  });\n\n  return emojis;\n};\n\nexport const categoriesFromEmojis = customEmojis => customEmojis.reduce((set, emoji) => set.add(emoji.get('category') ? `custom-${emoji.get('category')}` : 'custom'), new Set(['custom']));\n","import Trie from 'substring-trie';\n\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nimport { autoPlayGif, useSystemEmojiFont } from '../../initial_state';\n\nimport { unicodeMapping } from './emoji_unicode_mapping_light';\n\nconst trie = new Trie(Object.keys(unicodeMapping));\n\n// Convert to file names from emojis. (For different variation selector emojis)\nconst emojiFilenames = (emojis) => {\n  return emojis.map(v => unicodeMapping[v].filename);\n};\n\n// Emoji requiring extra borders depending on theme\nconst darkEmoji = emojiFilenames(['🎱', '🐜', '⚫', '🖤', '⬛', '◼️', '◾', '◼️', '✒️', '▪️', '💣', '🎳', '📷', '📸', '♣️', '🕶️', '✴️', '🔌', '💂‍♀️', '📽️', '🍳', '🦍', '💂', '🔪', '🕳️', '🕹️', '🕋', '🖊️', '🖋️', '💂‍♂️', '🎤', '🎓', '🎥', '🎼', '♠️', '🎩', '🦃', '📼', '📹', '🎮', '🐃', '🏴', '🐞', '🕺', '📱', '📲', '🚲', '🪮', '🐦‍⬛']);\nconst lightEmoji = emojiFilenames(['👽', '⚾', '🐔', '☁️', '💨', '🕊️', '👀', '🍥', '👻', '🐐', '❕', '❔', '⛸️', '🌩️', '🔊', '🔇', '📃', '🌧️', '🐏', '🍚', '🍙', '🐓', '🐑', '💀', '☠️', '🌨️', '🔉', '🔈', '💬', '💭', '🏐', '🏳️', '⚪', '⬜', '◽', '◻️', '▫️', '🪽', '🪿']);\n\n/**\n * @param {string} filename\n * @param {\"light\" | \"dark\" } colorScheme\n * @returns {string}\n */\nconst emojiFilename = (filename, colorScheme) => {\n  const borderedEmoji = colorScheme === \"light\" ? lightEmoji : darkEmoji;\n  return borderedEmoji.includes(filename) ? (filename + '_border') : filename;\n};\n\nconst emojifyTextNode = (node, customEmojis) => {\n  const VS15 = 0xFE0E;\n  const VS16 = 0xFE0F;\n\n  let str = node.textContent;\n\n  const fragment = new DocumentFragment();\n  let i = 0;\n\n  for (;;) {\n    let unicode_emoji;\n\n    // Skip to the next potential emoji to replace (either custom emoji or custom emoji :shortcode:)\n    if (customEmojis === null) {\n      while (i < str.length && (useSystemEmojiFont || !(unicode_emoji = trie.search(str.slice(i))))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    } else {\n      while (i < str.length && str[i] !== ':' && (useSystemEmojiFont || !(unicode_emoji = trie.search(str.slice(i))))) {\n        i += str.codePointAt(i) < 65536 ? 1 : 2;\n      }\n    }\n\n    // We reached the end of the string, nothing to replace\n    if (i === str.length) {\n      break;\n    }\n\n    let rend, replacement = null;\n    if (str[i] === ':') { // Potentially the start of a custom emoji :shortcode:\n      rend = str.indexOf(':', i + 1) + 1;\n\n      // no matching ending ':', skip\n      if (!rend) {\n        i++;\n        continue;\n      }\n\n      const shortcode = str.slice(i, rend);\n      const custom_emoji = customEmojis[shortcode];\n\n      // not a recognized shortcode, skip\n      if (!custom_emoji) {\n        i++;\n        continue;\n      }\n\n      // now got a replacee as ':shortcode:'\n      // if you want additional emoji handler, add statements below which set replacement and return true.\n      const filename = autoPlayGif ? custom_emoji.url : custom_emoji.static_url;\n      replacement = document.createElement('img');\n      replacement.setAttribute('draggable', 'false');\n      replacement.setAttribute('class', 'emojione custom-emoji');\n      replacement.setAttribute('alt', shortcode);\n      replacement.setAttribute('title', shortcode);\n      replacement.setAttribute('src', filename);\n      replacement.setAttribute('data-original', custom_emoji.url);\n      replacement.setAttribute('data-static', custom_emoji.static_url);\n    } else { // start of an unicode emoji\n      rend = i + unicode_emoji.length;\n\n      // If the matched character was followed by VS15 (for selecting text presentation), skip it.\n      if (str.codePointAt(rend - 1) !== VS16 && str.codePointAt(rend) === VS15) {\n        i = rend + 1;\n        continue;\n      }\n\n      const { filename, shortCode } = unicodeMapping[unicode_emoji];\n      const title = shortCode ? `:${shortCode}:` : '';\n\n      replacement = document.createElement('picture');\n\n      const isSystemTheme = !!document.body?.classList.contains('theme-system');\n\n      if(isSystemTheme) {\n        let source = document.createElement('source');\n        source.setAttribute('media', '(prefers-color-scheme: dark)');\n        source.setAttribute('srcset', `${assetHost}/emoji/${emojiFilename(filename, \"dark\")}.svg`);\n        replacement.appendChild(source);\n      }\n\n      let img = document.createElement('img');\n      img.setAttribute('draggable', 'false');\n      img.setAttribute('class', 'emojione');\n      img.setAttribute('alt', unicode_emoji);\n      img.setAttribute('title', title);\n\n      let theme = \"light\";\n\n      if(!isSystemTheme && !document.body?.classList.contains('skin-mastodon-light'))\n        theme = \"dark\";\n\n      img.setAttribute('src', `${assetHost}/emoji/${emojiFilename(filename, theme)}.svg`);\n      replacement.appendChild(img);\n    }\n\n    // Add the processed-up-to-now string and the emoji replacement\n    fragment.append(document.createTextNode(str.slice(0, i)));\n    fragment.append(replacement);\n    str = str.slice(rend);\n    i = 0;\n  }\n\n  fragment.append(document.createTextNode(str));\n  node.parentElement.replaceChild(fragment, node);\n};\n\nconst emojifyNode = (node, customEmojis) => {\n  for (const child of node.childNodes) {\n    switch(child.nodeType) {\n    case Node.TEXT_NODE:\n      emojifyTextNode(child, customEmojis);\n      break;\n    case Node.ELEMENT_NODE:\n      if (!child.classList.contains('invisible'))\n        emojifyNode(child, customEmojis);\n      break;\n    }\n  }\n};\n\nconst emojify = (str, customEmojis = {}) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = str;\n\n  if (!Object.keys(customEmojis).length)\n    customEmojis = null;\n\n  emojifyNode(wrapper, customEmojis);\n\n  return wrapper.innerHTML;\n};\n\nexport default emojify;\n\nexport const buildCustomEmojis = (customEmojis) => {\n  const emojis = [];\n\n  customEmojis.forEach(emoji => {\n    const shortcode = emoji.get('shortcode');\n    const url       = autoPlayGif ? emoji.get('url') : emoji.get('static_url');\n    const name      = shortcode.replace(':', '');\n\n    emojis.push({\n      id: name,\n      name,\n      short_names: [name],\n      text: '',\n      emoticons: [],\n      keywords: [name],\n      imageUrl: url,\n      custom: true,\n      customCategory: emoji.get('category'),\n    });\n  });\n\n  return emojis;\n};\n\nexport const categoriesFromEmojis = customEmojis => customEmojis.reduce((set, emoji) => set.add(emoji.get('category') ? `custom-${emoji.get('category')}` : 'custom'), new Set(['custom']));\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nexport const disconnectTimeline = createAction(\n  'timeline/disconnect',\n  ({ timeline }: { timeline: string }) => ({\n    payload: {\n      timeline,\n      usePendingItems: preferPendingItems,\n    },\n  }),\n);\n\nexport const timelineDelete = createAction<{\n  statusId: string;\n  accountId: string;\n  references: string[];\n  reblogOf: string | null;\n}>('timelines/delete');\n","import { createAction } from '@reduxjs/toolkit';\n\nimport { usePendingItems as preferPendingItems } from 'flavours/glitch/initial_state';\n\nexport const disconnectTimeline = createAction(\n  'timeline/disconnect',\n  ({ timeline }: { timeline: string }) => ({\n    payload: {\n      timeline,\n      usePendingItems: preferPendingItems,\n    },\n  }),\n);\n\nexport const timelineDelete = createAction<{\n  statusId: string;\n  accountId: string;\n  references: string[];\n  reblogOf: string | null;\n}>('timelines/delete');\n","import classNames from 'classnames';\n\nimport type { Account } from 'mastodon/models/account';\n\nimport { useHovering } from '../../hooks/useHovering';\nimport { autoPlayGif } from '../initial_state';\n\ninterface Props {\n  account: Account | undefined; // FIXME: remove `undefined` once we know for sure its always there\n  size: number;\n  style?: React.CSSProperties;\n  inline?: boolean;\n  animate?: boolean;\n  counter?: number | string;\n  counterBorderColor?: string;\n}\n\nexport const Avatar: React.FC<Props> = ({\n  account,\n  animate = autoPlayGif,\n  size = 20,\n  inline = false,\n  style: styleFromParent,\n  counter,\n  counterBorderColor,\n}) => {\n  const { hovering, handleMouseEnter, handleMouseLeave } = useHovering(animate);\n\n  const style = {\n    ...styleFromParent,\n    width: `${size}px`,\n    height: `${size}px`,\n  };\n\n  const src =\n    hovering || animate\n      ? account?.get('avatar')\n      : account?.get('avatar_static');\n\n  return (\n    <div\n      className={classNames('account__avatar', {\n        'account__avatar-inline': inline,\n      })}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={style}\n    >\n      {src && <img src={src} alt='' />}\n      {counter && (\n        <div\n          className='account__avatar__counter'\n          style={{ borderColor: counterBorderColor }}\n        >\n          {counter}\n        </div>\n      )}\n    </div>\n  );\n};\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgCheck(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z\"\n  })));\n}\nexport default SvgCheck;","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"LoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar.LoadingBar;\n  }\n});\nObject.defineProperty(exports, \"loadingBarMiddleware\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_middleware[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"DEFAULT_SCOPE\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.DEFAULT_SCOPE;\n  }\n});\nObject.defineProperty(exports, \"HIDE\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.HIDE;\n  }\n});\nObject.defineProperty(exports, \"hideLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.hideLoading;\n  }\n});\nObject.defineProperty(exports, \"loadingBarReducer\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.loadingBarReducer;\n  }\n});\nObject.defineProperty(exports, \"RESET\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.RESET;\n  }\n});\nObject.defineProperty(exports, \"resetLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.resetLoading;\n  }\n});\nObject.defineProperty(exports, \"SHOW\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.SHOW;\n  }\n});\nObject.defineProperty(exports, \"showLoading\", {\n  enumerable: true,\n  get: function get() {\n    return _loading_bar_ducks.showLoading;\n  }\n});\nObject.defineProperty(exports, \"ImmutableLoadingBar\", {\n  enumerable: true,\n  get: function get() {\n    return _immutable[\"default\"];\n  }\n});\nexports[\"default\"] = void 0;\n\nvar _loading_bar = _interopRequireWildcard(require(\"./loading_bar\"));\n\nvar _loading_bar_middleware = _interopRequireDefault(require(\"./loading_bar_middleware\"));\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nvar _immutable = _interopRequireDefault(require(\"./immutable\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar _default = _loading_bar[\"default\"];\nexports[\"default\"] = _default;","import { Component } from 'react';\n\nimport type { IntlShape } from 'react-intl';\nimport { injectIntl, defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  today: { id: 'relative_time.today', defaultMessage: 'today' },\n  just_now: { id: 'relative_time.just_now', defaultMessage: 'now' },\n  just_now_full: {\n    id: 'relative_time.full.just_now',\n    defaultMessage: 'just now',\n  },\n  seconds: { id: 'relative_time.seconds', defaultMessage: '{number}s' },\n  seconds_full: {\n    id: 'relative_time.full.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} ago',\n  },\n  minutes: { id: 'relative_time.minutes', defaultMessage: '{number}m' },\n  minutes_full: {\n    id: 'relative_time.full.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} ago',\n  },\n  hours: { id: 'relative_time.hours', defaultMessage: '{number}h' },\n  hours_full: {\n    id: 'relative_time.full.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} ago',\n  },\n  days: { id: 'relative_time.days', defaultMessage: '{number}d' },\n  days_full: {\n    id: 'relative_time.full.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} ago',\n  },\n  moments_remaining: {\n    id: 'time_remaining.moments',\n    defaultMessage: 'Moments remaining',\n  },\n  seconds_remaining: {\n    id: 'time_remaining.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} left',\n  },\n  minutes_remaining: {\n    id: 'time_remaining.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} left',\n  },\n  hours_remaining: {\n    id: 'time_remaining.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} left',\n  },\n  days_remaining: {\n    id: 'time_remaining.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} left',\n  },\n});\n\nconst dateFormatOptions = {\n  year: 'numeric',\n  month: 'short',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n} as const;\n\nconst shortDateFormatOptions = {\n  month: 'short',\n  day: 'numeric',\n} as const;\n\nconst SECOND = 1000;\nconst MINUTE = 1000 * 60;\nconst HOUR = 1000 * 60 * 60;\nconst DAY = 1000 * 60 * 60 * 24;\n\nconst MAX_DELAY = 2147483647;\n\nconst selectUnits = (delta: number) => {\n  const absDelta = Math.abs(delta);\n\n  if (absDelta < MINUTE) {\n    return 'second';\n  } else if (absDelta < HOUR) {\n    return 'minute';\n  } else if (absDelta < DAY) {\n    return 'hour';\n  }\n\n  return 'day';\n};\n\nconst getUnitDelay = (units: string) => {\n  switch (units) {\n    case 'second':\n      return SECOND;\n    case 'minute':\n      return MINUTE;\n    case 'hour':\n      return HOUR;\n    case 'day':\n      return DAY;\n    default:\n      return MAX_DELAY;\n  }\n};\n\nexport const timeAgoString = (\n  intl: Pick<IntlShape, 'formatDate' | 'formatMessage'>,\n  date: Date,\n  now: number,\n  year: number,\n  timeGiven: boolean,\n  short?: boolean,\n) => {\n  const delta = now - date.getTime();\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(\n      short ? messages.just_now : messages.just_now_full,\n    );\n  } else if (delta < 7 * DAY) {\n    if (delta < MINUTE) {\n      relativeTime = intl.formatMessage(\n        short ? messages.seconds : messages.seconds_full,\n        { number: Math.floor(delta / SECOND) },\n      );\n    } else if (delta < HOUR) {\n      relativeTime = intl.formatMessage(\n        short ? messages.minutes : messages.minutes_full,\n        { number: Math.floor(delta / MINUTE) },\n      );\n    } else if (delta < DAY) {\n      relativeTime = intl.formatMessage(\n        short ? messages.hours : messages.hours_full,\n        { number: Math.floor(delta / HOUR) },\n      );\n    } else {\n      relativeTime = intl.formatMessage(\n        short ? messages.days : messages.days_full,\n        { number: Math.floor(delta / DAY) },\n      );\n    }\n  } else if (date.getFullYear() === year) {\n    relativeTime = intl.formatDate(date, shortDateFormatOptions);\n  } else {\n    relativeTime = intl.formatDate(date, {\n      ...shortDateFormatOptions,\n      year: 'numeric',\n    });\n  }\n\n  return relativeTime;\n};\n\nconst timeRemainingString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  timeGiven = true,\n) => {\n  const delta = date.getTime() - now;\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(messages.moments_remaining);\n  } else if (delta < MINUTE) {\n    relativeTime = intl.formatMessage(messages.seconds_remaining, {\n      number: Math.floor(delta / SECOND),\n    });\n  } else if (delta < HOUR) {\n    relativeTime = intl.formatMessage(messages.minutes_remaining, {\n      number: Math.floor(delta / MINUTE),\n    });\n  } else if (delta < DAY) {\n    relativeTime = intl.formatMessage(messages.hours_remaining, {\n      number: Math.floor(delta / HOUR),\n    });\n  } else {\n    relativeTime = intl.formatMessage(messages.days_remaining, {\n      number: Math.floor(delta / DAY),\n    });\n  }\n\n  return relativeTime;\n};\n\ninterface Props {\n  intl: IntlShape;\n  timestamp: string;\n  year?: number;\n  futureDate?: boolean;\n  short?: boolean;\n}\ninterface States {\n  now: number;\n}\nclass RelativeTimestamp extends Component<Props, States> {\n  state = {\n    now: Date.now(),\n  };\n\n  _timer: number | undefined;\n\n  shouldComponentUpdate(nextProps: Props, nextState: States) {\n    // As of right now the locale doesn't change without a new page load,\n    // but we might as well check in case that ever changes.\n    return (\n      this.props.timestamp !== nextProps.timestamp ||\n      this.props.intl.locale !== nextProps.intl.locale ||\n      this.state.now !== nextState.now\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.timestamp !== nextProps.timestamp) {\n      this.setState({ now: Date.now() });\n    }\n  }\n\n  componentDidMount() {\n    this._scheduleNextUpdate(this.props, this.state);\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: Props, nextState: States) {\n    this._scheduleNextUpdate(nextProps, nextState);\n  }\n\n  componentWillUnmount() {\n    window.clearTimeout(this._timer);\n  }\n\n  _scheduleNextUpdate(props: Props, state: States) {\n    window.clearTimeout(this._timer);\n\n    const { timestamp } = props;\n    const delta = new Date(timestamp).getTime() - state.now;\n    const unitDelay = getUnitDelay(selectUnits(delta));\n    const unitRemainder = Math.abs(delta % unitDelay);\n    const updateInterval = 1000 * 10;\n    const delay =\n      delta < 0\n        ? Math.max(updateInterval, unitDelay - unitRemainder)\n        : Math.max(updateInterval, unitRemainder);\n\n    this._timer = window.setTimeout(() => {\n      this.setState({ now: Date.now() });\n    }, delay);\n  }\n\n  render() {\n    const {\n      timestamp,\n      intl,\n      futureDate,\n      year = new Date().getFullYear(),\n      short = true,\n    } = this.props;\n\n    const timeGiven = timestamp.includes('T');\n    const date = new Date(timestamp);\n    const relativeTime = futureDate\n      ? timeRemainingString(intl, date, this.state.now, timeGiven)\n      : timeAgoString(intl, date, this.state.now, year, timeGiven, short);\n\n    return (\n      <time\n        dateTime={timestamp}\n        title={intl.formatDate(date, dateFormatOptions)}\n      >\n        {relativeTime}\n      </time>\n    );\n  }\n}\n\nconst RelativeTimestampWithIntl = injectIntl(RelativeTimestamp);\n\nexport { RelativeTimestampWithIntl as RelativeTimestamp };\n","export default class Settings {\n\n  constructor(keyBase = null) {\n    this.keyBase = keyBase;\n  }\n\n  generateKey(id) {\n    return this.keyBase ? [this.keyBase, `id${id}`].join('.') : id;\n  }\n\n  set(id, data) {\n    const key = this.generateKey(id);\n    try {\n      const encodedData = JSON.stringify(data);\n      localStorage.setItem(key, encodedData);\n      return data;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  get(id) {\n    const key = this.generateKey(id);\n    try {\n      const rawData = localStorage.getItem(key);\n      return JSON.parse(rawData);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  remove(id) {\n    const data = this.get(id);\n    if (data) {\n      const key = this.generateKey(id);\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n      }\n    }\n    return data;\n  }\n\n}\n\nexport const pushNotificationsSetting = new Settings('mastodon_push_notification_data');\nexport const tagHistory = new Settings('mastodon_tag_history');\nexport const bannerSettings = new Settings('mastodon_banner_settings');\nexport const searchHistory = new Settings('mastodon_search_history');\nexport const playerSettings = new Settings('mastodon_player');\n","export default class Settings {\n\n  constructor(keyBase = null) {\n    this.keyBase = keyBase;\n  }\n\n  generateKey(id) {\n    return this.keyBase ? [this.keyBase, `id${id}`].join('.') : id;\n  }\n\n  set(id, data) {\n    const key = this.generateKey(id);\n    try {\n      const encodedData = JSON.stringify(data);\n      localStorage.setItem(key, encodedData);\n      return data;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  get(id) {\n    const key = this.generateKey(id);\n    try {\n      const rawData = localStorage.getItem(key);\n      return JSON.parse(rawData);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  remove(id) {\n    const data = this.get(id);\n    if (data) {\n      const key = this.generateKey(id);\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n      }\n    }\n    return data;\n  }\n\n}\n\nexport const pushNotificationsSetting = new Settings('mastodon_push_notification_data');\nexport const tagHistory = new Settings('mastodon_tag_history');\nexport const bannerSettings = new Settings('mastodon_banner_settings');\nexport const searchHistory = new Settings('mastodon_search_history');\nexport const playerSettings = new Settings('mastodon_player');\n","import EXIF from 'exif-js';\n\nconst MAX_IMAGE_PIXELS = 8294400; // 3840x2160px\n\nconst _browser_quirks = {};\n\n// Some browsers will automatically draw images respecting their EXIF orientation\n// while others won't, and the safest way to detect that is to examine how it\n// is done on a known image.\n// See https://github.com/w3c/csswg-drafts/issues/4666\n// and https://github.com/blueimp/JavaScript-Load-Image/commit/1e4df707821a0afcc11ea0720ee403b8759f3881\nconst dropOrientationIfNeeded = (orientation) => new Promise(resolve => {\n  switch (_browser_quirks['image-orientation-automatic']) {\n  case true:\n    resolve(1);\n    break;\n  case false:\n    resolve(orientation);\n    break;\n  default:\n    // black 2x1 JPEG, with the following meta information set:\n    // - EXIF Orientation: 6 (Rotated 90° CCW)\n    const testImageURL =\n      'data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAA' +\n      'AAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA' +\n      'QEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQE' +\n      'BAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/x' +\n      'ABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAA' +\n      'AAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==';\n    const img = new Image();\n    img.onload = () => {\n      const automatic = (img.width === 1 && img.height === 2);\n      _browser_quirks['image-orientation-automatic'] = automatic;\n      resolve(automatic ? 1 : orientation);\n    };\n    img.onerror = () => {\n      _browser_quirks['image-orientation-automatic'] = false;\n      resolve(orientation);\n    };\n    img.src = testImageURL;\n  }\n});\n\n// Some browsers don't allow reading from a canvas and instead return all-white\n// or randomized data. Use a pre-defined image to check if reading the canvas\n// works.\nconst checkCanvasReliability = () => new Promise((resolve, reject) => {\n  switch(_browser_quirks['canvas-read-unreliable']) {\n  case true:\n    reject('Canvas reading unreliable');\n    break;\n  case false:\n    resolve();\n    break;\n  default:\n    // 2×2 GIF with white, red, green and blue pixels\n    const testImageURL =\n      'data:image/gif;base64,R0lGODdhAgACAKEDAAAA//8AAAD/AP///ywAAAAAAgACAAACA1wEBQA7';\n    const refData =\n      [255, 255, 255, 255,  255, 0, 0, 255,  0, 255, 0, 255,  0, 0, 255, 255];\n    const img = new Image();\n    img.onload = () => {\n      const canvas  = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      context.drawImage(img, 0, 0, 2, 2);\n      const imageData = context.getImageData(0, 0, 2, 2);\n      if (imageData.data.every((x, i) => refData[i] === x)) {\n        _browser_quirks['canvas-read-unreliable'] = false;\n        resolve();\n      } else {\n        _browser_quirks['canvas-read-unreliable'] = true;\n        reject('Canvas reading unreliable');\n      }\n    };\n    img.onerror = () => {\n      _browser_quirks['canvas-read-unreliable'] = true;\n      reject('Failed to load test image');\n    };\n    img.src = testImageURL;\n  }\n});\n\nconst getImageUrl = inputFile => new Promise((resolve, reject) => {\n  if (window.URL && URL.createObjectURL) {\n    try {\n      resolve(URL.createObjectURL(inputFile));\n    } catch (error) {\n      reject(error);\n    }\n    return;\n  }\n\n  const reader = new FileReader();\n  reader.onerror = (...args) => reject(...args);\n  reader.onload  = ({ target }) => resolve(target.result);\n\n  reader.readAsDataURL(inputFile);\n});\n\nconst loadImage = inputFile => new Promise((resolve, reject) => {\n  getImageUrl(inputFile).then(url => {\n    const img = new Image();\n\n    img.onerror = (...args) => reject(...args);\n    img.onload  = () => resolve(img);\n\n    img.src = url;\n  }).catch(reject);\n});\n\nconst getOrientation = (img, type = 'image/png') => new Promise(resolve => {\n  if (!['image/jpeg', 'image/webp'].includes(type)) {\n    resolve(1);\n    return;\n  }\n\n  EXIF.getData(img, () => {\n    const orientation = EXIF.getTag(img, 'Orientation');\n    if (orientation !== 1) {\n      dropOrientationIfNeeded(orientation).then(resolve).catch(() => resolve(orientation));\n    } else {\n      resolve(orientation);\n    }\n  });\n});\n\nconst processImage = (img, { width, height, orientation, type = 'image/png' }) => new Promise(resolve => {\n  const canvas  = document.createElement('canvas');\n\n  if (4 < orientation && orientation < 9) {\n    canvas.width  = height;\n    canvas.height = width;\n  } else {\n    canvas.width  = width;\n    canvas.height = height;\n  }\n\n  const context = canvas.getContext('2d');\n\n  switch (orientation) {\n  case 2: context.transform(-1, 0, 0, 1, width, 0); break;\n  case 3: context.transform(-1, 0, 0, -1, width, height); break;\n  case 4: context.transform(1, 0, 0, -1, 0, height); break;\n  case 5: context.transform(0, 1, 1, 0, 0, 0); break;\n  case 6: context.transform(0, 1, -1, 0, height, 0); break;\n  case 7: context.transform(0, -1, -1, 0, height, width); break;\n  case 8: context.transform(0, -1, 1, 0, 0, width); break;\n  }\n\n  context.drawImage(img, 0, 0, width, height);\n\n  canvas.toBlob(resolve, type);\n});\n\nconst resizeImage = (img, type = 'image/png') => new Promise((resolve, reject) => {\n  const { width, height } = img;\n\n  const newWidth  = Math.round(Math.sqrt(MAX_IMAGE_PIXELS * (width / height)));\n  const newHeight = Math.round(Math.sqrt(MAX_IMAGE_PIXELS * (height / width)));\n\n  checkCanvasReliability()\n    .then(getOrientation(img, type))\n    .then(orientation => processImage(img, {\n      width: newWidth,\n      height: newHeight,\n      orientation,\n      type,\n    }))\n    .then(resolve)\n    .catch(reject);\n});\n\nconst resizeFile = (inputFile) => new Promise((resolve) => {\n  if (!inputFile.type.match(/image.*/) || inputFile.type === 'image/gif') {\n    resolve(inputFile);\n    return;\n  }\n\n  loadImage(inputFile).then(img => {\n    if (img.width * img.height < MAX_IMAGE_PIXELS) {\n      resolve(inputFile);\n      return;\n    }\n\n    resizeImage(img, inputFile.type)\n      .then(resolve)\n      .catch(() => resolve(inputFile));\n  }).catch(() => resolve(inputFile));\n});\n\nexport default resizeFile;\n","import { defineMessages } from 'react-intl';\n\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport api from 'flavours/glitch/api';\nimport { browserHistory } from 'flavours/glitch/components/router';\nimport { search as emojiSearch } from 'flavours/glitch/features/emoji/emoji_mart_search_light';\nimport { tagHistory } from 'flavours/glitch/settings';\nimport { recoverHashtags } from 'flavours/glitch/utils/hashtag';\nimport resizeImage from 'flavours/glitch/utils/resize_image';\n\nimport { showAlert, showAlertForError } from './alerts';\nimport { useEmoji } from './emojis';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { openModal } from './modal';\nimport { updateTimeline } from './timelines';\n\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsAccountsController;\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsTagsController;\n\nexport const COMPOSE_CHANGE          = 'COMPOSE_CHANGE';\nexport const COMPOSE_SUBMIT_REQUEST  = 'COMPOSE_SUBMIT_REQUEST';\nexport const COMPOSE_SUBMIT_SUCCESS  = 'COMPOSE_SUBMIT_SUCCESS';\nexport const COMPOSE_SUBMIT_FAIL     = 'COMPOSE_SUBMIT_FAIL';\nexport const COMPOSE_REPLY           = 'COMPOSE_REPLY';\nexport const COMPOSE_REPLY_CANCEL    = 'COMPOSE_REPLY_CANCEL';\nexport const COMPOSE_DIRECT          = 'COMPOSE_DIRECT';\nexport const COMPOSE_MENTION         = 'COMPOSE_MENTION';\nexport const COMPOSE_RESET           = 'COMPOSE_RESET';\n\nexport const COMPOSE_UPLOAD_REQUEST    = 'COMPOSE_UPLOAD_REQUEST';\nexport const COMPOSE_UPLOAD_SUCCESS    = 'COMPOSE_UPLOAD_SUCCESS';\nexport const COMPOSE_UPLOAD_FAIL       = 'COMPOSE_UPLOAD_FAIL';\nexport const COMPOSE_UPLOAD_PROGRESS   = 'COMPOSE_UPLOAD_PROGRESS';\nexport const COMPOSE_UPLOAD_PROCESSING = 'COMPOSE_UPLOAD_PROCESSING';\nexport const COMPOSE_UPLOAD_UNDO       = 'COMPOSE_UPLOAD_UNDO';\n\nexport const THUMBNAIL_UPLOAD_REQUEST  = 'THUMBNAIL_UPLOAD_REQUEST';\nexport const THUMBNAIL_UPLOAD_SUCCESS  = 'THUMBNAIL_UPLOAD_SUCCESS';\nexport const THUMBNAIL_UPLOAD_FAIL     = 'THUMBNAIL_UPLOAD_FAIL';\nexport const THUMBNAIL_UPLOAD_PROGRESS = 'THUMBNAIL_UPLOAD_PROGRESS';\n\nexport const COMPOSE_SUGGESTIONS_CLEAR = 'COMPOSE_SUGGESTIONS_CLEAR';\nexport const COMPOSE_SUGGESTIONS_READY = 'COMPOSE_SUGGESTIONS_READY';\nexport const COMPOSE_SUGGESTION_SELECT = 'COMPOSE_SUGGESTION_SELECT';\nexport const COMPOSE_SUGGESTION_IGNORE = 'COMPOSE_SUGGESTION_IGNORE';\nexport const COMPOSE_SUGGESTION_TAGS_UPDATE = 'COMPOSE_SUGGESTION_TAGS_UPDATE';\n\nexport const COMPOSE_TAG_HISTORY_UPDATE = 'COMPOSE_TAG_HISTORY_UPDATE';\n\nexport const COMPOSE_MOUNT   = 'COMPOSE_MOUNT';\nexport const COMPOSE_UNMOUNT = 'COMPOSE_UNMOUNT';\n\nexport const COMPOSE_ADVANCED_OPTIONS_CHANGE = 'COMPOSE_ADVANCED_OPTIONS_CHANGE';\nexport const COMPOSE_SENSITIVITY_CHANGE  = 'COMPOSE_SENSITIVITY_CHANGE';\nexport const COMPOSE_SPOILERNESS_CHANGE  = 'COMPOSE_SPOILERNESS_CHANGE';\nexport const COMPOSE_SPOILER_TEXT_CHANGE = 'COMPOSE_SPOILER_TEXT_CHANGE';\nexport const COMPOSE_VISIBILITY_CHANGE   = 'COMPOSE_VISIBILITY_CHANGE';\nexport const COMPOSE_COMPOSING_CHANGE    = 'COMPOSE_COMPOSING_CHANGE';\nexport const COMPOSE_CONTENT_TYPE_CHANGE = 'COMPOSE_CONTENT_TYPE_CHANGE';\nexport const COMPOSE_LANGUAGE_CHANGE     = 'COMPOSE_LANGUAGE_CHANGE';\n\nexport const COMPOSE_EMOJI_INSERT = 'COMPOSE_EMOJI_INSERT';\n\nexport const COMPOSE_UPLOAD_CHANGE_REQUEST     = 'COMPOSE_UPLOAD_UPDATE_REQUEST';\nexport const COMPOSE_UPLOAD_CHANGE_SUCCESS     = 'COMPOSE_UPLOAD_UPDATE_SUCCESS';\nexport const COMPOSE_UPLOAD_CHANGE_FAIL        = 'COMPOSE_UPLOAD_UPDATE_FAIL';\n\nexport const COMPOSE_DOODLE_SET        = 'COMPOSE_DOODLE_SET';\nexport const COMPOSE_TENOR_SET         = 'COMPOSE_TENOR_SET';\n\nexport const COMPOSE_POLL_ADD             = 'COMPOSE_POLL_ADD';\nexport const COMPOSE_POLL_REMOVE          = 'COMPOSE_POLL_REMOVE';\nexport const COMPOSE_POLL_OPTION_ADD      = 'COMPOSE_POLL_OPTION_ADD';\nexport const COMPOSE_POLL_OPTION_CHANGE   = 'COMPOSE_POLL_OPTION_CHANGE';\nexport const COMPOSE_POLL_OPTION_REMOVE   = 'COMPOSE_POLL_OPTION_REMOVE';\nexport const COMPOSE_POLL_SETTINGS_CHANGE = 'COMPOSE_POLL_SETTINGS_CHANGE';\n\nexport const INIT_MEDIA_EDIT_MODAL = 'INIT_MEDIA_EDIT_MODAL';\n\nexport const COMPOSE_CHANGE_MEDIA_DESCRIPTION = 'COMPOSE_CHANGE_MEDIA_DESCRIPTION';\nexport const COMPOSE_CHANGE_MEDIA_FOCUS       = 'COMPOSE_CHANGE_MEDIA_FOCUS';\nexport const COMPOSE_CHANGE_MEDIA_ORDER       = 'COMPOSE_CHANGE_MEDIA_ORDER';\n\nexport const COMPOSE_SET_STATUS = 'COMPOSE_SET_STATUS';\nexport const COMPOSE_FOCUS = 'COMPOSE_FOCUS';\n\nconst messages = defineMessages({\n  uploadErrorLimit: { id: 'upload_error.limit', defaultMessage: 'File upload limit exceeded.' },\n  open: { id: 'compose.published.open', defaultMessage: 'Open' },\n  published: { id: 'compose.published.body', defaultMessage: 'Post published.' },\n  saved: { id: 'compose.saved.body', defaultMessage: 'Post saved.' },\n});\n\nexport const ensureComposeIsVisible = (getState) => {\n  if (!getState().getIn(['compose', 'mounted'])) {\n    browserHistory.push('/publish');\n  }\n};\n\nexport function setComposeToStatus(status, text, spoiler_text, content_type) {\n  return{\n    type: COMPOSE_SET_STATUS,\n    status,\n    text,\n    spoiler_text,\n    content_type,\n  };\n}\n\nexport function changeCompose(text) {\n  return {\n    type: COMPOSE_CHANGE,\n    text: text,\n  };\n}\n\nexport function replyCompose(status) {\n  return (dispatch, getState) => {\n    const prependCWRe = getState().getIn(['local_settings', 'prepend_cw_re']);\n    dispatch({\n      type: COMPOSE_REPLY,\n      status: status,\n      prependCWRe: prependCWRe,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function replyComposeById(statusId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const status = state.statuses.get(statusId);\n\n    if (status) {\n      const account = state.accounts.get(status.get('account'));\n      dispatch(replyCompose(status.set('account', account)));\n    }\n  };\n}\n\nexport function cancelReplyCompose() {\n  return {\n    type: COMPOSE_REPLY_CANCEL,\n  };\n}\n\nexport function resetCompose() {\n  return {\n    type: COMPOSE_RESET,\n  };\n}\n\nexport const focusCompose = (defaultText) => (dispatch, getState) => {\n  dispatch({\n    type: COMPOSE_FOCUS,\n    defaultText,\n  });\n\n  ensureComposeIsVisible(getState);\n};\n\nexport function mentionCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_MENTION,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function mentionComposeById(accountId) {\n  return (dispatch, getState) => {\n    dispatch(mentionCompose(getState().accounts.get(accountId)));\n  };\n}\n\nexport function directCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_DIRECT,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function submitCompose(overridePrivacy = null) {\n  return function (dispatch, getState) {\n    let status     = getState().getIn(['compose', 'text'], '');\n    const media    = getState().getIn(['compose', 'media_attachments']);\n    const statusId = getState().getIn(['compose', 'id'], null);\n    const spoilers = getState().getIn(['compose', 'spoiler']) || getState().getIn(['local_settings', 'always_show_spoilers_field']);\n    let spoilerText = spoilers ? getState().getIn(['compose', 'spoiler_text'], '') : '';\n\n    if ((!status || !status.length) && media.size === 0) {\n      return;\n    }\n\n    if (getState().getIn(['compose', 'advanced_options', 'do_not_federate'])) {\n      status = status + ' 👁️';\n    }\n\n    dispatch(submitComposeRequest());\n\n    // If we're editing a post with media attachments, those have not\n    // necessarily been changed on the server. Do it now in the same\n    // API call.\n    let media_attributes;\n    if (statusId !== null) {\n      media_attributes = media.map(item => {\n        let focus;\n\n        if (item.getIn(['meta', 'focus'])) {\n          focus = `${item.getIn(['meta', 'focus', 'x']).toFixed(2)},${item.getIn(['meta', 'focus', 'y']).toFixed(2)}`;\n        }\n\n        return {\n          id: item.get('id'),\n          description: item.get('description'),\n          focus,\n        };\n      });\n    }\n\n    api().request({\n      url: statusId === null ? '/api/v1/statuses' : `/api/v1/statuses/${statusId}`,\n      method: statusId === null ? 'post' : 'put',\n      data: {\n        status,\n        content_type: getState().getIn(['compose', 'content_type']),\n        in_reply_to_id: getState().getIn(['compose', 'in_reply_to'], null),\n        media_ids: media.map(item => item.get('id')),\n        media_attributes,\n        sensitive: getState().getIn(['compose', 'sensitive']) || (spoilerText.length > 0 && media.size !== 0),\n        spoiler_text: spoilerText,\n        visibility: overridePrivacy || getState().getIn(['compose', 'privacy']),\n        poll: getState().getIn(['compose', 'poll'], null),\n        language: getState().getIn(['compose', 'language']),\n      },\n      headers: {\n        'Idempotency-Key': getState().getIn(['compose', 'idempotencyKey']),\n      },\n    }).then(function (response) {\n      if ((browserHistory.location.pathname === '/publish' || browserHistory.location.pathname === '/statuses/new')\n          && window.history.state\n          && !getState().getIn(['compose', 'advanced_options', 'threaded_mode'])) {\n        browserHistory.goBack();\n      }\n\n      dispatch(insertIntoTagHistory(response.data.tags, status));\n      dispatch(submitComposeSuccess({ ...response.data }));\n\n      // To make the app more responsive, immediately push the status\n      // into the columns\n      const insertIfOnline = timelineId => {\n        const timeline = getState().getIn(['timelines', timelineId]);\n\n        if (timeline && timeline.get('items').size > 0 && timeline.getIn(['items', 0]) !== null && timeline.get('online')) {\n          dispatch(updateTimeline(timelineId, { ...response.data }));\n        }\n      };\n\n      if (statusId) {\n        dispatch(importFetchedStatus({ ...response.data }));\n      }\n\n      if (statusId === null) {\n        insertIfOnline('home');\n      }\n\n      if (statusId === null && response.data.in_reply_to_id === null && response.data.visibility === 'public') {\n        insertIfOnline('community');\n        if (!response.data.local_only) {\n          insertIfOnline('public');\n        }\n      } else if (statusId === null && response.data.visibility === 'direct') {\n        insertIfOnline('direct');\n      }\n\n      if (getState().getIn(['local_settings', 'show_published_toast'])) {\n        dispatch(showAlert({\n          message: statusId === null ? messages.published : messages.saved,\n          action: messages.open,\n          dismissAfter: 10000,\n          onClick: () => browserHistory.push(`/@${response.data.account.username}/${response.data.id}`),\n        }));\n      }\n    }).catch(function (error) {\n      dispatch(submitComposeFail(error));\n    });\n  };\n}\n\nexport function submitComposeRequest() {\n  return {\n    type: COMPOSE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitComposeSuccess(status) {\n  return {\n    type: COMPOSE_SUBMIT_SUCCESS,\n    status: status,\n  };\n}\n\nexport function submitComposeFail(error) {\n  return {\n    type: COMPOSE_SUBMIT_FAIL,\n    error: error,\n  };\n}\n\nexport function doodleSet(options) {\n  return {\n    type: COMPOSE_DOODLE_SET,\n    options: options,\n  };\n}\n\nexport function tenorSet(options) {\n  return {\n    type: COMPOSE_TENOR_SET,\n    options: options,\n  };\n}\n\nexport function uploadCompose(files, alt = '') {\n  return function (dispatch, getState) {\n    const uploadLimit = getState().getIn(['server', 'server', 'configuration', 'statuses', 'max_media_attachments']);\n    const media = getState().getIn(['compose', 'media_attachments']);\n    const pending = getState().getIn(['compose', 'pending_media_attachments']);\n    const progress = new Array(files.length).fill(0);\n\n    let total = Array.from(files).reduce((a, v) => a + v.size, 0);\n\n    if (files.length + media.size + pending > uploadLimit) {\n      dispatch(showAlert({ message: messages.uploadErrorLimit }));\n      return;\n    }\n\n    dispatch(uploadComposeRequest());\n\n    for (const [i, f] of Array.from(files).entries()) {\n      if (media.size + i > (uploadLimit - 1)) break;\n\n      resizeImage(f).then(file => {\n        const data = new FormData();\n        data.append('file', file);\n        data.append('description', alt);\n        // Account for disparity in size of original image and resized data\n        total += file.size - f.size;\n\n        return api().post('/api/v2/media', data, {\n          onUploadProgress: function({ loaded }){\n            progress[i] = loaded;\n            dispatch(uploadComposeProgress(progress.reduce((a, v) => a + v, 0), total));\n          },\n        }).then(({ status, data }) => {\n          // If server-side processing of the media attachment has not completed yet,\n          // poll the server until it is, before showing the media attachment as uploaded\n\n          if (status === 200) {\n            dispatch(uploadComposeSuccess(data, f));\n          } else if (status === 202) {\n            dispatch(uploadComposeProcessing());\n\n            let tryCount = 1;\n\n            const poll = () => {\n              api().get(`/api/v1/media/${data.id}`).then(response => {\n                if (response.status === 200) {\n                  dispatch(uploadComposeSuccess(response.data, f));\n                } else if (response.status === 206) {\n                  const retryAfter = (Math.log2(tryCount) || 1) * 1000;\n                  tryCount += 1;\n                  setTimeout(() => poll(), retryAfter);\n                }\n              }).catch(error => dispatch(uploadComposeFail(error)));\n            };\n\n            poll();\n          }\n        });\n      }).catch(error => dispatch(uploadComposeFail(error)));\n    }\n  };\n}\n\nexport const uploadComposeProcessing = () => ({\n  type: COMPOSE_UPLOAD_PROCESSING,\n});\n\nexport const uploadThumbnail = (id, file) => (dispatch) => {\n  dispatch(uploadThumbnailRequest());\n\n  const total = file.size;\n  const data = new FormData();\n\n  data.append('thumbnail', file);\n\n  api().put(`/api/v1/media/${id}`, data, {\n    onUploadProgress: ({ loaded }) => {\n      dispatch(uploadThumbnailProgress(loaded, total));\n    },\n  }).then(({ data }) => {\n    dispatch(uploadThumbnailSuccess(data));\n  }).catch(error => {\n    dispatch(uploadThumbnailFail(id, error));\n  });\n};\n\nexport const uploadThumbnailRequest = () => ({\n  type: THUMBNAIL_UPLOAD_REQUEST,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailProgress = (loaded, total) => ({\n  type: THUMBNAIL_UPLOAD_PROGRESS,\n  loaded,\n  total,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailSuccess = media => ({\n  type: THUMBNAIL_UPLOAD_SUCCESS,\n  media,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailFail = error => ({\n  type: THUMBNAIL_UPLOAD_FAIL,\n  error,\n  skipLoading: true,\n});\n\nexport function initMediaEditModal(id) {\n  return dispatch => {\n    dispatch({\n      type: INIT_MEDIA_EDIT_MODAL,\n      id,\n    });\n\n    dispatch(openModal({\n      modalType: 'FOCAL_POINT',\n      modalProps: { id },\n    }));\n  };\n}\n\nexport function onChangeMediaDescription(description) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n    description,\n  };\n}\n\nexport function onChangeMediaFocus(focusX, focusY) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_FOCUS,\n    focusX,\n    focusY,\n  };\n}\n\nexport function changeUploadCompose(id, params) {\n  return (dispatch, getState) => {\n    dispatch(changeUploadComposeRequest());\n\n    let media = getState().getIn(['compose', 'media_attachments']).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      const { focus, ...other } = params;\n      const data = { ...media.toJS(), ...other };\n\n      if (focus) {\n        const [x, y] = focus.split(',');\n        data.meta = { focus: { x: parseFloat(x), y: parseFloat(y) } };\n      }\n\n      dispatch(changeUploadComposeSuccess(data, true));\n    } else {\n      api().put(`/api/v1/media/${id}`, params).then(response => {\n        dispatch(changeUploadComposeSuccess(response.data, false));\n      }).catch(error => {\n        dispatch(changeUploadComposeFail(id, error));\n      });\n    }\n  };\n}\n\nexport function changeUploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeSuccess(media, attached) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_SUCCESS,\n    media: media,\n    attached: attached,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeProgress(loaded, total) {\n  return {\n    type: COMPOSE_UPLOAD_PROGRESS,\n    loaded: loaded,\n    total: total,\n  };\n}\n\nexport function uploadComposeSuccess(media, file) {\n  return {\n    type: COMPOSE_UPLOAD_SUCCESS,\n    media: media,\n    file: file,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function undoUploadCompose(media_id) {\n  return {\n    type: COMPOSE_UPLOAD_UNDO,\n    media_id: media_id,\n  };\n}\n\nexport function clearComposeSuggestions() {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n  return {\n    type: COMPOSE_SUGGESTIONS_CLEAR,\n  };\n}\n\nconst fetchComposeSuggestionsAccounts = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n\n  fetchComposeSuggestionsAccountsController = new AbortController();\n\n  api().get('/api/v1/accounts/search', {\n    signal: fetchComposeSuggestionsAccountsController.signal,\n\n    params: {\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(response => {\n    dispatch(importFetchedAccounts(response.data));\n    dispatch(readyComposeSuggestionsAccounts(token, response.data));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsAccountsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nconst fetchComposeSuggestionsEmojis = (dispatch, getState, token) => {\n  const results = emojiSearch(token.replace(':', ''), { maxResults: 5 });\n  dispatch(readyComposeSuggestionsEmojis(token, results));\n};\n\nconst fetchComposeSuggestionsTags = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsTagsController) {\n    fetchComposeSuggestionsTagsController.abort();\n  }\n\n  dispatch(updateSuggestionTags(token));\n\n  fetchComposeSuggestionsTagsController = new AbortController();\n\n  api().get('/api/v2/search', {\n    signal: fetchComposeSuggestionsTagsController.signal,\n\n    params: {\n      type: 'hashtags',\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(({ data }) => {\n    dispatch(readyComposeSuggestionsTags(token, data.hashtags));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsTagsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nexport function fetchComposeSuggestions(token) {\n  return (dispatch, getState) => {\n    switch (token[0]) {\n    case ':':\n      fetchComposeSuggestionsEmojis(dispatch, getState, token);\n      break;\n    case '#':\n      fetchComposeSuggestionsTags(dispatch, getState, token);\n      break;\n    default:\n      fetchComposeSuggestionsAccounts(dispatch, getState, token);\n      break;\n    }\n  };\n}\n\nexport function readyComposeSuggestionsEmojis(token, emojis) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    emojis,\n  };\n}\n\nexport function readyComposeSuggestionsAccounts(token, accounts) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    accounts,\n  };\n}\n\nexport const readyComposeSuggestionsTags = (token, tags) => ({\n  type: COMPOSE_SUGGESTIONS_READY,\n  token,\n  tags,\n});\n\nexport function selectComposeSuggestion(position, token, suggestion, path) {\n  return (dispatch, getState) => {\n    let completion, startPosition;\n\n    if (suggestion.type === 'emoji') {\n      completion    = suggestion.native || suggestion.colons;\n      startPosition = position - 1;\n\n      dispatch(useEmoji(suggestion));\n    } else if (suggestion.type === 'hashtag') {\n      completion    = `#${suggestion.name}`;\n      startPosition = position - 1;\n    } else if (suggestion.type === 'account') {\n      completion    = getState().getIn(['accounts', suggestion.id, 'acct']);\n      startPosition = position;\n    }\n\n    // We don't want to replace hashtags that vary only in case due to accessibility, but we need to fire off an event so that\n    // the suggestions are dismissed and the cursor moves forward.\n    if (suggestion.type !== 'hashtag' || token.slice(1).localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) !== 0) {\n      dispatch({\n        type: COMPOSE_SUGGESTION_SELECT,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    } else {\n      dispatch({\n        type: COMPOSE_SUGGESTION_IGNORE,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    }\n  };\n}\n\nexport function updateSuggestionTags(token) {\n  return {\n    type: COMPOSE_SUGGESTION_TAGS_UPDATE,\n    token,\n  };\n}\n\nexport function updateTagHistory(tags) {\n  return {\n    type: COMPOSE_TAG_HISTORY_UPDATE,\n    tags,\n  };\n}\n\nexport function hydrateCompose() {\n  return (dispatch, getState) => {\n    const me = getState().getIn(['meta', 'me']);\n    const history = tagHistory.get(me);\n\n    if (history !== null) {\n      dispatch(updateTagHistory(history));\n    }\n  };\n}\n\nfunction insertIntoTagHistory(recognizedTags, text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const oldHistory = state.getIn(['compose', 'tagHistory']);\n    const me = state.getIn(['meta', 'me']);\n    const names = recoverHashtags(recognizedTags, text);\n    const intersectedOldHistory = oldHistory.filter(name => names.findIndex(newName => newName.toLowerCase() === name.toLowerCase()) === -1);\n\n    names.push(...intersectedOldHistory.toJS());\n\n    const newHistory = names.slice(0, 1000);\n\n    tagHistory.set(me, newHistory);\n    dispatch(updateTagHistory(newHistory));\n  };\n}\n\nexport function mountCompose() {\n  return {\n    type: COMPOSE_MOUNT,\n  };\n}\n\nexport function unmountCompose() {\n  return {\n    type: COMPOSE_UNMOUNT,\n  };\n}\n\nexport function changeComposeAdvancedOption(option, value) {\n  return {\n    option,\n    type: COMPOSE_ADVANCED_OPTIONS_CHANGE,\n    value,\n  };\n}\n\nexport function changeComposeSensitivity() {\n  return {\n    type: COMPOSE_SENSITIVITY_CHANGE,\n  };\n}\n\nexport const changeComposeLanguage = language => ({\n  type: COMPOSE_LANGUAGE_CHANGE,\n  language,\n});\n\nexport function changeComposeSpoilerness() {\n  return {\n    type: COMPOSE_SPOILERNESS_CHANGE,\n  };\n}\n\nexport function changeComposeSpoilerText(text) {\n  return {\n    type: COMPOSE_SPOILER_TEXT_CHANGE,\n    text,\n  };\n}\n\nexport function changeComposeVisibility(value) {\n  return {\n    type: COMPOSE_VISIBILITY_CHANGE,\n    value,\n  };\n}\n\nexport function insertEmojiCompose(position, emoji, needsSpace) {\n  return {\n    type: COMPOSE_EMOJI_INSERT,\n    position,\n    emoji,\n    needsSpace,\n  };\n}\n\nexport function changeComposing(value) {\n  return {\n    type: COMPOSE_COMPOSING_CHANGE,\n    value,\n  };\n}\n\nexport function changeComposeContentType(value) {\n  return {\n    type: COMPOSE_CONTENT_TYPE_CHANGE,\n    value,\n  };\n}\n\nexport function addPoll() {\n  return {\n    type: COMPOSE_POLL_ADD,\n  };\n}\n\nexport function removePoll() {\n  return {\n    type: COMPOSE_POLL_REMOVE,\n  };\n}\n\nexport function addPollOption(title) {\n  return {\n    type: COMPOSE_POLL_OPTION_ADD,\n    title,\n  };\n}\n\nexport function changePollOption(index, title, maxOptions) {\n  return {\n    type: COMPOSE_POLL_OPTION_CHANGE,\n    index,\n    title,\n    maxOptions,\n  };\n}\n\nexport function removePollOption(index) {\n  return {\n    type: COMPOSE_POLL_OPTION_REMOVE,\n    index,\n  };\n}\n\nexport function changePollSettings(expiresIn, isMultiple) {\n  return {\n    type: COMPOSE_POLL_SETTINGS_CHANGE,\n    expiresIn,\n    isMultiple,\n  };\n}\n\nexport const changeMediaOrder = (a, b) => ({\n  type: COMPOSE_CHANGE_MEDIA_ORDER,\n  a,\n  b,\n});\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { fromJS } from 'immutable';\n\nimport { ImmutableHashtag as Hashtag } from 'mastodon/components/hashtag';\nimport MediaGallery from 'mastodon/components/media_gallery';\nimport ModalRoot from 'mastodon/components/modal_root';\nimport Poll from 'mastodon/components/poll';\nimport Audio from 'mastodon/features/audio';\nimport Card from 'mastodon/features/status/components/card';\nimport MediaModal from 'mastodon/features/ui/components/media_modal';\nimport Video from 'mastodon/features/video';\nimport { IntlProvider } from 'mastodon/locales';\nimport { getScrollbarWidth } from 'mastodon/utils/scrollbar';\n\nconst MEDIA_COMPONENTS = { MediaGallery, Video, Card, Poll, Hashtag, Audio };\n\nexport default class MediaContainer extends PureComponent {\n\n  static propTypes = {\n    components: PropTypes.object.isRequired,\n  };\n\n  state = {\n    media: null,\n    index: null,\n    lang: null,\n    time: null,\n    backgroundColor: null,\n    options: null,\n  };\n\n  handleOpenMedia = (media, index, lang) => {\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media, index, lang });\n  };\n\n  handleOpenVideo = (lang, options) => {\n    const { components } = this.props;\n    const { media } = JSON.parse(components[options.componentIndex].getAttribute('data-props'));\n    const mediaList = fromJS(media);\n\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media: mediaList, lang, options });\n  };\n\n  handleCloseMedia = () => {\n    document.body.classList.remove('with-modals--active');\n    document.documentElement.style.marginRight = '0';\n\n    this.setState({\n      media: null,\n      index: null,\n      time: null,\n      backgroundColor: null,\n      options: null,\n    });\n  };\n\n  setBackgroundColor = color => {\n    this.setState({ backgroundColor: color });\n  };\n\n  render () {\n    const { components } = this.props;\n\n    let handleOpenVideo;\n\n    // Don't offer to expand the video in a lightbox if we're in a frame\n    if (window.self === window.top) {\n      handleOpenVideo = this.handleOpenVideo;\n    }\n\n    return (\n      <IntlProvider>\n        <>\n          {Array.from(components).map((component, i) => {\n            const componentName = component.getAttribute('data-component');\n            const Component = MEDIA_COMPONENTS[componentName];\n            const { media, card, poll, hashtag, ...props } = JSON.parse(component.getAttribute('data-props'));\n\n            Object.assign(props, {\n              ...(media   ? { media:   fromJS(media)   } : {}),\n              ...(card    ? { card:    fromJS(card)    } : {}),\n              ...(poll    ? { poll:    fromJS(poll)    } : {}),\n              ...(hashtag ? { hashtag: fromJS(hashtag) } : {}),\n\n              ...(componentName === 'Video' ? {\n                componentIndex: i,\n                onOpenVideo: handleOpenVideo,\n              } : {\n                onOpenMedia: this.handleOpenMedia,\n              }),\n            });\n\n            return createPortal(\n              <Component {...props} key={`media-${i}`} />,\n              component,\n            );\n          })}\n\n          <ModalRoot backgroundColor={this.state.backgroundColor} onClose={this.handleCloseMedia}>\n            {this.state.media && (\n              <MediaModal\n                media={this.state.media}\n                index={this.state.index || 0}\n                lang={this.state.lang}\n                currentTime={this.state.options?.startTime}\n                autoPlay={this.state.options?.autoPlay}\n                volume={this.state.options?.defaultVolume}\n                onClose={this.handleCloseMedia}\n                onChangeBackgroundColor={this.setBackgroundColor}\n              />\n            )}\n          </ModalRoot>\n        </>\n      </IntlProvider>\n    );\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { fromJS } from 'immutable';\n\nimport { ImmutableHashtag as Hashtag } from 'flavours/glitch/components/hashtag';\nimport MediaGallery from 'flavours/glitch/components/media_gallery';\nimport ModalRoot from 'flavours/glitch/components/modal_root';\nimport Poll from 'flavours/glitch/components/poll';\nimport Audio from 'flavours/glitch/features/audio';\nimport Card from 'flavours/glitch/features/status/components/card';\nimport MediaModal from 'flavours/glitch/features/ui/components/media_modal';\nimport Video from 'flavours/glitch/features/video';\nimport { IntlProvider } from 'flavours/glitch/locales';\nimport { getScrollbarWidth } from 'flavours/glitch/utils/scrollbar';\n\nconst MEDIA_COMPONENTS = { MediaGallery, Video, Card, Poll, Hashtag, Audio };\n\nexport default class MediaContainer extends PureComponent {\n\n  static propTypes = {\n    components: PropTypes.object.isRequired,\n  };\n\n  state = {\n    media: null,\n    index: null,\n    lang: null,\n    time: null,\n    backgroundColor: null,\n    options: null,\n  };\n\n  handleOpenMedia = (media, index, lang) => {\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media, index, lang });\n  };\n\n  handleOpenVideo = (lang, options) => {\n    const { components } = this.props;\n    const { media } = JSON.parse(components[options.componentIndex].getAttribute('data-props'));\n    const mediaList = fromJS(media);\n\n    document.body.classList.add('with-modals--active');\n    document.documentElement.style.marginRight = `${getScrollbarWidth()}px`;\n\n    this.setState({ media: mediaList, lang, options });\n  };\n\n  handleCloseMedia = () => {\n    document.body.classList.remove('with-modals--active');\n    document.documentElement.style.marginRight = '0';\n\n    this.setState({\n      media: null,\n      index: null,\n      time: null,\n      backgroundColor: null,\n      options: null,\n    });\n  };\n\n  setBackgroundColor = color => {\n    this.setState({ backgroundColor: color });\n  };\n\n  render () {\n    const { components } = this.props;\n\n    let handleOpenVideo;\n\n    // Don't offer to expand the video in a lightbox if we're in a frame\n    if (window.self === window.top) {\n      handleOpenVideo = this.handleOpenVideo;\n    }\n\n    return (\n      <IntlProvider>\n        <>\n          {Array.from(components).map((component, i) => {\n            const componentName = component.getAttribute('data-component');\n            const Component = MEDIA_COMPONENTS[componentName];\n            const { media, card, poll, hashtag, ...props } = JSON.parse(component.getAttribute('data-props'));\n\n            Object.assign(props, {\n              ...(media   ? { media:   fromJS(media)   } : {}),\n              ...(card    ? { card:    fromJS(card)    } : {}),\n              ...(poll    ? { poll:    fromJS(poll)    } : {}),\n              ...(hashtag ? { hashtag: fromJS(hashtag) } : {}),\n\n              ...(componentName === 'Video' ? {\n                componentIndex: i,\n                onOpenVideo: handleOpenVideo,\n              } : {\n                onOpenMedia: this.handleOpenMedia,\n              }),\n            });\n\n            return createPortal(\n              <Component {...props} key={`media-${i}`} />,\n              component,\n            );\n          })}\n\n          <ModalRoot backgroundColor={this.state.backgroundColor} onClose={this.handleCloseMedia}>\n            {this.state.media && (\n              <MediaModal\n                media={this.state.media}\n                index={this.state.index || 0}\n                lang={this.state.lang}\n                currentTime={this.state.options?.startTime}\n                autoPlay={this.state.options?.autoPlay}\n                volume={this.state.options?.defaultVolume}\n                onClose={this.handleCloseMedia}\n                onChangeBackgroundColor={this.setBackgroundColor}\n              />\n            )}\n          </ModalRoot>\n        </>\n      </IntlProvider>\n    );\n  }\n\n}\n","import classNames from 'classnames';\n\nimport CheckBoxOutlineBlankIcon from '@/material-icons/400-24px/check_box_outline_blank.svg?react';\nimport { isProduction } from 'flavours/glitch/utils/environment';\n\ninterface SVGPropsWithTitle extends React.SVGProps<SVGSVGElement> {\n  title?: string;\n}\n\nexport type IconProp = React.FC<SVGPropsWithTitle>;\n\ninterface Props extends React.SVGProps<SVGSVGElement> {\n  children?: never;\n  id: string;\n  icon: IconProp;\n  title?: string;\n}\n\nexport const Icon: React.FC<Props> = ({\n  id,\n  icon: IconComponent,\n  className,\n  title: titleProp,\n  ...other\n}) => {\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (!IconComponent) {\n    if (!isProduction()) {\n      throw new Error(\n        `<Icon id=\"${id}\" className=\"${className}\"> is missing an \"icon\" prop.`,\n      );\n    }\n\n    IconComponent = CheckBoxOutlineBlankIcon;\n  }\n\n  const ariaHidden = titleProp ? undefined : true;\n  const role = !ariaHidden ? 'img' : undefined;\n\n  // Set the title to an empty string to remove the built-in SVG one if any\n  // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n  const title = titleProp || '';\n\n  return (\n    <IconComponent\n      className={classNames('icon', `icon-${id}`, className)}\n      title={title}\n      aria-hidden={ariaHidden}\n      role={role}\n      {...other}\n    />\n  );\n};\n","// @ts-check\n\n/**\n * @param {(() => void) | (() => Promise<void>)} callback\n * @returns {Promise<void>}\n */\nexport default function ready(callback) {\n  return new Promise((resolve, reject) => {\n    function loaded() {\n      let result;\n      try {\n        result = callback();\n      } catch (err) {\n        reject(err);\n\n        return;\n      }\n\n      if (typeof result?.then === 'function') {\n        result.then(resolve).catch(reject);\n      } else {\n        resolve();\n      }\n    }\n\n    if (['interactive', 'complete'].includes(document.readyState)) {\n      loaded();\n    } else {\n      document.addEventListener('DOMContentLoaded', loaded);\n    }\n  });\n}\n","// @ts-check\n\n/**\n * @param {(() => void) | (() => Promise<void>)} callback\n * @returns {Promise<void>}\n */\nexport default function ready(callback) {\n  return new Promise((resolve, reject) => {\n    function loaded() {\n      let result;\n      try {\n        result = callback();\n      } catch (err) {\n        reject(err);\n\n        return;\n      }\n\n      if (typeof result?.then === 'function') {\n        result.then(resolve).catch(reject);\n      } else {\n        resolve();\n      }\n    }\n\n    if (['interactive', 'complete'].includes(document.readyState)) {\n      loaded();\n    } else {\n      document.addEventListener('DOMContentLoaded', loaded);\n    }\n  });\n}\n","import api from '../api';\n\nimport { normalizeAnnouncement } from './importer/normalizer';\n\nexport const ANNOUNCEMENTS_FETCH_REQUEST = 'ANNOUNCEMENTS_FETCH_REQUEST';\nexport const ANNOUNCEMENTS_FETCH_SUCCESS = 'ANNOUNCEMENTS_FETCH_SUCCESS';\nexport const ANNOUNCEMENTS_FETCH_FAIL    = 'ANNOUNCEMENTS_FETCH_FAIL';\nexport const ANNOUNCEMENTS_UPDATE        = 'ANNOUNCEMENTS_UPDATE';\nexport const ANNOUNCEMENTS_DELETE        = 'ANNOUNCEMENTS_DELETE';\n\nexport const ANNOUNCEMENTS_DISMISS_REQUEST = 'ANNOUNCEMENTS_DISMISS_REQUEST';\nexport const ANNOUNCEMENTS_DISMISS_SUCCESS = 'ANNOUNCEMENTS_DISMISS_SUCCESS';\nexport const ANNOUNCEMENTS_DISMISS_FAIL    = 'ANNOUNCEMENTS_DISMISS_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_ADD_REQUEST = 'ANNOUNCEMENTS_REACTION_ADD_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_ADD_SUCCESS = 'ANNOUNCEMENTS_REACTION_ADD_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_ADD_FAIL    = 'ANNOUNCEMENTS_REACTION_ADD_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_REMOVE_REQUEST = 'ANNOUNCEMENTS_REACTION_REMOVE_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS = 'ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_FAIL    = 'ANNOUNCEMENTS_REACTION_REMOVE_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_UPDATE = 'ANNOUNCEMENTS_REACTION_UPDATE';\n\nexport const ANNOUNCEMENTS_TOGGLE_SHOW = 'ANNOUNCEMENTS_TOGGLE_SHOW';\n\nconst noOp = () => {};\n\nexport const fetchAnnouncements = (done = noOp) => (dispatch) => {\n  dispatch(fetchAnnouncementsRequest());\n\n  api().get('/api/v1/announcements').then(response => {\n    dispatch(fetchAnnouncementsSuccess(response.data.map(x => normalizeAnnouncement(x))));\n  }).catch(error => {\n    dispatch(fetchAnnouncementsFail(error));\n  }).finally(() => {\n    done();\n  });\n};\n\nexport const fetchAnnouncementsRequest = () => ({\n  type: ANNOUNCEMENTS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsSuccess = announcements => ({\n  type: ANNOUNCEMENTS_FETCH_SUCCESS,\n  announcements,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsFail= error => ({\n  type: ANNOUNCEMENTS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const updateAnnouncements = announcement => ({\n  type: ANNOUNCEMENTS_UPDATE,\n  announcement: normalizeAnnouncement(announcement),\n});\n\nexport const dismissAnnouncement = announcementId => (dispatch) => {\n  dispatch(dismissAnnouncementRequest(announcementId));\n\n  api().post(`/api/v1/announcements/${announcementId}/dismiss`).then(() => {\n    dispatch(dismissAnnouncementSuccess(announcementId));\n  }).catch(error => {\n    dispatch(dismissAnnouncementFail(announcementId, error));\n  });\n};\n\nexport const dismissAnnouncementRequest = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_REQUEST,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementSuccess = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_SUCCESS,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementFail = (announcementId, error) => ({\n  type: ANNOUNCEMENTS_DISMISS_FAIL,\n  id: announcementId,\n  error,\n});\n\nexport const addReaction = (announcementId, name) => (dispatch, getState) => {\n  const announcement = getState().getIn(['announcements', 'items']).find(x => x.get('id') === announcementId);\n\n  let alreadyAdded = false;\n\n  if (announcement) {\n    const reaction = announcement.get('reactions').find(x => x.get('name') === name);\n    if (reaction && reaction.get('me')) {\n      alreadyAdded = true;\n    }\n  }\n\n  if (!alreadyAdded) {\n    dispatch(addReactionRequest(announcementId, name, alreadyAdded));\n  }\n\n  api().put(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(addReactionSuccess(announcementId, name, alreadyAdded));\n  }).catch(err => {\n    if (!alreadyAdded) {\n      dispatch(addReactionFail(announcementId, name, err));\n    }\n  });\n};\n\nexport const addReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const removeReaction = (announcementId, name) => (dispatch) => {\n  dispatch(removeReactionRequest(announcementId, name));\n\n  api().delete(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(removeReactionSuccess(announcementId, name));\n  }).catch(err => {\n    dispatch(removeReactionFail(announcementId, name, err));\n  });\n};\n\nexport const removeReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const updateReaction = reaction => ({\n  type: ANNOUNCEMENTS_REACTION_UPDATE,\n  reaction,\n});\n\nexport const toggleShowAnnouncements = () => ({\n  type: ANNOUNCEMENTS_TOGGLE_SHOW,\n});\n\nexport const deleteAnnouncement = id => ({\n  type: ANNOUNCEMENTS_DELETE,\n  id,\n});\n","import api from '../api';\n\nimport { normalizeAnnouncement } from './importer/normalizer';\n\nexport const ANNOUNCEMENTS_FETCH_REQUEST = 'ANNOUNCEMENTS_FETCH_REQUEST';\nexport const ANNOUNCEMENTS_FETCH_SUCCESS = 'ANNOUNCEMENTS_FETCH_SUCCESS';\nexport const ANNOUNCEMENTS_FETCH_FAIL    = 'ANNOUNCEMENTS_FETCH_FAIL';\nexport const ANNOUNCEMENTS_UPDATE        = 'ANNOUNCEMENTS_UPDATE';\nexport const ANNOUNCEMENTS_DELETE        = 'ANNOUNCEMENTS_DELETE';\n\nexport const ANNOUNCEMENTS_DISMISS_REQUEST = 'ANNOUNCEMENTS_DISMISS_REQUEST';\nexport const ANNOUNCEMENTS_DISMISS_SUCCESS = 'ANNOUNCEMENTS_DISMISS_SUCCESS';\nexport const ANNOUNCEMENTS_DISMISS_FAIL    = 'ANNOUNCEMENTS_DISMISS_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_ADD_REQUEST = 'ANNOUNCEMENTS_REACTION_ADD_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_ADD_SUCCESS = 'ANNOUNCEMENTS_REACTION_ADD_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_ADD_FAIL    = 'ANNOUNCEMENTS_REACTION_ADD_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_REMOVE_REQUEST = 'ANNOUNCEMENTS_REACTION_REMOVE_REQUEST';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS = 'ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS';\nexport const ANNOUNCEMENTS_REACTION_REMOVE_FAIL    = 'ANNOUNCEMENTS_REACTION_REMOVE_FAIL';\n\nexport const ANNOUNCEMENTS_REACTION_UPDATE = 'ANNOUNCEMENTS_REACTION_UPDATE';\n\nexport const ANNOUNCEMENTS_TOGGLE_SHOW = 'ANNOUNCEMENTS_TOGGLE_SHOW';\n\nconst noOp = () => {};\n\nexport const fetchAnnouncements = (done = noOp) => (dispatch) => {\n  dispatch(fetchAnnouncementsRequest());\n\n  api().get('/api/v1/announcements').then(response => {\n    dispatch(fetchAnnouncementsSuccess(response.data.map(x => normalizeAnnouncement(x))));\n  }).catch(error => {\n    dispatch(fetchAnnouncementsFail(error));\n  }).finally(() => {\n    done();\n  });\n};\n\nexport const fetchAnnouncementsRequest = () => ({\n  type: ANNOUNCEMENTS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsSuccess = announcements => ({\n  type: ANNOUNCEMENTS_FETCH_SUCCESS,\n  announcements,\n  skipLoading: true,\n});\n\nexport const fetchAnnouncementsFail= error => ({\n  type: ANNOUNCEMENTS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const updateAnnouncements = announcement => ({\n  type: ANNOUNCEMENTS_UPDATE,\n  announcement: normalizeAnnouncement(announcement),\n});\n\nexport const dismissAnnouncement = announcementId => (dispatch) => {\n  dispatch(dismissAnnouncementRequest(announcementId));\n\n  api().post(`/api/v1/announcements/${announcementId}/dismiss`).then(() => {\n    dispatch(dismissAnnouncementSuccess(announcementId));\n  }).catch(error => {\n    dispatch(dismissAnnouncementFail(announcementId, error));\n  });\n};\n\nexport const dismissAnnouncementRequest = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_REQUEST,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementSuccess = announcementId => ({\n  type: ANNOUNCEMENTS_DISMISS_SUCCESS,\n  id: announcementId,\n});\n\nexport const dismissAnnouncementFail = (announcementId, error) => ({\n  type: ANNOUNCEMENTS_DISMISS_FAIL,\n  id: announcementId,\n  error,\n});\n\nexport const addReaction = (announcementId, name) => (dispatch, getState) => {\n  const announcement = getState().getIn(['announcements', 'items']).find(x => x.get('id') === announcementId);\n\n  let alreadyAdded = false;\n\n  if (announcement) {\n    const reaction = announcement.get('reactions').find(x => x.get('name') === name);\n    if (reaction && reaction.get('me')) {\n      alreadyAdded = true;\n    }\n  }\n\n  if (!alreadyAdded) {\n    dispatch(addReactionRequest(announcementId, name, alreadyAdded));\n  }\n\n  api().put(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(addReactionSuccess(announcementId, name, alreadyAdded));\n  }).catch(err => {\n    if (!alreadyAdded) {\n      dispatch(addReactionFail(announcementId, name, err));\n    }\n  });\n};\n\nexport const addReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const addReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const removeReaction = (announcementId, name) => (dispatch) => {\n  dispatch(removeReactionRequest(announcementId, name));\n\n  api().delete(`/api/v1/announcements/${announcementId}/reactions/${encodeURIComponent(name)}`).then(() => {\n    dispatch(removeReactionSuccess(announcementId, name));\n  }).catch(err => {\n    dispatch(removeReactionFail(announcementId, name, err));\n  });\n};\n\nexport const removeReactionRequest = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionSuccess = (announcementId, name) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_SUCCESS,\n  id: announcementId,\n  name,\n  skipLoading: true,\n});\n\nexport const removeReactionFail = (announcementId, name, error) => ({\n  type: ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  id: announcementId,\n  name,\n  error,\n  skipLoading: true,\n});\n\nexport const updateReaction = reaction => ({\n  type: ANNOUNCEMENTS_REACTION_UPDATE,\n  reaction,\n});\n\nexport const toggleShowAnnouncements = () => ({\n  type: ANNOUNCEMENTS_TOGGLE_SHOW,\n});\n\nexport const deleteAnnouncement = id => ({\n  type: ANNOUNCEMENTS_DELETE,\n  id,\n});\n","import { createSelector } from '@reduxjs/toolkit';\nimport { Record as ImmutableRecord } from 'immutable';\n\nimport { accountDefaultValues } from 'flavours/glitch/models/account';\nimport type { Account, AccountShape } from 'flavours/glitch/models/account';\nimport type { Relationship } from 'flavours/glitch/models/relationship';\nimport type { RootState } from 'flavours/glitch/store';\n\nconst getAccountBase = (state: RootState, id: string) =>\n  state.accounts.get(id, null);\n\nconst getAccountRelationship = (state: RootState, id: string) =>\n  state.relationships.get(id, null);\n\nconst getAccountMoved = (state: RootState, id: string) => {\n  const movedToId = state.accounts.get(id)?.moved;\n\n  if (!movedToId) return undefined;\n\n  return state.accounts.get(movedToId);\n};\n\ninterface FullAccountShape extends Omit<AccountShape, 'moved'> {\n  relationship: Relationship | null;\n  moved: Account | null;\n}\n\nconst FullAccountFactory = ImmutableRecord<FullAccountShape>({\n  ...accountDefaultValues,\n  moved: null,\n  relationship: null,\n});\n\nexport function makeGetAccount() {\n  return createSelector(\n    [getAccountBase, getAccountRelationship, getAccountMoved],\n    (base, relationship, moved) => {\n      if (base === null) {\n        return null;\n      }\n\n      return FullAccountFactory(base)\n        .set('relationship', relationship)\n        .set('moved', moved ?? null);\n    },\n  );\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { List as ImmutableList, Map as ImmutableMap } from 'immutable';\n\nimport { toServerSideType } from 'flavours/glitch/utils/filters';\n\nimport { me } from '../initial_state';\n\nexport { makeGetAccount } from \"./accounts\";\n\nconst getFilters = (state, { contextType }) => {\n  if (!contextType) return null;\n\n  const serverSideType = toServerSideType(contextType);\n  const now = new Date();\n\n  return state.get('filters').filter((filter) => filter.get('context').includes(serverSideType) && (filter.get('expires_at') === null || filter.get('expires_at') > now));\n};\n\nexport const makeGetStatus = () => {\n  return createSelector(\n    [\n      (state, { id }) => state.getIn(['statuses', id]),\n      (state, { id }) => state.getIn(['statuses', state.getIn(['statuses', id, 'reblog'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', id, 'account'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', state.getIn(['statuses', id, 'reblog']), 'account'])]),\n      getFilters,\n    ],\n\n    (statusBase, statusReblog, accountBase, accountReblog, filters) => {\n      if (!statusBase || statusBase.get('isLoading')) {\n        return null;\n      }\n\n      let filtered = false;\n      if ((accountReblog || accountBase).get('id') !== me && filters) {\n        let filterResults = statusReblog?.get('filtered') || statusBase.get('filtered') || ImmutableList();\n        if (filterResults.some((result) => filters.getIn([result.get('filter'), 'filter_action']) === 'hide')) {\n          return null;\n        }\n        filterResults = filterResults.filter(result => filters.has(result.get('filter')));\n        if (!filterResults.isEmpty()) {\n          filtered = filterResults.map(result => filters.getIn([result.get('filter'), 'title']));\n        }\n      }\n\n      if (statusReblog) {\n        statusReblog = statusReblog.set('account', accountReblog);\n        statusReblog = statusReblog.set('matched_filters', filtered);\n      } else {\n        statusReblog = null;\n      }\n\n      return statusBase.withMutations(map => {\n        map.set('reblog', statusReblog);\n        map.set('account', accountBase);\n        map.set('matched_filters', filtered);\n      });\n    },\n  );\n};\n\nexport const makeGetPictureInPicture = () => {\n  return createSelector([\n    (state, { id }) => state.picture_in_picture.statusId === id,\n    (state) => state.getIn(['meta', 'layout']) !== 'mobile',\n  ], (inUse, available) => ImmutableMap({\n    inUse: inUse && available,\n    available,\n  }));\n};\n\nconst ALERT_DEFAULTS = {\n  dismissAfter: 5000,\n  style: false,\n};\n\nexport const getAlerts = createSelector(state => state.get('alerts'), alerts =>\n  alerts.map(item => ({\n    ...ALERT_DEFAULTS,\n    ...item,\n  })).toArray());\n\nexport const makeGetNotification = () => createSelector([\n  (_, base)             => base,\n  (state, _, accountId) => state.getIn(['accounts', accountId]),\n], (base, account) => base.set('account', account));\n\nexport const makeGetReport = () => createSelector([\n  (_, base) => base,\n  (state, _, targetAccountId) => state.getIn(['accounts', targetAccountId]),\n], (base, targetAccount) => base.set('target_account', targetAccount));\n\nexport const getAccountGallery = createSelector([\n  (state, id) => state.getIn(['timelines', `account:${id}:media`, 'items'], ImmutableList()),\n  state       => state.get('statuses'),\n  (state, id) => state.getIn(['accounts', id]),\n], (statusIds, statuses, account) => {\n  let medias = ImmutableList();\n\n  statusIds.forEach(statusId => {\n    const status = statuses.get(statusId);\n    medias = medias.concat(status.get('media_attachments').map(media => media.set('status', status).set('account', account)));\n  });\n\n  return medias;\n});\n\nexport const getAccountHidden = createSelector([\n  (state, id) => state.getIn(['accounts', id, 'hidden']),\n  (state, id) => state.getIn(['relationships', id, 'following']) || state.getIn(['relationships', id, 'requested']),\n  (state, id) => id === me,\n], (hidden, followingOrRequested, isSelf) => {\n  return hidden && !(isSelf || followingOrRequested);\n});\n\nexport const getStatusList = createSelector([\n  (state, type) => state.getIn(['status_lists', type, 'items']),\n], (items) => items.toList());\n","import { debounce } from 'lodash';\n\nimport type { MarkerJSON } from 'mastodon/api_types/markers';\nimport { getAccessToken } from 'mastodon/initial_state';\nimport type { AppDispatch, RootState } from 'mastodon/store';\nimport { createAppAsyncThunk } from 'mastodon/store/typed_functions';\n\nimport api from '../api';\nimport { compareId } from '../compare_id';\n\nexport const synchronouslySubmitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  async (_args, { getState }) => {\n    const accessToken = getAccessToken();\n    const params = buildPostMarkersParams(getState());\n\n    if (\n      Object.keys(params).length === 0 ||\n      !accessToken ||\n      accessToken === ''\n    ) {\n      return;\n    }\n\n    // The Fetch API allows us to perform requests that will be carried out\n    // after the page closes. But that only works if the `keepalive` attribute\n    // is supported.\n    if ('fetch' in window && 'keepalive' in new Request('')) {\n      await fetch('/api/v1/markers', {\n        keepalive: true,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify(params),\n      });\n\n      return;\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    } else if ('navigator' && 'sendBeacon' in navigator) {\n      // Failing that, we can use sendBeacon, but we have to encode the data as\n      // FormData for DoorKeeper to recognize the token.\n      const formData = new FormData();\n\n      formData.append('bearer_token', accessToken);\n\n      for (const [id, value] of Object.entries(params)) {\n        if (value.last_read_id)\n          formData.append(`${id}[last_read_id]`, value.last_read_id);\n      }\n\n      if (navigator.sendBeacon('/api/v1/markers', formData)) {\n        return;\n      }\n    }\n\n    // If neither Fetch nor sendBeacon worked, try to perform a synchronous\n    // request.\n    try {\n      const client = new XMLHttpRequest();\n\n      client.open('POST', '/api/v1/markers', false);\n      client.setRequestHeader('Content-Type', 'application/json');\n      client.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n      client.send(JSON.stringify(params));\n    } catch (e) {\n      // Do not make the BeforeUnload handler error out\n    }\n  },\n);\n\ninterface MarkerParam {\n  last_read_id?: string;\n}\n\nfunction getLastNotificationId(state: RootState): string | undefined {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  const enableBeta = state.settings.getIn(\n    ['notifications', 'groupingBeta'],\n    false,\n  ) as boolean;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return enableBeta\n    ? state.notificationGroups.lastReadId\n    : // @ts-expect-error state.notifications is not yet typed\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      state.getIn(['notifications', 'lastReadId']);\n}\n\nconst buildPostMarkersParams = (state: RootState) => {\n  const params = {} as { home?: MarkerParam; notifications?: MarkerParam };\n\n  const lastNotificationId = getLastNotificationId(state);\n\n  if (\n    lastNotificationId &&\n    compareId(lastNotificationId, state.markers.notifications) > 0\n  ) {\n    params.notifications = {\n      last_read_id: lastNotificationId,\n    };\n  }\n\n  return params;\n};\n\nexport const submitMarkersAction = createAppAsyncThunk<{\n  home: string | undefined;\n  notifications: string | undefined;\n}>('markers/submitAction', async (_args, { getState }) => {\n  const accessToken = getAccessToken();\n  const params = buildPostMarkersParams(getState());\n\n  if (Object.keys(params).length === 0 || !accessToken || accessToken === '') {\n    return { home: undefined, notifications: undefined };\n  }\n\n  await api().post<MarkerJSON>('/api/v1/markers', params);\n\n  return {\n    home: params.home?.last_read_id,\n    notifications: params.notifications?.last_read_id,\n  };\n});\n\nconst debouncedSubmitMarkers = debounce(\n  (dispatch: AppDispatch) => {\n    void dispatch(submitMarkersAction());\n  },\n  300000,\n  {\n    leading: true,\n    trailing: true,\n  },\n);\n\nexport const submitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  (params: { immediate?: boolean }, { dispatch }) => {\n    debouncedSubmitMarkers(dispatch);\n\n    if (params.immediate) {\n      debouncedSubmitMarkers.flush();\n    }\n  },\n);\n\nexport const fetchMarkers = createAppAsyncThunk('markers/fetch', async () => {\n  const response = await api().get<Record<string, MarkerJSON>>(\n    `/api/v1/markers`,\n    { params: { timeline: ['notifications'] } },\n  );\n\n  return { markers: response.data };\n});\n","import { debounce } from 'lodash';\n\nimport type { MarkerJSON } from 'flavours/glitch/api_types/markers';\nimport { getAccessToken } from 'flavours/glitch/initial_state';\nimport type { AppDispatch, RootState } from 'flavours/glitch/store';\nimport { createAppAsyncThunk } from 'flavours/glitch/store/typed_functions';\n\nimport api from '../api';\nimport { compareId } from '../compare_id';\n\nexport const synchronouslySubmitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  async (_args, { getState }) => {\n    const accessToken = getAccessToken();\n    const params = buildPostMarkersParams(getState());\n\n    if (\n      Object.keys(params).length === 0 ||\n      !accessToken ||\n      accessToken === ''\n    ) {\n      return;\n    }\n\n    // The Fetch API allows us to perform requests that will be carried out\n    // after the page closes. But that only works if the `keepalive` attribute\n    // is supported.\n    if ('fetch' in window && 'keepalive' in new Request('')) {\n      await fetch('/api/v1/markers', {\n        keepalive: true,\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${accessToken}`,\n        },\n        body: JSON.stringify(params),\n      });\n\n      return;\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    } else if ('navigator' && 'sendBeacon' in navigator) {\n      // Failing that, we can use sendBeacon, but we have to encode the data as\n      // FormData for DoorKeeper to recognize the token.\n      const formData = new FormData();\n\n      formData.append('bearer_token', accessToken);\n\n      for (const [id, value] of Object.entries(params)) {\n        if (value.last_read_id)\n          formData.append(`${id}[last_read_id]`, value.last_read_id);\n      }\n\n      if (navigator.sendBeacon('/api/v1/markers', formData)) {\n        return;\n      }\n    }\n\n    // If neither Fetch nor sendBeacon worked, try to perform a synchronous\n    // request.\n    try {\n      const client = new XMLHttpRequest();\n\n      client.open('POST', '/api/v1/markers', false);\n      client.setRequestHeader('Content-Type', 'application/json');\n      client.setRequestHeader('Authorization', `Bearer ${accessToken}`);\n      client.send(JSON.stringify(params));\n    } catch (e) {\n      // Do not make the BeforeUnload handler error out\n    }\n  },\n);\n\ninterface MarkerParam {\n  last_read_id?: string;\n}\n\nfunction getLastNotificationId(state: RootState): string | undefined {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n  const enableBeta = state.settings.getIn(\n    ['notifications', 'groupingBeta'],\n    false,\n  ) as boolean;\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return enableBeta\n    ? state.notificationGroups.lastReadId\n    : // @ts-expect-error state.notifications is not yet typed\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n      state.getIn(['notifications', 'lastReadId']);\n}\n\nconst buildPostMarkersParams = (state: RootState) => {\n  const params = {} as { home?: MarkerParam; notifications?: MarkerParam };\n\n  const lastNotificationId = getLastNotificationId(state);\n\n  if (\n    lastNotificationId &&\n    lastNotificationId !== '0' &&\n    compareId(lastNotificationId, state.markers.notifications) > 0\n  ) {\n    params.notifications = {\n      last_read_id: lastNotificationId,\n    };\n  }\n\n  return params;\n};\n\nexport const submitMarkersAction = createAppAsyncThunk<{\n  home: string | undefined;\n  notifications: string | undefined;\n}>('markers/submitAction', async (_args, { getState }) => {\n  const accessToken = getAccessToken();\n  const params = buildPostMarkersParams(getState());\n\n  if (Object.keys(params).length === 0 || !accessToken || accessToken === '') {\n    return { home: undefined, notifications: undefined };\n  }\n\n  await api().post<MarkerJSON>('/api/v1/markers', params);\n\n  return {\n    home: params.home?.last_read_id,\n    notifications: params.notifications?.last_read_id,\n  };\n});\n\nconst debouncedSubmitMarkers = debounce(\n  (dispatch: AppDispatch) => {\n    void dispatch(submitMarkersAction());\n  },\n  300000,\n  {\n    leading: true,\n    trailing: true,\n  },\n);\n\nexport const submitMarkers = createAppAsyncThunk(\n  'markers/submit',\n  (params: { immediate?: boolean }, { dispatch }) => {\n    debouncedSubmitMarkers(dispatch);\n\n    if (params.immediate) {\n      debouncedSubmitMarkers.flush();\n    }\n  },\n);\n\nexport const fetchMarkers = createAppAsyncThunk('markers/fetch', async () => {\n  const response = await api().get<Record<string, MarkerJSON>>(\n    `/api/v1/markers`,\n    { params: { timeline: ['notifications'] } },\n  );\n\n  return { markers: response.data };\n});\n","import { Component } from 'react';\n\nimport type { IntlShape } from 'react-intl';\nimport { injectIntl, defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n  today: { id: 'relative_time.today', defaultMessage: 'today' },\n  just_now: { id: 'relative_time.just_now', defaultMessage: 'now' },\n  just_now_full: {\n    id: 'relative_time.full.just_now',\n    defaultMessage: 'just now',\n  },\n  seconds: { id: 'relative_time.seconds', defaultMessage: '{number}s' },\n  seconds_full: {\n    id: 'relative_time.full.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} ago',\n  },\n  minutes: { id: 'relative_time.minutes', defaultMessage: '{number}m' },\n  minutes_full: {\n    id: 'relative_time.full.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} ago',\n  },\n  hours: { id: 'relative_time.hours', defaultMessage: '{number}h' },\n  hours_full: {\n    id: 'relative_time.full.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} ago',\n  },\n  days: { id: 'relative_time.days', defaultMessage: '{number}d' },\n  days_full: {\n    id: 'relative_time.full.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} ago',\n  },\n  moments_remaining: {\n    id: 'time_remaining.moments',\n    defaultMessage: 'Moments remaining',\n  },\n  seconds_remaining: {\n    id: 'time_remaining.seconds',\n    defaultMessage: '{number, plural, one {# second} other {# seconds}} left',\n  },\n  minutes_remaining: {\n    id: 'time_remaining.minutes',\n    defaultMessage: '{number, plural, one {# minute} other {# minutes}} left',\n  },\n  hours_remaining: {\n    id: 'time_remaining.hours',\n    defaultMessage: '{number, plural, one {# hour} other {# hours}} left',\n  },\n  days_remaining: {\n    id: 'time_remaining.days',\n    defaultMessage: '{number, plural, one {# day} other {# days}} left',\n  },\n});\n\nconst dateFormatOptions = {\n  year: 'numeric',\n  month: 'short',\n  day: '2-digit',\n  hour: '2-digit',\n  minute: '2-digit',\n} as const;\n\nconst shortDateFormatOptions = {\n  month: 'short',\n  day: 'numeric',\n} as const;\n\nconst SECOND = 1000;\nconst MINUTE = 1000 * 60;\nconst HOUR = 1000 * 60 * 60;\nconst DAY = 1000 * 60 * 60 * 24;\n\nconst MAX_DELAY = 2147483647;\n\nconst selectUnits = (delta: number) => {\n  const absDelta = Math.abs(delta);\n\n  if (absDelta < MINUTE) {\n    return 'second';\n  } else if (absDelta < HOUR) {\n    return 'minute';\n  } else if (absDelta < DAY) {\n    return 'hour';\n  }\n\n  return 'day';\n};\n\nconst getUnitDelay = (units: string) => {\n  switch (units) {\n    case 'second':\n      return SECOND;\n    case 'minute':\n      return MINUTE;\n    case 'hour':\n      return HOUR;\n    case 'day':\n      return DAY;\n    default:\n      return MAX_DELAY;\n  }\n};\n\nexport const timeAgoString = (\n  intl: Pick<IntlShape, 'formatDate' | 'formatMessage'>,\n  date: Date,\n  now: number,\n  year: number,\n  timeGiven: boolean,\n  short?: boolean,\n) => {\n  const delta = now - date.getTime();\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(\n      short ? messages.just_now : messages.just_now_full,\n    );\n  } else if (delta < 7 * DAY) {\n    if (delta < MINUTE) {\n      relativeTime = intl.formatMessage(\n        short ? messages.seconds : messages.seconds_full,\n        { number: Math.floor(delta / SECOND) },\n      );\n    } else if (delta < HOUR) {\n      relativeTime = intl.formatMessage(\n        short ? messages.minutes : messages.minutes_full,\n        { number: Math.floor(delta / MINUTE) },\n      );\n    } else if (delta < DAY) {\n      relativeTime = intl.formatMessage(\n        short ? messages.hours : messages.hours_full,\n        { number: Math.floor(delta / HOUR) },\n      );\n    } else {\n      relativeTime = intl.formatMessage(\n        short ? messages.days : messages.days_full,\n        { number: Math.floor(delta / DAY) },\n      );\n    }\n  } else if (date.getFullYear() === year) {\n    relativeTime = intl.formatDate(date, shortDateFormatOptions);\n  } else {\n    relativeTime = intl.formatDate(date, {\n      ...shortDateFormatOptions,\n      year: 'numeric',\n    });\n  }\n\n  return relativeTime;\n};\n\nconst timeRemainingString = (\n  intl: IntlShape,\n  date: Date,\n  now: number,\n  timeGiven = true,\n) => {\n  const delta = date.getTime() - now;\n\n  let relativeTime;\n\n  if (delta < DAY && !timeGiven) {\n    relativeTime = intl.formatMessage(messages.today);\n  } else if (delta < 10 * SECOND) {\n    relativeTime = intl.formatMessage(messages.moments_remaining);\n  } else if (delta < MINUTE) {\n    relativeTime = intl.formatMessage(messages.seconds_remaining, {\n      number: Math.floor(delta / SECOND),\n    });\n  } else if (delta < HOUR) {\n    relativeTime = intl.formatMessage(messages.minutes_remaining, {\n      number: Math.floor(delta / MINUTE),\n    });\n  } else if (delta < DAY) {\n    relativeTime = intl.formatMessage(messages.hours_remaining, {\n      number: Math.floor(delta / HOUR),\n    });\n  } else {\n    relativeTime = intl.formatMessage(messages.days_remaining, {\n      number: Math.floor(delta / DAY),\n    });\n  }\n\n  return relativeTime;\n};\n\ninterface Props {\n  intl: IntlShape;\n  timestamp: string;\n  year?: number;\n  futureDate?: boolean;\n  short?: boolean;\n}\ninterface States {\n  now: number;\n}\nclass RelativeTimestamp extends Component<Props, States> {\n  state = {\n    now: Date.now(),\n  };\n\n  _timer: number | undefined;\n\n  shouldComponentUpdate(nextProps: Props, nextState: States) {\n    // As of right now the locale doesn't change without a new page load,\n    // but we might as well check in case that ever changes.\n    return (\n      this.props.timestamp !== nextProps.timestamp ||\n      this.props.intl.locale !== nextProps.intl.locale ||\n      this.state.now !== nextState.now\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (this.props.timestamp !== nextProps.timestamp) {\n      this.setState({ now: Date.now() });\n    }\n  }\n\n  componentDidMount() {\n    this._scheduleNextUpdate(this.props, this.state);\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: Props, nextState: States) {\n    this._scheduleNextUpdate(nextProps, nextState);\n  }\n\n  componentWillUnmount() {\n    window.clearTimeout(this._timer);\n  }\n\n  _scheduleNextUpdate(props: Props, state: States) {\n    window.clearTimeout(this._timer);\n\n    const { timestamp } = props;\n    const delta = new Date(timestamp).getTime() - state.now;\n    const unitDelay = getUnitDelay(selectUnits(delta));\n    const unitRemainder = Math.abs(delta % unitDelay);\n    const updateInterval = 1000 * 10;\n    const delay =\n      delta < 0\n        ? Math.max(updateInterval, unitDelay - unitRemainder)\n        : Math.max(updateInterval, unitRemainder);\n\n    this._timer = window.setTimeout(() => {\n      this.setState({ now: Date.now() });\n    }, delay);\n  }\n\n  render() {\n    const {\n      timestamp,\n      intl,\n      futureDate,\n      year = new Date().getFullYear(),\n      short = true,\n    } = this.props;\n\n    const timeGiven = timestamp.includes('T');\n    const date = new Date(timestamp);\n    const relativeTime = futureDate\n      ? timeRemainingString(intl, date, this.state.now, timeGiven)\n      : timeAgoString(intl, date, this.state.now, year, timeGiven, short);\n\n    return (\n      <time\n        dateTime={timestamp}\n        title={intl.formatDate(date, dateFormatOptions)}\n      >\n        {relativeTime}\n      </time>\n    );\n  }\n}\n\nconst RelativeTimestampWithIntl = injectIntl(RelativeTimestamp);\n\nexport { RelativeTimestampWithIntl as RelativeTimestamp };\n","import api from '../api';\n\nimport { importFetchedAccount } from './importer';\n\nexport const SERVER_FETCH_REQUEST = 'Server_FETCH_REQUEST';\nexport const SERVER_FETCH_SUCCESS = 'Server_FETCH_SUCCESS';\nexport const SERVER_FETCH_FAIL    = 'Server_FETCH_FAIL';\n\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST = 'SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS = 'SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL    = 'SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL';\n\nexport const EXTENDED_DESCRIPTION_REQUEST = 'EXTENDED_DESCRIPTION_REQUEST';\nexport const EXTENDED_DESCRIPTION_SUCCESS = 'EXTENDED_DESCRIPTION_SUCCESS';\nexport const EXTENDED_DESCRIPTION_FAIL    = 'EXTENDED_DESCRIPTION_FAIL';\n\nexport const SERVER_DOMAIN_BLOCKS_FETCH_REQUEST = 'SERVER_DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS = 'SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_FAIL    = 'SERVER_DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const fetchServer = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'server', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchServerRequest());\n\n  api()\n    .get('/api/v2/instance').then(({ data }) => {\n      if (data.contact.account) dispatch(importFetchedAccount(data.contact.account));\n      dispatch(fetchServerSuccess(data));\n    }).catch(err => dispatch(fetchServerFail(err)));\n};\n\nconst fetchServerRequest = () => ({\n  type: SERVER_FETCH_REQUEST,\n});\n\nconst fetchServerSuccess = server => ({\n  type: SERVER_FETCH_SUCCESS,\n  server,\n});\n\nconst fetchServerFail = error => ({\n  type: SERVER_FETCH_FAIL,\n  error,\n});\n\nexport const fetchServerTranslationLanguages = () => (dispatch) => {\n  dispatch(fetchServerTranslationLanguagesRequest());\n\n  api()\n    .get('/api/v1/instance/translation_languages').then(({ data }) => {\n      dispatch(fetchServerTranslationLanguagesSuccess(data));\n    }).catch(err => dispatch(fetchServerTranslationLanguagesFail(err)));\n};\n\nconst fetchServerTranslationLanguagesRequest = () => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n});\n\nconst fetchServerTranslationLanguagesSuccess = translationLanguages => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  translationLanguages,\n});\n\nconst fetchServerTranslationLanguagesFail = error => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  error,\n});\n\nexport const fetchExtendedDescription = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'extendedDescription', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchExtendedDescriptionRequest());\n\n  api()\n    .get('/api/v1/instance/extended_description')\n    .then(({ data }) => dispatch(fetchExtendedDescriptionSuccess(data)))\n    .catch(err => dispatch(fetchExtendedDescriptionFail(err)));\n};\n\nconst fetchExtendedDescriptionRequest = () => ({\n  type: EXTENDED_DESCRIPTION_REQUEST,\n});\n\nconst fetchExtendedDescriptionSuccess = description => ({\n  type: EXTENDED_DESCRIPTION_SUCCESS,\n  description,\n});\n\nconst fetchExtendedDescriptionFail = error => ({\n  type: EXTENDED_DESCRIPTION_FAIL,\n  error,\n});\n\nexport const fetchDomainBlocks = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'domainBlocks', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchDomainBlocksRequest());\n\n  api()\n    .get('/api/v1/instance/domain_blocks')\n    .then(({ data }) => dispatch(fetchDomainBlocksSuccess(true, data)))\n    .catch(err => {\n      if (err.response.status === 404) {\n        dispatch(fetchDomainBlocksSuccess(false, []));\n      } else {\n        dispatch(fetchDomainBlocksFail(err));\n      }\n    });\n};\n\nconst fetchDomainBlocksRequest = () => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n});\n\nconst fetchDomainBlocksSuccess = (isAvailable, blocks) => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  isAvailable,\n  blocks,\n});\n\nconst fetchDomainBlocksFail = error => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n  error,\n});\n","import api from '../api';\n\nimport { importFetchedAccount } from './importer';\n\nexport const SERVER_FETCH_REQUEST = 'Server_FETCH_REQUEST';\nexport const SERVER_FETCH_SUCCESS = 'Server_FETCH_SUCCESS';\nexport const SERVER_FETCH_FAIL    = 'Server_FETCH_FAIL';\n\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST = 'SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS = 'SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS';\nexport const SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL    = 'SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL';\n\nexport const EXTENDED_DESCRIPTION_REQUEST = 'EXTENDED_DESCRIPTION_REQUEST';\nexport const EXTENDED_DESCRIPTION_SUCCESS = 'EXTENDED_DESCRIPTION_SUCCESS';\nexport const EXTENDED_DESCRIPTION_FAIL    = 'EXTENDED_DESCRIPTION_FAIL';\n\nexport const SERVER_DOMAIN_BLOCKS_FETCH_REQUEST = 'SERVER_DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS = 'SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const SERVER_DOMAIN_BLOCKS_FETCH_FAIL    = 'SERVER_DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const fetchServer = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'server', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchServerRequest());\n\n  api()\n    .get('/api/v2/instance').then(({ data }) => {\n      if (data.contact.account) dispatch(importFetchedAccount(data.contact.account));\n      dispatch(fetchServerSuccess(data));\n    }).catch(err => dispatch(fetchServerFail(err)));\n};\n\nconst fetchServerRequest = () => ({\n  type: SERVER_FETCH_REQUEST,\n});\n\nconst fetchServerSuccess = server => ({\n  type: SERVER_FETCH_SUCCESS,\n  server,\n});\n\nconst fetchServerFail = error => ({\n  type: SERVER_FETCH_FAIL,\n  error,\n});\n\nexport const fetchServerTranslationLanguages = () => (dispatch) => {\n  dispatch(fetchServerTranslationLanguagesRequest());\n\n  api()\n    .get('/api/v1/instance/translation_languages').then(({ data }) => {\n      dispatch(fetchServerTranslationLanguagesSuccess(data));\n    }).catch(err => dispatch(fetchServerTranslationLanguagesFail(err)));\n};\n\nconst fetchServerTranslationLanguagesRequest = () => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n});\n\nconst fetchServerTranslationLanguagesSuccess = translationLanguages => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  translationLanguages,\n});\n\nconst fetchServerTranslationLanguagesFail = error => ({\n  type: SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  error,\n});\n\nexport const fetchExtendedDescription = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'extendedDescription', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchExtendedDescriptionRequest());\n\n  api()\n    .get('/api/v1/instance/extended_description')\n    .then(({ data }) => dispatch(fetchExtendedDescriptionSuccess(data)))\n    .catch(err => dispatch(fetchExtendedDescriptionFail(err)));\n};\n\nconst fetchExtendedDescriptionRequest = () => ({\n  type: EXTENDED_DESCRIPTION_REQUEST,\n});\n\nconst fetchExtendedDescriptionSuccess = description => ({\n  type: EXTENDED_DESCRIPTION_SUCCESS,\n  description,\n});\n\nconst fetchExtendedDescriptionFail = error => ({\n  type: EXTENDED_DESCRIPTION_FAIL,\n  error,\n});\n\nexport const fetchDomainBlocks = () => (dispatch, getState) => {\n  if (getState().getIn(['server', 'domainBlocks', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchDomainBlocksRequest());\n\n  api()\n    .get('/api/v1/instance/domain_blocks')\n    .then(({ data }) => dispatch(fetchDomainBlocksSuccess(true, data)))\n    .catch(err => {\n      if (err.response.status === 404) {\n        dispatch(fetchDomainBlocksSuccess(false, []));\n      } else {\n        dispatch(fetchDomainBlocksFail(err));\n      }\n    });\n};\n\nconst fetchDomainBlocksRequest = () => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n});\n\nconst fetchDomainBlocksSuccess = (isAvailable, blocks) => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  isAvailable,\n  blocks,\n});\n\nconst fetchDomainBlocksFail = error => ({\n  type: SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n  error,\n});\n","import { defineMessages } from 'react-intl';\n\nimport axios from 'axios';\nimport { throttle } from 'lodash';\n\nimport api from 'mastodon/api';\nimport { browserHistory } from 'mastodon/components/router';\nimport { search as emojiSearch } from 'mastodon/features/emoji/emoji_mart_search_light';\nimport { tagHistory } from 'mastodon/settings';\n\nimport { showAlert, showAlertForError } from './alerts';\nimport { useEmoji } from './emojis';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { openModal } from './modal';\nimport { updateTimeline } from './timelines';\n\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsAccountsController;\n/** @type {AbortController | undefined} */\nlet fetchComposeSuggestionsTagsController;\n\nexport const COMPOSE_CHANGE          = 'COMPOSE_CHANGE';\nexport const COMPOSE_SUBMIT_REQUEST  = 'COMPOSE_SUBMIT_REQUEST';\nexport const COMPOSE_SUBMIT_SUCCESS  = 'COMPOSE_SUBMIT_SUCCESS';\nexport const COMPOSE_SUBMIT_FAIL     = 'COMPOSE_SUBMIT_FAIL';\nexport const COMPOSE_REPLY           = 'COMPOSE_REPLY';\nexport const COMPOSE_REPLY_CANCEL    = 'COMPOSE_REPLY_CANCEL';\nexport const COMPOSE_DIRECT          = 'COMPOSE_DIRECT';\nexport const COMPOSE_MENTION         = 'COMPOSE_MENTION';\nexport const COMPOSE_RESET           = 'COMPOSE_RESET';\n\nexport const COMPOSE_UPLOAD_REQUEST    = 'COMPOSE_UPLOAD_REQUEST';\nexport const COMPOSE_UPLOAD_SUCCESS    = 'COMPOSE_UPLOAD_SUCCESS';\nexport const COMPOSE_UPLOAD_FAIL       = 'COMPOSE_UPLOAD_FAIL';\nexport const COMPOSE_UPLOAD_PROGRESS   = 'COMPOSE_UPLOAD_PROGRESS';\nexport const COMPOSE_UPLOAD_PROCESSING = 'COMPOSE_UPLOAD_PROCESSING';\nexport const COMPOSE_UPLOAD_UNDO       = 'COMPOSE_UPLOAD_UNDO';\n\nexport const THUMBNAIL_UPLOAD_REQUEST  = 'THUMBNAIL_UPLOAD_REQUEST';\nexport const THUMBNAIL_UPLOAD_SUCCESS  = 'THUMBNAIL_UPLOAD_SUCCESS';\nexport const THUMBNAIL_UPLOAD_FAIL     = 'THUMBNAIL_UPLOAD_FAIL';\nexport const THUMBNAIL_UPLOAD_PROGRESS = 'THUMBNAIL_UPLOAD_PROGRESS';\n\nexport const COMPOSE_SUGGESTIONS_CLEAR = 'COMPOSE_SUGGESTIONS_CLEAR';\nexport const COMPOSE_SUGGESTIONS_READY = 'COMPOSE_SUGGESTIONS_READY';\nexport const COMPOSE_SUGGESTION_SELECT = 'COMPOSE_SUGGESTION_SELECT';\nexport const COMPOSE_SUGGESTION_IGNORE = 'COMPOSE_SUGGESTION_IGNORE';\nexport const COMPOSE_SUGGESTION_TAGS_UPDATE = 'COMPOSE_SUGGESTION_TAGS_UPDATE';\n\nexport const COMPOSE_TAG_HISTORY_UPDATE = 'COMPOSE_TAG_HISTORY_UPDATE';\n\nexport const COMPOSE_MOUNT   = 'COMPOSE_MOUNT';\nexport const COMPOSE_UNMOUNT = 'COMPOSE_UNMOUNT';\n\nexport const COMPOSE_SENSITIVITY_CHANGE  = 'COMPOSE_SENSITIVITY_CHANGE';\nexport const COMPOSE_SPOILERNESS_CHANGE  = 'COMPOSE_SPOILERNESS_CHANGE';\nexport const COMPOSE_SPOILER_TEXT_CHANGE = 'COMPOSE_SPOILER_TEXT_CHANGE';\nexport const COMPOSE_VISIBILITY_CHANGE   = 'COMPOSE_VISIBILITY_CHANGE';\nexport const COMPOSE_COMPOSING_CHANGE    = 'COMPOSE_COMPOSING_CHANGE';\nexport const COMPOSE_LANGUAGE_CHANGE     = 'COMPOSE_LANGUAGE_CHANGE';\n\nexport const COMPOSE_EMOJI_INSERT = 'COMPOSE_EMOJI_INSERT';\n\nexport const COMPOSE_UPLOAD_CHANGE_REQUEST     = 'COMPOSE_UPLOAD_UPDATE_REQUEST';\nexport const COMPOSE_UPLOAD_CHANGE_SUCCESS     = 'COMPOSE_UPLOAD_UPDATE_SUCCESS';\nexport const COMPOSE_UPLOAD_CHANGE_FAIL        = 'COMPOSE_UPLOAD_UPDATE_FAIL';\n\nexport const COMPOSE_POLL_ADD             = 'COMPOSE_POLL_ADD';\nexport const COMPOSE_POLL_REMOVE          = 'COMPOSE_POLL_REMOVE';\nexport const COMPOSE_POLL_OPTION_ADD      = 'COMPOSE_POLL_OPTION_ADD';\nexport const COMPOSE_POLL_OPTION_CHANGE   = 'COMPOSE_POLL_OPTION_CHANGE';\nexport const COMPOSE_POLL_OPTION_REMOVE   = 'COMPOSE_POLL_OPTION_REMOVE';\nexport const COMPOSE_POLL_SETTINGS_CHANGE = 'COMPOSE_POLL_SETTINGS_CHANGE';\n\nexport const INIT_MEDIA_EDIT_MODAL = 'INIT_MEDIA_EDIT_MODAL';\n\nexport const COMPOSE_CHANGE_MEDIA_DESCRIPTION = 'COMPOSE_CHANGE_MEDIA_DESCRIPTION';\nexport const COMPOSE_CHANGE_MEDIA_FOCUS       = 'COMPOSE_CHANGE_MEDIA_FOCUS';\nexport const COMPOSE_CHANGE_MEDIA_ORDER       = 'COMPOSE_CHANGE_MEDIA_ORDER';\n\nexport const COMPOSE_SET_STATUS = 'COMPOSE_SET_STATUS';\nexport const COMPOSE_FOCUS = 'COMPOSE_FOCUS';\n\nconst messages = defineMessages({\n  uploadErrorLimit: { id: 'upload_error.limit', defaultMessage: 'File upload limit exceeded.' },\n  uploadErrorPoll:  { id: 'upload_error.poll', defaultMessage: 'File upload not allowed with polls.' },\n  open: { id: 'compose.published.open', defaultMessage: 'Open' },\n  published: { id: 'compose.published.body', defaultMessage: 'Post published.' },\n  saved: { id: 'compose.saved.body', defaultMessage: 'Post saved.' },\n});\n\nexport const ensureComposeIsVisible = (getState) => {\n  if (!getState().getIn(['compose', 'mounted'])) {\n    browserHistory.push('/publish');\n  }\n};\n\nexport function setComposeToStatus(status, text, spoiler_text) {\n  return{\n    type: COMPOSE_SET_STATUS,\n    status,\n    text,\n    spoiler_text,\n  };\n}\n\nexport function changeCompose(text) {\n  return {\n    type: COMPOSE_CHANGE,\n    text: text,\n  };\n}\n\nexport function replyCompose(status) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_REPLY,\n      status: status,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function replyComposeById(statusId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const status = state.statuses.get(statusId);\n\n    if (status) {\n      const account = state.accounts.get(status.get('account'));\n      dispatch(replyCompose(status.set('account', account)));\n    }\n  };\n}\n\nexport function cancelReplyCompose() {\n  return {\n    type: COMPOSE_REPLY_CANCEL,\n  };\n}\n\nexport function resetCompose() {\n  return {\n    type: COMPOSE_RESET,\n  };\n}\n\nexport const focusCompose = (defaultText) => (dispatch, getState) => {\n  dispatch({\n    type: COMPOSE_FOCUS,\n    defaultText,\n  });\n\n  ensureComposeIsVisible(getState);\n};\n\nexport function mentionCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_MENTION,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function mentionComposeById(accountId) {\n  return (dispatch, getState) => {\n    dispatch(mentionCompose(getState().accounts.get(accountId)));\n  };\n}\n\nexport function directCompose(account) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: COMPOSE_DIRECT,\n      account: account,\n    });\n\n    ensureComposeIsVisible(getState);\n  };\n}\n\nexport function submitCompose() {\n  return function (dispatch, getState) {\n    const status   = getState().getIn(['compose', 'text'], '');\n    const media    = getState().getIn(['compose', 'media_attachments']);\n    const statusId = getState().getIn(['compose', 'id'], null);\n\n    if ((!status || !status.length) && media.size === 0) {\n      return;\n    }\n\n    dispatch(submitComposeRequest());\n\n    // If we're editing a post with media attachments, those have not\n    // necessarily been changed on the server. Do it now in the same\n    // API call.\n    let media_attributes;\n    if (statusId !== null) {\n      media_attributes = media.map(item => {\n        let focus;\n\n        if (item.getIn(['meta', 'focus'])) {\n          focus = `${item.getIn(['meta', 'focus', 'x']).toFixed(2)},${item.getIn(['meta', 'focus', 'y']).toFixed(2)}`;\n        }\n\n        return {\n          id: item.get('id'),\n          description: item.get('description'),\n          focus,\n        };\n      });\n    }\n\n    api().request({\n      url: statusId === null ? '/api/v1/statuses' : `/api/v1/statuses/${statusId}`,\n      method: statusId === null ? 'post' : 'put',\n      data: {\n        status,\n        in_reply_to_id: getState().getIn(['compose', 'in_reply_to'], null),\n        media_ids: media.map(item => item.get('id')),\n        media_attributes,\n        sensitive: getState().getIn(['compose', 'sensitive']),\n        spoiler_text: getState().getIn(['compose', 'spoiler']) ? getState().getIn(['compose', 'spoiler_text'], '') : '',\n        visibility: getState().getIn(['compose', 'privacy']),\n        poll: getState().getIn(['compose', 'poll'], null),\n        language: getState().getIn(['compose', 'language']),\n      },\n      headers: {\n        'Idempotency-Key': getState().getIn(['compose', 'idempotencyKey']),\n      },\n    }).then(function (response) {\n      if ((browserHistory.location.pathname === '/publish' || browserHistory.location.pathname === '/statuses/new') && window.history.state) {\n        browserHistory.goBack();\n      }\n\n      dispatch(insertIntoTagHistory(response.data.tags, status));\n      dispatch(submitComposeSuccess({ ...response.data }));\n\n      // To make the app more responsive, immediately push the status\n      // into the columns\n      const insertIfOnline = timelineId => {\n        const timeline = getState().getIn(['timelines', timelineId]);\n\n        if (timeline && timeline.get('items').size > 0 && timeline.getIn(['items', 0]) !== null && timeline.get('online')) {\n          dispatch(updateTimeline(timelineId, { ...response.data }));\n        }\n      };\n\n      if (statusId) {\n        dispatch(importFetchedStatus({ ...response.data }));\n      }\n\n      if (statusId === null && response.data.visibility !== 'direct') {\n        insertIfOnline('home');\n      }\n\n      if (statusId === null && response.data.in_reply_to_id === null && response.data.visibility === 'public') {\n        insertIfOnline('community');\n        if (!response.data.local_only) {\n          insertIfOnline('public');\n        }\n        insertIfOnline(`account:${response.data.account.id}`);\n      }\n\n      dispatch(showAlert({\n        message: statusId === null ? messages.published : messages.saved,\n        action: messages.open,\n        dismissAfter: 10000,\n        onClick: () => browserHistory.push(`/@${response.data.account.username}/${response.data.id}`),\n      }));\n    }).catch(function (error) {\n      dispatch(submitComposeFail(error));\n    });\n  };\n}\n\nexport function submitComposeRequest() {\n  return {\n    type: COMPOSE_SUBMIT_REQUEST,\n  };\n}\n\nexport function submitComposeSuccess(status) {\n  return {\n    type: COMPOSE_SUBMIT_SUCCESS,\n    status: status,\n  };\n}\n\nexport function submitComposeFail(error) {\n  return {\n    type: COMPOSE_SUBMIT_FAIL,\n    error: error,\n  };\n}\n\nexport function uploadCompose(files) {\n  return function (dispatch, getState) {\n    const uploadLimit = getState().getIn(['server', 'server', 'configuration', 'statuses', 'max_media_attachments']);\n    const media = getState().getIn(['compose', 'media_attachments']);\n    const pending = getState().getIn(['compose', 'pending_media_attachments']);\n    const progress = new Array(files.length).fill(0);\n\n    let total = Array.from(files).reduce((a, v) => a + v.size, 0);\n\n    if (files.length + media.size + pending > uploadLimit) {\n      dispatch(showAlert({ message: messages.uploadErrorLimit }));\n      return;\n    }\n\n    if (getState().getIn(['compose', 'poll'])) {\n      dispatch(showAlert({ message: messages.uploadErrorPoll }));\n      return;\n    }\n\n    dispatch(uploadComposeRequest());\n\n    for (const [i, file] of Array.from(files).entries()) {\n      if (media.size + i > (uploadLimit - 1)) break;\n\n      const data = new FormData();\n      data.append('file', file);\n\n      api().post('/api/v2/media', data, {\n        onUploadProgress: function({ loaded }){\n          progress[i] = loaded;\n          dispatch(uploadComposeProgress(progress.reduce((a, v) => a + v, 0), total));\n        },\n      }).then(({ status, data }) => {\n        // If server-side processing of the media attachment has not completed yet,\n        // poll the server until it is, before showing the media attachment as uploaded\n\n        if (status === 200) {\n          dispatch(uploadComposeSuccess(data, file));\n        } else if (status === 202) {\n          dispatch(uploadComposeProcessing());\n\n          let tryCount = 1;\n\n          const poll = () => {\n            api().get(`/api/v1/media/${data.id}`).then(response => {\n              if (response.status === 200) {\n                dispatch(uploadComposeSuccess(response.data, file));\n              } else if (response.status === 206) {\n                const retryAfter = (Math.log2(tryCount) || 1) * 1000;\n                tryCount += 1;\n                setTimeout(() => poll(), retryAfter);\n              }\n            }).catch(error => dispatch(uploadComposeFail(error)));\n          };\n\n          poll();\n        }\n      }).catch(error => dispatch(uploadComposeFail(error)));\n    }\n  };\n}\n\nexport const uploadComposeProcessing = () => ({\n  type: COMPOSE_UPLOAD_PROCESSING,\n});\n\nexport const uploadThumbnail = (id, file) => (dispatch) => {\n  dispatch(uploadThumbnailRequest());\n\n  const total = file.size;\n  const data = new FormData();\n\n  data.append('thumbnail', file);\n\n  api().put(`/api/v1/media/${id}`, data, {\n    onUploadProgress: ({ loaded }) => {\n      dispatch(uploadThumbnailProgress(loaded, total));\n    },\n  }).then(({ data }) => {\n    dispatch(uploadThumbnailSuccess(data));\n  }).catch(error => {\n    dispatch(uploadThumbnailFail(id, error));\n  });\n};\n\nexport const uploadThumbnailRequest = () => ({\n  type: THUMBNAIL_UPLOAD_REQUEST,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailProgress = (loaded, total) => ({\n  type: THUMBNAIL_UPLOAD_PROGRESS,\n  loaded,\n  total,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailSuccess = media => ({\n  type: THUMBNAIL_UPLOAD_SUCCESS,\n  media,\n  skipLoading: true,\n});\n\nexport const uploadThumbnailFail = error => ({\n  type: THUMBNAIL_UPLOAD_FAIL,\n  error,\n  skipLoading: true,\n});\n\nexport function initMediaEditModal(id) {\n  return dispatch => {\n    dispatch({\n      type: INIT_MEDIA_EDIT_MODAL,\n      id,\n    });\n\n    dispatch(openModal({\n      modalType: 'FOCAL_POINT',\n      modalProps: { id },\n    }));\n  };\n}\n\nexport function onChangeMediaDescription(description) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n    description,\n  };\n}\n\nexport function onChangeMediaFocus(focusX, focusY) {\n  return {\n    type: COMPOSE_CHANGE_MEDIA_FOCUS,\n    focusX,\n    focusY,\n  };\n}\n\nexport function changeUploadCompose(id, params) {\n  return (dispatch, getState) => {\n    dispatch(changeUploadComposeRequest());\n\n    let media = getState().getIn(['compose', 'media_attachments']).find((item) => item.get('id') === id);\n\n    // Editing already-attached media is deferred to editing the post itself.\n    // For simplicity's sake, fake an API reply.\n    if (media && !media.get('unattached')) {\n      const { focus, ...other } = params;\n      const data = { ...media.toJS(), ...other };\n\n      if (focus) {\n        const [x, y] = focus.split(',');\n        data.meta = { focus: { x: parseFloat(x), y: parseFloat(y) } };\n      }\n\n      dispatch(changeUploadComposeSuccess(data, true));\n    } else {\n      api().put(`/api/v1/media/${id}`, params).then(response => {\n        dispatch(changeUploadComposeSuccess(response.data, false));\n      }).catch(error => {\n        dispatch(changeUploadComposeFail(id, error));\n      });\n    }\n  };\n}\n\nexport function changeUploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeSuccess(media, attached) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_SUCCESS,\n    media: media,\n    attached: attached,\n    skipLoading: true,\n  };\n}\n\nexport function changeUploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_CHANGE_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeRequest() {\n  return {\n    type: COMPOSE_UPLOAD_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeProgress(loaded, total) {\n  return {\n    type: COMPOSE_UPLOAD_PROGRESS,\n    loaded: loaded,\n    total: total,\n  };\n}\n\nexport function uploadComposeSuccess(media, file) {\n  return {\n    type: COMPOSE_UPLOAD_SUCCESS,\n    media: media,\n    file: file,\n    skipLoading: true,\n  };\n}\n\nexport function uploadComposeFail(error) {\n  return {\n    type: COMPOSE_UPLOAD_FAIL,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function undoUploadCompose(media_id) {\n  return {\n    type: COMPOSE_UPLOAD_UNDO,\n    media_id: media_id,\n  };\n}\n\nexport function clearComposeSuggestions() {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n  return {\n    type: COMPOSE_SUGGESTIONS_CLEAR,\n  };\n}\n\nconst fetchComposeSuggestionsAccounts = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsAccountsController) {\n    fetchComposeSuggestionsAccountsController.abort();\n  }\n\n  fetchComposeSuggestionsAccountsController = new AbortController();\n\n  api().get('/api/v1/accounts/search', {\n    signal: fetchComposeSuggestionsAccountsController.signal,\n\n    params: {\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n    },\n  }).then(response => {\n    dispatch(importFetchedAccounts(response.data));\n    dispatch(readyComposeSuggestionsAccounts(token, response.data));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsAccountsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nconst fetchComposeSuggestionsEmojis = (dispatch, getState, token) => {\n  const results = emojiSearch(token.replace(':', ''), { maxResults: 5 });\n  dispatch(readyComposeSuggestionsEmojis(token, results));\n};\n\nconst fetchComposeSuggestionsTags = throttle((dispatch, getState, token) => {\n  if (fetchComposeSuggestionsTagsController) {\n    fetchComposeSuggestionsTagsController.abort();\n  }\n\n  dispatch(updateSuggestionTags(token));\n\n  fetchComposeSuggestionsTagsController = new AbortController();\n\n  api().get('/api/v2/search', {\n    signal: fetchComposeSuggestionsTagsController.signal,\n\n    params: {\n      type: 'hashtags',\n      q: token.slice(1),\n      resolve: false,\n      limit: 4,\n      exclude_unreviewed: true,\n    },\n  }).then(({ data }) => {\n    dispatch(readyComposeSuggestionsTags(token, data.hashtags));\n  }).catch(error => {\n    if (!axios.isCancel(error)) {\n      dispatch(showAlertForError(error));\n    }\n  }).finally(() => {\n    fetchComposeSuggestionsTagsController = undefined;\n  });\n}, 200, { leading: true, trailing: true });\n\nexport function fetchComposeSuggestions(token) {\n  return (dispatch, getState) => {\n    switch (token[0]) {\n    case ':':\n      fetchComposeSuggestionsEmojis(dispatch, getState, token);\n      break;\n    case '#':\n      fetchComposeSuggestionsTags(dispatch, getState, token);\n      break;\n    default:\n      fetchComposeSuggestionsAccounts(dispatch, getState, token);\n      break;\n    }\n  };\n}\n\nexport function readyComposeSuggestionsEmojis(token, emojis) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    emojis,\n  };\n}\n\nexport function readyComposeSuggestionsAccounts(token, accounts) {\n  return {\n    type: COMPOSE_SUGGESTIONS_READY,\n    token,\n    accounts,\n  };\n}\n\nexport const readyComposeSuggestionsTags = (token, tags) => ({\n  type: COMPOSE_SUGGESTIONS_READY,\n  token,\n  tags,\n});\n\nexport function selectComposeSuggestion(position, token, suggestion, path) {\n  return (dispatch, getState) => {\n    let completion, startPosition;\n\n    if (suggestion.type === 'emoji') {\n      completion    = suggestion.native || suggestion.colons;\n      startPosition = position - 1;\n\n      dispatch(useEmoji(suggestion));\n    } else if (suggestion.type === 'hashtag') {\n      completion    = `#${suggestion.name}`;\n      startPosition = position - 1;\n    } else if (suggestion.type === 'account') {\n      completion    = getState().getIn(['accounts', suggestion.id, 'acct']);\n      startPosition = position;\n    }\n\n    // We don't want to replace hashtags that vary only in case due to accessibility, but we need to fire off an event so that\n    // the suggestions are dismissed and the cursor moves forward.\n    if (suggestion.type !== 'hashtag' || token.slice(1).localeCompare(suggestion.name, undefined, { sensitivity: 'accent' }) !== 0) {\n      dispatch({\n        type: COMPOSE_SUGGESTION_SELECT,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    } else {\n      dispatch({\n        type: COMPOSE_SUGGESTION_IGNORE,\n        position: startPosition,\n        token,\n        completion,\n        path,\n      });\n    }\n  };\n}\n\nexport function updateSuggestionTags(token) {\n  return {\n    type: COMPOSE_SUGGESTION_TAGS_UPDATE,\n    token,\n  };\n}\n\nexport function updateTagHistory(tags) {\n  return {\n    type: COMPOSE_TAG_HISTORY_UPDATE,\n    tags,\n  };\n}\n\nexport function hydrateCompose() {\n  return (dispatch, getState) => {\n    const me = getState().getIn(['meta', 'me']);\n    const history = tagHistory.get(me);\n\n    if (history !== null) {\n      dispatch(updateTagHistory(history));\n    }\n  };\n}\n\nfunction insertIntoTagHistory(recognizedTags, text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const oldHistory = state.getIn(['compose', 'tagHistory']);\n    const me = state.getIn(['meta', 'me']);\n\n    // FIXME: Matching input hashtags with recognized hashtags has become more\n    // complicated because of new normalization rules, it's no longer just\n    // a case sensitivity issue\n    const names = recognizedTags.map(tag => {\n      const matches = text.match(new RegExp(`#${tag.name}`, 'i'));\n\n      if (matches && matches.length > 0) {\n        return matches[0].slice(1);\n      } else {\n        return tag.name;\n      }\n    });\n\n    const intersectedOldHistory = oldHistory.filter(name => names.findIndex(newName => newName.toLowerCase() === name.toLowerCase()) === -1);\n\n    names.push(...intersectedOldHistory.toJS());\n\n    const newHistory = names.slice(0, 1000);\n\n    tagHistory.set(me, newHistory);\n    dispatch(updateTagHistory(newHistory));\n  };\n}\n\nexport function mountCompose() {\n  return {\n    type: COMPOSE_MOUNT,\n  };\n}\n\nexport function unmountCompose() {\n  return {\n    type: COMPOSE_UNMOUNT,\n  };\n}\n\nexport function changeComposeSensitivity() {\n  return {\n    type: COMPOSE_SENSITIVITY_CHANGE,\n  };\n}\n\nexport const changeComposeLanguage = language => ({\n  type: COMPOSE_LANGUAGE_CHANGE,\n  language,\n});\n\nexport function changeComposeSpoilerness() {\n  return {\n    type: COMPOSE_SPOILERNESS_CHANGE,\n  };\n}\n\nexport function changeComposeSpoilerText(text) {\n  return {\n    type: COMPOSE_SPOILER_TEXT_CHANGE,\n    text,\n  };\n}\n\nexport function changeComposeVisibility(value) {\n  return {\n    type: COMPOSE_VISIBILITY_CHANGE,\n    value,\n  };\n}\n\nexport function insertEmojiCompose(position, emoji, needsSpace) {\n  return {\n    type: COMPOSE_EMOJI_INSERT,\n    position,\n    emoji,\n    needsSpace,\n  };\n}\n\nexport function changeComposing(value) {\n  return {\n    type: COMPOSE_COMPOSING_CHANGE,\n    value,\n  };\n}\n\nexport function addPoll() {\n  return {\n    type: COMPOSE_POLL_ADD,\n  };\n}\n\nexport function removePoll() {\n  return {\n    type: COMPOSE_POLL_REMOVE,\n  };\n}\n\nexport function addPollOption(title) {\n  return {\n    type: COMPOSE_POLL_OPTION_ADD,\n    title,\n  };\n}\n\nexport function changePollOption(index, title, maxOptions) {\n  return {\n    type: COMPOSE_POLL_OPTION_CHANGE,\n    index,\n    title,\n    maxOptions,\n  };\n}\n\nexport function removePollOption(index) {\n  return {\n    type: COMPOSE_POLL_OPTION_REMOVE,\n    index,\n  };\n}\n\nexport function changePollSettings(expiresIn, isMultiple) {\n  return {\n    type: COMPOSE_POLL_SETTINGS_CHANGE,\n    expiresIn,\n    isMultiple,\n  };\n}\n\nexport const changeMediaOrder = (a, b) => ({\n  type: COMPOSE_CHANGE_MEDIA_ORDER,\n  a,\n  b,\n});\n","import { createSelector } from '@reduxjs/toolkit';\nimport { Record as ImmutableRecord } from 'immutable';\n\nimport { accountDefaultValues } from 'mastodon/models/account';\nimport type { Account, AccountShape } from 'mastodon/models/account';\nimport type { Relationship } from 'mastodon/models/relationship';\nimport type { RootState } from 'mastodon/store';\n\nconst getAccountBase = (state: RootState, id: string) =>\n  state.accounts.get(id, null);\n\nconst getAccountRelationship = (state: RootState, id: string) =>\n  state.relationships.get(id, null);\n\nconst getAccountMoved = (state: RootState, id: string) => {\n  const movedToId = state.accounts.get(id)?.moved;\n\n  if (!movedToId) return undefined;\n\n  return state.accounts.get(movedToId);\n};\n\ninterface FullAccountShape extends Omit<AccountShape, 'moved'> {\n  relationship: Relationship | null;\n  moved: Account | null;\n}\n\nconst FullAccountFactory = ImmutableRecord<FullAccountShape>({\n  ...accountDefaultValues,\n  moved: null,\n  relationship: null,\n});\n\nexport function makeGetAccount() {\n  return createSelector(\n    [getAccountBase, getAccountRelationship, getAccountMoved],\n    (base, relationship, moved) => {\n      if (base === null) {\n        return null;\n      }\n\n      return FullAccountFactory(base)\n        .set('relationship', relationship)\n        .set('moved', moved ?? null);\n    },\n  );\n}\n","import { createSelector } from '@reduxjs/toolkit';\nimport { List as ImmutableList, Map as ImmutableMap } from 'immutable';\n\nimport { toServerSideType } from 'mastodon/utils/filters';\n\nimport { me } from '../initial_state';\n\nexport { makeGetAccount } from \"./accounts\";\n\nconst getFilters = (state, { contextType }) => {\n  if (!contextType) return null;\n\n  const serverSideType = toServerSideType(contextType);\n  const now = new Date();\n\n  return state.get('filters').filter((filter) => filter.get('context').includes(serverSideType) && (filter.get('expires_at') === null || filter.get('expires_at') > now));\n};\n\nexport const makeGetStatus = () => {\n  return createSelector(\n    [\n      (state, { id }) => state.getIn(['statuses', id]),\n      (state, { id }) => state.getIn(['statuses', state.getIn(['statuses', id, 'reblog'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', id, 'account'])]),\n      (state, { id }) => state.getIn(['accounts', state.getIn(['statuses', state.getIn(['statuses', id, 'reblog']), 'account'])]),\n      getFilters,\n    ],\n\n    (statusBase, statusReblog, accountBase, accountReblog, filters) => {\n      if (!statusBase || statusBase.get('isLoading')) {\n        return null;\n      }\n\n      if (statusReblog) {\n        statusReblog = statusReblog.set('account', accountReblog);\n      } else {\n        statusReblog = null;\n      }\n\n      let filtered = false;\n      if ((accountReblog || accountBase).get('id') !== me && filters) {\n        let filterResults = statusReblog?.get('filtered') || statusBase.get('filtered') || ImmutableList();\n        if (filterResults.some((result) => filters.getIn([result.get('filter'), 'filter_action']) === 'hide')) {\n          return null;\n        }\n        filterResults = filterResults.filter(result => filters.has(result.get('filter')));\n        if (!filterResults.isEmpty()) {\n          filtered = filterResults.map(result => filters.getIn([result.get('filter'), 'title']));\n        }\n      }\n\n      return statusBase.withMutations(map => {\n        map.set('reblog', statusReblog);\n        map.set('account', accountBase);\n        map.set('matched_filters', filtered);\n      });\n    },\n  );\n};\n\nexport const makeGetPictureInPicture = () => {\n  return createSelector([\n    (state, { id }) => state.picture_in_picture.statusId === id,\n    (state) => state.getIn(['meta', 'layout']) !== 'mobile',\n  ], (inUse, available) => ImmutableMap({\n    inUse: inUse && available,\n    available,\n  }));\n};\n\nconst ALERT_DEFAULTS = {\n  dismissAfter: 5000,\n  style: false,\n};\n\nexport const getAlerts = createSelector(state => state.get('alerts'), alerts =>\n  alerts.map(item => ({\n    ...ALERT_DEFAULTS,\n    ...item,\n  })).toArray());\n\nexport const makeGetNotification = () => createSelector([\n  (_, base)             => base,\n  (state, _, accountId) => state.getIn(['accounts', accountId]),\n], (base, account) => base.set('account', account));\n\nexport const makeGetReport = () => createSelector([\n  (_, base) => base,\n  (state, _, targetAccountId) => state.getIn(['accounts', targetAccountId]),\n], (base, targetAccount) => base.set('target_account', targetAccount));\n\nexport const getAccountGallery = createSelector([\n  (state, id) => state.getIn(['timelines', `account:${id}:media`, 'items'], ImmutableList()),\n  state       => state.get('statuses'),\n  (state, id) => state.getIn(['accounts', id]),\n], (statusIds, statuses, account) => {\n  let medias = ImmutableList();\n\n  statusIds.forEach(statusId => {\n    const status = statuses.get(statusId).set('account', account);\n    medias = medias.concat(status.get('media_attachments').map(media => media.set('status', status)));\n  });\n\n  return medias;\n});\n\nexport const getAccountHidden = createSelector([\n  (state, id) => state.getIn(['accounts', id, 'hidden']),\n  (state, id) => state.getIn(['relationships', id, 'following']) || state.getIn(['relationships', id, 'requested']),\n  (state, id) => id === me,\n], (hidden, followingOrRequested, isSelf) => {\n  return hidden && !(isSelf || followingOrRequested);\n});\n\nexport const getStatusList = createSelector([\n  (state, type) => state.getIn(['status_lists', type, 'items']),\n], (items) => items.toList());\n","import ready from '../ready';\n\nexport let assetHost = '';\n\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\nready(() => {\n  const cdnHost = document.querySelector<HTMLMetaElement>(\n    'meta[name=cdn-host]',\n  );\n  if (cdnHost) {\n    assetHost = cdnHost.content || '';\n  }\n});\n","import type { PropsWithChildren } from 'react';\nimport React from 'react';\n\nimport { Router as OriginalRouter, useHistory } from 'react-router';\n\nimport type {\n  LocationDescriptor,\n  LocationDescriptorObject,\n  Path,\n} from 'history';\nimport { createBrowserHistory } from 'history';\n\nimport { layoutFromWindow } from 'mastodon/is_mobile';\nimport { isDevelopment } from 'mastodon/utils/environment';\n\ninterface MastodonLocationState {\n  fromMastodon?: boolean;\n  mastodonModalKey?: string;\n}\n\ntype LocationState = MastodonLocationState | null | undefined;\n\ntype HistoryPath = Path | LocationDescriptor<LocationState>;\n\nexport const browserHistory = createBrowserHistory<LocationState>();\nconst originalPush = browserHistory.push.bind(browserHistory);\nconst originalReplace = browserHistory.replace.bind(browserHistory);\n\nexport function useAppHistory() {\n  return useHistory<LocationState>();\n}\n\nfunction normalizePath(\n  path: HistoryPath,\n  state?: LocationState,\n): LocationDescriptorObject<LocationState> {\n  const location = typeof path === 'string' ? { pathname: path } : { ...path };\n\n  if (location.state === undefined && state !== undefined) {\n    location.state = state;\n  } else if (\n    location.state !== undefined &&\n    state !== undefined &&\n    isDevelopment()\n  ) {\n    // eslint-disable-next-line no-console\n    console.log(\n      'You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored',\n    );\n  }\n\n  if (\n    layoutFromWindow() === 'multi-column' &&\n    !location.pathname?.startsWith('/deck')\n  ) {\n    location.pathname = `/deck${location.pathname}`;\n  }\n\n  return location;\n}\n\nbrowserHistory.push = (path: HistoryPath, state?: MastodonLocationState) => {\n  const location = normalizePath(path, state);\n\n  location.state = location.state ?? {};\n  location.state.fromMastodon = true;\n\n  originalPush(location);\n};\n\nbrowserHistory.replace = (path: HistoryPath, state?: MastodonLocationState) => {\n  const location = normalizePath(path, state);\n\n  if (!location.pathname) return;\n\n  if (browserHistory.location.state?.fromMastodon) {\n    location.state = location.state ?? {};\n    location.state.fromMastodon = true;\n  }\n\n  originalReplace(location);\n};\n\nexport const Router: React.FC<PropsWithChildren> = ({ children }) => {\n  return <OriginalRouter history={browserHistory}>{children}</OriginalRouter>;\n};\n","import PropTypes from 'prop-types';\n\nimport { __RouterContext } from 'react-router';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nexport const WithRouterPropTypes = {\n  match: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\n\nexport const WithOptionalRouterPropTypes = {\n  match: PropTypes.object,\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nexport interface OptionalRouterProps {\n  ref: unknown;\n  wrappedComponentRef: unknown;\n}\n\n// This is copied from https://github.com/remix-run/react-router/blob/v5.3.4/packages/react-router/modules/withRouter.js\n// but does not fail if called outside of a React Router context\nexport function withOptionalRouter<\n  ComponentType extends React.ComponentType<OptionalRouterProps>,\n>(Component: ComponentType) {\n  const displayName = `withRouter(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <__RouterContext.Consumer>\n        {(context) => {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n          if (context) {\n            return (\n              // @ts-expect-error - Dynamic covariant generic components are tough to type.\n              <Component\n                {...remainingProps}\n                {...context}\n                ref={wrappedComponentRef}\n              />\n            );\n          } else {\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            return <Component {...remainingProps} ref={wrappedComponentRef} />;\n          }\n        }}\n      </__RouterContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n  C.propTypes = {\n    ...Component.propTypes,\n    wrappedComponentRef: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n      PropTypes.object,\n    ]),\n  };\n\n  return hoistStatics(C, Component);\n}\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgReply(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M760-200v-160q0-50-35-85t-85-35H273l144 144-57 56-240-240 240-240 57 56-144 144h367q83 0 141.5 58.5T840-360v160h-80Z\"\n  })));\n}\nexport default SvgReply;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgStar(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m354-287 126-76 126 77-33-144 111-96-146-13-58-136-58 135-146 13 111 97-33 143ZM233-120l65-281L80-590l288-25 112-265 112 265 288 25-218 189 65 281-247-149-247 149Zm247-350Z\"\n  })));\n}\nexport default SvgStar;","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle } from 'lodash';\n\nimport FullscreenIcon from '@/material-icons/400-24px/fullscreen.svg?react';\nimport FullscreenExitIcon from '@/material-icons/400-24px/fullscreen_exit.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport RectangleIcon from '@/material-icons/400-24px/rectangle.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Blurhash } from 'mastodon/components/blurhash';\nimport { Icon }  from 'mastodon/components/icon';\nimport { playerSettings } from 'mastodon/settings';\n\nimport { displayMedia, useBlurhash } from '../../initial_state';\nimport { isFullscreen, requestFullscreen, exitFullscreen } from '../ui/util/fullscreen';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  hide: { id: 'video.hide', defaultMessage: 'Hide video' },\n  expand: { id: 'video.expand', defaultMessage: 'Expand video' },\n  close: { id: 'video.close', defaultMessage: 'Close video' },\n  fullscreen: { id: 'video.fullscreen', defaultMessage: 'Full screen' },\n  exit_fullscreen: { id: 'video.exit_fullscreen', defaultMessage: 'Exit full screen' },\n});\n\nexport const formatTime = secondsNum => {\n  let hours   = Math.floor(secondsNum / 3600);\n  let minutes = Math.floor((secondsNum - (hours * 3600)) / 60);\n  let seconds = secondsNum - (hours * 3600) - (minutes * 60);\n\n  if (hours   < 10) hours   = '0' + hours;\n  if (minutes < 10) minutes = '0' + minutes;\n  if (seconds < 10) seconds = '0' + seconds;\n\n  return (hours === '00' ? '' : `${hours}:`) + `${minutes}:${seconds}`;\n};\n\nexport const findElementPosition = el => {\n  let box;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0,\n    };\n  }\n\n  const docEl = document.documentElement;\n  const body  = document.body;\n\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n  const left       = (box.left + scrollLeft) - clientLeft;\n\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const top       = (box.top + scrollTop) - clientTop;\n\n  return {\n    left: Math.round(left),\n    top: Math.round(top),\n  };\n};\n\nexport const getPointerPosition = (el, event) => {\n  const position = {};\n  const box = findElementPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n\n  let pageY = event.pageY;\n  let pageX = event.pageX;\n\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n\n  position.y = Math.max(0, Math.min(1, (pageY - boxY) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n\n  return position;\n};\n\nexport const fileNameFromURL = str => {\n  const url      = new URL(str);\n  const pathname = url.pathname;\n  const index    = pathname.lastIndexOf('/');\n\n  return pathname.slice(index + 1);\n};\n\nclass Video extends PureComponent {\n\n  static propTypes = {\n    preview: PropTypes.string,\n    frameRate: PropTypes.string,\n    aspectRatio: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    sensitive: PropTypes.bool,\n    currentTime: PropTypes.number,\n    onOpenVideo: PropTypes.func,\n    onCloseVideo: PropTypes.func,\n    detailed: PropTypes.bool,\n    editable: PropTypes.bool,\n    alwaysVisible: PropTypes.bool,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    deployPictureInPicture: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    componentIndex: PropTypes.number,\n    autoFocus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    frameRate: '25',\n  };\n\n  state = {\n    currentTime: 0,\n    duration: 0,\n    volume: 0.5,\n    paused: true,\n    dragging: false,\n    fullscreen: false,\n    hovered: false,\n    muted: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  setPlayerRef = c => {\n    this.player = c;\n  };\n\n  setVideoRef = c => {\n    this.video = c;\n\n    if (this.video) {\n      this.setState({ volume: this.video.volume, muted: this.video.muted });\n    }\n  };\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  handleClickRoot = e => e.stopPropagation();\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n    this._updateTime();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n  };\n\n  _updateTime () {\n    requestAnimationFrame(() => {\n      if (!this.video) return;\n\n      this.handleTimeUpdate();\n\n      if (!this.state.paused) {\n        this._updateTime();\n      }\n    });\n  }\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.video.currentTime,\n      duration:this.video.duration,\n    });\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        this._syncVideoToVolumeState(x);\n        this._saveVolumeState(x);\n      });\n    }\n  }, 15);\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.video.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.video.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.video.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  seekBy (time) {\n    const currentTime = this.video.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleVideoKeyDown = e => {\n    // On the video element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    const frameTime = 1 / this.getFrameRate();\n\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'f':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleFullscreen();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    case ',':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-frameTime);\n      break;\n    case '.':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(frameTime);\n      break;\n    }\n\n    // If we are in fullscreen mode, we don't want any hotkeys\n    // interacting with the UI that's not visible\n\n    if (this.state.fullscreen) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (e.key === 'Escape') {\n        exitFullscreen();\n      }\n    }\n  };\n\n  togglePlay = () => {\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.video.play());\n    } else {\n      this.setState({ paused: true }, () => this.video.pause());\n    }\n  };\n\n  toggleFullscreen = () => {\n    if (isFullscreen()) {\n      exitFullscreen();\n    } else {\n      requestFullscreen(this.player);\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    window.addEventListener('scroll', this.handleScroll);\n\n    this._syncVideoFromLocalStorage();\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    if (!this.state.paused && this.video && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('video', {\n        src: this.props.src,\n        currentTime: this.video.currentTime,\n        muted: this.video.muted,\n        volume: this.video.volume,\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevState.revealed && !this.state.revealed && this.video) {\n      this.video.pause();\n    }\n  }\n\n  handleScroll = throttle(() => {\n    if (!this.video) {\n      return;\n    }\n\n    const { top, height } = this.video.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.video.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('video', {\n          src: this.props.src,\n          currentTime: this.video.currentTime,\n          muted: this.video.muted,\n          volume: this.video.volume,\n        });\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleFullscreenChange = () => {\n    this.setState({ fullscreen: isFullscreen() });\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  toggleMute = () => {\n    const muted = !(this.video.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      this._syncVideoToVolumeState();\n      this._saveVolumeState();\n    });\n  };\n\n  _syncVideoToVolumeState = (volume = null, muted = null) => {\n    if (!this.video) {\n      return;\n    }\n\n    this.video.volume = volume ?? this.state.volume;\n    this.video.muted = muted ?? this.state.muted;\n  };\n\n  _saveVolumeState = (volume = null, muted = null) => {\n    playerSettings.set('volume', volume ?? this.state.volume);\n    playerSettings.set('muted', muted ?? this.state.muted);\n  };\n\n  _syncVideoFromLocalStorage = () => {\n    this.setState({ volume: playerSettings.get('volume') ?? 0.5, muted: playerSettings.get('muted') ?? false }, () => {\n      this._syncVideoToVolumeState();\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleLoadedData = () => {\n    const { currentTime, volume, muted, autoPlay } = this.props;\n\n    if (currentTime) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (volume !== undefined) {\n      this.video.volume = volume;\n    }\n\n    if (muted !== undefined) {\n      this.video.muted = muted;\n    }\n\n    if (autoPlay) {\n      this.video.play();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.video.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.video.buffered.end(lastTimeRange) / this.video.duration * 100) });\n    }\n  };\n\n  handleVolumeChange = () => {\n    this.setState({ volume: this.video.volume, muted: this.video.muted });\n    this._saveVolumeState(this.video.volume, this.video.muted);\n  };\n\n  handleOpenVideo = () => {\n    this.video.pause();\n\n    this.props.onOpenVideo(this.props.lang, {\n      startTime: this.video.currentTime,\n      autoPlay: !this.state.paused,\n      defaultVolume: this.state.volume,\n      componentIndex: this.props.componentIndex,\n    });\n  };\n\n  handleCloseVideo = () => {\n    this.video.pause();\n    this.props.onCloseVideo();\n  };\n\n  getFrameRate () {\n    if (this.props.frameRate && isNaN(this.props.frameRate)) {\n      // The frame rate is returned as a fraction string so we\n      // need to convert it to a number\n\n      return this.props.frameRate.split('/').reduce((p, c) => p / c);\n    }\n\n    return this.props.frameRate;\n  }\n\n  render () {\n    const { preview, src, aspectRatio, onOpenVideo, onCloseVideo, intl, alt, lang, detailed, sensitive, editable, blurhash, autoFocus } = this.props;\n    const { currentTime, duration, volume, buffer, dragging, paused, fullscreen, hovered, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let preload;\n\n    if (this.props.currentTime || fullscreen || dragging) {\n      preload = 'auto';\n    } else if (detailed) {\n      preload = 'metadata';\n    } else {\n      preload = 'none';\n    }\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    // The outer wrapper is necessary to avoid reflowing the layout when going into full screen\n    return (\n      <div style={{ aspectRatio }}>\n        <div\n          role='menuitem'\n          className={classNames('video-player', { inactive: !revealed, detailed, fullscreen, editable })}\n          style={{ aspectRatio }}\n          ref={this.setPlayerRef}\n          onMouseEnter={this.handleMouseEnter}\n          onMouseLeave={this.handleMouseLeave}\n          onClick={this.handleClickRoot}\n          onKeyDown={this.handleKeyDown}\n          tabIndex={0}\n        >\n          <Blurhash\n            hash={blurhash}\n            className={classNames('media-gallery__preview', {\n              'media-gallery__preview--hidden': revealed,\n            })}\n            dummy={!useBlurhash}\n          />\n\n          {(revealed || editable) && <video\n            ref={this.setVideoRef}\n            src={src}\n            poster={preview}\n            preload={preload}\n            role='button'\n            tabIndex={0}\n            aria-label={alt}\n            title={alt}\n            lang={lang}\n            onClick={this.togglePlay}\n            onKeyDown={this.handleVideoKeyDown}\n            onPlay={this.handlePlay}\n            onPause={this.handlePause}\n            onLoadedData={this.handleLoadedData}\n            onProgress={this.handleProgress}\n            onVolumeChange={this.handleVolumeChange}\n            style={{ width: '100%' }}\n          />}\n\n          <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n            <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n              <span className='spoiler-button__overlay__label'>\n                {warning}\n                <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n              </span>\n            </button>\n          </div>\n\n          <div className={classNames('video-player__controls', { active: paused || hovered })}>\n            <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n              <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n              <div className='video-player__seek__progress' style={{ width: `${progress}%` }} />\n\n              <span\n                className={classNames('video-player__seek__handle', { active: dragging })}\n                tabIndex={0}\n                style={{ left: `${progress}%` }}\n                onKeyDown={this.handleVideoKeyDown}\n              />\n            </div>\n\n            <div className='video-player__buttons-bar'>\n              <div className='video-player__buttons left'>\n                <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay} autoFocus={autoFocus}><Icon id={paused ? 'play' : 'pause'} icon={paused ? PlayArrowIcon : PauseIcon} /></button>\n                <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} icon={muted ? VolumeOffIcon : VolumeUpIcon} /></button>\n\n                <div className={classNames('video-player__volume', { active: this.state.hovered })} onMouseDown={this.handleVolumeMouseDown} ref={this.setVolumeRef}>\n                  <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%` }} />\n\n                  <span\n                    className={classNames('video-player__volume__handle')}\n                    tabIndex={0}\n                    style={{ left: `${muted ? 0 : volume * 100}%` }}\n                  />\n                </div>\n\n                {(detailed || fullscreen) && (\n                  <span className='video-player__time'>\n                    <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                    <span className='video-player__time-sep'>/</span>\n                    <span className='video-player__time-total'>{formatTime(Math.floor(duration))}</span>\n                  </span>\n                )}\n              </div>\n\n              <div className='video-player__buttons right'>\n                {(!onCloseVideo && !editable && !fullscreen && !this.props.alwaysVisible) && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' icon={VisibilityOffIcon} /></button>}\n                {(!fullscreen && onOpenVideo) && <button type='button' title={intl.formatMessage(messages.expand)} aria-label={intl.formatMessage(messages.expand)} className='player-button' onClick={this.handleOpenVideo}><Icon id='expand' icon={RectangleIcon} /></button>}\n                {onCloseVideo && <button type='button' title={intl.formatMessage(messages.close)} aria-label={intl.formatMessage(messages.close)} className='player-button' onClick={this.handleCloseVideo}><Icon id='compress' icon={FullscreenExitIcon} /></button>}\n                <button type='button' title={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} aria-label={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} className='player-button' onClick={this.toggleFullscreen}><Icon id={fullscreen ? 'compress' : 'arrows-alt'} icon={fullscreen ? FullscreenExitIcon : FullscreenIcon} /></button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Video);\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, injectIntl, FormattedMessage } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle } from 'lodash';\n\nimport FullscreenIcon from '@/material-icons/400-24px/fullscreen.svg?react';\nimport FullscreenExitIcon from '@/material-icons/400-24px/fullscreen_exit.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport RectangleIcon from '@/material-icons/400-24px/rectangle.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Blurhash } from 'flavours/glitch/components/blurhash';\nimport { Icon }  from 'flavours/glitch/components/icon';\nimport { playerSettings } from 'flavours/glitch/settings';\n\nimport { displayMedia, useBlurhash } from '../../initial_state';\nimport { isFullscreen, requestFullscreen, exitFullscreen } from '../ui/util/fullscreen';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  hide: { id: 'video.hide', defaultMessage: 'Hide video' },\n  expand: { id: 'video.expand', defaultMessage: 'Expand video' },\n  close: { id: 'video.close', defaultMessage: 'Close video' },\n  fullscreen: { id: 'video.fullscreen', defaultMessage: 'Full screen' },\n  exit_fullscreen: { id: 'video.exit_fullscreen', defaultMessage: 'Exit full screen' },\n});\n\nexport const formatTime = secondsNum => {\n  let hours   = Math.floor(secondsNum / 3600);\n  let minutes = Math.floor((secondsNum - (hours * 3600)) / 60);\n  let seconds = secondsNum - (hours * 3600) - (minutes * 60);\n\n  if (hours   < 10) hours   = '0' + hours;\n  if (minutes < 10) minutes = '0' + minutes;\n  if (seconds < 10) seconds = '0' + seconds;\n\n  return (hours === '00' ? '' : `${hours}:`) + `${minutes}:${seconds}`;\n};\n\nexport const findElementPosition = el => {\n  let box;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0,\n    };\n  }\n\n  const docEl = document.documentElement;\n  const body  = document.body;\n\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n  const left       = (box.left + scrollLeft) - clientLeft;\n\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const top       = (box.top + scrollTop) - clientTop;\n\n  return {\n    left: Math.round(left),\n    top: Math.round(top),\n  };\n};\n\nexport const getPointerPosition = (el, event) => {\n  const position = {};\n  const box = findElementPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n\n  let pageY = event.pageY;\n  let pageX = event.pageX;\n\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n\n  position.y = Math.max(0, Math.min(1, (pageY - boxY) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n\n  return position;\n};\n\nexport const fileNameFromURL = str => {\n  const url      = new URL(str);\n  const pathname = url.pathname;\n  const index    = pathname.lastIndexOf('/');\n\n  return pathname.slice(index + 1);\n};\n\nclass Video extends PureComponent {\n\n  static propTypes = {\n    preview: PropTypes.string,\n    frameRate: PropTypes.string,\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    sensitive: PropTypes.bool,\n    currentTime: PropTypes.number,\n    onOpenVideo: PropTypes.func,\n    onCloseVideo: PropTypes.func,\n    detailed: PropTypes.bool,\n    inline: PropTypes.bool,\n    editable: PropTypes.bool,\n    alwaysVisible: PropTypes.bool,\n    visible: PropTypes.bool,\n    letterbox: PropTypes.bool,\n    fullwidth: PropTypes.bool,\n    preventPlayback: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    deployPictureInPicture: PropTypes.func,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    componentIndex: PropTypes.number,\n    autoFocus: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    frameRate: '25',\n  };\n\n  state = {\n    currentTime: 0,\n    duration: 0,\n    volume: 0.5,\n    paused: true,\n    dragging: false,\n    fullscreen: false,\n    hovered: false,\n    muted: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  setPlayerRef = c => {\n    this.player = c;\n  };\n\n  setVideoRef = c => {\n    this.video = c;\n\n    if (this.video) {\n      this.setState({ volume: this.video.volume, muted: this.video.muted });\n    }\n  };\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  handleClickRoot = e => e.stopPropagation();\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n    this._updateTime();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n  };\n\n  _updateTime () {\n    requestAnimationFrame(() => {\n      if (!this.video) return;\n\n      this.handleTimeUpdate();\n\n      if (!this.state.paused) {\n        this._updateTime();\n      }\n    });\n  }\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.video.currentTime,\n      duration:this.video.duration,\n    });\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        this._syncVideoToVolumeState(x);\n        this._saveVolumeState(x);\n      });\n    }\n  }, 15);\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.video.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.video.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.video.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  seekBy (time) {\n    const currentTime = this.video.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.video.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleVideoKeyDown = e => {\n    // On the video element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    const frameTime = 1 / this.getFrameRate();\n\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'f':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleFullscreen();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    case ',':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-frameTime);\n      break;\n    case '.':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(frameTime);\n      break;\n    }\n\n    // If we are in fullscreen mode, we don't want any hotkeys\n    // interacting with the UI that's not visible\n\n    if (this.state.fullscreen) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (e.key === 'Escape') {\n        exitFullscreen();\n      }\n    }\n  };\n\n  togglePlay = () => {\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.video.play());\n    } else {\n      this.setState({ paused: true }, () => this.video.pause());\n    }\n  };\n\n  toggleFullscreen = () => {\n    if (isFullscreen()) {\n      exitFullscreen();\n    } else {\n      requestFullscreen(this.player);\n    }\n  };\n\n  componentDidMount () {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    window.addEventListener('scroll', this.handleScroll);\n\n    this._syncVideoFromLocalStorage();\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange, true);\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange, true);\n\n    if (!this.state.paused && this.video && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('video', {\n        src: this.props.src,\n        currentTime: this.video.currentTime,\n        muted: this.video.muted,\n        volume: this.video.volume,\n      });\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.video && this.state.revealed && this.props.preventPlayback && !prevProps.preventPlayback) {\n      this.video.pause();\n    }\n  }\n\n  handleScroll = throttle(() => {\n    if (!this.video) {\n      return;\n    }\n\n    const { top, height } = this.video.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.video.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('video', {\n          src: this.props.src,\n          currentTime: this.video.currentTime,\n          muted: this.video.muted,\n          volume: this.video.volume,\n        });\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleFullscreenChange = () => {\n    this.setState({ fullscreen: isFullscreen() });\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  toggleMute = () => {\n    const muted = !(this.video.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      this._syncVideoToVolumeState();\n      this._saveVolumeState();\n    });\n  };\n\n  _syncVideoToVolumeState = (volume = null, muted = null) => {\n    if (!this.video) {\n      return;\n    }\n\n    this.video.volume = volume ?? this.state.volume;\n    this.video.muted = muted ?? this.state.muted;\n  };\n\n  _saveVolumeState = (volume = null, muted = null) => {\n    playerSettings.set('volume', volume ?? this.state.volume);\n    playerSettings.set('muted', muted ?? this.state.muted);\n  };\n\n  _syncVideoFromLocalStorage = () => {\n    this.setState({ volume: playerSettings.get('volume') ?? 0.5, muted: playerSettings.get('muted') ?? false }, () => {\n      this._syncVideoToVolumeState();\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.state.revealed) {\n      this.setState({ paused: true });\n    }\n\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleLoadedData = () => {\n    const { currentTime, volume, muted, autoPlay } = this.props;\n\n    if (currentTime) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (volume !== undefined) {\n      this.video.volume = volume;\n    }\n\n    if (muted !== undefined) {\n      this.video.muted = muted;\n    }\n\n    if (autoPlay) {\n      this.video.play();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.video.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.video.buffered.end(lastTimeRange) / this.video.duration * 100) });\n    }\n  };\n\n  handleVolumeChange = () => {\n    this.setState({ volume: this.video.volume, muted: this.video.muted });\n    this._saveVolumeState(this.video.volume, this.video.muted);\n  };\n\n  handleOpenVideo = () => {\n    this.video.pause();\n\n    this.props.onOpenVideo(this.props.lang, {\n      startTime: this.video.currentTime,\n      autoPlay: !this.state.paused,\n      defaultVolume: this.state.volume,\n      componentIndex: this.props.componentIndex,\n    });\n  };\n\n  handleCloseVideo = () => {\n    this.video.pause();\n    this.props.onCloseVideo();\n  };\n\n  getFrameRate () {\n    if (this.props.frameRate && isNaN(this.props.frameRate)) {\n      // The frame rate is returned as a fraction string so we\n      // need to convert it to a number\n\n      return this.props.frameRate.split('/').reduce((p, c) => p / c);\n    }\n\n    return this.props.frameRate;\n  }\n\n  render () {\n    const { preview, src, inline, onOpenVideo, onCloseVideo, intl, alt, lang, letterbox, fullwidth, detailed, sensitive, editable, blurhash, autoFocus } = this.props;\n    const { currentTime, duration, volume, buffer, dragging, paused, fullscreen, hovered, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    const playerStyle = {};\n\n    if (inline) {\n      playerStyle.aspectRatio = '16 / 9';\n    }\n\n    let preload;\n\n    if (this.props.currentTime || fullscreen || dragging) {\n      preload = 'auto';\n    } else if (detailed) {\n      preload = 'metadata';\n    } else {\n      preload = 'none';\n    }\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div\n        role='menuitem'\n        className={classNames('video-player', { inactive: !revealed, detailed, inline: inline && !fullscreen, fullscreen, editable, letterbox, 'full-width': fullwidth })}\n        style={playerStyle}\n        ref={this.setPlayerRef}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        onClick={this.handleClickRoot}\n        onKeyDown={this.handleKeyDown}\n        tabIndex={0}\n      >\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <video\n          ref={this.setVideoRef}\n          src={src}\n          poster={preview}\n          preload={preload}\n          role='button'\n          tabIndex={0}\n          aria-label={alt}\n          title={alt}\n          lang={lang}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleVideoKeyDown}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onLoadedData={this.handleLoadedData}\n          onProgress={this.handleProgress}\n          onVolumeChange={this.handleVolumeChange}\n          style={{ ...playerStyle, width: '100%' }}\n        />}\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        <div className={classNames('video-player__controls', { active: paused || hovered })}>\n          <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n            <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n            <div className='video-player__seek__progress' style={{ width: `${progress}%` }} />\n\n            <span\n              className={classNames('video-player__seek__handle', { active: dragging })}\n              tabIndex={0}\n              style={{ left: `${progress}%` }}\n              onKeyDown={this.handleVideoKeyDown}\n            />\n          </div>\n\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay} autoFocus={autoFocus}><Icon id={paused ? 'play' : 'pause'} icon={paused ? PlayArrowIcon : PauseIcon} /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} icon={muted ? VolumeOffIcon : VolumeUpIcon} /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} onMouseDown={this.handleVolumeMouseDown} ref={this.setVolumeRef}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%` }} />\n\n                <span\n                  className={classNames('video-player__volume__handle')}\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%` }}\n                />\n              </div>\n\n              {(detailed || fullscreen) && (\n                <span className='video-player__time'>\n                  <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                  <span className='video-player__time-sep'>/</span>\n                  <span className='video-player__time-total'>{formatTime(Math.floor(duration))}</span>\n                </span>\n              )}\n            </div>\n\n            <div className='video-player__buttons right'>\n              {(!onCloseVideo && !editable && !fullscreen && !this.props.alwaysVisible) && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' icon={VisibilityOffIcon} /></button>}\n              {(!fullscreen && onOpenVideo) && <button type='button' title={intl.formatMessage(messages.expand)} aria-label={intl.formatMessage(messages.expand)} className='player-button' onClick={this.handleOpenVideo}><Icon id='expand' icon={RectangleIcon} /></button>}\n              {onCloseVideo && <button type='button' title={intl.formatMessage(messages.close)} aria-label={intl.formatMessage(messages.close)} className='player-button' onClick={this.handleCloseVideo}><Icon id='compress' icon={FullscreenExitIcon} /></button>}\n              <button type='button' title={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} aria-label={intl.formatMessage(fullscreen ? messages.exit_fullscreen : messages.fullscreen)} className='player-button' onClick={this.toggleFullscreen}><Icon id={fullscreen ? 'compress' : 'arrows-alt'} icon={fullscreen ? FullscreenExitIcon : FullscreenIcon} /></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Video);\n","/**\n * This is a straight rip-off of the React.js ReactPropTypes.js proptype validators,\n * modified to make it possible to validate Immutable.js data.\n *     ImmutableTypes.listOf is patterned after React.PropTypes.arrayOf, but for Immutable.List\n *     ImmutableTypes.shape  is based on React.PropTypes.shape, but for any Immutable.Iterable\n */\n\"use strict\";\n\nvar Immutable = require(\"immutable\");\n\nvar ANONYMOUS = \"<<anonymous>>\";\n\nvar ImmutablePropTypes;\n\nif (process.env.NODE_ENV !== \"production\") {\n  ImmutablePropTypes = {\n    listOf: createListOfTypeChecker,\n    mapOf: createMapOfTypeChecker,\n    orderedMapOf: createOrderedMapOfTypeChecker,\n    setOf: createSetOfTypeChecker,\n    orderedSetOf: createOrderedSetOfTypeChecker,\n    stackOf: createStackOfTypeChecker,\n    iterableOf: createIterableOfTypeChecker,\n    recordOf: createRecordOfTypeChecker,\n    shape: createShapeChecker,\n    contains: createShapeChecker,\n    mapContains: createMapContainsChecker,\n    orderedMapContains: createOrderedMapContainsChecker,\n    // Primitive Types\n    list: createImmutableTypeChecker(\"List\", Immutable.List.isList),\n    map: createImmutableTypeChecker(\"Map\", Immutable.Map.isMap),\n    orderedMap: createImmutableTypeChecker(\"OrderedMap\", Immutable.OrderedMap.isOrderedMap),\n    set: createImmutableTypeChecker(\"Set\", Immutable.Set.isSet),\n    orderedSet: createImmutableTypeChecker(\"OrderedSet\", Immutable.OrderedSet.isOrderedSet),\n    stack: createImmutableTypeChecker(\"Stack\", Immutable.Stack.isStack),\n    seq: createImmutableTypeChecker(\"Seq\", Immutable.Seq.isSeq),\n    record: createImmutableTypeChecker(\"Record\", function (isRecord) {\n      return isRecord instanceof Immutable.Record;\n    }),\n    iterable: createImmutableTypeChecker(\"Iterable\", Immutable.Iterable.isIterable)\n  };\n} else {\n  var productionTypeChecker = function productionTypeChecker() {\n    invariant(false, \"ImmutablePropTypes type checking code is stripped in production.\");\n  };\n  productionTypeChecker.isRequired = productionTypeChecker;\n  var getProductionTypeChecker = function getProductionTypeChecker() {\n    return productionTypeChecker;\n  };\n\n  ImmutablePropTypes = {\n    listOf: getProductionTypeChecker,\n    mapOf: getProductionTypeChecker,\n    orderedMapOf: getProductionTypeChecker,\n    setOf: getProductionTypeChecker,\n    orderedSetOf: getProductionTypeChecker,\n    stackOf: getProductionTypeChecker,\n    iterableOf: getProductionTypeChecker,\n    recordOf: getProductionTypeChecker,\n    shape: getProductionTypeChecker,\n    contains: getProductionTypeChecker,\n    mapContains: getProductionTypeChecker,\n    orderedMapContains: getProductionTypeChecker,\n    // Primitive Types\n    list: productionTypeChecker,\n    map: productionTypeChecker,\n    orderedMap: productionTypeChecker,\n    set: productionTypeChecker,\n    orderedSet: productionTypeChecker,\n    stack: productionTypeChecker,\n    seq: productionTypeChecker,\n    record: productionTypeChecker,\n    iterable: productionTypeChecker\n  };\n}\n\nImmutablePropTypes.iterable.indexed = createIterableSubclassTypeChecker(\"Indexed\", Immutable.Iterable.isIndexed);\nImmutablePropTypes.iterable.keyed = createIterableSubclassTypeChecker(\"Keyed\", Immutable.Iterable.isKeyed);\n\nfunction getPropType(propValue) {\n  var propType = typeof propValue;\n  if (Array.isArray(propValue)) {\n    return \"array\";\n  }\n  if (propValue instanceof RegExp) {\n    // Old webkits (at least until Android 4.0) return 'function' rather than\n    // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n    // passes PropTypes.object.\n    return \"object\";\n  }\n  if (propValue instanceof Immutable.Iterable) {\n    return \"Immutable.\" + propValue.toSource().split(\" \")[0];\n  }\n  return propType;\n}\n\nfunction createChainableTypeChecker(validate) {\n  function checkType(isRequired, props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 6 ? _len - 6 : 0), _key = 6; _key < _len; _key++) {\n      rest[_key - 6] = arguments[_key];\n    }\n\n    propFullName = propFullName || propName;\n    componentName = componentName || ANONYMOUS;\n    if (props[propName] == null) {\n      var locationName = location;\n      if (isRequired) {\n        return new Error(\"Required \" + locationName + \" `\" + propFullName + \"` was not specified in \" + (\"`\" + componentName + \"`.\"));\n      }\n    } else {\n      return validate.apply(undefined, [props, propName, componentName, location, propFullName].concat(rest));\n    }\n  }\n\n  var chainedCheckType = checkType.bind(null, false);\n  chainedCheckType.isRequired = checkType.bind(null, true);\n\n  return chainedCheckType;\n}\n\nfunction createImmutableTypeChecker(immutableClassName, immutableClassTypeValidator) {\n  function validate(props, propName, componentName, location, propFullName) {\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + location + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected `\" + immutableClassName + \"`.\"));\n    }\n    return null;\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createIterableSubclassTypeChecker(subclassName, validator) {\n  return createImmutableTypeChecker(\"Iterable.\" + subclassName, function (propValue) {\n    return Immutable.Iterable.isIterable(propValue) && validator(propValue);\n  });\n}\n\nfunction createIterableTypeChecker(typeChecker, immutableClassName, immutableClassTypeValidator) {\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var locationName = location;\n      var propType = getPropType(propValue);\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type \" + (\"`\" + propType + \"` supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid typeChecker supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n\n    var propValues = propValue.valueSeq().toArray();\n    for (var i = 0, len = propValues.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [propValues, i, componentName, location, \"\" + propFullName + \"[\" + i + \"]\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createKeysTypeChecker(typeChecker) {\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (typeof typeChecker !== \"function\") {\n      return new Error(\"Invalid keysTypeChecker (optional second argument) supplied to `\" + componentName + \"` \" + (\"for propType `\" + propFullName + \"`, expected a function.\"));\n    }\n\n    var keys = propValue.keySeq().toArray();\n    for (var i = 0, len = keys.length; i < len; i++) {\n      var error = typeChecker.apply(undefined, [keys, i, componentName, location, \"\" + propFullName + \" -> key(\" + keys[i] + \")\"].concat(rest));\n      if (error instanceof Error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createListOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"List\", Immutable.List.isList);\n}\n\nfunction createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, immutableClassName, immutableClassTypeValidator) {\n  function validate() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return createIterableTypeChecker(valuesTypeChecker, immutableClassName, immutableClassTypeValidator).apply(undefined, args) || keysTypeChecker && createKeysTypeChecker(keysTypeChecker).apply(undefined, args);\n  }\n\n  return createChainableTypeChecker(validate);\n}\n\nfunction createMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"Map\", Immutable.Map.isMap);\n}\n\nfunction createOrderedMapOfTypeChecker(valuesTypeChecker, keysTypeChecker) {\n  return createMapOfTypeCheckerFactory(valuesTypeChecker, keysTypeChecker, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\n\nfunction createSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Set\", Immutable.Set.isSet);\n}\n\nfunction createOrderedSetOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"OrderedSet\", Immutable.OrderedSet.isOrderedSet);\n}\n\nfunction createStackOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Stack\", Immutable.Stack.isStack);\n}\n\nfunction createIterableOfTypeChecker(typeChecker) {\n  return createIterableTypeChecker(typeChecker, \"Iterable\", Immutable.Iterable.isIterable);\n}\n\nfunction createRecordOfTypeChecker(recordKeys) {\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!(propValue instanceof Immutable.Record)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js Record.\"));\n    }\n    for (var key in recordKeys) {\n      var checker = recordKeys[key];\n      if (!checker) {\n        continue;\n      }\n      var mutablePropValue = propValue.toObject();\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\n// there is some irony in the fact that shapeTypes is a standard hash and not an immutable collection\nfunction createShapeTypeChecker(shapeTypes) {\n  var immutableClassName = arguments[1] === undefined ? \"Iterable\" : arguments[1];\n  var immutableClassTypeValidator = arguments[2] === undefined ? Immutable.Iterable.isIterable : arguments[2];\n\n  function validate(props, propName, componentName, location, propFullName) {\n    for (var _len = arguments.length, rest = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {\n      rest[_key - 5] = arguments[_key];\n    }\n\n    var propValue = props[propName];\n    if (!immutableClassTypeValidator(propValue)) {\n      var propType = getPropType(propValue);\n      var locationName = location;\n      return new Error(\"Invalid \" + locationName + \" `\" + propFullName + \"` of type `\" + propType + \"` \" + (\"supplied to `\" + componentName + \"`, expected an Immutable.js \" + immutableClassName + \".\"));\n    }\n    var mutablePropValue = propValue.toObject();\n    for (var key in shapeTypes) {\n      var checker = shapeTypes[key];\n      if (!checker) {\n        continue;\n      }\n      var error = checker.apply(undefined, [mutablePropValue, key, componentName, location, \"\" + propFullName + \".\" + key].concat(rest));\n      if (error) {\n        return error;\n      }\n    }\n  }\n  return createChainableTypeChecker(validate);\n}\n\nfunction createShapeChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes);\n}\n\nfunction createMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"Map\", Immutable.Map.isMap);\n}\n\nfunction createOrderedMapContainsChecker(shapeTypes) {\n  return createShapeTypeChecker(shapeTypes, \"OrderedMap\", Immutable.OrderedMap.isOrderedMap);\n}\n\nmodule.exports = ImmutablePropTypes;","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses, importFetchedAccounts } from './importer';\n\nexport const TRENDS_TAGS_FETCH_REQUEST = 'TRENDS_TAGS_FETCH_REQUEST';\nexport const TRENDS_TAGS_FETCH_SUCCESS = 'TRENDS_TAGS_FETCH_SUCCESS';\nexport const TRENDS_TAGS_FETCH_FAIL    = 'TRENDS_TAGS_FETCH_FAIL';\n\nexport const TRENDS_LINKS_FETCH_REQUEST = 'TRENDS_LINKS_FETCH_REQUEST';\nexport const TRENDS_LINKS_FETCH_SUCCESS = 'TRENDS_LINKS_FETCH_SUCCESS';\nexport const TRENDS_LINKS_FETCH_FAIL    = 'TRENDS_LINKS_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_FETCH_REQUEST = 'TRENDS_STATUSES_FETCH_REQUEST';\nexport const TRENDS_STATUSES_FETCH_SUCCESS = 'TRENDS_STATUSES_FETCH_SUCCESS';\nexport const TRENDS_STATUSES_FETCH_FAIL    = 'TRENDS_STATUSES_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_EXPAND_REQUEST = 'TRENDS_STATUSES_EXPAND_REQUEST';\nexport const TRENDS_STATUSES_EXPAND_SUCCESS = 'TRENDS_STATUSES_EXPAND_SUCCESS';\nexport const TRENDS_STATUSES_EXPAND_FAIL    = 'TRENDS_STATUSES_EXPAND_FAIL';\n\nexport const fetchTrendingHashtags = () => (dispatch) => {\n  dispatch(fetchTrendingHashtagsRequest());\n\n  api()\n    .get('/api/v1/trends/tags')\n    .then(({ data }) => dispatch(fetchTrendingHashtagsSuccess(data)))\n    .catch(err => dispatch(fetchTrendingHashtagsFail(err)));\n};\n\nexport const fetchTrendingHashtagsRequest = () => ({\n  type: TRENDS_TAGS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsSuccess = trends => ({\n  type: TRENDS_TAGS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsFail = error => ({\n  type: TRENDS_TAGS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingLinks = () => (dispatch) => {\n  dispatch(fetchTrendingLinksRequest());\n\n  api()\n    .get('/api/v1/trends/links', { params: { limit: 20 } })\n    .then(({ data }) => {\n      dispatch(importFetchedAccounts(data.flatMap(link => link.authors.map(author => author.account)).filter(account => !!account)));\n      dispatch(fetchTrendingLinksSuccess(data));\n    })\n    .catch(err => dispatch(fetchTrendingLinksFail(err)));\n};\n\nexport const fetchTrendingLinksRequest = () => ({\n  type: TRENDS_LINKS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksSuccess = trends => ({\n  type: TRENDS_LINKS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksFail = error => ({\n  type: TRENDS_LINKS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingStatuses = () => (dispatch, getState) => {\n  if (getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchTrendingStatusesRequest());\n\n  api().get('/api/v1/trends/statuses').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(fetchTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(err => dispatch(fetchTrendingStatusesFail(err)));\n};\n\nexport const fetchTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_FETCH_SUCCESS,\n  statuses,\n  next,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\n\nexport const expandTrendingStatuses = () => (dispatch, getState) => {\n  const url = getState().getIn(['status_lists', 'trending', 'next'], null);\n\n  if (url === null || getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandTrendingStatusesRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(expandTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(error => {\n    dispatch(expandTrendingStatusesFail(error));\n  });\n};\n\nexport const expandTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_EXPAND_REQUEST,\n});\n\nexport const expandTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_EXPAND_SUCCESS,\n  statuses,\n  next,\n});\n\nexport const expandTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_EXPAND_FAIL,\n  error,\n});\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses, importFetchedAccounts } from './importer';\n\nexport const TRENDS_TAGS_FETCH_REQUEST = 'TRENDS_TAGS_FETCH_REQUEST';\nexport const TRENDS_TAGS_FETCH_SUCCESS = 'TRENDS_TAGS_FETCH_SUCCESS';\nexport const TRENDS_TAGS_FETCH_FAIL    = 'TRENDS_TAGS_FETCH_FAIL';\n\nexport const TRENDS_LINKS_FETCH_REQUEST = 'TRENDS_LINKS_FETCH_REQUEST';\nexport const TRENDS_LINKS_FETCH_SUCCESS = 'TRENDS_LINKS_FETCH_SUCCESS';\nexport const TRENDS_LINKS_FETCH_FAIL    = 'TRENDS_LINKS_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_FETCH_REQUEST = 'TRENDS_STATUSES_FETCH_REQUEST';\nexport const TRENDS_STATUSES_FETCH_SUCCESS = 'TRENDS_STATUSES_FETCH_SUCCESS';\nexport const TRENDS_STATUSES_FETCH_FAIL    = 'TRENDS_STATUSES_FETCH_FAIL';\n\nexport const TRENDS_STATUSES_EXPAND_REQUEST = 'TRENDS_STATUSES_EXPAND_REQUEST';\nexport const TRENDS_STATUSES_EXPAND_SUCCESS = 'TRENDS_STATUSES_EXPAND_SUCCESS';\nexport const TRENDS_STATUSES_EXPAND_FAIL    = 'TRENDS_STATUSES_EXPAND_FAIL';\n\nexport const fetchTrendingHashtags = () => (dispatch) => {\n  dispatch(fetchTrendingHashtagsRequest());\n\n  api()\n    .get('/api/v1/trends/tags')\n    .then(({ data }) => dispatch(fetchTrendingHashtagsSuccess(data)))\n    .catch(err => dispatch(fetchTrendingHashtagsFail(err)));\n};\n\nexport const fetchTrendingHashtagsRequest = () => ({\n  type: TRENDS_TAGS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsSuccess = trends => ({\n  type: TRENDS_TAGS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingHashtagsFail = error => ({\n  type: TRENDS_TAGS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingLinks = () => (dispatch) => {\n  dispatch(fetchTrendingLinksRequest());\n\n  api()\n    .get('/api/v1/trends/links', { params: { limit: 20 } })\n    .then(({ data }) => {\n      dispatch(importFetchedAccounts(data.flatMap(link => link.authors.map(author => author.account)).filter(account => !!account)));\n      dispatch(fetchTrendingLinksSuccess(data));\n    })\n    .catch(err => dispatch(fetchTrendingLinksFail(err)));\n};\n\nexport const fetchTrendingLinksRequest = () => ({\n  type: TRENDS_LINKS_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksSuccess = trends => ({\n  type: TRENDS_LINKS_FETCH_SUCCESS,\n  trends,\n  skipLoading: true,\n});\n\nexport const fetchTrendingLinksFail = error => ({\n  type: TRENDS_LINKS_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\nexport const fetchTrendingStatuses = () => (dispatch, getState) => {\n  if (getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(fetchTrendingStatusesRequest());\n\n  api().get('/api/v1/trends/statuses').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(fetchTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(err => dispatch(fetchTrendingStatusesFail(err)));\n};\n\nexport const fetchTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_FETCH_REQUEST,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_FETCH_SUCCESS,\n  statuses,\n  next,\n  skipLoading: true,\n});\n\nexport const fetchTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_FETCH_FAIL,\n  error,\n  skipLoading: true,\n  skipAlert: true,\n});\n\n\nexport const expandTrendingStatuses = () => (dispatch, getState) => {\n  const url = getState().getIn(['status_lists', 'trending', 'next'], null);\n\n  if (url === null || getState().getIn(['status_lists', 'trending', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandTrendingStatusesRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedStatuses(response.data));\n    dispatch(expandTrendingStatusesSuccess(response.data, next ? next.uri : null));\n  }).catch(error => {\n    dispatch(expandTrendingStatusesFail(error));\n  });\n};\n\nexport const expandTrendingStatusesRequest = () => ({\n  type: TRENDS_STATUSES_EXPAND_REQUEST,\n});\n\nexport const expandTrendingStatusesSuccess = (statuses, next) => ({\n  type: TRENDS_STATUSES_EXPAND_SUCCESS,\n  statuses,\n  next,\n});\n\nexport const expandTrendingStatusesFail = error => ({\n  type: TRENDS_STATUSES_EXPAND_FAIL,\n  error,\n});\n","import classNames from 'classnames';\n\nimport CheckBoxOutlineBlankIcon from '@/material-icons/400-24px/check_box_outline_blank.svg?react';\nimport { isProduction } from 'mastodon/utils/environment';\n\ninterface SVGPropsWithTitle extends React.SVGProps<SVGSVGElement> {\n  title?: string;\n}\n\nexport type IconProp = React.FC<SVGPropsWithTitle>;\n\ninterface Props extends React.SVGProps<SVGSVGElement> {\n  children?: never;\n  id: string;\n  icon: IconProp;\n  title?: string;\n}\n\nexport const Icon: React.FC<Props> = ({\n  id,\n  icon: IconComponent,\n  className,\n  title: titleProp,\n  ...other\n}) => {\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (!IconComponent) {\n    if (!isProduction()) {\n      throw new Error(\n        `<Icon id=\"${id}\" className=\"${className}\"> is missing an \"icon\" prop.`,\n      );\n    }\n\n    IconComponent = CheckBoxOutlineBlankIcon;\n  }\n\n  const ariaHidden = titleProp ? undefined : true;\n  const role = !ariaHidden ? 'img' : undefined;\n\n  // Set the title to an empty string to remove the built-in SVG one if any\n  // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n  const title = titleProp || '';\n\n  return (\n    <IconComponent\n      className={classNames('icon', `icon-${id}`, className)}\n      title={title}\n      aria-hidden={ariaHidden}\n      role={role}\n      {...other}\n    />\n  );\n};\n","import { Iterable, fromJS } from 'immutable';\n\nimport { hydrateCompose } from './compose';\nimport { importFetchedAccounts } from './importer';\nimport { hydrateSearch } from './search';\nimport { saveSettings } from './settings';\n\nexport const STORE_HYDRATE = 'STORE_HYDRATE';\nexport const STORE_HYDRATE_LAZY = 'STORE_HYDRATE_LAZY';\n\nconst convertState = rawState =>\n  fromJS(rawState, (k, v) =>\n    Iterable.isIndexed(v) ? v.toList() : v.toMap());\n\nconst applyMigrations = (state) => {\n  return state.withMutations(state => {\n    // Migrate glitch-soc local-only “Show unread marker” setting to Mastodon's setting\n    if (state.getIn(['local_settings', 'notifications', 'show_unread']) !== undefined) {\n      // Only change if the Mastodon setting does not deviate from default\n      if (state.getIn(['settings', 'notifications', 'showUnread']) !== false) {\n        state.setIn(['settings', 'notifications', 'showUnread'], state.getIn(['local_settings', 'notifications', 'show_unread']));\n      }\n      state.removeIn(['local_settings', 'notifications', 'show_unread']);\n    }\n  });\n};\n\n\nexport function hydrateStore(rawState) {\n  return dispatch => {\n    const state = applyMigrations(convertState(rawState));\n\n    dispatch({\n      type: STORE_HYDRATE,\n      state,\n    });\n\n    dispatch(hydrateCompose());\n    dispatch(hydrateSearch());\n    dispatch(importFetchedAccounts(Object.values(rawState.accounts)));\n    dispatch(saveSettings());\n  };\n}\n","import ready from '../ready';\n\nexport let assetHost = '';\n\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\nready(() => {\n  const cdnHost = document.querySelector<HTMLMetaElement>(\n    'meta[name=cdn-host]',\n  );\n  if (cdnHost) {\n    assetHost = cdnHost.content || '';\n  }\n});\n","import PropTypes from 'prop-types';\n\nimport { __RouterContext } from 'react-router';\n\nimport hoistStatics from 'hoist-non-react-statics';\n\nexport const WithRouterPropTypes = {\n  match: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n};\n\nexport const WithOptionalRouterPropTypes = {\n  match: PropTypes.object,\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nexport interface OptionalRouterProps {\n  ref: unknown;\n  wrappedComponentRef: unknown;\n}\n\n// This is copied from https://github.com/remix-run/react-router/blob/v5.3.4/packages/react-router/modules/withRouter.js\n// but does not fail if called outside of a React Router context\nexport function withOptionalRouter<\n  ComponentType extends React.ComponentType<OptionalRouterProps>,\n>(Component: ComponentType) {\n  const displayName = `withRouter(${Component.displayName ?? Component.name})`;\n  const C = (props: React.ComponentProps<ComponentType>) => {\n    const { wrappedComponentRef, ...remainingProps } = props;\n\n    return (\n      <__RouterContext.Consumer>\n        {(context) => {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n          if (context) {\n            return (\n              // @ts-expect-error - Dynamic covariant generic components are tough to type.\n              <Component\n                {...remainingProps}\n                {...context}\n                ref={wrappedComponentRef}\n              />\n            );\n          } else {\n            // @ts-expect-error - Dynamic covariant generic components are tough to type.\n            return <Component {...remainingProps} ref={wrappedComponentRef} />;\n          }\n        }}\n      </__RouterContext.Consumer>\n    );\n  };\n\n  C.displayName = displayName;\n  C.WrappedComponent = Component;\n  C.propTypes = {\n    ...Component.propTypes,\n    wrappedComponentRef: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n      PropTypes.object,\n    ]),\n  };\n\n  return hoistStatics(C, Component);\n}\n","import { importAccounts } from '../accounts_typed';\n\nimport { normalizeStatus, normalizePoll } from './normalizer';\n\nexport const STATUS_IMPORT   = 'STATUS_IMPORT';\nexport const STATUSES_IMPORT = 'STATUSES_IMPORT';\nexport const POLLS_IMPORT    = 'POLLS_IMPORT';\nexport const FILTERS_IMPORT  = 'FILTERS_IMPORT';\n\nfunction pushUnique(array, object) {\n  if (array.every(element => element.id !== object.id)) {\n    array.push(object);\n  }\n}\n\nexport function importStatus(status) {\n  return { type: STATUS_IMPORT, status };\n}\n\nexport function importStatuses(statuses) {\n  return { type: STATUSES_IMPORT, statuses };\n}\n\nexport function importFilters(filters) {\n  return { type: FILTERS_IMPORT, filters };\n}\n\nexport function importPolls(polls) {\n  return { type: POLLS_IMPORT, polls };\n}\n\nexport function importFetchedAccount(account) {\n  return importFetchedAccounts([account]);\n}\n\nexport function importFetchedAccounts(accounts) {\n  const normalAccounts = [];\n\n  function processAccount(account) {\n    pushUnique(normalAccounts, account);\n\n    if (account.moved) {\n      processAccount(account.moved);\n    }\n  }\n\n  accounts.forEach(processAccount);\n\n  return importAccounts({ accounts: normalAccounts });\n}\n\nexport function importFetchedStatus(status) {\n  return importFetchedStatuses([status]);\n}\n\nexport function importFetchedStatuses(statuses) {\n  return (dispatch, getState) => {\n    const accounts = [];\n    const normalStatuses = [];\n    const polls = [];\n    const filters = [];\n\n    function processStatus(status) {\n      pushUnique(normalStatuses, normalizeStatus(status, getState().getIn(['statuses', status.id]), getState().get('local_settings')));\n      pushUnique(accounts, status.account);\n\n      if (status.filtered) {\n        status.filtered.forEach(result => pushUnique(filters, result.filter));\n      }\n\n      if (status.reblog?.id) {\n        processStatus(status.reblog);\n      }\n\n      if (status.poll?.id) {\n        pushUnique(polls, normalizePoll(status.poll, getState().getIn(['polls', status.poll.id])));\n      }\n\n      if (status.card) {\n        status.card.authors.forEach(author => author.account && pushUnique(accounts, author.account));\n      }\n    }\n\n    statuses.forEach(processStatus);\n\n    dispatch(importPolls(polls));\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importStatuses(normalStatuses));\n    dispatch(importFilters(filters));\n  };\n}\n\nexport function importFetchedPoll(poll) {\n  return (dispatch, getState) => {\n    dispatch(importPolls([normalizePoll(poll, getState().getIn(['polls', poll.id]))]));\n  };\n}\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgChevronRight(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M504-480 320-664l56-56 240 240-240 240-56-56 184-184Z\"\n  })));\n}\nexport default SvgChevronRight;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgPlayArrowFill(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M320-200v-560l440 280-440 280Z\"\n  })));\n}\nexport default SvgPlayArrowFill;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgReplyAll(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M320-280 80-520l240-240 57 56-184 184 184 184-57 56Zm480 80v-160q0-50-35-85t-85-35H433l144 144-57 56-240-240 240-240 57 56-144 144h247q83 0 141.5 58.5T880-360v160h-80Z\"\n  })));\n}\nexport default SvgReplyAll;","import api, { getLinks } from '../api';\n\nimport { blockDomainSuccess, unblockDomainSuccess } from \"./domain_blocks_typed\";\nimport { openModal } from './modal';\n\n\nexport * from \"./domain_blocks_typed\";\n\nexport const DOMAIN_BLOCK_REQUEST = 'DOMAIN_BLOCK_REQUEST';\nexport const DOMAIN_BLOCK_FAIL    = 'DOMAIN_BLOCK_FAIL';\n\nexport const DOMAIN_UNBLOCK_REQUEST = 'DOMAIN_UNBLOCK_REQUEST';\nexport const DOMAIN_UNBLOCK_FAIL    = 'DOMAIN_UNBLOCK_FAIL';\n\nexport const DOMAIN_BLOCKS_FETCH_REQUEST = 'DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const DOMAIN_BLOCKS_FETCH_SUCCESS = 'DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const DOMAIN_BLOCKS_FETCH_FAIL    = 'DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const DOMAIN_BLOCKS_EXPAND_REQUEST = 'DOMAIN_BLOCKS_EXPAND_REQUEST';\nexport const DOMAIN_BLOCKS_EXPAND_SUCCESS = 'DOMAIN_BLOCKS_EXPAND_SUCCESS';\nexport const DOMAIN_BLOCKS_EXPAND_FAIL    = 'DOMAIN_BLOCKS_EXPAND_FAIL';\n\nexport function blockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(blockDomainRequest(domain));\n\n    api().post('/api/v1/domain_blocks', { domain }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n\n      dispatch(blockDomainSuccess({ domain, accounts }));\n    }).catch(err => {\n      dispatch(blockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function blockDomainRequest(domain) {\n  return {\n    type: DOMAIN_BLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function blockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_BLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function unblockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(unblockDomainRequest(domain));\n\n    api().delete('/api/v1/domain_blocks', { params: { domain } }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n      dispatch(unblockDomainSuccess({ domain, accounts }));\n    }).catch(err => {\n      dispatch(unblockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function unblockDomainRequest(domain) {\n  return {\n    type: DOMAIN_UNBLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function unblockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_UNBLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function fetchDomainBlocks() {\n  return (dispatch) => {\n    dispatch(fetchDomainBlocksRequest());\n\n    api().get('/api/v1/domain_blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(fetchDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(fetchDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function fetchDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function fetchDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandDomainBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['domain_lists', 'blocks', 'next']);\n\n    if (!url) {\n      return;\n    }\n\n    dispatch(expandDomainBlocksRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(expandDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function expandDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function expandDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport const initDomainBlockModal = account => dispatch => dispatch(openModal({\n  modalType: 'DOMAIN_BLOCK',\n  modalProps: {\n    domain: account.get('acct').split('@')[1],\n    acct: account.get('acct'),\n    accountId: account.get('id'),\n  },\n}));\n","import { supportsPassiveEvents } from 'detect-passive-events';\n\nimport { forceSingleColumn, hasMultiColumnPath } from './initial_state';\n\nconst LAYOUT_BREAKPOINT = 630;\n\nexport const isMobile = (width: number) => width <= LAYOUT_BREAKPOINT;\n\nexport const transientSingleColumn = !forceSingleColumn && !hasMultiColumnPath;\n\nexport type LayoutType = 'mobile' | 'single-column' | 'multi-column';\nexport const layoutFromWindow = (): LayoutType => {\n  if (isMobile(window.innerWidth)) {\n    return 'mobile';\n  } else if (!forceSingleColumn && !transientSingleColumn) {\n    return 'multi-column';\n  } else {\n    return 'single-column';\n  }\n};\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nlet userTouching = false;\n\nconst touchListener = () => {\n  userTouching = true;\n\n  window.removeEventListener('touchstart', touchListener);\n};\n\nwindow.addEventListener('touchstart', touchListener, listenerOptions);\n\nexport const isUserTouching = () => userTouching;\n","import api, { getLinks } from '../api';\n\nexport const HASHTAG_FETCH_REQUEST = 'HASHTAG_FETCH_REQUEST';\nexport const HASHTAG_FETCH_SUCCESS = 'HASHTAG_FETCH_SUCCESS';\nexport const HASHTAG_FETCH_FAIL    = 'HASHTAG_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_FETCH_REQUEST = 'FOLLOWED_HASHTAGS_FETCH_REQUEST';\nexport const FOLLOWED_HASHTAGS_FETCH_SUCCESS = 'FOLLOWED_HASHTAGS_FETCH_SUCCESS';\nexport const FOLLOWED_HASHTAGS_FETCH_FAIL    = 'FOLLOWED_HASHTAGS_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_EXPAND_REQUEST = 'FOLLOWED_HASHTAGS_EXPAND_REQUEST';\nexport const FOLLOWED_HASHTAGS_EXPAND_SUCCESS = 'FOLLOWED_HASHTAGS_EXPAND_SUCCESS';\nexport const FOLLOWED_HASHTAGS_EXPAND_FAIL    = 'FOLLOWED_HASHTAGS_EXPAND_FAIL';\n\nexport const HASHTAG_FOLLOW_REQUEST = 'HASHTAG_FOLLOW_REQUEST';\nexport const HASHTAG_FOLLOW_SUCCESS = 'HASHTAG_FOLLOW_SUCCESS';\nexport const HASHTAG_FOLLOW_FAIL    = 'HASHTAG_FOLLOW_FAIL';\n\nexport const HASHTAG_UNFOLLOW_REQUEST = 'HASHTAG_UNFOLLOW_REQUEST';\nexport const HASHTAG_UNFOLLOW_SUCCESS = 'HASHTAG_UNFOLLOW_SUCCESS';\nexport const HASHTAG_UNFOLLOW_FAIL    = 'HASHTAG_UNFOLLOW_FAIL';\n\nexport const fetchHashtag = name => (dispatch) => {\n  dispatch(fetchHashtagRequest());\n\n  api().get(`/api/v1/tags/${name}`).then(({ data }) => {\n    dispatch(fetchHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(fetchHashtagFail(err));\n  });\n};\n\nexport const fetchHashtagRequest = () => ({\n  type: HASHTAG_FETCH_REQUEST,\n});\n\nexport const fetchHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FETCH_SUCCESS,\n  name,\n  tag,\n});\n\nexport const fetchHashtagFail = error => ({\n  type: HASHTAG_FETCH_FAIL,\n  error,\n});\n\nexport const fetchFollowedHashtags = () => (dispatch) => {\n  dispatch(fetchFollowedHashtagsRequest());\n\n  api().get('/api/v1/followed_tags').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(fetchFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n  }).catch(err => {\n    dispatch(fetchFollowedHashtagsFail(err));\n  });\n};\n\nexport function fetchFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function fetchFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowedHashtags() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['followed_tags', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowedHashtagsRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFollowedHashtagsFail(error));\n    });\n  };\n}\n\nexport function expandFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function expandFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport const followHashtag = name => (dispatch) => {\n  dispatch(followHashtagRequest(name));\n\n  api().post(`/api/v1/tags/${name}/follow`).then(({ data }) => {\n    dispatch(followHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(followHashtagFail(name, err));\n  });\n};\n\nexport const followHashtagRequest = name => ({\n  type: HASHTAG_FOLLOW_REQUEST,\n  name,\n});\n\nexport const followHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const followHashtagFail = (name, error) => ({\n  type: HASHTAG_FOLLOW_FAIL,\n  name,\n  error,\n});\n\nexport const unfollowHashtag = name => (dispatch) => {\n  dispatch(unfollowHashtagRequest(name));\n\n  api().post(`/api/v1/tags/${name}/unfollow`).then(({ data }) => {\n    dispatch(unfollowHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(unfollowHashtagFail(name, err));\n  });\n};\n\nexport const unfollowHashtagRequest = name => ({\n  type: HASHTAG_UNFOLLOW_REQUEST,\n  name,\n});\n\nexport const unfollowHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_UNFOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const unfollowHashtagFail = (name, error) => ({\n  type: HASHTAG_UNFOLLOW_FAIL,\n  name,\n  error,\n});\n","import api, { getLinks } from '../api';\n\nexport const HASHTAG_FETCH_REQUEST = 'HASHTAG_FETCH_REQUEST';\nexport const HASHTAG_FETCH_SUCCESS = 'HASHTAG_FETCH_SUCCESS';\nexport const HASHTAG_FETCH_FAIL    = 'HASHTAG_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_FETCH_REQUEST = 'FOLLOWED_HASHTAGS_FETCH_REQUEST';\nexport const FOLLOWED_HASHTAGS_FETCH_SUCCESS = 'FOLLOWED_HASHTAGS_FETCH_SUCCESS';\nexport const FOLLOWED_HASHTAGS_FETCH_FAIL    = 'FOLLOWED_HASHTAGS_FETCH_FAIL';\n\nexport const FOLLOWED_HASHTAGS_EXPAND_REQUEST = 'FOLLOWED_HASHTAGS_EXPAND_REQUEST';\nexport const FOLLOWED_HASHTAGS_EXPAND_SUCCESS = 'FOLLOWED_HASHTAGS_EXPAND_SUCCESS';\nexport const FOLLOWED_HASHTAGS_EXPAND_FAIL    = 'FOLLOWED_HASHTAGS_EXPAND_FAIL';\n\nexport const HASHTAG_FOLLOW_REQUEST = 'HASHTAG_FOLLOW_REQUEST';\nexport const HASHTAG_FOLLOW_SUCCESS = 'HASHTAG_FOLLOW_SUCCESS';\nexport const HASHTAG_FOLLOW_FAIL    = 'HASHTAG_FOLLOW_FAIL';\n\nexport const HASHTAG_UNFOLLOW_REQUEST = 'HASHTAG_UNFOLLOW_REQUEST';\nexport const HASHTAG_UNFOLLOW_SUCCESS = 'HASHTAG_UNFOLLOW_SUCCESS';\nexport const HASHTAG_UNFOLLOW_FAIL    = 'HASHTAG_UNFOLLOW_FAIL';\n\nexport const fetchHashtag = name => (dispatch) => {\n  dispatch(fetchHashtagRequest());\n\n  api().get(`/api/v1/tags/${name}`).then(({ data }) => {\n    dispatch(fetchHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(fetchHashtagFail(err));\n  });\n};\n\nexport const fetchHashtagRequest = () => ({\n  type: HASHTAG_FETCH_REQUEST,\n});\n\nexport const fetchHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FETCH_SUCCESS,\n  name,\n  tag,\n});\n\nexport const fetchHashtagFail = error => ({\n  type: HASHTAG_FETCH_FAIL,\n  error,\n});\n\nexport const fetchFollowedHashtags = () => (dispatch) => {\n  dispatch(fetchFollowedHashtagsRequest());\n\n  api().get('/api/v1/followed_tags').then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(fetchFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n  }).catch(err => {\n    dispatch(fetchFollowedHashtagsFail(err));\n  });\n};\n\nexport function fetchFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function fetchFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowedHashtags() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['followed_tags', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowedHashtagsRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandFollowedHashtagsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFollowedHashtagsFail(error));\n    });\n  };\n}\n\nexport function expandFollowedHashtagsRequest() {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowedHashtagsSuccess(followed_tags, next) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n    followed_tags,\n    next,\n  };\n}\n\nexport function expandFollowedHashtagsFail(error) {\n  return {\n    type: FOLLOWED_HASHTAGS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport const followHashtag = name => (dispatch) => {\n  dispatch(followHashtagRequest(name));\n\n  api().post(`/api/v1/tags/${name}/follow`).then(({ data }) => {\n    dispatch(followHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(followHashtagFail(name, err));\n  });\n};\n\nexport const followHashtagRequest = name => ({\n  type: HASHTAG_FOLLOW_REQUEST,\n  name,\n});\n\nexport const followHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_FOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const followHashtagFail = (name, error) => ({\n  type: HASHTAG_FOLLOW_FAIL,\n  name,\n  error,\n});\n\nexport const unfollowHashtag = name => (dispatch) => {\n  dispatch(unfollowHashtagRequest(name));\n\n  api().post(`/api/v1/tags/${name}/unfollow`).then(({ data }) => {\n    dispatch(unfollowHashtagSuccess(name, data));\n  }).catch(err => {\n    dispatch(unfollowHashtagFail(name, err));\n  });\n};\n\nexport const unfollowHashtagRequest = name => ({\n  type: HASHTAG_UNFOLLOW_REQUEST,\n  name,\n});\n\nexport const unfollowHashtagSuccess = (name, tag) => ({\n  type: HASHTAG_UNFOLLOW_SUCCESS,\n  name,\n  tag,\n});\n\nexport const unfollowHashtagFail = (name, error) => ({\n  type: HASHTAG_UNFOLLOW_FAIL,\n  name,\n  error,\n});\n","// A mapping of unicode strings to an object containing the filename\n// (i.e. the svg filename) and a shortCode intended to be shown\n// as a \"title\" attribute in an HTML element (aka tooltip).\n\nimport type {\n  FilenameData,\n  ShortCodesToEmojiDataKey,\n} from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToFilename } from './unicode_to_filename';\n\ntype UnicodeMapping = {\n  [key in FilenameData[number][0]]: {\n    shortCode: ShortCodesToEmojiDataKey;\n    filename: FilenameData[number][number];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  _skins,\n  _categories,\n  _short_names,\n  emojisWithoutShortCodes,\n] = emojiCompressed;\n\n// decompress\nconst unicodeMapping: UnicodeMapping = {};\n\nfunction processEmojiMapData(\n  emojiMapData: FilenameData[number],\n  shortCode?: ShortCodesToEmojiDataKey,\n) {\n  const [native, _filename] = emojiMapData;\n  let filename = emojiMapData[1];\n  if (!filename) {\n    // filename name can be derived from unicodeToFilename\n    filename = unicodeToFilename(native);\n  }\n  unicodeMapping[native] = {\n    shortCode,\n    filename,\n  };\n}\n\nObject.keys(shortCodesToEmojiData).forEach(\n  (shortCode: ShortCodesToEmojiDataKey) => {\n    if (shortCode === undefined) return;\n\n    const emojiData = shortCodesToEmojiData[shortCode];\n    if (!emojiData) return;\n    const [filenameData, _searchData] = emojiData;\n    filenameData.forEach((emojiMapData) => {\n      processEmojiMapData(emojiMapData, shortCode);\n    });\n  },\n);\n\nemojisWithoutShortCodes.forEach((emojiMapData) => {\n  processEmojiMapData(emojiMapData);\n});\n\nexport { unicodeMapping };\n","import { importAccounts } from '../accounts_typed';\n\nimport { normalizeStatus, normalizePoll } from './normalizer';\n\nexport const STATUS_IMPORT   = 'STATUS_IMPORT';\nexport const STATUSES_IMPORT = 'STATUSES_IMPORT';\nexport const POLLS_IMPORT    = 'POLLS_IMPORT';\nexport const FILTERS_IMPORT  = 'FILTERS_IMPORT';\n\nfunction pushUnique(array, object) {\n  if (array.every(element => element.id !== object.id)) {\n    array.push(object);\n  }\n}\n\nexport function importStatus(status) {\n  return { type: STATUS_IMPORT, status };\n}\n\nexport function importStatuses(statuses) {\n  return { type: STATUSES_IMPORT, statuses };\n}\n\nexport function importFilters(filters) {\n  return { type: FILTERS_IMPORT, filters };\n}\n\nexport function importPolls(polls) {\n  return { type: POLLS_IMPORT, polls };\n}\n\nexport function importFetchedAccount(account) {\n  return importFetchedAccounts([account]);\n}\n\nexport function importFetchedAccounts(accounts) {\n  const normalAccounts = [];\n\n  function processAccount(account) {\n    pushUnique(normalAccounts, account);\n\n    if (account.moved) {\n      processAccount(account.moved);\n    }\n  }\n\n  accounts.forEach(processAccount);\n\n  return importAccounts({ accounts: normalAccounts });\n}\n\nexport function importFetchedStatus(status) {\n  return importFetchedStatuses([status]);\n}\n\nexport function importFetchedStatuses(statuses) {\n  return (dispatch, getState) => {\n    const accounts = [];\n    const normalStatuses = [];\n    const polls = [];\n    const filters = [];\n\n    function processStatus(status) {\n      pushUnique(normalStatuses, normalizeStatus(status, getState().getIn(['statuses', status.id])));\n      pushUnique(accounts, status.account);\n\n      if (status.filtered) {\n        status.filtered.forEach(result => pushUnique(filters, result.filter));\n      }\n\n      if (status.reblog?.id) {\n        processStatus(status.reblog);\n      }\n\n      if (status.poll?.id) {\n        pushUnique(polls, normalizePoll(status.poll, getState().getIn(['polls', status.poll.id])));\n      }\n\n      if (status.card) {\n        status.card.authors.forEach(author => author.account && pushUnique(accounts, author.account));\n      }\n    }\n\n    statuses.forEach(processStatus);\n\n    dispatch(importPolls(polls));\n    dispatch(importFetchedAccounts(accounts));\n    dispatch(importStatuses(normalStatuses));\n    dispatch(importFilters(filters));\n  };\n}\n\nexport function importFetchedPoll(poll) {\n  return (dispatch, getState) => {\n    dispatch(importPolls([normalizePoll(poll, getState().getIn(['polls', poll.id]))]));\n  };\n}\n","import { Iterable, fromJS } from 'immutable';\n\nimport { hydrateCompose } from './compose';\nimport { importFetchedAccounts } from './importer';\nimport { hydrateSearch } from './search';\n\nexport const STORE_HYDRATE = 'STORE_HYDRATE';\nexport const STORE_HYDRATE_LAZY = 'STORE_HYDRATE_LAZY';\n\nconst convertState = rawState =>\n  fromJS(rawState, (k, v) =>\n    Iterable.isIndexed(v) ? v.toList() : v.toMap());\n\n\nexport function hydrateStore(rawState) {\n  return dispatch => {\n    const state = convertState(rawState);\n\n    dispatch({\n      type: STORE_HYDRATE,\n      state,\n    });\n\n    dispatch(hydrateCompose());\n    dispatch(hydrateSearch());\n    dispatch(importFetchedAccounts(Object.values(rawState.accounts)));\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { blockDomainSuccess, unblockDomainSuccess } from \"./domain_blocks_typed\";\nimport { openModal } from './modal';\n\n\nexport * from \"./domain_blocks_typed\";\n\nexport const DOMAIN_BLOCK_REQUEST = 'DOMAIN_BLOCK_REQUEST';\nexport const DOMAIN_BLOCK_FAIL    = 'DOMAIN_BLOCK_FAIL';\n\nexport const DOMAIN_UNBLOCK_REQUEST = 'DOMAIN_UNBLOCK_REQUEST';\nexport const DOMAIN_UNBLOCK_FAIL    = 'DOMAIN_UNBLOCK_FAIL';\n\nexport const DOMAIN_BLOCKS_FETCH_REQUEST = 'DOMAIN_BLOCKS_FETCH_REQUEST';\nexport const DOMAIN_BLOCKS_FETCH_SUCCESS = 'DOMAIN_BLOCKS_FETCH_SUCCESS';\nexport const DOMAIN_BLOCKS_FETCH_FAIL    = 'DOMAIN_BLOCKS_FETCH_FAIL';\n\nexport const DOMAIN_BLOCKS_EXPAND_REQUEST = 'DOMAIN_BLOCKS_EXPAND_REQUEST';\nexport const DOMAIN_BLOCKS_EXPAND_SUCCESS = 'DOMAIN_BLOCKS_EXPAND_SUCCESS';\nexport const DOMAIN_BLOCKS_EXPAND_FAIL    = 'DOMAIN_BLOCKS_EXPAND_FAIL';\n\nexport function blockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(blockDomainRequest(domain));\n\n    api().post('/api/v1/domain_blocks', { domain }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n\n      dispatch(blockDomainSuccess({ domain, accounts }));\n    }).catch(err => {\n      dispatch(blockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function blockDomainRequest(domain) {\n  return {\n    type: DOMAIN_BLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function blockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_BLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function unblockDomain(domain) {\n  return (dispatch, getState) => {\n    dispatch(unblockDomainRequest(domain));\n\n    api().delete('/api/v1/domain_blocks', { params: { domain } }).then(() => {\n      const at_domain = '@' + domain;\n      const accounts = getState().get('accounts').filter(item => item.get('acct').endsWith(at_domain)).valueSeq().map(item => item.get('id'));\n      dispatch(unblockDomainSuccess({ domain, accounts }));\n    }).catch(err => {\n      dispatch(unblockDomainFail(domain, err));\n    });\n  };\n}\n\nexport function unblockDomainRequest(domain) {\n  return {\n    type: DOMAIN_UNBLOCK_REQUEST,\n    domain,\n  };\n}\n\nexport function unblockDomainFail(domain, error) {\n  return {\n    type: DOMAIN_UNBLOCK_FAIL,\n    domain,\n    error,\n  };\n}\n\nexport function fetchDomainBlocks() {\n  return (dispatch) => {\n    dispatch(fetchDomainBlocksRequest());\n\n    api().get('/api/v1/domain_blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(fetchDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(fetchDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function fetchDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function fetchDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandDomainBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['domain_lists', 'blocks', 'next']);\n\n    if (!url) {\n      return;\n    }\n\n    dispatch(expandDomainBlocksRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(expandDomainBlocksSuccess(response.data, next ? next.uri : null));\n    }).catch(err => {\n      dispatch(expandDomainBlocksFail(err));\n    });\n  };\n}\n\nexport function expandDomainBlocksRequest() {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandDomainBlocksSuccess(domains, next) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_SUCCESS,\n    domains,\n    next,\n  };\n}\n\nexport function expandDomainBlocksFail(error) {\n  return {\n    type: DOMAIN_BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport const initDomainBlockModal = account => dispatch => dispatch(openModal({\n  modalType: 'DOMAIN_BLOCK',\n  modalProps: {\n    domain: account.get('acct').split('@')[1],\n    acct: account.get('acct'),\n    accountId: account.get('id'),\n  },\n}));\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromiseConstructor = require('../internals/promise-native-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar defineBuiltIn = require('../internals/define-built-in');\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromiseConstructor && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromisePrototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromisePrototype['finally'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });\n  }\n}\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgVisibilityOff(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z\"\n  })));\n}\nexport default SvgVisibilityOff;","import { saveSettings } from './settings';\n\nexport const COLUMN_ADD           = 'COLUMN_ADD';\nexport const COLUMN_REMOVE        = 'COLUMN_REMOVE';\nexport const COLUMN_MOVE          = 'COLUMN_MOVE';\nexport const COLUMN_PARAMS_CHANGE = 'COLUMN_PARAMS_CHANGE';\n\nexport function addColumn(id, params) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_ADD,\n      id,\n      params,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function removeColumn(uuid) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_REMOVE,\n      uuid,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function moveColumn(uuid, direction) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_MOVE,\n      uuid,\n      direction,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function changeColumnParams(uuid, path, value) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_PARAMS_CHANGE,\n      uuid,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { saveSettings } from './settings';\n\nexport const COLUMN_ADD           = 'COLUMN_ADD';\nexport const COLUMN_REMOVE        = 'COLUMN_REMOVE';\nexport const COLUMN_MOVE          = 'COLUMN_MOVE';\nexport const COLUMN_PARAMS_CHANGE = 'COLUMN_PARAMS_CHANGE';\n\nexport function addColumn(id, params) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_ADD,\n      id,\n      params,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function removeColumn(uuid) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_REMOVE,\n      uuid,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function moveColumn(uuid, direction) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_MOVE,\n      uuid,\n      direction,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n\nexport function changeColumnParams(uuid, path, value) {\n  return dispatch => {\n    dispatch({\n      type: COLUMN_PARAMS_CHANGE,\n      uuid,\n      path,\n      value,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mapToZero = require('./mapToZero');\n\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\nvar _stripStyle = require('./stripStyle');\n\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\nvar _stepper3 = require('./stepper');\n\nvar _stepper4 = _interopRequireDefault(_stepper3);\n\nvar _performanceNow = require('performance-now');\n\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\nvar _raf = require('raf');\n\nvar _raf2 = _interopRequireDefault(_raf);\n\nvar _shouldStopAnimation = require('./shouldStopAnimation');\n\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar msPerFrame = 1000 / 60;\n\nvar Motion = (function (_React$Component) {\n  _inherits(Motion, _React$Component);\n\n  _createClass(Motion, null, [{\n    key: 'propTypes',\n    value: {\n      // TOOD: warn against putting a config in here\n      defaultStyle: _propTypes2['default'].objectOf(_propTypes2['default'].number),\n      style: _propTypes2['default'].objectOf(_propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].object])).isRequired,\n      children: _propTypes2['default'].func.isRequired,\n      onRest: _propTypes2['default'].func\n    },\n    enumerable: true\n  }]);\n\n  function Motion(props) {\n    var _this = this;\n\n    _classCallCheck(this, Motion);\n\n    _React$Component.call(this, props);\n    this.wasAnimating = false;\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyle = null;\n\n    this.clearUnreadPropStyle = function (destStyle) {\n      var dirty = false;\n      var _state = _this.state;\n      var currentStyle = _state.currentStyle;\n      var currentVelocity = _state.currentVelocity;\n      var lastIdealStyle = _state.lastIdealStyle;\n      var lastIdealVelocity = _state.lastIdealVelocity;\n\n      for (var key in destStyle) {\n        if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {\n          continue;\n        }\n\n        var styleValue = destStyle[key];\n        if (typeof styleValue === 'number') {\n          if (!dirty) {\n            dirty = true;\n            currentStyle = _extends({}, currentStyle);\n            currentVelocity = _extends({}, currentVelocity);\n            lastIdealStyle = _extends({}, lastIdealStyle);\n            lastIdealVelocity = _extends({}, lastIdealVelocity);\n          }\n\n          currentStyle[key] = styleValue;\n          currentVelocity[key] = 0;\n          lastIdealStyle[key] = styleValue;\n          lastIdealVelocity[key] = 0;\n        }\n      }\n\n      if (dirty) {\n        _this.setState({ currentStyle: currentStyle, currentVelocity: currentVelocity, lastIdealStyle: lastIdealStyle, lastIdealVelocity: lastIdealVelocity });\n      }\n    };\n\n    this.startAnimationIfNecessary = function () {\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        // check if we need to animate in the first place\n        var propsStyle = _this.props.style;\n        if (_shouldStopAnimation2['default'](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {\n          if (_this.wasAnimating && _this.props.onRest) {\n            _this.props.onRest();\n          }\n\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.wasAnimating = false;\n          _this.accumulatedTime = 0;\n          return;\n        }\n\n        _this.wasAnimating = true;\n\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\n        var newLastIdealStyle = {};\n        var newLastIdealVelocity = {};\n        var newCurrentStyle = {};\n        var newCurrentVelocity = {};\n\n        for (var key in propsStyle) {\n          if (!Object.prototype.hasOwnProperty.call(propsStyle, key)) {\n            continue;\n          }\n\n          var styleValue = propsStyle[key];\n          if (typeof styleValue === 'number') {\n            newCurrentStyle[key] = styleValue;\n            newCurrentVelocity[key] = 0;\n            newLastIdealStyle[key] = styleValue;\n            newLastIdealVelocity[key] = 0;\n          } else {\n            var newLastIdealStyleValue = _this.state.lastIdealStyle[key];\n            var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];\n            for (var i = 0; i < framesToCatchUp; i++) {\n              var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n              newLastIdealStyleValue = _stepper[0];\n              newLastIdealVelocityValue = _stepper[1];\n            }\n\n            var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n            var nextIdealX = _stepper2[0];\n            var nextIdealV = _stepper2[1];\n\n            newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n            newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n            newLastIdealStyle[key] = newLastIdealStyleValue;\n            newLastIdealVelocity[key] = newLastIdealVelocityValue;\n          }\n        }\n\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\n        _this.setState({\n          currentStyle: newCurrentStyle,\n          currentVelocity: newCurrentVelocity,\n          lastIdealStyle: newLastIdealStyle,\n          lastIdealVelocity: newLastIdealVelocity\n        });\n\n        _this.unreadPropStyle = null;\n\n        _this.startAnimationIfNecessary();\n      });\n    };\n\n    this.state = this.defaultState();\n  }\n\n  Motion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyle = _props.defaultStyle;\n    var style = _props.style;\n\n    var currentStyle = defaultStyle || _stripStyle2['default'](style);\n    var currentVelocity = _mapToZero2['default'](currentStyle);\n    return {\n      currentStyle: currentStyle,\n      currentVelocity: currentVelocity,\n      lastIdealStyle: currentStyle,\n      lastIdealVelocity: currentVelocity\n    };\n  };\n\n  // it's possible that currentStyle's value is stale: if props is immediately\n  // changed from 0 to 400 to spring(0) again, the async currentStyle is still\n  // at 0 (didn't have time to tick and interpolate even once). If we naively\n  // compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n  // In reality currentStyle should be 400\n\n  Motion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n\n  Motion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyle != null) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyle);\n    }\n\n    this.unreadPropStyle = props.style;\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n\n  Motion.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n\n  Motion.prototype.render = function render() {\n    var renderedChildren = this.props.children(this.state.currentStyle);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n\n  return Motion;\n})(_react2['default'].Component);\n\nexports['default'] = Motion;\nmodule.exports = exports['default'];\n\n// after checking for unreadPropStyle != null, we manually go set the\n// non-interpolating values (those that are a number, without a spring\n// config)","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgChevronLeft(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M560-240 320-480l240-240 56 56-184 184 184 184-56 56Z\"\n  })));\n}\nexport default SvgChevronLeft;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgFullscreenExit(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M240-120v-120H120v-80h200v200h-80Zm400 0v-200h200v80H720v120h-80ZM120-640v-80h120v-120h80v200H120Zm520 0v-200h80v120h120v80H640Z\"\n  })));\n}\nexport default SvgFullscreenExit;","import escapeTextContentForBrowser from 'escape-html';\n\nimport emojify from '../../features/emoji/emoji';\nimport { expandSpoilers } from '../../initial_state';\n\nconst domParser = new DOMParser();\n\nconst makeEmojiMap = emojis => emojis.reduce((obj, emoji) => {\n  obj[`:${emoji.shortcode}:`] = emoji;\n  return obj;\n}, {});\n\nexport function searchTextFromRawStatus (status) {\n  const spoilerText   = status.spoiler_text || '';\n  const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n}\n\nexport function normalizeFilterResult(result) {\n  const normalResult = { ...result };\n\n  normalResult.filter = normalResult.filter.id;\n\n  return normalResult;\n}\n\nexport function normalizeStatus(status, normalOldStatus) {\n  const normalStatus   = { ...status };\n  normalStatus.account = status.account.id;\n\n  if (status.reblog && status.reblog.id) {\n    normalStatus.reblog = status.reblog.id;\n  }\n\n  if (status.poll && status.poll.id) {\n    normalStatus.poll = status.poll.id;\n  }\n\n  if (status.card) {\n    normalStatus.card = {\n      ...status.card,\n      authors: status.card.authors.map(author => ({\n        ...author,\n        accountId: author.account?.id,\n        account: undefined,\n      })),\n    };\n  }\n\n  if (status.filtered) {\n    normalStatus.filtered = status.filtered.map(normalizeFilterResult);\n  }\n\n  // Only calculate these values when status first encountered and\n  // when the underlying values change. Otherwise keep the ones\n  // already in the reducer\n  if (normalOldStatus && normalOldStatus.get('content') === normalStatus.content && normalOldStatus.get('spoiler_text') === normalStatus.spoiler_text) {\n    normalStatus.search_index = normalOldStatus.get('search_index');\n    normalStatus.contentHtml = normalOldStatus.get('contentHtml');\n    normalStatus.spoilerHtml = normalOldStatus.get('spoilerHtml');\n    normalStatus.spoiler_text = normalOldStatus.get('spoiler_text');\n    normalStatus.hidden = normalOldStatus.get('hidden');\n\n    if (normalOldStatus.get('translation')) {\n      normalStatus.translation = normalOldStatus.get('translation');\n    }\n  } else {\n    // If the status has a CW but no contents, treat the CW as if it were the\n    // status' contents, to avoid having a CW toggle with seemingly no effect.\n    if (normalStatus.spoiler_text && !normalStatus.content) {\n      normalStatus.content = normalStatus.spoiler_text;\n      normalStatus.spoiler_text = '';\n    }\n\n    const spoilerText   = normalStatus.spoiler_text || '';\n    const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n    const emojiMap      = makeEmojiMap(normalStatus.emojis);\n\n    normalStatus.search_index = domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n    normalStatus.contentHtml  = emojify(normalStatus.content, emojiMap);\n    normalStatus.spoilerHtml  = emojify(escapeTextContentForBrowser(spoilerText), emojiMap);\n    normalStatus.hidden       = expandSpoilers ? false : spoilerText.length > 0 || normalStatus.sensitive;\n  }\n\n  if (normalOldStatus) {\n    const list = normalOldStatus.get('media_attachments');\n    if (normalStatus.media_attachments && list) {\n      normalStatus.media_attachments.forEach(item => {\n        const oldItem = list.find(i => i.get('id') === item.id);\n        if (oldItem && oldItem.get('description') === item.description) {\n          item.translation = oldItem.get('translation');\n        }\n      });\n    }\n  }\n\n  return normalStatus;\n}\n\nexport function normalizeStatusTranslation(translation, status) {\n  const emojiMap = makeEmojiMap(status.get('emojis').toJS());\n\n  const normalTranslation = {\n    detected_source_language: translation.detected_source_language,\n    language: translation.language,\n    provider: translation.provider,\n    contentHtml: emojify(translation.content, emojiMap),\n    spoilerHtml: emojify(escapeTextContentForBrowser(translation.spoiler_text), emojiMap),\n    spoiler_text: translation.spoiler_text,\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizePoll(poll, normalOldPoll) {\n  const normalPoll = { ...poll };\n  const emojiMap = makeEmojiMap(poll.emojis);\n\n  normalPoll.options = poll.options.map((option, index) => {\n    const normalOption = {\n      ...option,\n      voted: poll.own_votes && poll.own_votes.includes(index),\n      titleHtml: emojify(escapeTextContentForBrowser(option.title), emojiMap),\n    };\n\n    if (normalOldPoll && normalOldPoll.getIn(['options', index, 'title']) === option.title) {\n      normalOption.translation = normalOldPoll.getIn(['options', index, 'translation']);\n    }\n\n    return normalOption;\n  });\n\n  return normalPoll;\n}\n\nexport function normalizePollOptionTranslation(translation, poll) {\n  const emojiMap = makeEmojiMap(poll.get('emojis').toJS());\n\n  const normalTranslation = {\n    ...translation,\n    titleHtml: emojify(escapeTextContentForBrowser(translation.title), emojiMap),\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizeAnnouncement(announcement) {\n  const normalAnnouncement = { ...announcement };\n  const emojiMap = makeEmojiMap(normalAnnouncement.emojis);\n\n  normalAnnouncement.contentHtml = emojify(normalAnnouncement.content, emojiMap);\n\n  return normalAnnouncement;\n}\n","import escapeTextContentForBrowser from 'escape-html';\n\nimport emojify from '../../features/emoji/emoji';\nimport { autoHideCW } from '../../utils/content_warning';\n\nconst domParser = new DOMParser();\n\nconst makeEmojiMap = emojis => emojis.reduce((obj, emoji) => {\n  obj[`:${emoji.shortcode}:`] = emoji;\n  return obj;\n}, {});\n\nexport function searchTextFromRawStatus (status) {\n  const spoilerText   = status.spoiler_text || '';\n  const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n  return domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n}\n\nexport function normalizeFilterResult(result) {\n  const normalResult = { ...result };\n\n  normalResult.filter = normalResult.filter.id;\n\n  return normalResult;\n}\n\nexport function normalizeStatus(status, normalOldStatus, settings) {\n  const normalStatus   = { ...status };\n  normalStatus.account = status.account.id;\n\n  if (status.reblog && status.reblog.id) {\n    normalStatus.reblog = status.reblog.id;\n  }\n\n  if (status.poll && status.poll.id) {\n    normalStatus.poll = status.poll.id;\n  }\n\n  if (status.card) {\n    normalStatus.card = {\n      ...status.card,\n      authors: status.card.authors.map(author => ({\n        ...author,\n        accountId: author.account?.id,\n        account: undefined,\n      })),\n    };\n  }\n\n  if (status.filtered) {\n    normalStatus.filtered = status.filtered.map(normalizeFilterResult);\n  }\n\n  // Only calculate these values when status first encountered and\n  // when the underlying values change. Otherwise keep the ones\n  // already in the reducer\n  if (normalOldStatus && normalOldStatus.get('content') === normalStatus.content && normalOldStatus.get('spoiler_text') === normalStatus.spoiler_text) {\n    normalStatus.search_index = normalOldStatus.get('search_index');\n    normalStatus.contentHtml = normalOldStatus.get('contentHtml');\n    normalStatus.spoilerHtml = normalOldStatus.get('spoilerHtml');\n    normalStatus.hidden = normalOldStatus.get('hidden');\n\n    if (normalOldStatus.get('translation')) {\n      normalStatus.translation = normalOldStatus.get('translation');\n    }\n  } else {\n    const spoilerText   = normalStatus.spoiler_text || '';\n    const searchContent = ([spoilerText, status.content].concat((status.poll && status.poll.options) ? status.poll.options.map(option => option.title) : [])).concat(status.media_attachments.map(att => att.description)).join('\\n\\n').replace(/<br\\s*\\/?>/g, '\\n').replace(/<\\/p><p>/g, '\\n\\n');\n    const emojiMap      = makeEmojiMap(normalStatus.emojis);\n\n    normalStatus.search_index = domParser.parseFromString(searchContent, 'text/html').documentElement.textContent;\n    normalStatus.contentHtml  = emojify(normalStatus.content, emojiMap);\n    normalStatus.spoilerHtml  = emojify(escapeTextContentForBrowser(spoilerText), emojiMap);\n    normalStatus.hidden       = (spoilerText.length > 0 || normalStatus.sensitive) && autoHideCW(settings, spoilerText);\n  }\n\n  if (normalOldStatus) {\n    const list = normalOldStatus.get('media_attachments');\n    if (normalStatus.media_attachments && list) {\n      normalStatus.media_attachments.forEach(item => {\n        const oldItem = list.find(i => i.get('id') === item.id);\n        if (oldItem && oldItem.get('description') === item.description) {\n          item.translation = oldItem.get('translation');\n        }\n      });\n    }\n  }\n\n  return normalStatus;\n}\n\nexport function normalizeStatusTranslation(translation, status) {\n  const emojiMap = makeEmojiMap(status.get('emojis').toJS());\n\n  const normalTranslation = {\n    detected_source_language: translation.detected_source_language,\n    language: translation.language,\n    provider: translation.provider,\n    contentHtml: emojify(translation.content, emojiMap),\n    spoilerHtml: emojify(escapeTextContentForBrowser(translation.spoiler_text), emojiMap),\n    spoiler_text: translation.spoiler_text,\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizePoll(poll, normalOldPoll) {\n  const normalPoll = { ...poll };\n  const emojiMap = makeEmojiMap(poll.emojis);\n\n  normalPoll.options = poll.options.map((option, index) => {\n    const normalOption = {\n      ...option,\n      voted: poll.own_votes && poll.own_votes.includes(index),\n      titleHtml: emojify(escapeTextContentForBrowser(option.title), emojiMap),\n    };\n\n    if (normalOldPoll && normalOldPoll.getIn(['options', index, 'title']) === option.title) {\n      normalOption.translation = normalOldPoll.getIn(['options', index, 'translation']);\n    }\n\n    return normalOption;\n  });\n\n  return normalPoll;\n}\n\nexport function normalizePollOptionTranslation(translation, poll) {\n  const emojiMap = makeEmojiMap(poll.get('emojis').toJS());\n\n  const normalTranslation = {\n    ...translation,\n    titleHtml: emojify(escapeTextContentForBrowser(translation.title), emojiMap),\n  };\n\n  return normalTranslation;\n}\n\nexport function normalizeAnnouncement(announcement) {\n  const normalAnnouncement = { ...announcement };\n  const emojiMap = makeEmojiMap(normalAnnouncement.emojis);\n\n  normalAnnouncement.contentHtml = emojify(normalAnnouncement.content, emojiMap);\n\n  return normalAnnouncement;\n}\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const MUTES_FETCH_REQUEST = 'MUTES_FETCH_REQUEST';\nexport const MUTES_FETCH_SUCCESS = 'MUTES_FETCH_SUCCESS';\nexport const MUTES_FETCH_FAIL    = 'MUTES_FETCH_FAIL';\n\nexport const MUTES_EXPAND_REQUEST = 'MUTES_EXPAND_REQUEST';\nexport const MUTES_EXPAND_SUCCESS = 'MUTES_EXPAND_SUCCESS';\nexport const MUTES_EXPAND_FAIL    = 'MUTES_EXPAND_FAIL';\n\nexport function fetchMutes() {\n  return (dispatch) => {\n    dispatch(fetchMutesRequest());\n\n    api().get('/api/v1/mutes').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchMutesFail(error)));\n  };\n}\n\nexport function fetchMutesRequest() {\n  return {\n    type: MUTES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchMutesFail(error) {\n  return {\n    type: MUTES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandMutes() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'mutes', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandMutesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandMutesFail(error)));\n  };\n}\n\nexport function expandMutesRequest() {\n  return {\n    type: MUTES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandMutesFail(error) {\n  return {\n    type: MUTES_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initMuteModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'MUTE',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const MUTES_FETCH_REQUEST = 'MUTES_FETCH_REQUEST';\nexport const MUTES_FETCH_SUCCESS = 'MUTES_FETCH_SUCCESS';\nexport const MUTES_FETCH_FAIL    = 'MUTES_FETCH_FAIL';\n\nexport const MUTES_EXPAND_REQUEST = 'MUTES_EXPAND_REQUEST';\nexport const MUTES_EXPAND_SUCCESS = 'MUTES_EXPAND_SUCCESS';\nexport const MUTES_EXPAND_FAIL    = 'MUTES_EXPAND_FAIL';\n\nexport function fetchMutes() {\n  return (dispatch) => {\n    dispatch(fetchMutesRequest());\n\n    api().get('/api/v1/mutes').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchMutesFail(error)));\n  };\n}\n\nexport function fetchMutesRequest() {\n  return {\n    type: MUTES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchMutesFail(error) {\n  return {\n    type: MUTES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandMutes() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'mutes', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandMutesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandMutesSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandMutesFail(error)));\n  };\n}\n\nexport function expandMutesRequest() {\n  return {\n    type: MUTES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandMutesSuccess(accounts, next) {\n  return {\n    type: MUTES_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandMutesFail(error) {\n  return {\n    type: MUTES_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initMuteModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'MUTE',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport {\n  importFetchedAccounts,\n  importFetchedStatuses,\n  importFetchedStatus,\n} from './importer';\n\nexport const CONVERSATIONS_MOUNT   = 'CONVERSATIONS_MOUNT';\nexport const CONVERSATIONS_UNMOUNT = 'CONVERSATIONS_UNMOUNT';\n\nexport const CONVERSATIONS_FETCH_REQUEST = 'CONVERSATIONS_FETCH_REQUEST';\nexport const CONVERSATIONS_FETCH_SUCCESS = 'CONVERSATIONS_FETCH_SUCCESS';\nexport const CONVERSATIONS_FETCH_FAIL    = 'CONVERSATIONS_FETCH_FAIL';\nexport const CONVERSATIONS_UPDATE        = 'CONVERSATIONS_UPDATE';\n\nexport const CONVERSATIONS_READ = 'CONVERSATIONS_READ';\n\nexport const CONVERSATIONS_DELETE_REQUEST = 'CONVERSATIONS_DELETE_REQUEST';\nexport const CONVERSATIONS_DELETE_SUCCESS = 'CONVERSATIONS_DELETE_SUCCESS';\nexport const CONVERSATIONS_DELETE_FAIL    = 'CONVERSATIONS_DELETE_FAIL';\n\nexport const mountConversations = () => ({\n  type: CONVERSATIONS_MOUNT,\n});\n\nexport const unmountConversations = () => ({\n  type: CONVERSATIONS_UNMOUNT,\n});\n\nexport const markConversationRead = conversationId => (dispatch) => {\n  dispatch({\n    type: CONVERSATIONS_READ,\n    id: conversationId,\n  });\n\n  api().post(`/api/v1/conversations/${conversationId}/read`);\n};\n\nexport const expandConversations = ({ maxId } = {}) => (dispatch, getState) => {\n  dispatch(expandConversationsRequest());\n\n  const params = { max_id: maxId };\n\n  if (!maxId) {\n    params.since_id = getState().getIn(['conversations', 'items', 0, 'last_status']);\n  }\n\n  const isLoadingRecent = !!params.since_id;\n\n  api().get('/api/v1/conversations', { params })\n    .then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.reduce((aggr, item) => aggr.concat(item.accounts), [])));\n      dispatch(importFetchedStatuses(response.data.map(item => item.last_status).filter(x => !!x)));\n      dispatch(expandConversationsSuccess(response.data, next ? next.uri : null, isLoadingRecent));\n    })\n    .catch(err => dispatch(expandConversationsFail(err)));\n};\n\nexport const expandConversationsRequest = () => ({\n  type: CONVERSATIONS_FETCH_REQUEST,\n});\n\nexport const expandConversationsSuccess = (conversations, next, isLoadingRecent) => ({\n  type: CONVERSATIONS_FETCH_SUCCESS,\n  conversations,\n  next,\n  isLoadingRecent,\n});\n\nexport const expandConversationsFail = error => ({\n  type: CONVERSATIONS_FETCH_FAIL,\n  error,\n});\n\nexport const updateConversations = conversation => dispatch => {\n  dispatch(importFetchedAccounts(conversation.accounts));\n\n  if (conversation.last_status) {\n    dispatch(importFetchedStatus(conversation.last_status));\n  }\n\n  dispatch({\n    type: CONVERSATIONS_UPDATE,\n    conversation,\n  });\n};\n\nexport const deleteConversation = conversationId => (dispatch) => {\n  dispatch(deleteConversationRequest(conversationId));\n\n  api().delete(`/api/v1/conversations/${conversationId}`)\n    .then(() => dispatch(deleteConversationSuccess(conversationId)))\n    .catch(error => dispatch(deleteConversationFail(conversationId, error)));\n};\n\nexport const deleteConversationRequest = id => ({\n  type: CONVERSATIONS_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteConversationSuccess = id => ({\n  type: CONVERSATIONS_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteConversationFail = (id, error) => ({\n  type: CONVERSATIONS_DELETE_FAIL,\n  id,\n  error,\n});\n","import api, { getLinks } from '../api';\n\nimport {\n  importFetchedAccounts,\n  importFetchedStatuses,\n  importFetchedStatus,\n} from './importer';\n\nexport const CONVERSATIONS_MOUNT   = 'CONVERSATIONS_MOUNT';\nexport const CONVERSATIONS_UNMOUNT = 'CONVERSATIONS_UNMOUNT';\n\nexport const CONVERSATIONS_FETCH_REQUEST = 'CONVERSATIONS_FETCH_REQUEST';\nexport const CONVERSATIONS_FETCH_SUCCESS = 'CONVERSATIONS_FETCH_SUCCESS';\nexport const CONVERSATIONS_FETCH_FAIL    = 'CONVERSATIONS_FETCH_FAIL';\nexport const CONVERSATIONS_UPDATE        = 'CONVERSATIONS_UPDATE';\n\nexport const CONVERSATIONS_READ = 'CONVERSATIONS_READ';\n\nexport const CONVERSATIONS_DELETE_REQUEST = 'CONVERSATIONS_DELETE_REQUEST';\nexport const CONVERSATIONS_DELETE_SUCCESS = 'CONVERSATIONS_DELETE_SUCCESS';\nexport const CONVERSATIONS_DELETE_FAIL    = 'CONVERSATIONS_DELETE_FAIL';\n\nexport const mountConversations = () => ({\n  type: CONVERSATIONS_MOUNT,\n});\n\nexport const unmountConversations = () => ({\n  type: CONVERSATIONS_UNMOUNT,\n});\n\nexport const markConversationRead = conversationId => (dispatch) => {\n  dispatch({\n    type: CONVERSATIONS_READ,\n    id: conversationId,\n  });\n\n  api().post(`/api/v1/conversations/${conversationId}/read`);\n};\n\nexport const expandConversations = ({ maxId } = {}) => (dispatch, getState) => {\n  dispatch(expandConversationsRequest());\n\n  const params = { max_id: maxId };\n\n  if (!maxId) {\n    params.since_id = getState().getIn(['conversations', 'items', 0, 'last_status']);\n  }\n\n  const isLoadingRecent = !!params.since_id;\n\n  api().get('/api/v1/conversations', { params })\n    .then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.reduce((aggr, item) => aggr.concat(item.accounts), [])));\n      dispatch(importFetchedStatuses(response.data.map(item => item.last_status).filter(x => !!x)));\n      dispatch(expandConversationsSuccess(response.data, next ? next.uri : null, isLoadingRecent));\n    })\n    .catch(err => dispatch(expandConversationsFail(err)));\n};\n\nexport const expandConversationsRequest = () => ({\n  type: CONVERSATIONS_FETCH_REQUEST,\n});\n\nexport const expandConversationsSuccess = (conversations, next, isLoadingRecent) => ({\n  type: CONVERSATIONS_FETCH_SUCCESS,\n  conversations,\n  next,\n  isLoadingRecent,\n});\n\nexport const expandConversationsFail = error => ({\n  type: CONVERSATIONS_FETCH_FAIL,\n  error,\n});\n\nexport const updateConversations = conversation => dispatch => {\n  dispatch(importFetchedAccounts(conversation.accounts));\n\n  if (conversation.last_status) {\n    dispatch(importFetchedStatus(conversation.last_status));\n  }\n\n  dispatch({\n    type: CONVERSATIONS_UPDATE,\n    conversation,\n  });\n};\n\nexport const deleteConversation = conversationId => (dispatch) => {\n  dispatch(deleteConversationRequest(conversationId));\n\n  api().delete(`/api/v1/conversations/${conversationId}`)\n    .then(() => dispatch(deleteConversationSuccess(conversationId)))\n    .catch(error => dispatch(deleteConversationFail(conversationId, error)));\n};\n\nexport const deleteConversationRequest = id => ({\n  type: CONVERSATIONS_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteConversationSuccess = id => ({\n  type: CONVERSATIONS_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteConversationFail = (id, error) => ({\n  type: CONVERSATIONS_DELETE_FAIL,\n  id,\n  error,\n});\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiGetNotificationPolicy,\n  apiUpdateNotificationsPolicy,\n} from 'mastodon/api/notification_policies';\nimport type { NotificationPolicy } from 'mastodon/models/notification_policy';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nexport const fetchNotificationPolicy = createDataLoadingThunk(\n  'notificationPolicy/fetch',\n  () => apiGetNotificationPolicy(),\n);\n\nexport const updateNotificationsPolicy = createDataLoadingThunk(\n  'notificationPolicy/update',\n  (policy: Partial<NotificationPolicy>) => apiUpdateNotificationsPolicy(policy),\n);\n\nexport const decreasePendingNotificationsCount = createAction<number>(\n  'notificationPolicy/decreasePendingNotificationCount',\n);\n","import { apiRequestGet, apiRequestPut } from 'mastodon/api';\nimport type { NotificationPolicyJSON } from 'mastodon/api_types/notification_policies';\n\nexport const apiGetNotificationPolicy = () =>\n  apiRequestGet<NotificationPolicyJSON>('/v1/notifications/policy');\n\nexport const apiUpdateNotificationsPolicy = (\n  policy: Partial<NotificationPolicyJSON>,\n) => apiRequestPut<NotificationPolicyJSON>('/v1/notifications/policy', policy);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport {\n  apiGetNotificationPolicy,\n  apiUpdateNotificationsPolicy,\n} from 'flavours/glitch/api/notification_policies';\nimport type { NotificationPolicy } from 'flavours/glitch/models/notification_policy';\nimport { createDataLoadingThunk } from 'flavours/glitch/store/typed_functions';\n\nexport const fetchNotificationPolicy = createDataLoadingThunk(\n  'notificationPolicy/fetch',\n  () => apiGetNotificationPolicy(),\n);\n\nexport const updateNotificationsPolicy = createDataLoadingThunk(\n  'notificationPolicy/update',\n  (policy: Partial<NotificationPolicy>) => apiUpdateNotificationsPolicy(policy),\n);\n\nexport const decreasePendingNotificationsCount = createAction<number>(\n  'notificationPolicy/decreasePendingNotificationCount',\n);\n","import { apiRequestGet, apiRequestPut } from 'flavours/glitch/api';\nimport type { NotificationPolicyJSON } from 'flavours/glitch/api_types/notification_policies';\n\nexport const apiGetNotificationPolicy = () =>\n  apiRequestGet<NotificationPolicyJSON>('/v1/notifications/policy');\n\nexport const apiUpdateNotificationsPolicy = (\n  policy: Partial<NotificationPolicyJSON>,\n) => apiRequestPut<NotificationPolicyJSON>('/v1/notifications/policy', policy);\n","import { memo, useRef, useEffect } from 'react';\n\nimport { decode } from 'blurhash';\n\ninterface Props extends React.HTMLAttributes<HTMLCanvasElement> {\n  hash: string;\n  width?: number;\n  height?: number;\n  dummy?: boolean; // Whether dummy mode is enabled. If enabled, nothing is rendered and canvas left untouched\n  children?: never;\n}\nconst Blurhash: React.FC<Props> = ({\n  hash,\n  width = 32,\n  height = width,\n  dummy = false,\n  ...canvasProps\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const canvas = canvasRef.current!;\n\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width; // resets canvas\n\n    if (dummy || !hash) return;\n\n    try {\n      const pixels = decode(hash, width, height);\n      const ctx = canvas.getContext('2d');\n      const imageData = new ImageData(pixels, width, height);\n\n      ctx?.putImageData(imageData, 0, 0);\n    } catch (err) {\n      console.error('Blurhash decoding failure', { err, hash });\n    }\n  }, [dummy, hash, width, height]);\n\n  return (\n    <canvas {...canvasProps} ref={canvasRef} width={width} height={height} />\n  );\n};\n\nconst MemoizedBlurhash = memo(Blurhash);\n\nexport { MemoizedBlurhash as Blurhash };\n","import { memo, useRef, useEffect } from 'react';\n\nimport { decode } from 'blurhash';\n\ninterface Props extends React.HTMLAttributes<HTMLCanvasElement> {\n  hash: string;\n  width?: number;\n  height?: number;\n  dummy?: boolean; // Whether dummy mode is enabled. If enabled, nothing is rendered and canvas left untouched\n  children?: never;\n}\nconst Blurhash: React.FC<Props> = ({\n  hash,\n  width = 32,\n  height = width,\n  dummy = false,\n  ...canvasProps\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const canvas = canvasRef.current!;\n\n    // eslint-disable-next-line no-self-assign\n    canvas.width = canvas.width; // resets canvas\n\n    if (dummy || !hash) return;\n\n    try {\n      const pixels = decode(hash, width, height);\n      const ctx = canvas.getContext('2d');\n      const imageData = new ImageData(pixels, width, height);\n\n      ctx?.putImageData(imageData, 0, 0);\n    } catch (err) {\n      console.error('Blurhash decoding failure', { err, hash });\n    }\n  }, [dummy, hash, width, height]);\n\n  return (\n    <canvas {...canvasProps} ref={canvasRef} width={width} height={height} />\n  );\n};\n\nconst MemoizedBlurhash = memo(Blurhash);\n\nexport { MemoizedBlurhash as Blurhash };\n","import { supportsPassiveEvents } from 'detect-passive-events';\n\nimport { isSingleColumn } from './initial_state';\n\nconst LAYOUT_BREAKPOINT = 630;\n\nexport const isMobile = (width: number) => width <= LAYOUT_BREAKPOINT;\n\nexport const transientSingleColumn = isSingleColumn;\n\nexport type LayoutType = 'mobile' | 'single-column' | 'multi-column';\nexport const layoutFromWindow = (): LayoutType => {\n  if (isMobile(window.innerWidth)) {\n    return 'mobile';\n  } else if (!isSingleColumn) {\n    return 'multi-column';\n  } else {\n    return 'single-column';\n  }\n};\n\nconst listenerOptions = supportsPassiveEvents ? { passive: true } : false;\n\nlet userTouching = false;\n\nconst touchListener = () => {\n  userTouching = true;\n\n  window.removeEventListener('touchstart', touchListener);\n};\n\nwindow.addEventListener('touchstart', touchListener, listenerOptions);\n\nexport const isUserTouching = () => userTouching;\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { Account } from 'mastodon/models/account';\n\nexport const blockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/block/SUCCESS');\n\nexport const unblockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/unblock/SUCCESS');\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { Account } from 'flavours/glitch/models/account';\n\nexport const blockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/block/SUCCESS');\n\nexport const unblockDomainSuccess = createAction<{\n  domain: string;\n  accounts: Account[];\n}>('domain_blocks/unblock/SUCCESS');\n","import { apiReblog, apiUnreblog } from 'mastodon/api/interactions';\nimport type { StatusVisibility } from 'mastodon/models/status';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { importFetchedStatus } from './importer';\n\nexport const reblog = createDataLoadingThunk(\n  'status/reblog',\n  ({\n    statusId,\n    visibility,\n  }: {\n    statusId: string;\n    visibility: StatusVisibility;\n  }) => apiReblog(statusId, visibility),\n  (data, { dispatch, discardLoadData }) => {\n    // The reblog API method returns a new status wrapped around the original. In this case we are only\n    // interested in how the original is modified, hence passing it skipping the wrapper\n    dispatch(importFetchedStatus(data.reblog));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n\nexport const unreblog = createDataLoadingThunk(\n  'status/unreblog',\n  ({ statusId }: { statusId: string }) => apiUnreblog(statusId),\n  (data, { dispatch, discardLoadData }) => {\n    dispatch(importFetchedStatus(data));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n","import { apiRequestPost } from 'mastodon/api';\nimport type { Status, StatusVisibility } from 'mastodon/models/status';\n\nexport const apiReblog = (statusId: string, visibility: StatusVisibility) =>\n  apiRequestPost<{ reblog: Status }>(`v1/statuses/${statusId}/reblog`, {\n    visibility,\n  });\n\nexport const apiUnreblog = (statusId: string) =>\n  apiRequestPost<Status>(`v1/statuses/${statusId}/unreblog`);\n","import { apiReblog, apiUnreblog } from 'flavours/glitch/api/interactions';\nimport type { StatusVisibility } from 'flavours/glitch/models/status';\nimport { createDataLoadingThunk } from 'flavours/glitch/store/typed_functions';\n\nimport { importFetchedStatus } from './importer';\n\nexport const reblog = createDataLoadingThunk(\n  'status/reblog',\n  ({\n    statusId,\n    visibility,\n  }: {\n    statusId: string;\n    visibility: StatusVisibility;\n  }) => apiReblog(statusId, visibility),\n  (data, { dispatch, discardLoadData }) => {\n    // The reblog API method returns a new status wrapped around the original. In this case we are only\n    // interested in how the original is modified, hence passing it skipping the wrapper\n    dispatch(importFetchedStatus(data.reblog));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n\nexport const unreblog = createDataLoadingThunk(\n  'status/unreblog',\n  ({ statusId }: { statusId: string }) => apiUnreblog(statusId),\n  (data, { dispatch, discardLoadData }) => {\n    dispatch(importFetchedStatus(data));\n\n    // The payload is not used in any actions\n    return discardLoadData;\n  },\n);\n","import { apiRequestPost } from 'flavours/glitch/api';\nimport type { Status, StatusVisibility } from 'flavours/glitch/models/status';\n\nexport const apiReblog = (statusId: string, visibility: StatusVisibility) =>\n  apiRequestPost<{ reblog: Status }>(`v1/statuses/${statusId}/reblog`, {\n    visibility,\n  });\n\nexport const apiUnreblog = (statusId: string) =>\n  apiRequestPost<Status>(`v1/statuses/${statusId}/unreblog`);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { LayoutType } from '../is_mobile';\n\nexport const focusApp = createAction('APP_FOCUS');\nexport const unfocusApp = createAction('APP_UNFOCUS');\n\ninterface ChangeLayoutPayload {\n  layout: LayoutType;\n}\nexport const changeLayout =\n  createAction<ChangeLayoutPayload>('APP_LAYOUT_CHANGE');\n","import { browserHistory } from 'flavours/glitch/components/router';\n\nimport api, { getLinks } from '../api';\n\nimport {\n  followAccountSuccess, unfollowAccountSuccess,\n  authorizeFollowRequestSuccess, rejectFollowRequestSuccess,\n  followAccountRequest, followAccountFail,\n  unfollowAccountRequest, unfollowAccountFail,\n  muteAccountSuccess, unmuteAccountSuccess,\n  blockAccountSuccess, unblockAccountSuccess,\n  pinAccountSuccess, unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n} from './accounts_typed';\nimport { importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const PINNED_ACCOUNTS_FETCH_REQUEST = 'PINNED_ACCOUNTS_FETCH_REQUEST';\nexport const PINNED_ACCOUNTS_FETCH_SUCCESS = 'PINNED_ACCOUNTS_FETCH_SUCCESS';\nexport const PINNED_ACCOUNTS_FETCH_FAIL    = 'PINNED_ACCOUNTS_FETCH_FAIL';\n\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST  = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST';\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS  = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS';\nexport const PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL     = 'PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL';\n\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR  = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR';\nexport const PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE = 'PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE';\n\nexport const PINNED_ACCOUNTS_EDITOR_RESET = 'PINNED_ACCOUNTS_EDITOR_RESET';\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport * from './accounts_typed';\n\nexport function fetchAccount(id) {\n  return (dispatch) => {\n    dispatch(fetchRelationships([id]));\n    dispatch(fetchAccountRequest(id));\n\n    api().get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api().get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest({ id, locked }));\n\n    api().post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess({relationship: response.data, alreadyFollowing}));\n    }).catch(error => {\n      dispatch(followAccountFail({ id, error, locked }));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess({relationship: response.data, statuses: getState().get('statuses')}));\n    }).catch(error => {\n      dispatch(unfollowAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(blockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch) => {\n    dispatch(unblockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unblockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(muteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unmuteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    dispatch(fetchRelationshipsRequest(newAccountIds));\n\n    api().get(`/api/v1/accounts/relationships?with_suspended=true&${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n      dispatch(fetchRelationshipsSuccess({ relationships: response.data }));\n    }).catch(error => {\n      dispatch(fetchRelationshipsFail(error));\n    });\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api().get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess({ id })))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess({ id })))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch) => {\n    dispatch(pinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch) => {\n    dispatch(unpinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport function fetchPinnedAccounts() {\n  return (dispatch) => {\n    dispatch(fetchPinnedAccountsRequest());\n\n    api().get('/api/v1/endorsements', { params: { limit: 0 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuccess(response.data));\n    }).catch(err => dispatch(fetchPinnedAccountsFail(err)));\n  };\n}\n\nexport function fetchPinnedAccountsRequest() {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedAccountsSuccess(accounts, next) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchPinnedAccountsFail(error) {\n  return {\n    type: PINNED_ACCOUNTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport const updateAccount = ({ displayName, note, avatar, header, discoverable, indexable }) => (dispatch) => {\n  const data = new FormData();\n\n  data.append('display_name', displayName);\n  data.append('note', note);\n  if (avatar) data.append('avatar', avatar);\n  if (header) data.append('header', header);\n  data.append('discoverable', discoverable);\n  data.append('indexable', indexable);\n\n  return api().patch('/api/v1/accounts/update_credentials', data).then(response => {\n    dispatch(importFetchedAccount(response.data));\n  });\n};\n\nexport const navigateToProfile = (accountId) => {\n  return (_dispatch, getState) => {\n    const acct = getState().accounts.getIn([accountId, 'acct']);\n  \n    if (acct) {\n      browserHistory.push(`/@${acct}`);\n    }\n  };\n};\n\nexport function fetchPinnedAccountsSuggestions(q) {\n  return (dispatch) => {\n    dispatch(fetchPinnedAccountsSuggestionsRequest());\n\n    const params = {\n      q,\n      resolve: false,\n      limit: 4,\n      following: true,\n    };\n\n    api().get('/api/v1/accounts/search', { params }).then(response => {\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchPinnedAccountsSuggestionsSuccess(q, response.data));\n    }).catch(err => dispatch(fetchPinnedAccountsSuggestionsFail(err)));\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsRequest() {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsSuccess(query, accounts) {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS,\n    query,\n    accounts,\n  };\n}\n\nexport function fetchPinnedAccountsSuggestionsFail(error) {\n  return {\n    type: PINNED_ACCOUNTS_SUGGESTIONS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function clearPinnedAccountsSuggestions() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR,\n  };\n}\n\nexport function changePinnedAccountsSuggestions(value) {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE,\n    value,\n  };\n}\n\nexport function resetPinnedAccountsEditor() {\n  return {\n    type: PINNED_ACCOUNTS_EDITOR_RESET,\n  };\n}\n\n","// A mapping of unicode strings to an object containing the filename\n// (i.e. the svg filename) and a shortCode intended to be shown\n// as a \"title\" attribute in an HTML element (aka tooltip).\n\nimport type {\n  FilenameData,\n  ShortCodesToEmojiDataKey,\n} from './emoji_compressed';\nimport emojiCompressed from './emoji_compressed';\nimport { unicodeToFilename } from './unicode_to_filename';\n\ntype UnicodeMapping = {\n  [key in FilenameData[number][0]]: {\n    shortCode: ShortCodesToEmojiDataKey;\n    filename: FilenameData[number][number];\n  };\n};\n\nconst [\n  shortCodesToEmojiData,\n  _skins,\n  _categories,\n  _short_names,\n  emojisWithoutShortCodes,\n] = emojiCompressed;\n\n// decompress\nconst unicodeMapping: UnicodeMapping = {};\n\nfunction processEmojiMapData(\n  emojiMapData: FilenameData[number],\n  shortCode?: ShortCodesToEmojiDataKey,\n) {\n  const [native, _filename] = emojiMapData;\n  let filename = emojiMapData[1];\n  if (!filename) {\n    // filename name can be derived from unicodeToFilename\n    filename = unicodeToFilename(native);\n  }\n  unicodeMapping[native] = {\n    shortCode,\n    filename,\n  };\n}\n\nObject.keys(shortCodesToEmojiData).forEach(\n  (shortCode: ShortCodesToEmojiDataKey) => {\n    if (shortCode === undefined) return;\n\n    const emojiData = shortCodesToEmojiData[shortCode];\n    if (!emojiData) return;\n    const [filenameData, _searchData] = emojiData;\n    filenameData.forEach((emojiMapData) => {\n      processEmojiMapData(emojiMapData, shortCode);\n    });\n  },\n);\n\nemojisWithoutShortCodes.forEach((emojiMapData) => {\n  processEmojiMapData(emojiMapData);\n});\n\nexport { unicodeMapping };\n","import type { RootState } from 'mastodon/store';\n\n/* eslint-disable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n// state.settings is not yet typed, so we disable some ESLint checks for those selectors\nexport const selectSettingsNotificationsShows = (state: RootState) =>\n  state.settings.getIn(['notifications', 'shows']).toJS() as Record<\n    string,\n    boolean\n  >;\n\nexport const selectSettingsNotificationsExcludedTypes = (state: RootState) =>\n  Object.entries(selectSettingsNotificationsShows(state))\n    .filter(([_type, enabled]) => !enabled)\n    .map(([type, _enabled]) => type);\n\nexport const selectSettingsNotificationsQuickFilterShow = (state: RootState) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'show']) as boolean;\n\nexport const selectSettingsNotificationsQuickFilterActive = (\n  state: RootState,\n) => state.settings.getIn(['notifications', 'quickFilter', 'active']) as string;\n\nexport const selectSettingsNotificationsQuickFilterAdvanced = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'advanced']) as boolean;\n\nexport const selectSettingsNotificationsShowUnread = (state: RootState) =>\n  state.settings.getIn(['notifications', 'showUnread']) as boolean;\n\nexport const selectNeedsNotificationPermission = (state: RootState) =>\n  (state.settings.getIn(['notifications', 'alerts']).includes(true) &&\n    state.notifications.get('browserSupport') &&\n    state.notifications.get('browserPermission') === 'default' &&\n    !state.settings.getIn([\n      'notifications',\n      'dismissPermissionBanner',\n    ])) as boolean;\n\nexport const selectSettingsNotificationsMinimizeFilteredBanner = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'minimizeFilteredBanner']) as boolean;\n\n/* eslint-enable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n","import type { RootState } from 'flavours/glitch/store';\n\n/* eslint-disable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n// state.settings is not yet typed, so we disable some ESLint checks for those selectors\nexport const selectSettingsNotificationsShows = (state: RootState) =>\n  state.settings.getIn(['notifications', 'shows']).toJS() as Record<\n    string,\n    boolean\n  >;\n\nexport const selectSettingsNotificationsExcludedTypes = (state: RootState) =>\n  Object.entries(selectSettingsNotificationsShows(state))\n    .filter(([_type, enabled]) => !enabled)\n    .map(([type, _enabled]) => type);\n\nexport const selectSettingsNotificationsQuickFilterShow = (state: RootState) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'show']) as boolean;\n\nexport const selectSettingsNotificationsQuickFilterActive = (\n  state: RootState,\n) => state.settings.getIn(['notifications', 'quickFilter', 'active']) as string;\n\nexport const selectSettingsNotificationsQuickFilterAdvanced = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'quickFilter', 'advanced']) as boolean;\n\nexport const selectSettingsNotificationsShowUnread = (state: RootState) =>\n  state.settings.getIn(['notifications', 'showUnread']) as boolean;\n\nexport const selectNeedsNotificationPermission = (state: RootState) =>\n  (state.settings.getIn(['notifications', 'alerts']).includes(true) &&\n    state.notifications.get('browserSupport') &&\n    state.notifications.get('browserPermission') === 'default' &&\n    !state.settings.getIn([\n      'notifications',\n      'dismissPermissionBanner',\n    ])) as boolean;\n\nexport const selectSettingsNotificationsMinimizeFilteredBanner = (\n  state: RootState,\n) =>\n  state.settings.getIn(['notifications', 'minimizeFilteredBanner']) as boolean;\n\n/* eslint-enable @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access */\n","import React from 'react';\nimport { is } from 'immutable';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nvar NOT_SET = {};\nfunction isMapLike(collection) {\n  return collection !== null && _typeof(collection) === 'object' && typeof collection.get === 'function' && typeof collection.has === 'function';\n}\n\nfunction isInvalid(collection) {\n  return collection === null || collection === undefined;\n}\n\nfunction get(collection, key, notSetValue) {\n  if (isInvalid(collection)) {\n    return notSetValue;\n  }\n\n  if (isMapLike(collection)) {\n    return collection.has(key) ? collection.get(key) : notSetValue;\n  }\n\n  return hasOwnProperty.call(collection, key) ? collection[key] : notSetValue;\n}\nfunction getIn(collection, keyPath, notSetValue) {\n  var i = 0;\n\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n\n  return collection;\n}\n\nfunction check(config) {\n  var prev = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var next = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var checkItem = createChecker(prev, next);\n  var checklist = config || Object.keys(_objectSpread2({}, next, {}, prev));\n  return checklist.every(checkItem);\n}\n\nfunction createChecker(prev, next) {\n  return function (name) {\n    if (typeof name === 'string') {\n      return is(next[name], prev[name]);\n    } else if (Array.isArray(name)) {\n      return is(getIn(next, name), getIn(prev, name));\n    }\n\n    throw new TypeError('Invalid key: expected Array or string: ' + name);\n  };\n}\n\nvar ImmutablePureComponent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ImmutablePureComponent, _React$Component);\n\n  function ImmutablePureComponent() {\n    _classCallCheck(this, ImmutablePureComponent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ImmutablePureComponent).apply(this, arguments));\n  }\n\n  _createClass(ImmutablePureComponent, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var nextState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return !check(this.updateOnProps, this.props, nextProps, 'updateOnProps') || !check(this.updateOnStates, this.state, nextState, 'updateOnStates');\n    }\n  }]);\n\n  return ImmutablePureComponent;\n}(React.Component);\n\nfunction immutableMemo(Component, updateOnProps) {\n  return React.memo(Component, function (prev, next) {\n    return check(updateOnProps, prev, next, 'immutableMemo');\n  });\n}\n\nexport default ImmutablePureComponent;\nexport { ImmutablePureComponent, immutableMemo };\n","'use strict';\nvar createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.at` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.at\nexportTypedArrayMethod('at', function at(index) {\n  var O = aTypedArray(this);\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n  return (k < 0 || k >= len) ? undefined : O[k];\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $fill = require('../internals/array-fill');\nvar toBigInt = require('../internals/to-big-int');\nvar classof = require('../internals/classof');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar slice = uncurryThis(''.slice);\n\n// V8 ~ Chrome < 59, Safari < 14.1, FF < 55, Edge <=18\nvar CONVERSION_BUG = fails(function () {\n  var count = 0;\n  // eslint-disable-next-line es/no-typed-arrays -- safe\n  new Int8Array(2).fill({ valueOf: function () { return count++; } });\n  return count !== 1;\n});\n\n// `%TypedArray%.prototype.fill` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill\nexportTypedArrayMethod('fill', function fill(value /* , start, end */) {\n  var length = arguments.length;\n  aTypedArray(this);\n  var actualValue = slice(classof(this), 0, 3) === 'Big' ? toBigInt(value) : +value;\n  return call($fill, this, actualValue, length > 1 ? arguments[1] : undefined, length > 2 ? arguments[2] : undefined);\n}, CONVERSION_BUG);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLast = require('../internals/array-iteration-from-last').findLast;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLast` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlast\nexportTypedArrayMethod('findLast', function findLast(predicate /* , thisArg */) {\n  return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLastIndex = require('../internals/array-iteration-from-last').findLastIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLastIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findlastindex\nexportTypedArrayMethod('findLastIndex', function findLastIndex(predicate /* , thisArg */) {\n  return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toOffset = require('../internals/to-offset');\nvar toIndexedObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar $set = Int8ArrayPrototype && Int8ArrayPrototype.set;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS = !fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  var array = new Uint8ClampedArray(2);\n  call($set, array, { length: 1, 0: 3 }, 1);\n  return array[1] !== 3;\n});\n\n// https://bugs.chromium.org/p/v8/issues/detail?id=11294 and other\nvar TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {\n  var array = new Int8Array(2);\n  array.set(1);\n  array.set('2', 1);\n  return array[0] !== 0 || array[1] !== 2;\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var src = toIndexedObject(arrayLike);\n  if (WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS) return call($set, this, src, offset);\n  var length = this.length;\n  var len = lengthOfArrayLike(src);\n  var index = 0;\n  if (len + offset > length) throw new RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, !WORKS_WITH_OBJECTS_AND_GENERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar fails = require('../internals/fails');\nvar aCallable = require('../internals/a-callable');\nvar internalSort = require('../internals/array-sort');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar Uint16Array = global.Uint16Array;\nvar nativeSort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);\n\n// WebKit\nvar ACCEPT_INCORRECT_ARGUMENTS = !!nativeSort && !(fails(function () {\n  nativeSort(new Uint16Array(2), null);\n}) && fails(function () {\n  nativeSort(new Uint16Array(2), {});\n}));\n\nvar STABLE_SORT = !!nativeSort && !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 74;\n  if (FF) return FF < 67;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 602;\n\n  var array = new Uint16Array(516);\n  var expected = Array(516);\n  var index, mod;\n\n  for (index = 0; index < 516; index++) {\n    mod = index % 4;\n    array[index] = 515 - index;\n    expected[index] = index - 2 * mod + 3;\n  }\n\n  nativeSort(array, function (a, b) {\n    return (a / 4 | 0) - (b / 4 | 0);\n  });\n\n  for (index = 0; index < 516; index++) {\n    if (array[index] !== expected[index]) return true;\n  }\n});\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (y !== y) return -1;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (x !== x) return 1;\n    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;\n    return x > y;\n  };\n};\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  if (comparefn !== undefined) aCallable(comparefn);\n  if (STABLE_SORT) return nativeSort(this, comparefn);\n\n  return internalSort(aTypedArray(this), getSortCompare(comparefn));\n}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);\n","'use strict';\nvar arrayToReversed = require('../internals/array-to-reversed');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\n\n// `%TypedArray%.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.toreversed\nexportTypedArrayMethod('toReversed', function toReversed() {\n  return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);\n\n// `%TypedArray%.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tosorted\nexportTypedArrayMethod('toSorted', function toSorted(compareFn) {\n  if (compareFn !== undefined) aCallable(compareFn);\n  var O = aTypedArray(this);\n  var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);\n  return sort(A, compareFn);\n});\n","'use strict';\nvar arrayWith = require('../internals/array-with');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toBigInt = require('../internals/to-big-int');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = !!function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER);\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.array-buffer.detached');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.array-buffer.transfer');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.array-buffer.transfer-to-fixed-length');\n","\n// turn {x: {val: 1, stiffness: 1, damping: 2}, y: 2} generated by\n// `{x: spring(1, {stiffness: 1, damping: 2}), y: 2}` into {x: 1, y: 2}\n\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = stripStyle;\n\nfunction stripStyle(style) {\n  var ret = {};\n  for (var key in style) {\n    if (!Object.prototype.hasOwnProperty.call(style, key)) {\n      continue;\n    }\n    ret[key] = typeof style[key] === 'number' ? style[key] : style[key].val;\n  }\n  return ret;\n}\n\nmodule.exports = exports['default'];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.showLoading = showLoading;\nexports.hideLoading = hideLoading;\nexports.resetLoading = resetLoading;\nexports.loadingBarReducer = loadingBarReducer;\nexports.DEFAULT_SCOPE = exports.RESET = exports.HIDE = exports.SHOW = void 0;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar SHOW = 'loading-bar/SHOW';\nexports.SHOW = SHOW;\nvar HIDE = 'loading-bar/HIDE';\nexports.HIDE = HIDE;\nvar RESET = 'loading-bar/RESET';\nexports.RESET = RESET;\nvar DEFAULT_SCOPE = 'default';\nexports.DEFAULT_SCOPE = DEFAULT_SCOPE;\n\nfunction showLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: SHOW,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction hideLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: HIDE,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction resetLoading() {\n  var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SCOPE;\n  return {\n    type: RESET,\n    payload: {\n      scope: scope\n    }\n  };\n}\n\nfunction loadingBarReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = action.payload || {},\n      _ref$scope = _ref.scope,\n      scope = _ref$scope === void 0 ? DEFAULT_SCOPE : _ref$scope;\n\n  switch (action.type) {\n    case SHOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, (state[scope] || 0) + 1));\n\n    case HIDE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, Math.max(0, (state[scope] || 1) - 1)));\n\n    case RESET:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, scope, 0));\n\n    default:\n      return state;\n  }\n}","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ findLast, findLastIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_FIND_LAST_INDEX = TYPE === 1;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var index = lengthOfArrayLike(self);\n    var boundFunction = bind(callbackfn, that);\n    var value, result;\n    while (index-- > 0) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (result) switch (TYPE) {\n        case 0: return value; // findLast\n        case 1: return index; // findLastIndex\n      }\n    }\n    return IS_FIND_LAST_INDEX ? -1 : undefined;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.findLast` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLast: createMethod(0),\n  // `Array.prototype.findLastIndex` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLastIndex: createMethod(1)\n};\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","import { browserHistory } from 'mastodon/components/router';\n\nimport api, { getLinks } from '../api';\n\nimport {\n  followAccountSuccess, unfollowAccountSuccess,\n  authorizeFollowRequestSuccess, rejectFollowRequestSuccess,\n  followAccountRequest, followAccountFail,\n  unfollowAccountRequest, unfollowAccountFail,\n  muteAccountSuccess, unmuteAccountSuccess,\n  blockAccountSuccess, unblockAccountSuccess,\n  pinAccountSuccess, unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n} from './accounts_typed';\nimport { importFetchedAccount, importFetchedAccounts } from './importer';\n\nexport const ACCOUNT_FETCH_REQUEST = 'ACCOUNT_FETCH_REQUEST';\nexport const ACCOUNT_FETCH_SUCCESS = 'ACCOUNT_FETCH_SUCCESS';\nexport const ACCOUNT_FETCH_FAIL    = 'ACCOUNT_FETCH_FAIL';\n\nexport const ACCOUNT_LOOKUP_REQUEST = 'ACCOUNT_LOOKUP_REQUEST';\nexport const ACCOUNT_LOOKUP_SUCCESS = 'ACCOUNT_LOOKUP_SUCCESS';\nexport const ACCOUNT_LOOKUP_FAIL    = 'ACCOUNT_LOOKUP_FAIL';\n\nexport const ACCOUNT_BLOCK_REQUEST = 'ACCOUNT_BLOCK_REQUEST';\nexport const ACCOUNT_BLOCK_FAIL    = 'ACCOUNT_BLOCK_FAIL';\n\nexport const ACCOUNT_UNBLOCK_REQUEST = 'ACCOUNT_UNBLOCK_REQUEST';\nexport const ACCOUNT_UNBLOCK_FAIL    = 'ACCOUNT_UNBLOCK_FAIL';\n\nexport const ACCOUNT_MUTE_REQUEST = 'ACCOUNT_MUTE_REQUEST';\nexport const ACCOUNT_MUTE_FAIL    = 'ACCOUNT_MUTE_FAIL';\n\nexport const ACCOUNT_UNMUTE_REQUEST = 'ACCOUNT_UNMUTE_REQUEST';\nexport const ACCOUNT_UNMUTE_FAIL    = 'ACCOUNT_UNMUTE_FAIL';\n\nexport const ACCOUNT_PIN_REQUEST = 'ACCOUNT_PIN_REQUEST';\nexport const ACCOUNT_PIN_FAIL    = 'ACCOUNT_PIN_FAIL';\n\nexport const ACCOUNT_UNPIN_REQUEST = 'ACCOUNT_UNPIN_REQUEST';\nexport const ACCOUNT_UNPIN_FAIL    = 'ACCOUNT_UNPIN_FAIL';\n\nexport const FOLLOWERS_FETCH_REQUEST = 'FOLLOWERS_FETCH_REQUEST';\nexport const FOLLOWERS_FETCH_SUCCESS = 'FOLLOWERS_FETCH_SUCCESS';\nexport const FOLLOWERS_FETCH_FAIL    = 'FOLLOWERS_FETCH_FAIL';\n\nexport const FOLLOWERS_EXPAND_REQUEST = 'FOLLOWERS_EXPAND_REQUEST';\nexport const FOLLOWERS_EXPAND_SUCCESS = 'FOLLOWERS_EXPAND_SUCCESS';\nexport const FOLLOWERS_EXPAND_FAIL    = 'FOLLOWERS_EXPAND_FAIL';\n\nexport const FOLLOWING_FETCH_REQUEST = 'FOLLOWING_FETCH_REQUEST';\nexport const FOLLOWING_FETCH_SUCCESS = 'FOLLOWING_FETCH_SUCCESS';\nexport const FOLLOWING_FETCH_FAIL    = 'FOLLOWING_FETCH_FAIL';\n\nexport const FOLLOWING_EXPAND_REQUEST = 'FOLLOWING_EXPAND_REQUEST';\nexport const FOLLOWING_EXPAND_SUCCESS = 'FOLLOWING_EXPAND_SUCCESS';\nexport const FOLLOWING_EXPAND_FAIL    = 'FOLLOWING_EXPAND_FAIL';\n\nexport const RELATIONSHIPS_FETCH_REQUEST = 'RELATIONSHIPS_FETCH_REQUEST';\nexport const RELATIONSHIPS_FETCH_FAIL    = 'RELATIONSHIPS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_FETCH_REQUEST = 'FOLLOW_REQUESTS_FETCH_REQUEST';\nexport const FOLLOW_REQUESTS_FETCH_SUCCESS = 'FOLLOW_REQUESTS_FETCH_SUCCESS';\nexport const FOLLOW_REQUESTS_FETCH_FAIL    = 'FOLLOW_REQUESTS_FETCH_FAIL';\n\nexport const FOLLOW_REQUESTS_EXPAND_REQUEST = 'FOLLOW_REQUESTS_EXPAND_REQUEST';\nexport const FOLLOW_REQUESTS_EXPAND_SUCCESS = 'FOLLOW_REQUESTS_EXPAND_SUCCESS';\nexport const FOLLOW_REQUESTS_EXPAND_FAIL    = 'FOLLOW_REQUESTS_EXPAND_FAIL';\n\nexport const FOLLOW_REQUEST_AUTHORIZE_REQUEST = 'FOLLOW_REQUEST_AUTHORIZE_REQUEST';\nexport const FOLLOW_REQUEST_AUTHORIZE_FAIL    = 'FOLLOW_REQUEST_AUTHORIZE_FAIL';\n\nexport const FOLLOW_REQUEST_REJECT_REQUEST = 'FOLLOW_REQUEST_REJECT_REQUEST';\nexport const FOLLOW_REQUEST_REJECT_FAIL    = 'FOLLOW_REQUEST_REJECT_FAIL';\n\nexport const ACCOUNT_REVEAL = 'ACCOUNT_REVEAL';\n\nexport * from './accounts_typed';\n\nexport function fetchAccount(id) {\n  return (dispatch) => {\n    dispatch(fetchRelationships([id]));\n    dispatch(fetchAccountRequest(id));\n\n    api().get(`/api/v1/accounts/${id}`).then(response => {\n      dispatch(importFetchedAccount(response.data));\n      dispatch(fetchAccountSuccess());\n    }).catch(error => {\n      dispatch(fetchAccountFail(id, error));\n    });\n  };\n}\n\nexport const lookupAccount = acct => (dispatch) => {\n  dispatch(lookupAccountRequest(acct));\n\n  api().get('/api/v1/accounts/lookup', { params: { acct } }).then(response => {\n    dispatch(fetchRelationships([response.data.id]));\n    dispatch(importFetchedAccount(response.data));\n    dispatch(lookupAccountSuccess());\n  }).catch(error => {\n    dispatch(lookupAccountFail(acct, error));\n  });\n};\n\nexport const lookupAccountRequest = (acct) => ({\n  type: ACCOUNT_LOOKUP_REQUEST,\n  acct,\n});\n\nexport const lookupAccountSuccess = () => ({\n  type: ACCOUNT_LOOKUP_SUCCESS,\n});\n\nexport const lookupAccountFail = (acct, error) => ({\n  type: ACCOUNT_LOOKUP_FAIL,\n  acct,\n  error,\n  skipAlert: true,\n});\n\nexport function fetchAccountRequest(id) {\n  return {\n    type: ACCOUNT_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchAccountSuccess() {\n  return {\n    type: ACCOUNT_FETCH_SUCCESS,\n  };\n}\n\nexport function fetchAccountFail(id, error) {\n  return {\n    type: ACCOUNT_FETCH_FAIL,\n    id,\n    error,\n    skipAlert: true,\n  };\n}\n\nexport function followAccount(id, options = { reblogs: true }) {\n  return (dispatch, getState) => {\n    const alreadyFollowing = getState().getIn(['relationships', id, 'following']);\n    const locked = getState().getIn(['accounts', id, 'locked'], false);\n\n    dispatch(followAccountRequest({ id, locked }));\n\n    api().post(`/api/v1/accounts/${id}/follow`, options).then(response => {\n      dispatch(followAccountSuccess({relationship: response.data, alreadyFollowing}));\n    }).catch(error => {\n      dispatch(followAccountFail({ id, error, locked }));\n    });\n  };\n}\n\nexport function unfollowAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(unfollowAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unfollow`).then(response => {\n      dispatch(unfollowAccountSuccess({relationship: response.data, statuses: getState().get('statuses')}));\n    }).catch(error => {\n      dispatch(unfollowAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccount(id) {\n  return (dispatch, getState) => {\n    dispatch(blockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/block`).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(blockAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(blockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unblockAccount(id) {\n  return (dispatch) => {\n    dispatch(unblockAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unblock`).then(response => {\n      dispatch(unblockAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unblockAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function blockAccountRequest(id) {\n  return {\n    type: ACCOUNT_BLOCK_REQUEST,\n    id,\n  };\n}\nexport function blockAccountFail(error) {\n  return {\n    type: ACCOUNT_BLOCK_FAIL,\n    error,\n  };\n}\n\nexport function unblockAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNBLOCK_REQUEST,\n    id,\n  };\n}\n\nexport function unblockAccountFail(error) {\n  return {\n    type: ACCOUNT_UNBLOCK_FAIL,\n    error,\n  };\n}\n\n\nexport function muteAccount(id, notifications, duration=0) {\n  return (dispatch, getState) => {\n    dispatch(muteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/mute`, { notifications, duration }).then(response => {\n      // Pass in entire statuses map so we can use it to filter stuff in different parts of the reducers\n      dispatch(muteAccountSuccess({ relationship: response.data, statuses: getState().get('statuses') }));\n    }).catch(error => {\n      dispatch(muteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function unmuteAccount(id) {\n  return (dispatch) => {\n    dispatch(unmuteAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unmute`).then(response => {\n      dispatch(unmuteAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unmuteAccountFail({ id, error }));\n    });\n  };\n}\n\nexport function muteAccountRequest(id) {\n  return {\n    type: ACCOUNT_MUTE_REQUEST,\n    id,\n  };\n}\n\nexport function muteAccountFail(error) {\n  return {\n    type: ACCOUNT_MUTE_FAIL,\n    error,\n  };\n}\n\nexport function unmuteAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNMUTE_REQUEST,\n    id,\n  };\n}\n\nexport function unmuteAccountFail(error) {\n  return {\n    type: ACCOUNT_UNMUTE_FAIL,\n    error,\n  };\n}\n\n\nexport function fetchFollowers(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowersRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/followers`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowersFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowers(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'followers', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowersRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowersSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowersFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowersRequest(id) {\n  return {\n    type: FOLLOWERS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowersSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWERS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowersFail(id, error) {\n  return {\n    type: FOLLOWERS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFollowing(id) {\n  return (dispatch) => {\n    dispatch(fetchFollowingRequest(id));\n\n    api().get(`/api/v1/accounts/${id}/following`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFollowingFail(id, error));\n    });\n  };\n}\n\nexport function fetchFollowingRequest(id) {\n  return {\n    type: FOLLOWING_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_FETCH_FAIL,\n    id,\n    error,\n    skipNotFound: true,\n  };\n}\n\nexport function expandFollowing(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'following', id, 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowingRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowingSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(expandFollowingFail(id, error));\n    });\n  };\n}\n\nexport function expandFollowingRequest(id) {\n  return {\n    type: FOLLOWING_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFollowingSuccess(id, accounts, next) {\n  return {\n    type: FOLLOWING_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowingFail(id, error) {\n  return {\n    type: FOLLOWING_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchRelationships(accountIds) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const loadedRelationships = state.get('relationships');\n    const newAccountIds = accountIds.filter(id => loadedRelationships.get(id, null) === null);\n    const signedIn = !!state.getIn(['meta', 'me']);\n\n    if (!signedIn || newAccountIds.length === 0) {\n      return;\n    }\n\n    dispatch(fetchRelationshipsRequest(newAccountIds));\n\n    api().get(`/api/v1/accounts/relationships?with_suspended=true&${newAccountIds.map(id => `id[]=${id}`).join('&')}`).then(response => {\n      dispatch(fetchRelationshipsSuccess({ relationships: response.data }));\n    }).catch(error => {\n      dispatch(fetchRelationshipsFail(error));\n    });\n  };\n}\n\nexport function fetchRelationshipsRequest(ids) {\n  return {\n    type: RELATIONSHIPS_FETCH_REQUEST,\n    ids,\n    skipLoading: true,\n  };\n}\n\nexport function fetchRelationshipsFail(error) {\n  return {\n    type: RELATIONSHIPS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipNotFound: true,\n  };\n}\n\nexport function fetchFollowRequests() {\n  return (dispatch) => {\n    dispatch(fetchFollowRequestsRequest());\n\n    api().get('/api/v1/follow_requests').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(fetchFollowRequestsFail(error)));\n  };\n}\n\nexport function fetchFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandFollowRequests() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'follow_requests', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFollowRequestsRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFollowRequestsSuccess(response.data, next ? next.uri : null));\n    }).catch(error => dispatch(expandFollowRequestsFail(error)));\n  };\n}\n\nexport function expandFollowRequestsRequest() {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFollowRequestsSuccess(accounts, next) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFollowRequestsFail(error) {\n  return {\n    type: FOLLOW_REQUESTS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function authorizeFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(authorizeFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/authorize`)\n      .then(() => dispatch(authorizeFollowRequestSuccess({ id })))\n      .catch(error => dispatch(authorizeFollowRequestFail(id, error)));\n  };\n}\n\nexport function authorizeFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_REQUEST,\n    id,\n  };\n}\n\nexport function authorizeFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_AUTHORIZE_FAIL,\n    id,\n    error,\n  };\n}\n\n\nexport function rejectFollowRequest(id) {\n  return (dispatch) => {\n    dispatch(rejectFollowRequestRequest(id));\n\n    api()\n      .post(`/api/v1/follow_requests/${id}/reject`)\n      .then(() => dispatch(rejectFollowRequestSuccess({ id })))\n      .catch(error => dispatch(rejectFollowRequestFail(id, error)));\n  };\n}\n\nexport function rejectFollowRequestRequest(id) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_REQUEST,\n    id,\n  };\n}\n\nexport function rejectFollowRequestFail(id, error) {\n  return {\n    type: FOLLOW_REQUEST_REJECT_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pinAccount(id) {\n  return (dispatch) => {\n    dispatch(pinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/pin`).then(response => {\n      dispatch(pinAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(pinAccountFail(error));\n    });\n  };\n}\n\nexport function unpinAccount(id) {\n  return (dispatch) => {\n    dispatch(unpinAccountRequest(id));\n\n    api().post(`/api/v1/accounts/${id}/unpin`).then(response => {\n      dispatch(unpinAccountSuccess({ relationship: response.data }));\n    }).catch(error => {\n      dispatch(unpinAccountFail(error));\n    });\n  };\n}\n\nexport function pinAccountRequest(id) {\n  return {\n    type: ACCOUNT_PIN_REQUEST,\n    id,\n  };\n}\n\nexport function pinAccountFail(error) {\n  return {\n    type: ACCOUNT_PIN_FAIL,\n    error,\n  };\n}\n\nexport function unpinAccountRequest(id) {\n  return {\n    type: ACCOUNT_UNPIN_REQUEST,\n    id,\n  };\n}\n\nexport function unpinAccountFail(error) {\n  return {\n    type: ACCOUNT_UNPIN_FAIL,\n    error,\n  };\n}\n\nexport const updateAccount = ({ displayName, note, avatar, header, discoverable, indexable }) => (dispatch) => {\n  const data = new FormData();\n\n  data.append('display_name', displayName);\n  data.append('note', note);\n  if (avatar) data.append('avatar', avatar);\n  if (header) data.append('header', header);\n  data.append('discoverable', discoverable);\n  data.append('indexable', indexable);\n\n  return api().patch('/api/v1/accounts/update_credentials', data).then(response => {\n    dispatch(importFetchedAccount(response.data));\n  });\n};\n\nexport const navigateToProfile = (accountId) => {\n  return (_dispatch, getState) => {\n    const acct = getState().accounts.getIn([accountId, 'acct']);\n\n    if (acct) {\n      browserHistory.push(`/@${acct}`);\n    }\n  };\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgPause(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M520-200v-560h240v560H520Zm-320 0v-560h240v560H200Zm400-80h80v-400h-80v400Zm-320 0h80v-400h-80v400Zm0-400v400-400Zm320 0v400-400Z\"\n  })));\n}\nexport default SvgPause;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgVolumeOffFill(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M792-56 671-177q-25 16-53 27.5T560-131v-82q14-5 27.5-10t25.5-12L480-368v208L280-360H120v-240h128L56-792l56-56 736 736-56 56Zm-8-232-58-58q17-31 25.5-65t8.5-70q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 53-14.5 102T784-288ZM650-422l-90-90v-130q47 22 73.5 66t26.5 96q0 15-2.5 29.5T650-422ZM480-592 376-696l104-104v208Z\"\n  })));\n}\nexport default SvgVolumeOffFill;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgVolumeUpFill(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320Z\"\n  })));\n}\nexport default SvgVolumeUpFill;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgRectangle(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M80-160v-640h800v640H80Zm80-80h640v-480H160v480Zm0 0v-480 480Z\"\n  })));\n}\nexport default SvgRectangle;","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgOpenInNew(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z\"\n  })));\n}\nexport default SvgOpenInNew;","// Like react-motion's Motion, but reduces all animations to cross-fades\n// for the benefit of users with motion sickness.\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport Motion from 'react-motion/lib/Motion';\n\nconst stylesToKeep = ['opacity', 'backgroundOpacity'];\n\nconst extractValue = (value) => {\n  // This is either an object with a \"val\" property or it's a number\n  return (typeof value === 'object' && value && 'val' in value) ? value.val : value;\n};\n\nclass ReducedMotion extends Component {\n\n  static propTypes = {\n    defaultStyle: PropTypes.object,\n    style: PropTypes.object,\n    children: PropTypes.func,\n  };\n\n  render() {\n\n    const { style, defaultStyle, children } = this.props;\n\n    Object.keys(style).forEach(key => {\n      if (stylesToKeep.includes(key)) {\n        return;\n      }\n      // If it's setting an x or height or scale or some other value, we need\n      // to preserve the end-state value without actually animating it\n      style[key] = defaultStyle[key] = extractValue(style[key]);\n    });\n\n    return (\n      <Motion style={style} defaultStyle={defaultStyle}>\n        {children}\n      </Motion>\n    );\n  }\n\n}\n\nexport default ReducedMotion;\n","import Motion from 'react-motion/lib/Motion';\n\nimport { reduceMotion } from '../../../initial_state';\n\nimport ReducedMotion from './reduced_motion';\n\nexport default reduceMotion ? ReducedMotion : Motion;\n","// Like react-motion's Motion, but reduces all animations to cross-fades\n// for the benefit of users with motion sickness.\nimport PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport Motion from 'react-motion/lib/Motion';\n\nconst stylesToKeep = ['opacity', 'backgroundOpacity'];\n\nconst extractValue = (value) => {\n  // This is either an object with a \"val\" property or it's a number\n  return (typeof value === 'object' && value && 'val' in value) ? value.val : value;\n};\n\nclass ReducedMotion extends Component {\n\n  static propTypes = {\n    defaultStyle: PropTypes.object,\n    style: PropTypes.object,\n    children: PropTypes.func,\n  };\n\n  render() {\n\n    const { style, defaultStyle, children } = this.props;\n\n    Object.keys(style).forEach(key => {\n      if (stylesToKeep.includes(key)) {\n        return;\n      }\n      // If it's setting an x or height or scale or some other value, we need\n      // to preserve the end-state value without actually animating it\n      style[key] = defaultStyle[key] = extractValue(style[key]);\n    });\n\n    return (\n      <Motion style={style} defaultStyle={defaultStyle}>\n        {children}\n      </Motion>\n    );\n  }\n\n}\n\nexport default ReducedMotion;\n","import Motion from 'react-motion/lib/Motion';\n\nimport { reduceMotion } from '../../../initial_state';\n\nimport ReducedMotion from './reduced_motion';\n\nexport default reduceMotion ? ReducedMotion : Motion;\n","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequire(obj) { return obj && obj.__esModule ? obj['default'] : obj; }\n\nvar _Motion = require('./Motion');\n\nexports.Motion = _interopRequire(_Motion);\n\nvar _StaggeredMotion = require('./StaggeredMotion');\n\nexports.StaggeredMotion = _interopRequire(_StaggeredMotion);\n\nvar _TransitionMotion = require('./TransitionMotion');\n\nexports.TransitionMotion = _interopRequire(_TransitionMotion);\n\nvar _spring = require('./spring');\n\nexports.spring = _interopRequire(_spring);\n\nvar _presets = require('./presets');\n\nexports.presets = _interopRequire(_presets);\n\nvar _stripStyle = require('./stripStyle');\n\nexports.stripStyle = _interopRequire(_stripStyle);\n\n// deprecated, dummy warning function\n\nvar _reorderKeys = require('./reorderKeys');\n\nexports.reorderKeys = _interopRequire(_reorderKeys);","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const BLOCKS_FETCH_REQUEST = 'BLOCKS_FETCH_REQUEST';\nexport const BLOCKS_FETCH_SUCCESS = 'BLOCKS_FETCH_SUCCESS';\nexport const BLOCKS_FETCH_FAIL    = 'BLOCKS_FETCH_FAIL';\n\nexport const BLOCKS_EXPAND_REQUEST = 'BLOCKS_EXPAND_REQUEST';\nexport const BLOCKS_EXPAND_SUCCESS = 'BLOCKS_EXPAND_SUCCESS';\nexport const BLOCKS_EXPAND_FAIL    = 'BLOCKS_EXPAND_FAIL';\n\nexport function fetchBlocks() {\n  return (dispatch) => {\n    dispatch(fetchBlocksRequest());\n\n    api().get('/api/v1/blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchBlocksFail(error)));\n  };\n}\n\nexport function fetchBlocksRequest() {\n  return {\n    type: BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchBlocksFail(error) {\n  return {\n    type: BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'blocks', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandBlocksRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandBlocksFail(error)));\n  };\n}\n\nexport function expandBlocksRequest() {\n  return {\n    type: BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandBlocksFail(error) {\n  return {\n    type: BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initBlockModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'BLOCK',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\nimport { openModal } from './modal';\n\nexport const BLOCKS_FETCH_REQUEST = 'BLOCKS_FETCH_REQUEST';\nexport const BLOCKS_FETCH_SUCCESS = 'BLOCKS_FETCH_SUCCESS';\nexport const BLOCKS_FETCH_FAIL    = 'BLOCKS_FETCH_FAIL';\n\nexport const BLOCKS_EXPAND_REQUEST = 'BLOCKS_EXPAND_REQUEST';\nexport const BLOCKS_EXPAND_SUCCESS = 'BLOCKS_EXPAND_SUCCESS';\nexport const BLOCKS_EXPAND_FAIL    = 'BLOCKS_EXPAND_FAIL';\n\nexport function fetchBlocks() {\n  return (dispatch) => {\n    dispatch(fetchBlocksRequest());\n\n    api().get('/api/v1/blocks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(fetchBlocksFail(error)));\n  };\n}\n\nexport function fetchBlocksRequest() {\n  return {\n    type: BLOCKS_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_FETCH_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchBlocksFail(error) {\n  return {\n    type: BLOCKS_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBlocks() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'blocks', 'next']);\n\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandBlocksRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandBlocksSuccess(response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandBlocksFail(error)));\n  };\n}\n\nexport function expandBlocksRequest() {\n  return {\n    type: BLOCKS_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBlocksSuccess(accounts, next) {\n  return {\n    type: BLOCKS_EXPAND_SUCCESS,\n    accounts,\n    next,\n  };\n}\n\nexport function expandBlocksFail(error) {\n  return {\n    type: BLOCKS_EXPAND_FAIL,\n    error,\n  };\n}\n\nexport function initBlockModal(account) {\n  return dispatch => {\n    dispatch(openModal({\n      modalType: 'BLOCK',\n      modalProps: {\n        accountId: account.get('id'),\n        acct: account.get('acct'),\n      },\n    }));\n  };\n}\n","export const decode = (base64: string): Uint8Array => {\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n};\n","export const SET_BROWSER_SUPPORT = 'PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const SET_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_SET_SUBSCRIPTION';\nexport const CLEAR_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION';\nexport const SET_ALERTS = 'PUSH_NOTIFICATIONS_SET_ALERTS';\n\nexport function setBrowserSupport (value) {\n  return {\n    type: SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setSubscription (subscription) {\n  return {\n    type: SET_SUBSCRIPTION,\n    subscription,\n  };\n}\n\nexport function clearSubscription () {\n  return {\n    type: CLEAR_SUBSCRIPTION,\n  };\n}\n\nexport function setAlerts (path, value) {\n  return dispatch => {\n    dispatch({\n      type: SET_ALERTS,\n      path,\n      value,\n    });\n  };\n}\n","import api from '../../api';\nimport { me } from '../../initial_state';\nimport { pushNotificationsSetting } from '../../settings';\nimport { decode as decodeBase64 } from '../../utils/base64';\n\nimport { setBrowserSupport, setSubscription, clearSubscription } from './setter';\n\n// Taken from https://www.npmjs.com/package/web-push\nconst urlBase64ToUint8Array = (base64String) => {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  return decodeBase64(base64);\n};\n\nconst getApplicationServerKey = () => document.querySelector('[name=\"applicationServerKey\"]').getAttribute('content');\n\nconst getRegistration = () => navigator.serviceWorker.ready;\n\nconst getPushSubscription = (registration) =>\n  registration.pushManager.getSubscription()\n    .then(subscription => ({ registration, subscription }));\n\nconst subscribe = (registration) =>\n  registration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(getApplicationServerKey()),\n  });\n\nconst unsubscribe = ({ registration, subscription }) =>\n  subscription ? subscription.unsubscribe().then(() => registration) : registration;\n\nconst sendSubscriptionToBackend = (subscription) => {\n  const params = { subscription };\n\n  if (me) {\n    const data = pushNotificationsSetting.get(me);\n    if (data) {\n      params.data = data;\n    }\n  }\n\n  return api().post('/api/web/push_subscriptions', params).then(response => response.data);\n};\n\n// Last one checks for payload support: https://web-push-book.gauntface.com/chapter-06/01-non-standards-browsers/#no-payload\nconst supportsPushNotifications = ('serviceWorker' in navigator && 'PushManager' in window && 'getKey' in PushSubscription.prototype);\n\nexport function register () {\n  return (dispatch, getState) => {\n    dispatch(setBrowserSupport(supportsPushNotifications));\n\n    if (supportsPushNotifications) {\n      if (!getApplicationServerKey()) {\n        console.error('The VAPID public key is not set. You will not be able to receive Web Push Notifications.');\n        return;\n      }\n\n      getRegistration()\n        .then(getPushSubscription)\n        .then(({ registration, subscription }) => {\n          if (subscription !== null) {\n            // We have a subscription, check if it is still valid\n            const currentServerKey = (new Uint8Array(subscription.options.applicationServerKey)).toString();\n            const subscriptionServerKey = urlBase64ToUint8Array(getApplicationServerKey()).toString();\n            const serverEndpoint = getState().getIn(['push_notifications', 'subscription', 'endpoint']);\n\n            // If the VAPID public key did not change and the endpoint corresponds\n            // to the endpoint saved in the backend, the subscription is valid\n            if (subscriptionServerKey === currentServerKey && subscription.endpoint === serverEndpoint) {\n              return subscription;\n            } else {\n              // Something went wrong, try to subscribe again\n              return unsubscribe({ registration, subscription }).then(subscribe).then(\n                subscription => sendSubscriptionToBackend(subscription));\n            }\n          }\n\n          // No subscription, try to subscribe\n          return subscribe(registration).then(\n            subscription => sendSubscriptionToBackend(subscription));\n        })\n        .then(subscription => {\n          // If we got a PushSubscription (and not a subscription object from the backend)\n          // it means that the backend subscription is valid (and was set during hydration)\n          if (!(subscription instanceof PushSubscription)) {\n            dispatch(setSubscription(subscription));\n            if (me) {\n              pushNotificationsSetting.set(me, { alerts: subscription.alerts });\n            }\n          }\n        })\n        .catch(error => {\n          if (error.code === 20 && error.name === 'AbortError') {\n            console.warn('Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol.');\n          } else if (error.code === 5 && error.name === 'InvalidCharacterError') {\n            console.error('The VAPID public key seems to be invalid:', getApplicationServerKey());\n          }\n\n          // Clear alerts and hide UI settings\n          dispatch(clearSubscription());\n          if (me) {\n            pushNotificationsSetting.remove(me);\n          }\n\n          return getRegistration()\n            .then(getPushSubscription)\n            .then(unsubscribe);\n        })\n        .catch(console.warn);\n    } else {\n      console.warn('Your browser does not support Web Push Notifications.');\n    }\n  };\n}\n\nexport function saveSettings() {\n  return (_, getState) => {\n    const state = getState().get('push_notifications');\n    const subscription = state.get('subscription');\n    const alerts = state.get('alerts');\n    const data = { alerts };\n\n    api().put(`/api/web/push_subscriptions/${subscription.get('id')}`, {\n      data,\n    }).then(() => {\n      if (me) {\n        pushNotificationsSetting.set(me, data);\n      }\n    }).catch(console.warn);\n  };\n}\n","import { saveSettings } from './registerer';\nimport { setAlerts } from './setter';\n\nexport function changeAlerts(path, value) {\n  return dispatch => {\n    dispatch(setAlerts(path, value));\n    dispatch(saveSettings());\n  };\n}\n\nexport {\n  CLEAR_SUBSCRIPTION,\n  SET_BROWSER_SUPPORT,\n  SET_SUBSCRIPTION,\n  SET_ALERTS,\n} from './setter';\nexport { register } from './registerer';\n","export const decode = (base64: string): Uint8Array => {\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n\n  return outputArray;\n};\n","export const SET_BROWSER_SUPPORT = 'PUSH_NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const SET_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_SET_SUBSCRIPTION';\nexport const CLEAR_SUBSCRIPTION = 'PUSH_NOTIFICATIONS_CLEAR_SUBSCRIPTION';\nexport const SET_ALERTS = 'PUSH_NOTIFICATIONS_SET_ALERTS';\n\nexport function setBrowserSupport (value) {\n  return {\n    type: SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setSubscription (subscription) {\n  return {\n    type: SET_SUBSCRIPTION,\n    subscription,\n  };\n}\n\nexport function clearSubscription () {\n  return {\n    type: CLEAR_SUBSCRIPTION,\n  };\n}\n\nexport function setAlerts (path, value) {\n  return dispatch => {\n    dispatch({\n      type: SET_ALERTS,\n      path,\n      value,\n    });\n  };\n}\n","import api from '../../api';\nimport { me } from '../../initial_state';\nimport { pushNotificationsSetting } from '../../settings';\nimport { decode as decodeBase64 } from '../../utils/base64';\n\nimport { setBrowserSupport, setSubscription, clearSubscription } from './setter';\n\n// Taken from https://www.npmjs.com/package/web-push\nconst urlBase64ToUint8Array = (base64String) => {\n  const padding = '='.repeat((4 - base64String.length % 4) % 4);\n  const base64 = (base64String + padding)\n    .replace(/-/g, '+')\n    .replace(/_/g, '/');\n\n  return decodeBase64(base64);\n};\n\nconst getApplicationServerKey = () => document.querySelector('[name=\"applicationServerKey\"]').getAttribute('content');\n\nconst getRegistration = () => navigator.serviceWorker.ready;\n\nconst getPushSubscription = (registration) =>\n  registration.pushManager.getSubscription()\n    .then(subscription => ({ registration, subscription }));\n\nconst subscribe = (registration) =>\n  registration.pushManager.subscribe({\n    userVisibleOnly: true,\n    applicationServerKey: urlBase64ToUint8Array(getApplicationServerKey()),\n  });\n\nconst unsubscribe = ({ registration, subscription }) =>\n  subscription ? subscription.unsubscribe().then(() => registration) : registration;\n\nconst sendSubscriptionToBackend = (subscription) => {\n  const params = { subscription };\n\n  if (me) {\n    const data = pushNotificationsSetting.get(me);\n    if (data) {\n      params.data = data;\n    }\n  }\n\n  return api().post('/api/web/push_subscriptions', params).then(response => response.data);\n};\n\n// Last one checks for payload support: https://web-push-book.gauntface.com/chapter-06/01-non-standards-browsers/#no-payload\nconst supportsPushNotifications = ('serviceWorker' in navigator && 'PushManager' in window && 'getKey' in PushSubscription.prototype);\n\nexport function register () {\n  return (dispatch, getState) => {\n    dispatch(setBrowserSupport(supportsPushNotifications));\n\n    if (supportsPushNotifications) {\n      if (!getApplicationServerKey()) {\n        console.error('The VAPID public key is not set. You will not be able to receive Web Push Notifications.');\n        return;\n      }\n\n      getRegistration()\n        .then(getPushSubscription)\n        .then(({ registration, subscription }) => {\n          if (subscription !== null) {\n            // We have a subscription, check if it is still valid\n            const currentServerKey = (new Uint8Array(subscription.options.applicationServerKey)).toString();\n            const subscriptionServerKey = urlBase64ToUint8Array(getApplicationServerKey()).toString();\n            const serverEndpoint = getState().getIn(['push_notifications', 'subscription', 'endpoint']);\n\n            // If the VAPID public key did not change and the endpoint corresponds\n            // to the endpoint saved in the backend, the subscription is valid\n            if (subscriptionServerKey === currentServerKey && subscription.endpoint === serverEndpoint) {\n              return subscription;\n            } else {\n              // Something went wrong, try to subscribe again\n              return unsubscribe({ registration, subscription }).then(subscribe).then(\n                subscription => sendSubscriptionToBackend(subscription));\n            }\n          }\n\n          // No subscription, try to subscribe\n          return subscribe(registration).then(\n            subscription => sendSubscriptionToBackend(subscription));\n        })\n        .then(subscription => {\n          // If we got a PushSubscription (and not a subscription object from the backend)\n          // it means that the backend subscription is valid (and was set during hydration)\n          if (!(subscription instanceof PushSubscription)) {\n            dispatch(setSubscription(subscription));\n            if (me) {\n              pushNotificationsSetting.set(me, { alerts: subscription.alerts });\n            }\n          }\n        })\n        .catch(error => {\n          if (error.code === 20 && error.name === 'AbortError') {\n            console.warn('Your browser supports Web Push Notifications, but does not seem to implement the VAPID protocol.');\n          } else if (error.code === 5 && error.name === 'InvalidCharacterError') {\n            console.error('The VAPID public key seems to be invalid:', getApplicationServerKey());\n          }\n\n          // Clear alerts and hide UI settings\n          dispatch(clearSubscription());\n          if (me) {\n            pushNotificationsSetting.remove(me);\n          }\n\n          return getRegistration()\n            .then(getPushSubscription)\n            .then(unsubscribe);\n        })\n        .catch(console.warn);\n    } else {\n      console.warn('Your browser does not support Web Push Notifications.');\n    }\n  };\n}\n\nexport function saveSettings() {\n  return (_, getState) => {\n    const state = getState().get('push_notifications');\n    const subscription = state.get('subscription');\n    const alerts = state.get('alerts');\n    const data = { alerts };\n\n    api().put(`/api/web/push_subscriptions/${subscription.get('id')}`, {\n      data,\n    }).then(() => {\n      if (me) {\n        pushNotificationsSetting.set(me, data);\n      }\n    }).catch(console.warn);\n  };\n}\n","import { saveSettings } from './registerer';\nimport { setAlerts } from './setter';\n\nexport function changeAlerts(path, value) {\n  return dispatch => {\n    dispatch(setAlerts(path, value));\n    dispatch(saveSettings());\n  };\n}\n\nexport {\n  CLEAR_SUBSCRIPTION,\n  SET_BROWSER_SUPPORT,\n  SET_SUBSCRIPTION,\n  SET_ALERTS,\n} from './setter';\nexport { register } from './registerer';\n","// NB: This function can still return unsafe HTML\nexport const unescapeHTML = (html: string) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html\n    .replace(/<br\\s*\\/?>/g, '\\n')\n    .replace(/<\\/p><p>/g, '\\n\\n')\n    .replace(/<[^>]*>/g, '');\n  return wrapper.textContent;\n};\n","// APIs for normalizing fullscreen operations. Note that Edge uses\n// the WebKit-prefixed APIs currently (as of Edge 16).\n\nexport const isFullscreen = () => document.fullscreenElement ||\n  document.webkitFullscreenElement ||\n  document.mozFullScreenElement;\n\nexport const exitFullscreen = () => {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  }\n};\n\nexport const requestFullscreen = el => {\n  if (el.requestFullscreen) {\n    el.requestFullscreen();\n  } else if (el.webkitRequestFullscreen) {\n    el.webkitRequestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    el.mozRequestFullScreen();\n  }\n};\n\nexport const attachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.addEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.addEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.addEventListener('mozfullscreenchange', listener);\n  }\n};\n\nexport const detachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.removeEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.removeEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.removeEventListener('mozfullscreenchange', listener);\n  }\n};\n","// APIs for normalizing fullscreen operations. Note that Edge uses\n// the WebKit-prefixed APIs currently (as of Edge 16).\n\nexport const isFullscreen = () => document.fullscreenElement ||\n  document.webkitFullscreenElement ||\n  document.mozFullScreenElement;\n\nexport const exitFullscreen = () => {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  }\n};\n\nexport const requestFullscreen = el => {\n  if (el.requestFullscreen) {\n    el.requestFullscreen();\n  } else if (el.webkitRequestFullscreen) {\n    el.webkitRequestFullscreen();\n  } else if (el.mozRequestFullScreen) {\n    el.mozRequestFullScreen();\n  }\n};\n\nexport const attachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.addEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.addEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.addEventListener('mozfullscreenchange', listener);\n  }\n};\n\nexport const detachFullscreenListener = (listener) => {\n  if ('onfullscreenchange' in document) {\n    document.removeEventListener('fullscreenchange', listener);\n  } else if ('onwebkitfullscreenchange' in document) {\n    document.removeEventListener('webkitfullscreenchange', listener);\n  } else if ('onmozfullscreenchange' in document) {\n    document.removeEventListener('mozfullscreenchange', listener);\n  }\n};\n","// so it doesn't throw if no window or matchMedia\r\nvar w = typeof window !== 'undefined' ? window : { screen: {}, navigator: {} };\r\nvar matchMedia = (w.matchMedia || (function () { return ({ matches: false }); })).bind(w);\r\n// passive events test\r\n// adapted from https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\r\nvar passiveOptionAccessed = false;\r\nvar options = {\r\n    get passive() {\r\n        return (passiveOptionAccessed = true);\r\n    },\r\n};\r\n// have to set and remove a no-op listener instead of null\r\n// (which was used previously), because Edge v15 throws an error\r\n// when providing a null callback.\r\n// https://github.com/rafgraph/detect-passive-events/pull/3\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nvar noop = function () { };\r\nw.addEventListener && w.addEventListener('p', noop, options);\r\nw.removeEventListener && w.removeEventListener('p', noop, false);\r\nvar supportsPassiveEvents = passiveOptionAccessed;\r\nvar supportsPointerEvents = 'PointerEvent' in w;\r\nvar onTouchStartInWindow = 'ontouchstart' in w;\r\nvar touchEventInWindow = 'TouchEvent' in w;\r\n// onTouchStartInWindow is the old-old-legacy way to determine a touch device\r\n// and many websites interpreted it to mean that the device is a touch only phone,\r\n// so today browsers on a desktop/laptop computer with a touch screen (primary input mouse)\r\n// have onTouchStartInWindow as false (to prevent from being confused with a\r\n// touchOnly phone) even though they support the TouchEvents API, so need to check\r\n// both onTouchStartInWindow and touchEventInWindow for TouchEvent support,\r\n// however, some browsers (chromium) support the TouchEvents API even when running on\r\n// a mouse only device (touchEventInWindow true, but onTouchStartInWindow false)\r\n// so the touchEventInWindow check needs to include an coarse pointer media query\r\nvar supportsTouchEvents = onTouchStartInWindow ||\r\n    (touchEventInWindow && matchMedia('(any-pointer: coarse)').matches);\r\nvar hasTouch = (w.navigator.maxTouchPoints || 0) > 0 || supportsTouchEvents;\r\n// userAgent is used as a backup to correct for known device/browser bugs\r\n// and when the browser doesn't support interaction media queries (pointer and hover)\r\n// see https://caniuse.com/css-media-interaction\r\nvar userAgent = w.navigator.userAgent || '';\r\n// iPads now support a mouse that can hover, however the media query interaction\r\n// feature results always say iPads only have a coarse pointer that can't hover\r\n// even when a mouse is connected (anyFine and anyHover are always false),\r\n// this unfortunately indicates a touch only device but iPads should\r\n// be classified as a hybrid device, so determine if it is an iPad\r\n// to indicate it should be treated as a hybrid device with anyHover true\r\nvar isIPad = matchMedia('(pointer: coarse)').matches &&\r\n    // both iPad and iPhone can \"request desktop site\", which sets the userAgent to Macintosh\r\n    // so need to check both userAgents to determine if it is an iOS device\r\n    // and screen size to separate iPad from iPhone\r\n    /iPad|Macintosh/.test(userAgent) &&\r\n    Math.min(w.screen.width || 0, w.screen.height || 0) >= 768;\r\nvar hasCoarsePrimaryPointer = (matchMedia('(pointer: coarse)').matches ||\r\n    // if the pointer is not coarse and not fine then the browser doesn't support\r\n    // interaction media queries (see https://caniuse.com/css-media-interaction)\r\n    // so if it has onTouchStartInWindow assume it has a coarse primary pointer\r\n    (!matchMedia('(pointer: fine)').matches && onTouchStartInWindow)) &&\r\n    // bug in firefox (as of v81) on hybrid windows devices where the interaction media queries\r\n    // always indicate a touch only device (only has a coarse pointer that can't hover)\r\n    // so assume that the primary pointer is not coarse for firefox windows\r\n    !/Windows.*Firefox/.test(userAgent);\r\nvar hasAnyHoverOrAnyFinePointer = matchMedia('(any-pointer: fine)').matches ||\r\n    matchMedia('(any-hover: hover)').matches ||\r\n    // iPads might have an input device that can hover, so assume it has anyHover\r\n    isIPad ||\r\n    // if no onTouchStartInWindow then the browser is indicating that it is not a touch only device\r\n    // see above note for supportsTouchEvents\r\n    !onTouchStartInWindow;\r\n// a hybrid device is one that both hasTouch and\r\n// any input can hover or has a fine pointer, or the primary pointer is not coarse\r\n// if it's not a hybrid, then if it hasTouch it's touchOnly, otherwise it's mouseOnly\r\nvar deviceType = hasTouch && (hasAnyHoverOrAnyFinePointer || !hasCoarsePrimaryPointer)\r\n    ? 'hybrid'\r\n    : hasTouch\r\n        ? 'touchOnly'\r\n        : 'mouseOnly';\r\nvar primaryInput = deviceType === 'mouseOnly'\r\n    ? 'mouse'\r\n    : deviceType === 'touchOnly'\r\n        ? 'touch'\r\n        : // if the device is a hybrid, then if the primary pointer is coarse\r\n            // assume the primaryInput is touch, otherwise assume it's mouse\r\n            hasCoarsePrimaryPointer\r\n                ? 'touch'\r\n                : 'mouse';\n\nexport { deviceType, primaryInput, supportsPassiveEvents, supportsPointerEvents, supportsTouchEvents };\n//# sourceMappingURL=detect-it.esm.js.map\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  importAccounts,\n  revealAccount,\n} from 'flavours/glitch/actions/accounts_typed';\nimport type { ApiAccountJSON } from 'flavours/glitch/api_types/accounts';\nimport { me } from 'flavours/glitch/initial_state';\nimport type { Account } from 'flavours/glitch/models/account';\nimport { createAccountFromServerJSON } from 'flavours/glitch/models/account';\n\nconst initialState = ImmutableMap<string, Account>();\n\nconst normalizeAccount = (\n  state: typeof initialState,\n  account: ApiAccountJSON,\n) => {\n  return state.set(\n    account.id,\n    createAccountFromServerJSON(account).set(\n      'hidden',\n      state.get(account.id)?.hidden === false\n        ? false\n        : account.limited || false,\n    ),\n  );\n};\n\nconst normalizeAccounts = (\n  state: typeof initialState,\n  accounts: ApiAccountJSON[],\n) => {\n  accounts.forEach((account) => {\n    state = normalizeAccount(state, account);\n  });\n\n  return state;\n};\n\nfunction getCurrentUser() {\n  if (!me)\n    throw new Error(\n      'No current user (me) defined when calling `accountsReducer`',\n    );\n\n  return me;\n}\n\nexport const accountsReducer: Reducer<typeof initialState> = (\n  state = initialState,\n  action,\n) => {\n  if (revealAccount.match(action))\n    return state.setIn([action.payload.id, 'hidden'], false);\n  else if (importAccounts.match(action))\n    return normalizeAccounts(state, action.payload.accounts);\n  else if (followAccountSuccess.match(action)) {\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => n + 1),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => n + 1),\n      );\n  } else if (unfollowAccountSuccess.match(action))\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => Math.max(0, n - 1)),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => Math.max(0, n - 1)),\n      );\n  else return state;\n};\n","import { List as ImmutableList } from 'immutable';\n\nimport {\n  ALERT_SHOW,\n  ALERT_DISMISS,\n  ALERT_CLEAR,\n} from '../actions/alerts';\n\nconst initialState = ImmutableList([]);\n\nlet id = 0;\n\nconst addAlert = (state, alert) =>\n  state.push({\n    key: id++,\n    ...alert,\n  });\n\nexport default function alerts(state = initialState, action) {\n  switch(action.type) {\n  case ALERT_SHOW:\n    return addAlert(state, action.alert);\n  case ALERT_DISMISS:\n    return state.filterNot(item => item.key === action.alert.key);\n  case ALERT_CLEAR:\n    return state.clear();\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  ANNOUNCEMENTS_FETCH_REQUEST,\n  ANNOUNCEMENTS_FETCH_SUCCESS,\n  ANNOUNCEMENTS_FETCH_FAIL,\n  ANNOUNCEMENTS_UPDATE,\n  ANNOUNCEMENTS_REACTION_UPDATE,\n  ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  ANNOUNCEMENTS_TOGGLE_SHOW,\n  ANNOUNCEMENTS_DELETE,\n  ANNOUNCEMENTS_DISMISS_SUCCESS,\n} from '../actions/announcements';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  show: false,\n});\n\nconst updateReaction = (state, id, name, updater) => state.update('items', list => list.map(announcement => {\n  if (announcement.get('id') === id) {\n    return announcement.update('reactions', reactions => {\n      const idx = reactions.findIndex(reaction => reaction.get('name') === name);\n\n      if (idx > -1) {\n        return reactions.update(idx, reaction => updater(reaction));\n      }\n\n      return reactions.push(updater(fromJS({ name, count: 0 })));\n    });\n  }\n\n  return announcement;\n}));\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.announcement_id, reaction.name, x => x.set('count', reaction.count));\n\nconst addReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', true).update('count', y => y + 1));\n\nconst removeReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', false).update('count', y => y - 1));\n\nconst sortAnnouncements = list => list.sortBy(x => x.get('starts_at') || x.get('published_at'));\n\nconst updateAnnouncement = (state, announcement) => {\n  const idx = state.get('items').findIndex(x => x.get('id') === announcement.get('id'));\n\n  if (idx > -1) {\n    // Deep merge is used because announcements from the streaming API do not contain\n    // personalized data about which reactions have been selected by the given user,\n    // and that is information we want to preserve\n    return state.update('items', list => sortAnnouncements(list.update(idx, x => x.mergeDeep(announcement))));\n  }\n\n  return state.update('items', list => sortAnnouncements(list.unshift(announcement)));\n};\n\nexport default function announcementsReducer(state = initialState, action) {\n  switch(action.type) {\n  case ANNOUNCEMENTS_TOGGLE_SHOW:\n    return state.withMutations(map => {\n      map.set('show', !map.get('show'));\n    });\n  case ANNOUNCEMENTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case ANNOUNCEMENTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      const items = fromJS(action.announcements);\n\n      map.set('items', items);\n      map.set('isLoading', false);\n    });\n  case ANNOUNCEMENTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case ANNOUNCEMENTS_UPDATE:\n    return updateAnnouncement(state, fromJS(action.announcement));\n  case ANNOUNCEMENTS_REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case ANNOUNCEMENTS_REACTION_ADD_REQUEST:\n  case ANNOUNCEMENTS_REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_REACTION_REMOVE_REQUEST:\n  case ANNOUNCEMENTS_REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_DISMISS_SUCCESS:\n    return updateAnnouncement(state, fromJS({ 'id': action.id, 'read': true }));\n  case ANNOUNCEMENTS_DELETE:\n    return state.update('items', list => {\n      const idx = list.findIndex(x => x.get('id') === action.id);\n\n      if (idx > -1) {\n        return list.delete(idx);\n      }\n\n      return list;\n    });\n  default:\n    return state;\n  }\n}\n","//  This function returns the new value unless it is `null` or\n//  `undefined`, in which case it returns the old one.\nexport function overwrite (oldVal, newVal) {\n  return newVal === null || typeof newVal === 'undefined' ? oldVal : newVal;\n}\n","export function uuid(a?: string): string {\n  return a\n    ? (\n        (a as unknown as number) ^\n        ((Math.random() * 16) >> ((a as unknown as number) / 4))\n      ).toString(16)\n    : // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n      ('' + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport {\n  COMPOSE_MOUNT,\n  COMPOSE_UNMOUNT,\n  COMPOSE_CHANGE,\n  COMPOSE_REPLY,\n  COMPOSE_REPLY_CANCEL,\n  COMPOSE_DIRECT,\n  COMPOSE_MENTION,\n  COMPOSE_SUBMIT_REQUEST,\n  COMPOSE_SUBMIT_SUCCESS,\n  COMPOSE_SUBMIT_FAIL,\n  COMPOSE_UPLOAD_REQUEST,\n  COMPOSE_UPLOAD_SUCCESS,\n  COMPOSE_UPLOAD_FAIL,\n  COMPOSE_UPLOAD_UNDO,\n  COMPOSE_UPLOAD_PROGRESS,\n  COMPOSE_UPLOAD_PROCESSING,\n  THUMBNAIL_UPLOAD_REQUEST,\n  THUMBNAIL_UPLOAD_SUCCESS,\n  THUMBNAIL_UPLOAD_FAIL,\n  THUMBNAIL_UPLOAD_PROGRESS,\n  COMPOSE_SUGGESTIONS_CLEAR,\n  COMPOSE_SUGGESTIONS_READY,\n  COMPOSE_SUGGESTION_SELECT,\n  COMPOSE_SUGGESTION_IGNORE,\n  COMPOSE_SUGGESTION_TAGS_UPDATE,\n  COMPOSE_TAG_HISTORY_UPDATE,\n  COMPOSE_ADVANCED_OPTIONS_CHANGE,\n  COMPOSE_SENSITIVITY_CHANGE,\n  COMPOSE_SPOILERNESS_CHANGE,\n  COMPOSE_SPOILER_TEXT_CHANGE,\n  COMPOSE_VISIBILITY_CHANGE,\n  COMPOSE_LANGUAGE_CHANGE,\n  COMPOSE_COMPOSING_CHANGE,\n  COMPOSE_CONTENT_TYPE_CHANGE,\n  COMPOSE_EMOJI_INSERT,\n  COMPOSE_UPLOAD_CHANGE_REQUEST,\n  COMPOSE_UPLOAD_CHANGE_SUCCESS,\n  COMPOSE_UPLOAD_CHANGE_FAIL,\n  COMPOSE_DOODLE_SET,\n  COMPOSE_TENOR_SET,\n  COMPOSE_RESET,\n  COMPOSE_POLL_ADD,\n  COMPOSE_POLL_REMOVE,\n  COMPOSE_POLL_OPTION_CHANGE,\n  COMPOSE_POLL_SETTINGS_CHANGE,\n  INIT_MEDIA_EDIT_MODAL,\n  COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n  COMPOSE_CHANGE_MEDIA_FOCUS,\n  COMPOSE_CHANGE_MEDIA_ORDER,\n  COMPOSE_SET_STATUS,\n  COMPOSE_FOCUS,\n} from '../actions/compose';\nimport { REDRAFT } from '../actions/statuses';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { me, defaultContentType } from '../initial_state';\nimport { recoverHashtags } from '../utils/hashtag';\nimport { unescapeHTML } from '../utils/html';\nimport { overwrite } from '../utils/js_helpers';\nimport { privacyPreference } from '../utils/privacy_preference';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  mounted: 0,\n  advanced_options: ImmutableMap({\n    do_not_federate: false,\n    threaded_mode: false,\n  }),\n  sensitive: false,\n  spoiler: false,\n  spoiler_text: '',\n  privacy: null,\n  id: null,\n  content_type: defaultContentType || 'text/plain',\n  text: '',\n  focusDate: null,\n  caretPosition: null,\n  preselectDate: null,\n  in_reply_to: null,\n  is_composing: false,\n  is_submitting: false,\n  is_changing_upload: false,\n  is_uploading: false,\n  progress: 0,\n  isUploadingThumbnail: false,\n  thumbnailProgress: 0,\n  media_attachments: ImmutableList(),\n  pending_media_attachments: 0,\n  poll: null,\n  suggestion_token: null,\n  suggestions: ImmutableList(),\n  default_advanced_options: ImmutableMap({\n    do_not_federate: false,\n    threaded_mode: null,  //  Do not reset\n  }),\n  default_privacy: 'public',\n  default_sensitive: false,\n  default_language: 'en',\n  resetFileKey: Math.floor((Math.random() * 0x10000)),\n  idempotencyKey: null,\n  tagHistory: ImmutableList(),\n  tenor: null,\n  media_modal: ImmutableMap({\n    id: null,\n    description: '',\n    focusX: 0,\n    focusY: 0,\n    dirty: false,\n  }),\n  doodle: ImmutableMap({\n    fg: 'rgb(  0,    0,    0)',\n    bg: 'rgb(255,  255,  255)',\n    swapped: false,\n    mode: 'draw',\n    size: 'normal',\n    weight: 2,\n    opacity: 1,\n    adaptiveStroke: true,\n    smoothing: false,\n  }),\n});\n\nconst initialPoll = ImmutableMap({\n  options: ImmutableList(['', '']),\n  expires_in: 24 * 3600,\n  multiple: false,\n});\n\nfunction statusToTextMentions(state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.getIn(['account', 'id']) !== me) {\n    set = set.add(`@${status.getIn(['account', 'acct'])} `);\n  }\n\n  return set.union(status.get('mentions').filterNot(mention => mention.get('id') === me).map(mention => `@${mention.get('acct')} `)).join('');\n}\n\nfunction apiStatusToTextMentions (state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.account.id !== me) {\n    set = set.add(`@${status.account.acct} `);\n  }\n\n  return set.union(status.mentions.filter(\n    mention => mention.id !== me,\n  ).map(\n    mention => `@${mention.acct} `,\n  )).join('');\n}\n\nfunction apiStatusToTextHashtags (state, status) {\n  const text = unescapeHTML(status.content);\n  return ImmutableOrderedSet([]).union(recoverHashtags(status.tags, text).map(\n    (name) => `#${name} `,\n  )).join('');\n}\n\nfunction clearAll(state) {\n  return state.withMutations(map => {\n    map.set('id', null);\n    map.set('text', '');\n    if (defaultContentType) map.set('content_type', defaultContentType);\n    map.set('spoiler', false);\n    map.set('spoiler_text', '');\n    map.set('is_submitting', false);\n    map.set('is_changing_upload', false);\n    map.set('in_reply_to', null);\n    map.update(\n      'advanced_options',\n      map => map.mergeWith(overwrite, state.get('default_advanced_options')),\n    );\n    map.set('privacy', state.get('default_privacy'));\n    map.set('sensitive', state.get('default_sensitive'));\n    map.set('language', state.get('default_language'));\n    map.update('media_attachments', list => list.clear());\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n  });\n}\n\nfunction continueThread (state, status) {\n  return state.withMutations(function (map) {\n    let text = apiStatusToTextMentions(state, status);\n    text = text + apiStatusToTextHashtags(state, status);\n    map.set('text', text);\n    if (status.spoiler_text) {\n      map.set('spoiler', true);\n      map.set('spoiler_text', status.spoiler_text);\n    } else {\n      map.set('spoiler', false);\n      map.set('spoiler_text', '');\n    }\n    map.set('is_submitting', false);\n    map.set('in_reply_to', status.id);\n    map.update(\n      'advanced_options',\n      map => map.merge(new ImmutableMap({ do_not_federate: status.local_only })),\n    );\n    map.set('privacy', status.visibility);\n    map.set('sensitive', false);\n    map.update('media_attachments', list => list.clear());\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', null);\n    map.set('preselectDate', new Date());\n  });\n}\n\nfunction appendMedia(state, media, file) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    if (media.get('type') === 'image') {\n      media = media.set('file', file);\n    }\n    map.update('media_attachments', list => list.push(media.set('unattached', true)));\n    map.set('is_uploading', false);\n    map.set('is_processing', false);\n    map.set('resetFileKey', Math.floor((Math.random() * 0x10000)));\n    map.set('idempotencyKey', uuid());\n    map.update('pending_media_attachments', n => n - 1);\n\n    if (prevSize === 0 && (state.get('default_sensitive') || state.get('spoiler'))) {\n      map.set('sensitive', true);\n    }\n  });\n}\n\nfunction removeMedia(state, mediaId) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    map.update('media_attachments', list => list.filterNot(item => item.get('id') === mediaId));\n    map.set('idempotencyKey', uuid());\n\n    if (prevSize === 1) {\n      map.set('sensitive', false);\n    }\n  });\n}\n\nconst insertSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position)}${completion} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    if (path.length === 1 && path[0] === 'text') {\n      map.set('focusDate', new Date());\n      map.set('caretPosition', position + completion.length + 1);\n    }\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst ignoreSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position + token.length)} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', position + token.length + 1);\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst sortHashtagsByUse = (state, tags) => {\n  const personalHistory = state.get('tagHistory').map(tag => tag.toLowerCase());\n\n  const tagsWithLowercase = tags.map(t => ({ ...t, lowerName: t.name.toLowerCase() }));\n  const sorted = tagsWithLowercase.sort((a, b) => {\n    const usedA = personalHistory.includes(a.lowerName);\n    const usedB = personalHistory.includes(b.lowerName);\n\n    if (usedA === usedB) {\n      return 0;\n    } else if (usedA && !usedB) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n  sorted.forEach(tag => delete tag.lowerName);\n  return sorted;\n};\n\nconst insertEmoji = (state, position, emojiData, needsSpace) => {\n  const oldText = state.get('text');\n  const emoji = needsSpace ? ' ' + emojiData.native : emojiData.native;\n\n  return state.merge({\n    text: `${oldText.slice(0, position)}${emoji} ${oldText.slice(position)}`,\n    focusDate: new Date(),\n    caretPosition: position + emoji.length + 1,\n    idempotencyKey: uuid(),\n  });\n};\n\nconst hydrate = (state, hydratedState) => {\n  state = clearAll(state.merge(hydratedState));\n\n  if (hydratedState.get('text')) {\n    state = state.set('text', hydratedState.get('text')).set('focusDate', new Date());\n  }\n\n  return state;\n};\n\nconst domParser = new DOMParser();\n\nconst expandMentions = status => {\n  const fragment = domParser.parseFromString(status.get('content'), 'text/html').documentElement;\n\n  status.get('mentions').forEach(mention => {\n    fragment.querySelector(`a[href=\"${mention.get('url')}\"]`).textContent = `@${mention.get('acct')}`;\n  });\n\n  return fragment.innerHTML;\n};\n\nconst expiresInFromExpiresAt = expires_at => {\n  if (!expires_at) return 24 * 3600;\n  const delta = (new Date(expires_at).getTime() - Date.now()) / 1000;\n  return [300, 1800, 3600, 21600, 86400, 259200, 604800].find(expires_in => expires_in >= delta) || 24 * 3600;\n};\n\nconst mergeLocalHashtagResults = (suggestions, prefix, tagHistory) => {\n  prefix = prefix.toLowerCase();\n  if (suggestions.length < 4) {\n    const localTags = tagHistory.filter(tag => tag.toLowerCase().startsWith(prefix) && !suggestions.some(suggestion => suggestion.type === 'hashtag' && suggestion.name.toLowerCase() === tag.toLowerCase()));\n    return suggestions.concat(localTags.slice(0, 4 - suggestions.length).toJS().map(tag => ({ type: 'hashtag', name: tag })));\n  } else {\n    return suggestions;\n  }\n};\n\nconst normalizeSuggestions = (state, { accounts, emojis, tags, token }) => {\n  if (accounts) {\n    return accounts.map(item => ({ id: item.id, type: 'account' }));\n  } else if (emojis) {\n    return emojis.map(item => ({ ...item, type: 'emoji' }));\n  } else {\n    return mergeLocalHashtagResults(sortHashtagsByUse(state, tags.map(item => ({ ...item, type: 'hashtag' }))), token.slice(1), state.get('tagHistory'));\n  }\n};\n\nconst updateSuggestionTags = (state, token) => {\n  const prefix = token.slice(1);\n\n  const suggestions = state.get('suggestions').toJS();\n  return state.merge({\n    suggestions: ImmutableList(mergeLocalHashtagResults(suggestions, prefix, state.get('tagHistory'))),\n    suggestion_token: token,\n  });\n};\n\nconst updatePoll = (state, index, value, maxOptions) => state.updateIn(['poll', 'options'], options => {\n  const tmp = options.set(index, value).filterNot(x => x.trim().length === 0);\n\n  if (tmp.size === 0) {\n    return tmp.push('').push('');\n  } else if (tmp.size < maxOptions) {\n    return tmp.push('');\n  }\n\n  return tmp;\n});\n\nexport default function compose(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('compose'));\n  case COMPOSE_MOUNT:\n    return state.set('mounted', state.get('mounted') + 1);\n  case COMPOSE_UNMOUNT:\n    return state\n      .set('mounted', Math.max(state.get('mounted') - 1, 0))\n      .set('is_composing', false);\n  case COMPOSE_ADVANCED_OPTIONS_CHANGE:\n    return state\n      .set('advanced_options', state.get('advanced_options').set(action.option, !!overwrite(!state.getIn(['advanced_options', action.option]), action.value)))\n      .set('idempotencyKey', uuid());\n  case COMPOSE_SENSITIVITY_CHANGE:\n    return state.withMutations(map => {\n      if (!state.get('spoiler')) {\n        map.set('sensitive', !state.get('sensitive'));\n      }\n\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SPOILERNESS_CHANGE:\n    return state.withMutations(map => {\n      map.set('spoiler', !state.get('spoiler'));\n      map.set('idempotencyKey', uuid());\n\n      if (state.get('media_attachments').size >= 1 && !state.get('default_sensitive')) {\n        map.set('sensitive', !state.get('spoiler'));\n      }\n    });\n  case COMPOSE_SPOILER_TEXT_CHANGE:\n    return state\n      .set('spoiler_text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_VISIBILITY_CHANGE:\n    return state\n      .set('privacy', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CONTENT_TYPE_CHANGE:\n    return state\n      .set('content_type', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CHANGE:\n    return state\n      .set('text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_COMPOSING_CHANGE:\n    return state.set('is_composing', action.value);\n  case COMPOSE_REPLY:\n    return state.withMutations(map => {\n      map.set('id', null);\n      map.set('in_reply_to', action.status.get('id'));\n      map.set('text', statusToTextMentions(state, action.status));\n      map.set('privacy', privacyPreference(action.status.get('visibility'), state.get('default_privacy')));\n      map.update(\n        'advanced_options',\n        map => map.merge(new ImmutableMap({ do_not_federate: !!action.status.get('local_only') })),\n      );\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('preselectDate', new Date());\n      map.set('idempotencyKey', uuid());\n\n      map.update('media_attachments', list => list.filter(media => media.get('unattached')));\n\n      if (action.status.get('language') && !action.status.has('translation')) {\n        map.set('language', action.status.get('language'));\n      } else {\n        map.set('language', state.get('default_language'));\n      }\n\n      if (action.status.get('spoiler_text').length > 0) {\n        let spoiler_text = action.status.get('spoiler_text');\n        if (action.prependCWRe && !spoiler_text.match(/^re[: ]/i)) {\n          spoiler_text = 're: '.concat(spoiler_text);\n        }\n        map.set('spoiler', true);\n        map.set('spoiler_text', spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n    });\n  case COMPOSE_REPLY_CANCEL:\n    state = state.setIn(['advanced_options', 'threaded_mode'], false);\n    // eslint-disable-next-line no-fallthrough -- fall-through to `COMPOSE_RESET` is intended\n  case COMPOSE_RESET:\n    return state.withMutations(map => {\n      map.set('in_reply_to', null);\n      if (defaultContentType) map.set('content_type', defaultContentType);\n      map.set('text', '');\n      map.set('spoiler', false);\n      map.set('spoiler_text', '');\n      map.set('privacy', state.get('default_privacy'));\n      map.set('id', null);\n      map.set('poll', null);\n      map.set('language', state.get('default_language'));\n      map.update(\n        'advanced_options',\n        map => map.mergeWith(overwrite, state.get('default_advanced_options')),\n      );\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUBMIT_REQUEST:\n    return state.set('is_submitting', true);\n  case COMPOSE_UPLOAD_CHANGE_REQUEST:\n    return state.set('is_changing_upload', true);\n  case COMPOSE_SUBMIT_SUCCESS:\n    return action.status && state.getIn(['advanced_options', 'threaded_mode']) ? continueThread(state, action.status) : clearAll(state);\n  case COMPOSE_SUBMIT_FAIL:\n    return state.set('is_submitting', false);\n  case COMPOSE_UPLOAD_CHANGE_FAIL:\n    return state.set('is_changing_upload', false);\n  case COMPOSE_UPLOAD_REQUEST:\n    return state.set('is_uploading', true).update('pending_media_attachments', n => n + 1);\n  case COMPOSE_UPLOAD_PROCESSING:\n    return state.set('is_processing', true);\n  case COMPOSE_UPLOAD_SUCCESS:\n    return appendMedia(state, fromJS(action.media), action.file);\n  case COMPOSE_UPLOAD_FAIL:\n    return state.set('is_uploading', false).set('is_processing', false).update('pending_media_attachments', n => n - 1);\n  case COMPOSE_UPLOAD_UNDO:\n    return removeMedia(state, action.media_id);\n  case COMPOSE_UPLOAD_PROGRESS:\n    return state.set('progress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_REQUEST:\n    return state.set('isUploadingThumbnail', true);\n  case THUMBNAIL_UPLOAD_PROGRESS:\n    return state.set('thumbnailProgress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_FAIL:\n    return state.set('isUploadingThumbnail', false);\n  case THUMBNAIL_UPLOAD_SUCCESS:\n    return state\n      .set('isUploadingThumbnail', false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media);\n        }\n\n        return item;\n      }));\n  case INIT_MEDIA_EDIT_MODAL:\n    const media =  state.get('media_attachments').find(item => item.get('id') === action.id);\n    return state.set('media_modal', ImmutableMap({\n      id: action.id,\n      description: media.get('description') || '',\n      focusX: media.getIn(['meta', 'focus', 'x'], 0),\n      focusY: media.getIn(['meta', 'focus', 'y'], 0),\n      dirty: false,\n    }));\n  case COMPOSE_CHANGE_MEDIA_DESCRIPTION:\n    return state.setIn(['media_modal', 'description'], action.description).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_CHANGE_MEDIA_FOCUS:\n    return state.setIn(['media_modal', 'focusX'], action.focusX).setIn(['media_modal', 'focusY'], action.focusY).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_MENTION:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_DIRECT:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('privacy', 'direct');\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', ImmutableList(), list => list.clear()).set('suggestion_token', null);\n  case COMPOSE_SUGGESTIONS_READY:\n    return state.set('suggestions', ImmutableList(normalizeSuggestions(state, action))).set('suggestion_token', action.token);\n  case COMPOSE_SUGGESTION_SELECT:\n    return insertSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_IGNORE:\n    return ignoreSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_TAGS_UPDATE:\n    return updateSuggestionTags(state, action.token);\n  case COMPOSE_TAG_HISTORY_UPDATE:\n    return state.set('tagHistory', fromJS(action.tags));\n  case timelineDelete.type:\n    if (action.payload.statusId === state.get('in_reply_to')) {\n      return state.set('in_reply_to', null);\n    } else if (action.payload.statusId === state.get('id')) {\n      return state.set('id', null);\n    } else {\n      return state;\n    }\n  case COMPOSE_EMOJI_INSERT:\n    return insertEmoji(state, action.position, action.emoji, action.needsSpace);\n  case COMPOSE_UPLOAD_CHANGE_SUCCESS:\n    return state\n      .set('is_changing_upload', false)\n      .setIn(['media_modal', 'dirty'], false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media).set('unattached', !action.attached);\n        }\n\n        return item;\n      }));\n  case COMPOSE_DOODLE_SET:\n    return state.mergeIn(['doodle'], action.options);\n  case COMPOSE_TENOR_SET:\n    return state.mergeIn(['tenor'], action.options);\n  case REDRAFT:\n    const do_not_federate = !!action.status.get('local_only');\n    let text = action.raw_text || unescapeHTML(expandMentions(action.status));\n    if (do_not_federate) text = text.replace(/ ?👁\\ufe0f?\\u200b?$/, '');\n    return state.withMutations(map => {\n      map.set('text', text);\n      map.set('content_type', action.content_type || 'text/plain');\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments').map((media) => media.set('unattached', true)));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n      map.update(\n        'advanced_options',\n        map => map.merge(new ImmutableMap({ do_not_federate })),\n      );\n      map.set('id', null);\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n\n        if (map.get('media_attachments').size >= 1) {\n          map.set('sensitive', true);\n        }\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_SET_STATUS:\n    return state.withMutations(map => {\n      map.set('id', action.status.get('id'));\n      map.set('text', action.text);\n      map.set('content_type', action.content_type || 'text/plain');\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments'));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n\n      if (action.spoiler_text.length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_POLL_ADD:\n    return state.set('poll', initialPoll);\n  case COMPOSE_POLL_REMOVE:\n    return state.set('poll', null);\n  case COMPOSE_POLL_OPTION_CHANGE:\n    return updatePoll(state, action.index, action.title, action.maxOptions);\n  case COMPOSE_POLL_SETTINGS_CHANGE:\n    return state.update('poll', poll => poll.set('expires_in', action.expiresIn).set('multiple', action.isMultiple));\n  case COMPOSE_LANGUAGE_CHANGE:\n    return state.set('language', action.language);\n  case COMPOSE_FOCUS:\n    return state.set('focusDate', new Date()).update('text', text => text.length > 0 ? text : action.defaultText);\n  case COMPOSE_CHANGE_MEDIA_ORDER:\n    return state.update('media_attachments', list => {\n      const indexA = list.findIndex(x => x.get('id') === action.a);\n      const moveItem = list.get(indexA);\n      const indexB = list.findIndex(x => x.get('id') === action.b);\n\n      return list.splice(indexA, 1).splice(indexB, 0, moveItem);\n    });\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from '../actions/accounts';\nimport { CONTEXT_FETCH_SUCCESS } from '../actions/statuses';\nimport { TIMELINE_UPDATE } from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  inReplyTos: ImmutableMap(),\n  replies: ImmutableMap(),\n});\n\nconst normalizeContext = (immutableState, id, ancestors, descendants) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      function addReply({ id, in_reply_to_id }) {\n        if (in_reply_to_id && !inReplyTos.has(id)) {\n\n          replies.update(in_reply_to_id, ImmutableList(), siblings => {\n            const index = siblings.findLastIndex(sibling => compareId(sibling, id) < 0);\n            return siblings.insert(index + 1, id);\n          });\n\n          inReplyTos.set(id, in_reply_to_id);\n        }\n      }\n\n      // We know in_reply_to_id of statuses but `id` itself.\n      // So we assume that the status of the id replies to last ancestors.\n\n      ancestors.forEach(addReply);\n\n      if (ancestors[0]) {\n        addReply({ id, in_reply_to_id: ancestors[ancestors.length - 1].id });\n      }\n\n      descendants.forEach(addReply);\n    }));\n  }));\n});\n\nconst deleteFromContexts = (immutableState, ids) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      ids.forEach(id => {\n        const inReplyToIdOfId = inReplyTos.get(id);\n        const repliesOfId = replies.get(id);\n        const siblings = replies.get(inReplyToIdOfId);\n\n        if (siblings) {\n          replies.set(inReplyToIdOfId, siblings.filterNot(sibling => sibling === id));\n        }\n\n\n        if (repliesOfId) {\n          repliesOfId.forEach(reply => inReplyTos.delete(reply));\n        }\n\n        inReplyTos.delete(id);\n        replies.delete(id);\n      });\n    }));\n  }));\n});\n\nconst filterContexts = (state, relationship, statuses) => {\n  const ownedStatusIds = statuses\n    .filter(status => status.get('account') === relationship.id)\n    .map(status => status.get('id'));\n\n  return deleteFromContexts(state, ownedStatusIds);\n};\n\nconst updateContext = (state, status) => {\n  if (status.in_reply_to_id) {\n    return state.withMutations(mutable => {\n      const replies = mutable.getIn(['replies', status.in_reply_to_id], ImmutableList());\n\n      mutable.setIn(['inReplyTos', status.id], status.in_reply_to_id);\n\n      if (!replies.includes(status.id)) {\n        mutable.setIn(['replies', status.in_reply_to_id], replies.push(status.id));\n      }\n    });\n  }\n\n  return state;\n};\n\nexport default function replies(state = initialState, action) {\n  switch(action.type) {\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterContexts(state, action.payload.relationship, action.payload.statuses);\n  case CONTEXT_FETCH_SUCCESS:\n    return normalizeContext(state, action.id, action.ancestors, action.descendants);\n  case timelineDelete.type:\n    return deleteFromContexts(state, [action.payload.statusId]);\n  case TIMELINE_UPDATE:\n    return updateContext(state, action.status);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { blockAccountSuccess, muteAccountSuccess } from 'flavours/glitch/actions/accounts';\nimport { blockDomainSuccess } from 'flavours/glitch/actions/domain_blocks';\n\nimport {\n  CONVERSATIONS_MOUNT,\n  CONVERSATIONS_UNMOUNT,\n  CONVERSATIONS_FETCH_REQUEST,\n  CONVERSATIONS_FETCH_SUCCESS,\n  CONVERSATIONS_FETCH_FAIL,\n  CONVERSATIONS_UPDATE,\n  CONVERSATIONS_READ,\n  CONVERSATIONS_DELETE_SUCCESS,\n} from '../actions/conversations';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  hasMore: true,\n  mounted: 0,\n});\n\nconst conversationToMap = item => ImmutableMap({\n  id: item.id,\n  unread: item.unread,\n  accounts: ImmutableList(item.accounts.map(a => a.id)),\n  last_status: item.last_status ? item.last_status.id : null,\n});\n\nconst updateConversation = (state, item) => state.update('items', list => {\n  const index   = list.findIndex(x => x.get('id') === item.id);\n  const newItem = conversationToMap(item);\n\n  if (index === -1) {\n    return list.unshift(newItem);\n  } else {\n    return list.set(index, newItem);\n  }\n});\n\nconst expandNormalizedConversations = (state, conversations, next, isLoadingRecent) => {\n  let items = ImmutableList(conversations.map(conversationToMap));\n\n  return state.withMutations(mutable => {\n    if (!items.isEmpty()) {\n      mutable.update('items', list => {\n        list = list.map(oldItem => {\n          const newItemIndex = items.findIndex(x => x.get('id') === oldItem.get('id'));\n\n          if (newItemIndex === -1) {\n            return oldItem;\n          }\n\n          const newItem = items.get(newItemIndex);\n          items = items.delete(newItemIndex);\n\n          return newItem;\n        });\n\n        list = list.concat(items);\n\n        return list.sortBy(x => x.get('last_status'), (a, b) => {\n          if(a === null || b === null) {\n            return -1;\n          }\n\n          return compareId(a, b) * -1;\n        });\n      });\n    }\n\n    if (!next && !isLoadingRecent) {\n      mutable.set('hasMore', false);\n    }\n\n    mutable.set('isLoading', false);\n  });\n};\n\nconst filterConversations = (state, accountIds) => {\n  return state.update('items', list => list.filterNot(item => item.get('accounts').some(accountId => accountIds.includes(accountId))));\n};\n\nexport default function conversations(state = initialState, action) {\n  switch (action.type) {\n  case CONVERSATIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case CONVERSATIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case CONVERSATIONS_FETCH_SUCCESS:\n    return expandNormalizedConversations(state, action.conversations, action.next, action.isLoadingRecent);\n  case CONVERSATIONS_UPDATE:\n    return updateConversation(state, action.conversation);\n  case CONVERSATIONS_MOUNT:\n    return state.update('mounted', count => count + 1);\n  case CONVERSATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case CONVERSATIONS_READ:\n    return state.update('items', list => list.map(item => {\n      if (item.get('id') === action.id) {\n        return item.set('unread', false);\n      }\n\n      return item;\n    }));\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterConversations(state, [action.payload.relationship.id]);\n  case blockDomainSuccess.type:\n    return filterConversations(state, action.payload.accounts);\n  case CONVERSATIONS_DELETE_SUCCESS:\n    return state.update('items', list => list.filterNot(item => item.get('id') === action.id));\n  default:\n    return state;\n  }\n}\n","import { List as ImmutableList, fromJS as ConvertToImmutable } from 'immutable';\n\nimport { CUSTOM_EMOJIS_FETCH_SUCCESS } from '../actions/custom_emojis';\nimport { buildCustomEmojis } from '../features/emoji/emoji';\nimport { search as emojiSearch } from '../features/emoji/emoji_mart_search_light';\n\nconst initialState = ImmutableList([]);\n\nexport default function custom_emojis(state = initialState, action) {\n  if(action.type === CUSTOM_EMOJIS_FETCH_SUCCESS) {\n    state = ConvertToImmutable(action.custom_emojis);\n    emojiSearch('', { custom: buildCustomEmojis(state) });\n  }\n\n  return state;\n}\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nimport {\n  DOMAIN_BLOCKS_FETCH_SUCCESS,\n  DOMAIN_BLOCKS_EXPAND_SUCCESS,\n  unblockDomainSuccess\n} from '../actions/domain_blocks';\n\nconst initialState = ImmutableMap({\n  blocks: ImmutableMap({\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nexport default function domainLists(state = initialState, action) {\n  switch(action.type) {\n  case DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['blocks', 'items'], ImmutableOrderedSet(action.domains)).setIn(['blocks', 'next'], action.next);\n  case DOMAIN_BLOCKS_EXPAND_SUCCESS:\n    return state.updateIn(['blocks', 'items'], set => set.union(action.domains)).setIn(['blocks', 'next'], action.next);\n  case unblockDomainSuccess.type:\n    return state.updateIn(['blocks', 'items'], set => set.delete(action.payload.domain));\n  default:\n    return state;\n  }\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { closeDropdownMenu, openDropdownMenu } from '../actions/dropdown_menu';\n\ninterface DropdownMenuState {\n  openId: string | null;\n  keyboard: boolean;\n  scrollKey: string | null;\n}\n\nconst initialState: DropdownMenuState = {\n  openId: null,\n  keyboard: false,\n  scrollKey: null,\n};\n\nexport const dropdownMenuReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(\n      openDropdownMenu,\n      (state, { payload: { id, keyboard, scrollKey } }) => {\n        state.openId = id;\n        state.keyboard = keyboard;\n        state.scrollKey = scrollKey;\n      },\n    )\n    .addCase(closeDropdownMenu, (state, { payload: { id } }) => {\n      if (state.openId === id) {\n        state.openId = null;\n        state.scrollKey = null;\n      }\n    });\n});\n","import { Map as ImmutableMap, is, fromJS } from 'immutable';\n\nimport { FILTERS_FETCH_SUCCESS, FILTERS_CREATE_SUCCESS } from '../actions/filters';\nimport { FILTERS_IMPORT } from '../actions/importer';\n\nconst normalizeFilter = (state, filter) => {\n  const normalizedFilter = fromJS({\n    id: filter.id,\n    title: filter.title,\n    context: filter.context,\n    filter_action: filter.filter_action,\n    keywords: filter.keywords,\n    expires_at: filter.expires_at ? Date.parse(filter.expires_at) : null,\n  });\n\n  if (is(state.get(filter.id), normalizedFilter)) {\n    return state;\n  } else {\n    // Do not overwrite keywords when receiving a partial filter\n    return state.update(filter.id, ImmutableMap(), (old) => (\n      old.mergeWith(((old_value, new_value) => (new_value === undefined ? old_value : new_value)), normalizedFilter)\n    ));\n  }\n};\n\nconst normalizeFilters = (state, filters) => {\n  filters.forEach(filter => {\n    state = normalizeFilter(state, filter);\n  });\n\n  return state;\n};\n\nexport default function filters(state = ImmutableMap(), action) {\n  switch(action.type) {\n  case FILTERS_CREATE_SUCCESS:\n    return normalizeFilter(state, action.filter);\n  case FILTERS_FETCH_SUCCESS:\n    return normalizeFilters(ImmutableMap(), action.filters);\n  case FILTERS_IMPORT:\n    return normalizeFilters(state, action.filters);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n  FOLLOWED_HASHTAGS_FETCH_FAIL,\n  FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n  FOLLOWED_HASHTAGS_EXPAND_FAIL,\n} from 'flavours/glitch/actions/tags';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  next: null,\n});\n\nexport default function followed_tags(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWED_HASHTAGS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.followed_tags));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case FOLLOWED_HASHTAGS_EXPAND_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_EXPAND_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', set => set.concat(fromJS(action.followed_tags)));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_EXPAND_FAIL:\n    return state.set('isLoading', false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { HEIGHT_CACHE_SET, HEIGHT_CACHE_CLEAR } from '../actions/height_cache';\n\nconst initialState = ImmutableMap();\n\nconst setHeight = (state, key, id, height) => {\n  return state.update(key, ImmutableMap(), map => map.set(id, height));\n};\n\nconst clearHeights = () => {\n  return ImmutableMap();\n};\n\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case HEIGHT_CACHE_SET:\n    return setHeight(state, action.key, action.id, action.height);\n  case HEIGHT_CACHE_CLEAR:\n    return clearHeights();\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport { HISTORY_FETCH_REQUEST, HISTORY_FETCH_SUCCESS, HISTORY_FETCH_FAIL } from 'flavours/glitch/actions/history';\n\nconst initialHistory = ImmutableMap({\n  loading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap();\n\nexport default function history(state = initialState, action) {\n  switch(action.type) {\n  case HISTORY_FETCH_REQUEST:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', true);\n      map.set('items', ImmutableList());\n    }));\n  case HISTORY_FETCH_SUCCESS:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', false);\n      map.set('items', fromJS(action.history.map((x, i) => ({ ...x, account: x.account.id, original: i === 0 })).reverse()));\n    }));\n  case HISTORY_FETCH_FAIL:\n    return state.update(action.statusId, initialHistory, history => history.set('loading', false));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport {\n  LIST_ADDER_RESET,\n  LIST_ADDER_SETUP,\n  LIST_ADDER_LISTS_FETCH_REQUEST,\n  LIST_ADDER_LISTS_FETCH_SUCCESS,\n  LIST_ADDER_LISTS_FETCH_FAIL,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  accountId: null,\n\n  lists: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n});\n\nexport default function listAdderReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_ADDER_RESET:\n    return initialState;\n  case LIST_ADDER_SETUP:\n    return state.withMutations(map => {\n      map.set('accountId', action.account.get('id'));\n    });\n  case LIST_ADDER_LISTS_FETCH_REQUEST:\n    return state.setIn(['lists', 'isLoading'], true);\n  case LIST_ADDER_LISTS_FETCH_FAIL:\n    return state.setIn(['lists', 'isLoading'], false);\n  case LIST_ADDER_LISTS_FETCH_SUCCESS:\n    return state.update('lists', lists => lists.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.lists.map(item => item.id)));\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.unshift(action.listId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.filterNot(item => item === action.listId));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport {\n  LIST_CREATE_REQUEST,\n  LIST_CREATE_FAIL,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_REQUEST,\n  LIST_UPDATE_FAIL,\n  LIST_UPDATE_SUCCESS,\n  LIST_EDITOR_RESET,\n  LIST_EDITOR_SETUP,\n  LIST_EDITOR_TITLE_CHANGE,\n  LIST_ACCOUNTS_FETCH_REQUEST,\n  LIST_ACCOUNTS_FETCH_SUCCESS,\n  LIST_ACCOUNTS_FETCH_FAIL,\n  LIST_EDITOR_SUGGESTIONS_READY,\n  LIST_EDITOR_SUGGESTIONS_CLEAR,\n  LIST_EDITOR_SUGGESTIONS_CHANGE,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  listId: null,\n  isSubmitting: false,\n  isChanged: false,\n  title: '',\n  isExclusive: false,\n\n  accounts: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n\n  suggestions: ImmutableMap({\n    value: '',\n    items: ImmutableList(),\n  }),\n});\n\nexport default function listEditorReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_EDITOR_RESET:\n    return initialState;\n  case LIST_EDITOR_SETUP:\n    return state.withMutations(map => {\n      map.set('listId', action.list.get('id'));\n      map.set('title', action.list.get('title'));\n      map.set('isExclusive', action.list.get('is_exclusive'));\n      map.set('isSubmitting', false);\n    });\n  case LIST_EDITOR_TITLE_CHANGE:\n    return state.withMutations(map => {\n      map.set('title', action.value);\n      map.set('isChanged', true);\n    });\n  case LIST_CREATE_REQUEST:\n  case LIST_UPDATE_REQUEST:\n    return state.withMutations(map => {\n      map.set('isSubmitting', true);\n      map.set('isChanged', false);\n    });\n  case LIST_CREATE_FAIL:\n  case LIST_UPDATE_FAIL:\n    return state.set('isSubmitting', false);\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return state.withMutations(map => {\n      map.set('isSubmitting', false);\n      map.set('listId', action.list.id);\n    });\n  case LIST_ACCOUNTS_FETCH_REQUEST:\n    return state.setIn(['accounts', 'isLoading'], true);\n  case LIST_ACCOUNTS_FETCH_FAIL:\n    return state.setIn(['accounts', 'isLoading'], false);\n  case LIST_ACCOUNTS_FETCH_SUCCESS:\n    return state.update('accounts', accounts => accounts.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.accounts.map(item => item.id)));\n    }));\n  case LIST_EDITOR_SUGGESTIONS_CHANGE:\n    return state.setIn(['suggestions', 'value'], action.value);\n  case LIST_EDITOR_SUGGESTIONS_READY:\n    return state.setIn(['suggestions', 'items'], ImmutableList(action.accounts.map(item => item.id)));\n  case LIST_EDITOR_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', suggestions => suggestions.withMutations(map => {\n      map.set('items', ImmutableList());\n      map.set('value', '');\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.unshift(action.accountId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.filterNot(item => item === action.accountId));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport {\n  LIST_FETCH_SUCCESS,\n  LIST_FETCH_FAIL,\n  LISTS_FETCH_SUCCESS,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_SUCCESS,\n  LIST_DELETE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap();\n\nconst normalizeList = (state, list) => state.set(list.id, fromJS(list));\n\nconst normalizeLists = (state, lists) => {\n  lists.forEach(list => {\n    state = normalizeList(state, list);\n  });\n\n  return state;\n};\n\nexport default function lists(state = initialState, action) {\n  switch(action.type) {\n  case LIST_FETCH_SUCCESS:\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return normalizeList(state, action.list);\n  case LISTS_FETCH_SUCCESS:\n    return normalizeLists(state, action.lists);\n  case LIST_DELETE_SUCCESS:\n  case LIST_FETCH_FAIL:\n    return state.set(action.id, false);\n  default:\n    return state;\n  }\n}\n","//  Package imports.\nimport { Map as ImmutableMap } from 'immutable';\n\n//  Our imports.\nimport { LOCAL_SETTING_CHANGE, LOCAL_SETTING_DELETE } from 'flavours/glitch/actions/local_settings';\nimport { STORE_HYDRATE } from 'flavours/glitch/actions/store';\n\nconst initialState = ImmutableMap({\n  stretch   : true,\n  side_arm  : 'none',\n  side_arm_reply_mode : 'keep',\n  show_reply_count : false,\n  always_show_spoilers_field: false,\n  confirm_missing_media_description: false,\n  confirm_boost_missing_media_description: false,\n  confirm_before_clearing_draft: true,\n  prepend_cw_re: false,\n  preselect_on_reply: false,\n  inline_preview_cards: true,\n  hicolor_privacy_icons: false,\n  show_content_type_choice: false,\n  tag_misleading_links: true,\n  rewrite_mentions: 'no',\n  content_warnings : ImmutableMap({\n    filter       : null,\n    media_outside: false,\n    shared_state : false,\n  }),\n  collapsed : ImmutableMap({\n    enabled     : true,\n    auto        : ImmutableMap({\n      all              : false,\n      notifications    : false,\n      lengthy          : true,\n      reblogs          : false,\n      replies          : false,\n      media            : false,\n      height           : 400,\n    }),\n    backgrounds : ImmutableMap({\n      user_backgrounds : false,\n      preview_images   : false,\n    }),\n    show_action_bar : true,\n  }),\n  media     : ImmutableMap({\n    letterbox        : true,\n    fullwidth        : true,\n    reveal_behind_cw : false,\n    pop_in_player    : true,\n    pop_in_position  : 'right',\n  }),\n  notifications : ImmutableMap({\n    favicon_badge : false,\n    tab_badge     : true,\n  }),\n  status_icons : ImmutableMap({\n    language:   true,\n    reply:      true,\n    local_only: true,\n    media:      true,\n    visibility: true,\n  }),\n  show_published_toast: true,\n});\n\nconst hydrate = (state, localSettings) => state.mergeDeep(localSettings);\n\nexport default function localSettings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('local_settings'));\n  case LOCAL_SETTING_CHANGE:\n    return state.setIn(action.key, action.value);\n  case LOCAL_SETTING_DELETE:\n    return state.deleteIn(action.key);\n  default:\n    return state;\n  }\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport {\n  submitMarkersAction,\n  fetchMarkers,\n} from 'flavours/glitch/actions/markers';\nimport { compareId } from 'flavours/glitch/compare_id';\n\nconst initialState = {\n  home: '0',\n  notifications: '0',\n};\n\nexport const markersReducer = createReducer(initialState, (builder) => {\n  builder.addCase(\n    submitMarkersAction.fulfilled,\n    (state, { payload: { home, notifications } }) => {\n      if (home) state.home = home;\n      if (notifications) state.notifications = notifications;\n    },\n  );\n  builder.addCase(\n    fetchMarkers.fulfilled,\n    (\n      state,\n      {\n        payload: {\n          markers: { home, notifications },\n        },\n      },\n    ) => {\n      if (home && compareId(home.last_read_id, state.home) > 0)\n        state.home = home.last_read_id;\n      if (\n        notifications &&\n        compareId(notifications.last_read_id, state.notifications) > 0\n      )\n        state.notifications = notifications.last_read_id;\n    },\n  );\n});\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = ImmutableMap({\n  accept_content_types: [],\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return state.merge(action.state.get('media_attachments'));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { changeLayout } from 'flavours/glitch/actions/app';\nimport { STORE_HYDRATE } from 'flavours/glitch/actions/store';\nimport { layoutFromWindow } from 'flavours/glitch/is_mobile';\n\nconst initialState = ImmutableMap({\n  streaming_api_base_url: null,\n  layout: layoutFromWindow(),\n  permissions: '0',\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    // we do not want `access_token` to be stored in the state\n    return state.merge(action.state.get('meta')).delete('access_token').set('permissions', action.state.getIn(['role', 'permissions']));\n  case changeLayout.type:\n    return state.set('layout', action.payload.layout);\n  default:\n    return state;\n  }\n}\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Record as ImmutableRecord, Stack } from 'immutable';\n\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport { COMPOSE_UPLOAD_CHANGE_SUCCESS } from '../actions/compose';\nimport type { ModalType } from '../actions/modal';\nimport { openModal, closeModal } from '../actions/modal';\n\nexport type ModalProps = Record<string, unknown>;\ninterface Modal {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\n\nconst Modal = ImmutableRecord<Modal>({\n  modalType: 'ACTIONS',\n  modalProps: ImmutableRecord({})(),\n});\n\ninterface ModalState {\n  ignoreFocus: boolean;\n  stack: Stack<ImmutableRecord<Modal>>;\n}\n\nconst initialState = ImmutableRecord<ModalState>({\n  ignoreFocus: false,\n  stack: Stack(),\n})();\ntype State = typeof initialState;\n\ninterface PopModalOption {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nconst popModal = (\n  state: State,\n  { modalType, ignoreFocus }: PopModalOption,\n): State => {\n  if (\n    modalType === undefined ||\n    modalType === state.get('stack').get(0)?.get('modalType')\n  ) {\n    return state\n      .set('ignoreFocus', !!ignoreFocus)\n      .update('stack', (stack) => stack.shift());\n  } else {\n    return state;\n  }\n};\n\nconst pushModal = (\n  state: State,\n  modalType: ModalType,\n  modalProps: ModalProps,\n): State => {\n  return state.withMutations((record) => {\n    record.set('ignoreFocus', false);\n    record.update('stack', (stack) =>\n      stack.unshift(Modal({ modalType, modalProps })),\n    );\n  });\n};\n\nexport const modalReducer: Reducer<State> = (state = initialState, action) => {\n  if (openModal.match(action))\n    return pushModal(\n      state,\n      action.payload.modalType,\n      action.payload.modalProps,\n    );\n  else if (closeModal.match(action)) return popModal(state, action.payload);\n  // TODO: type those actions\n  else if (action.type === COMPOSE_UPLOAD_CHANGE_SUCCESS)\n    return popModal(state, { modalType: 'FOCAL_POINT', ignoreFocus: false });\n  else if (timelineDelete.match(action))\n    return state.update('stack', (stack) =>\n      stack.filterNot(\n        (modal) => modal.get('modalProps').statusId === action.payload.statusId,\n      ),\n    );\n  else return state;\n};\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  authorizeFollowRequestSuccess,\n  blockAccountSuccess,\n  muteAccountSuccess,\n  rejectFollowRequestSuccess,\n} from 'flavours/glitch/actions/accounts_typed';\nimport { focusApp, unfocusApp } from 'flavours/glitch/actions/app';\nimport { blockDomainSuccess } from 'flavours/glitch/actions/domain_blocks_typed';\nimport { fetchMarkers } from 'flavours/glitch/actions/markers';\nimport {\n  clearNotifications,\n  fetchNotifications,\n  fetchNotificationsGap,\n  processNewNotificationForGroups,\n  loadPending,\n  updateScrollPosition,\n  markNotificationsAsRead,\n  mountNotifications,\n  unmountNotifications,\n} from 'flavours/glitch/actions/notification_groups';\nimport {\n  disconnectTimeline,\n  timelineDelete,\n} from 'flavours/glitch/actions/timelines_typed';\nimport type { ApiNotificationJSON } from 'flavours/glitch/api_types/notifications';\nimport { compareId } from 'flavours/glitch/compare_id';\nimport { usePendingItems } from 'flavours/glitch/initial_state';\nimport {\n  NOTIFICATIONS_GROUP_MAX_AVATARS,\n  createNotificationGroupFromJSON,\n  createNotificationGroupFromNotificationJSON,\n} from 'flavours/glitch/models/notification_group';\nimport type { NotificationGroup } from 'flavours/glitch/models/notification_group';\n\nconst NOTIFICATIONS_TRIM_LIMIT = 50;\n\nexport interface NotificationGap {\n  type: 'gap';\n  maxId?: string;\n  sinceId?: string;\n}\n\ninterface NotificationGroupsState {\n  groups: (NotificationGroup | NotificationGap)[];\n  pendingGroups: (NotificationGroup | NotificationGap)[];\n  scrolledToTop: boolean;\n  isLoading: boolean;\n  lastReadId: string;\n  mounted: number;\n  isTabVisible: boolean;\n}\n\nconst initialState: NotificationGroupsState = {\n  groups: [],\n  pendingGroups: [], // holds pending groups in slow mode\n  scrolledToTop: false,\n  isLoading: false,\n  // The following properties are used to track unread notifications\n  lastReadId: '0', // used for unread notifications\n  mounted: 0, // number of mounted notification list components, usually 0 or 1\n  isTabVisible: true,\n};\n\nfunction filterNotificationsForAccounts(\n  groups: NotificationGroupsState['groups'],\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  groups = groups\n    .map((group) => {\n      if (\n        group.type !== 'gap' &&\n        (!onlyForType || group.type === onlyForType)\n      ) {\n        const previousLength = group.sampleAccountIds.length;\n\n        group.sampleAccountIds = group.sampleAccountIds.filter(\n          (id) => !accountIds.includes(id),\n        );\n\n        const newLength = group.sampleAccountIds.length;\n        const removed = previousLength - newLength;\n\n        group.notifications_count -= removed;\n      }\n\n      return group;\n    })\n    .filter(\n      (group) => group.type === 'gap' || group.sampleAccountIds.length > 0,\n    );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction filterNotificationsForStatus(\n  groups: NotificationGroupsState['groups'],\n  statusId: string,\n) {\n  groups = groups.filter(\n    (group) =>\n      group.type === 'gap' ||\n      !('statusId' in group) ||\n      group.statusId !== statusId,\n  );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction removeNotificationsForAccounts(\n  state: NotificationGroupsState,\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  state.groups = filterNotificationsForAccounts(\n    state.groups,\n    accountIds,\n    onlyForType,\n  );\n  state.pendingGroups = filterNotificationsForAccounts(\n    state.pendingGroups,\n    accountIds,\n    onlyForType,\n  );\n}\n\nfunction removeNotificationsForStatus(\n  state: NotificationGroupsState,\n  statusId: string,\n) {\n  state.groups = filterNotificationsForStatus(state.groups, statusId);\n  state.pendingGroups = filterNotificationsForStatus(\n    state.pendingGroups,\n    statusId,\n  );\n}\n\nfunction isNotificationGroup(\n  groupOrGap: NotificationGroup | NotificationGap,\n): groupOrGap is NotificationGroup {\n  return groupOrGap.type !== 'gap';\n}\n\n// Merge adjacent gaps in `groups` in-place\nfunction mergeGaps(groups: NotificationGroupsState['groups']) {\n  for (let i = 0; i < groups.length; i++) {\n    const firstGroupOrGap = groups[i];\n\n    if (firstGroupOrGap?.type === 'gap') {\n      let lastGap = firstGroupOrGap;\n      let j = i + 1;\n\n      for (; j < groups.length; j++) {\n        const groupOrGap = groups[j];\n        if (groupOrGap?.type === 'gap') lastGap = groupOrGap;\n        else break;\n      }\n\n      if (j - i > 1) {\n        groups.splice(i, j - i, {\n          type: 'gap',\n          maxId: firstGroupOrGap.maxId,\n          sinceId: lastGap.sinceId,\n        });\n      }\n    }\n  }\n}\n\n// Checks if `groups[index-1]` and `groups[index]` are gaps, and merge them in-place if they are\nfunction mergeGapsAround(\n  groups: NotificationGroupsState['groups'],\n  index: number,\n) {\n  if (index > 0) {\n    const potentialFirstGap = groups[index - 1];\n    const potentialSecondGap = groups[index];\n\n    if (\n      potentialFirstGap?.type === 'gap' &&\n      potentialSecondGap?.type === 'gap'\n    ) {\n      groups.splice(index - 1, 2, {\n        type: 'gap',\n        maxId: potentialFirstGap.maxId,\n        sinceId: potentialSecondGap.sinceId,\n      });\n    }\n  }\n}\n\nfunction processNewNotification(\n  groups: NotificationGroupsState['groups'],\n  notification: ApiNotificationJSON,\n) {\n  const existingGroupIndex = groups.findIndex(\n    (group) =>\n      group.type !== 'gap' && group.group_key === notification.group_key,\n  );\n\n  // In any case, we are going to add a group at the top\n  // If there is currently a gap at the top, now is the time to update it\n  if (groups.length > 0 && groups[0]?.type === 'gap') {\n    groups[0].maxId = notification.id;\n  }\n\n  if (existingGroupIndex > -1) {\n    const existingGroup = groups[existingGroupIndex];\n\n    if (\n      existingGroup &&\n      existingGroup.type !== 'gap' &&\n      !existingGroup.sampleAccountIds.includes(notification.account.id) // This can happen for example if you like, then unlike, then like again the same post\n    ) {\n      // Update the existing group\n      if (\n        existingGroup.sampleAccountIds.unshift(notification.account.id) >\n        NOTIFICATIONS_GROUP_MAX_AVATARS\n      )\n        existingGroup.sampleAccountIds.pop();\n\n      existingGroup.most_recent_notification_id = notification.id;\n      existingGroup.page_max_id = notification.id;\n      existingGroup.latest_page_notification_at = notification.created_at;\n      existingGroup.notifications_count += 1;\n\n      groups.splice(existingGroupIndex, 1);\n      mergeGapsAround(groups, existingGroupIndex);\n\n      groups.unshift(existingGroup);\n    }\n  } else {\n    // Create a new group\n    groups.unshift(createNotificationGroupFromNotificationJSON(notification));\n  }\n}\n\nfunction trimNotifications(state: NotificationGroupsState) {\n  if (state.scrolledToTop) {\n    state.groups.splice(NOTIFICATIONS_TRIM_LIMIT);\n  }\n}\n\nfunction shouldMarkNewNotificationsAsRead(\n  {\n    isTabVisible,\n    scrolledToTop,\n    mounted,\n    lastReadId,\n    groups,\n  }: NotificationGroupsState,\n  ignoreScroll = false,\n) {\n  const isMounted = mounted > 0;\n  const oldestGroup = groups.findLast(isNotificationGroup);\n  const hasMore = groups.at(-1)?.type === 'gap';\n  const oldestGroupReached =\n    !hasMore ||\n    lastReadId === '0' ||\n    (oldestGroup?.page_min_id &&\n      compareId(oldestGroup.page_min_id, lastReadId) <= 0);\n\n  return (\n    isTabVisible &&\n    (ignoreScroll || scrolledToTop) &&\n    isMounted &&\n    oldestGroupReached\n  );\n}\n\nfunction updateLastReadId(\n  state: NotificationGroupsState,\n  group: NotificationGroup | undefined = undefined,\n) {\n  if (shouldMarkNewNotificationsAsRead(state)) {\n    group = group ?? state.groups.find(isNotificationGroup);\n    if (\n      group?.page_max_id &&\n      compareId(state.lastReadId, group.page_max_id) < 0\n    )\n      state.lastReadId = group.page_max_id;\n  }\n}\n\nexport const notificationGroupsReducer = createReducer<NotificationGroupsState>(\n  initialState,\n  (builder) => {\n    builder\n      .addCase(fetchNotifications.fulfilled, (state, action) => {\n        state.groups = action.payload.map((json) =>\n          json.type === 'gap' ? json : createNotificationGroupFromJSON(json),\n        );\n        state.isLoading = false;\n        updateLastReadId(state);\n      })\n      .addCase(fetchNotificationsGap.fulfilled, (state, action) => {\n        const { notifications } = action.payload;\n\n        // find the gap in the existing notifications\n        const gapIndex = state.groups.findIndex(\n          (groupOrGap) =>\n            groupOrGap.type === 'gap' &&\n            groupOrGap.sinceId === action.meta.arg.gap.sinceId &&\n            groupOrGap.maxId === action.meta.arg.gap.maxId,\n        );\n\n        if (gapIndex < 0)\n          // We do not know where to insert, let's return\n          return;\n\n        // Filling a disconnection gap means we're getting historical data\n        // about groups we may know or may not know about.\n\n        // The notifications timeline is split in two by the gap, with\n        // group information newer than the gap, and group information older\n        // than the gap.\n\n        // Filling a gap should not touch anything before the gap, so any\n        // information on groups already appearing before the gap should be\n        // discarded, while any information on groups appearing after the gap\n        // can be updated and re-ordered.\n\n        const oldestPageNotification = notifications.at(-1)?.page_min_id;\n\n        // replace the gap with the notifications + a new gap\n\n        const newerGroupKeys = state.groups\n          .slice(0, gapIndex)\n          .filter(isNotificationGroup)\n          .map((group) => group.group_key);\n\n        const toInsert: NotificationGroupsState['groups'] = notifications\n          .map((json) => createNotificationGroupFromJSON(json))\n          .filter(\n            (notification) => !newerGroupKeys.includes(notification.group_key),\n          );\n\n        const apiGroupKeys = (toInsert as NotificationGroup[]).map(\n          (group) => group.group_key,\n        );\n\n        const sinceId = action.meta.arg.gap.sinceId;\n        if (\n          notifications.length > 0 &&\n          !(\n            oldestPageNotification &&\n            sinceId &&\n            compareId(oldestPageNotification, sinceId) <= 0\n          )\n        ) {\n          // If we get an empty page, it means we reached the bottom, so we do not need to insert a new gap\n          // Similarly, if we've fetched more than the gap's, this means we have completely filled it\n          toInsert.push({\n            type: 'gap',\n            maxId: notifications.at(-1)?.page_max_id,\n            sinceId,\n          } as NotificationGap);\n        }\n\n        // Remove older groups covered by the API\n        state.groups = state.groups.filter(\n          (groupOrGap) =>\n            groupOrGap.type !== 'gap' &&\n            !apiGroupKeys.includes(groupOrGap.group_key),\n        );\n\n        // Replace the gap with API results (+ the new gap if needed)\n        state.groups.splice(gapIndex, 1, ...toInsert);\n\n        // Finally, merge any adjacent gaps that could have been created by filtering\n        // groups earlier\n        mergeGaps(state.groups);\n\n        state.isLoading = false;\n\n        updateLastReadId(state);\n      })\n      .addCase(processNewNotificationForGroups.fulfilled, (state, action) => {\n        const notification = action.payload;\n        processNewNotification(\n          usePendingItems ? state.pendingGroups : state.groups,\n          notification,\n        );\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(disconnectTimeline, (state, action) => {\n        if (action.payload.timeline === 'home') {\n          if (state.groups.length > 0 && state.groups[0]?.type !== 'gap') {\n            state.groups.unshift({\n              type: 'gap',\n              sinceId: state.groups[0]?.page_min_id,\n            });\n          }\n        }\n      })\n      .addCase(timelineDelete, (state, action) => {\n        removeNotificationsForStatus(state, action.payload.statusId);\n      })\n      .addCase(clearNotifications.pending, (state) => {\n        state.groups = [];\n        state.pendingGroups = [];\n      })\n      .addCase(blockAccountSuccess, (state, action) => {\n        removeNotificationsForAccounts(state, [action.payload.relationship.id]);\n      })\n      .addCase(muteAccountSuccess, (state, action) => {\n        if (action.payload.relationship.muting_notifications)\n          removeNotificationsForAccounts(state, [\n            action.payload.relationship.id,\n          ]);\n      })\n      .addCase(blockDomainSuccess, (state, action) => {\n        removeNotificationsForAccounts(\n          state,\n          action.payload.accounts.map((account) => account.id),\n        );\n      })\n      .addCase(loadPending, (state) => {\n        // First, remove any existing group and merge data\n        state.pendingGroups.forEach((group) => {\n          if (group.type !== 'gap') {\n            const existingGroupIndex = state.groups.findIndex(\n              (groupOrGap) =>\n                isNotificationGroup(groupOrGap) &&\n                groupOrGap.group_key === group.group_key,\n            );\n            if (existingGroupIndex > -1) {\n              const existingGroup = state.groups[existingGroupIndex];\n              if (existingGroup && existingGroup.type !== 'gap') {\n                group.notifications_count += existingGroup.notifications_count;\n                group.sampleAccountIds = group.sampleAccountIds\n                  .concat(existingGroup.sampleAccountIds)\n                  .slice(0, NOTIFICATIONS_GROUP_MAX_AVATARS);\n                state.groups.splice(existingGroupIndex, 1);\n              }\n            }\n          }\n          trimNotifications(state);\n        });\n\n        // Then build the consolidated list and clear pending groups\n        state.groups = state.pendingGroups.concat(state.groups);\n        state.pendingGroups = [];\n      })\n      .addCase(updateScrollPosition, (state, action) => {\n        state.scrolledToTop = action.payload.top;\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(markNotificationsAsRead, (state) => {\n        const mostRecentGroup = state.groups.find(isNotificationGroup);\n        if (\n          mostRecentGroup?.page_max_id &&\n          compareId(state.lastReadId, mostRecentGroup.page_max_id) < 0\n        )\n          state.lastReadId = mostRecentGroup.page_max_id;\n      })\n      .addCase(fetchMarkers.fulfilled, (state, action) => {\n        if (\n          action.payload.markers.notifications &&\n          compareId(\n            state.lastReadId,\n            action.payload.markers.notifications.last_read_id,\n          ) < 0\n        )\n          state.lastReadId = action.payload.markers.notifications.last_read_id;\n      })\n      .addCase(mountNotifications, (state) => {\n        state.mounted += 1;\n        updateLastReadId(state);\n      })\n      .addCase(unmountNotifications, (state) => {\n        state.mounted -= 1;\n      })\n      .addCase(focusApp, (state) => {\n        state.isTabVisible = true;\n        updateLastReadId(state);\n      })\n      .addCase(unfocusApp, (state) => {\n        state.isTabVisible = false;\n      })\n      .addMatcher(\n        isAnyOf(authorizeFollowRequestSuccess, rejectFollowRequestSuccess),\n        (state, action) => {\n          removeNotificationsForAccounts(\n            state,\n            [action.payload.id],\n            'follow_request',\n          );\n        },\n      )\n      .addMatcher(\n        isAnyOf(fetchNotifications.pending, fetchNotificationsGap.pending),\n        (state) => {\n          state.isLoading = true;\n        },\n      )\n      .addMatcher(\n        isAnyOf(fetchNotifications.rejected, fetchNotificationsGap.rejected),\n        (state) => {\n          state.isLoading = false;\n        },\n      );\n  },\n);\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  fetchNotificationPolicy,\n  decreasePendingNotificationsCount,\n  updateNotificationsPolicy,\n} from 'flavours/glitch/actions/notification_policies';\nimport type { NotificationPolicy } from 'flavours/glitch/models/notification_policy';\n\nexport const notificationPolicyReducer =\n  createReducer<NotificationPolicy | null>(null, (builder) => {\n    builder\n      .addCase(decreasePendingNotificationsCount, (state, action) => {\n        if (state) {\n          state.summary.pending_notifications_count -= action.payload;\n          state.summary.pending_requests_count -= 1;\n        }\n      })\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationPolicy.fulfilled,\n          updateNotificationsPolicy.fulfilled,\n        ),\n        (_state, action) => action.payload,\n      );\n  });\n","import { fromJS, Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { blockDomainSuccess } from 'flavours/glitch/actions/domain_blocks';\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport {\n  authorizeFollowRequestSuccess,\n  blockAccountSuccess,\n  muteAccountSuccess,\n  rejectFollowRequestSuccess,\n} from '../actions/accounts';\nimport {\n  fetchMarkers,\n} from '../actions/markers';\nimport { clearNotifications } from '../actions/notification_groups';\nimport {\n  NOTIFICATIONS_MOUNT,\n  NOTIFICATIONS_UNMOUNT,\n  NOTIFICATIONS_SET_VISIBILITY,\n  notificationsUpdate,\n  NOTIFICATIONS_EXPAND_SUCCESS,\n  NOTIFICATIONS_EXPAND_REQUEST,\n  NOTIFICATIONS_EXPAND_FAIL,\n  NOTIFICATIONS_FILTER_SET,\n  NOTIFICATIONS_SCROLL_TOP,\n  NOTIFICATIONS_LOAD_PENDING,\n  NOTIFICATIONS_DELETE_MARKED_REQUEST,\n  NOTIFICATIONS_DELETE_MARKED_SUCCESS,\n  NOTIFICATION_MARK_FOR_DELETE,\n  NOTIFICATIONS_DELETE_MARKED_FAIL,\n  NOTIFICATIONS_ENTER_CLEARING_MODE,\n  NOTIFICATIONS_MARK_ALL_FOR_DELETE,\n  NOTIFICATIONS_MARK_AS_READ,\n  NOTIFICATIONS_SET_BROWSER_SUPPORT,\n  NOTIFICATIONS_SET_BROWSER_PERMISSION,\n} from '../actions/notifications';\nimport { disconnectTimeline } from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n  hasMore: true,\n  top: false,\n  mounted: 0,\n  unread: 0,\n  lastReadId: '0',\n  readMarkerId: '0',\n  isLoading: 0,\n  cleaningMode: false,\n  isTabVisible: true,\n  browserSupport: false,\n  browserPermission: 'default',\n  // notification removal mark of new notifs loaded whilst cleaningMode is true.\n  markNewForDelete: false,\n});\n\nexport const notificationToMap = (notification, markForDelete = false) => ImmutableMap({\n  id: notification.id,\n  type: notification.type,\n  account: notification.account.id,\n  markedForDelete: markForDelete,\n  status: notification.status ? notification.status.id : null,\n  report: notification.report ? fromJS(notification.report) : null,\n  event: notification.event ? fromJS(notification.event) : null,\n  moderation_warning: notification.moderation_warning ? fromJS(notification.moderation_warning) : null,\n});\n\nconst normalizeNotification = (state, notification, usePendingItems) => {\n  const markNewForDelete = state.get('markNewForDelete');\n  const top = state.get('top');\n\n  // Under currently unknown conditions, the client may receive duplicates from the server\n  if (state.get('pendingItems').some((item) => item?.get('id') === notification.id) || state.get('items').some((item) => item?.get('id') === notification.id)) {\n    return state;\n  }\n\n  if (usePendingItems || !state.get('pendingItems').isEmpty()) {\n    return state.update('pendingItems', list => list.unshift(notificationToMap(notification, markNewForDelete))).update('unread', unread => unread + 1);\n  }\n\n  if (shouldCountUnreadNotifications(state)) {\n    state = state.update('unread', unread => unread + 1);\n  } else {\n    state = state.set('lastReadId', notification.id);\n  }\n\n  return state.update('items', list => {\n    if (top && list.size > 40) {\n      list = list.take(20);\n    }\n\n    return list.unshift(notificationToMap(notification, markNewForDelete));\n  });\n};\n\nconst expandNormalizedNotifications = (state, notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing notifications might be out of order\n  // - the existing notifications may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items\n  // - `notifications` may include items that are already included\n  // - this function can be called either to fill in a gap, or load newer items\n\n  const markNewForDelete = state.get('markNewForDelete');\n  const lastReadId = state.get('lastReadId');\n  const newItems = ImmutableList(notifications.map((notification) => notificationToMap(notification, markNewForDelete)));\n\n  return state.withMutations(mutable => {\n    if (!newItems.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mutable.get('pendingItems').isEmpty());\n\n      mutable.update(usePendingItems ? 'pendingItems' : 'items', oldItems => {\n        // If called to poll *new* notifications, we just need to add them on top without duplicates\n        if (isLoadingRecent) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return insertedItems.concat(oldItems);\n        }\n\n        // If called to expand more (presumably older than any known to the WebUI), we just have to\n        // add them to the bottom without duplicates\n        if (isLoadingMore) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return oldItems.concat(insertedItems);\n        }\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is,\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newItems.last()` is the oldest item that was requested and that\n        // there is no “hole” between `newItems.last()` and `newItems.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the notifications that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldItems.findLastIndex(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the notifications that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newItems` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldItems.take(lastIndex).findLastIndex(item => item !== null && compareId(item.get('id'), newItems.first().get('id')) > 0) + 1;\n\n        // At this point:\n        // - no `oldItems` after `firstIndex` is newer than any of the `newItems`\n        // - all `oldItems` after `lastIndex` are older than every of the `newItems`\n        // - it is possible for items in the replaced slice to be older than every `newItems`\n        // - it is possible for items before `firstIndex` to be in the `newItems` range\n        // Therefore:\n        // - to avoid losing items, items from the replaced slice that are older than `newItems`\n        //   should be added in the back.\n        // - to avoid duplicates, `newItems` should be checked the first `firstIndex` items of\n        //   `oldItems`\n        const idsToCheck = oldItems.take(firstIndex).map(item => item?.get('id')).toSet();\n        const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n        const olderItems = oldItems.slice(firstIndex, lastIndex).filter(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) < 0);\n\n        return oldItems.take(firstIndex).concat(\n          insertedItems,\n          olderItems,\n          oldItems.skip(lastIndex),\n        );\n      });\n    }\n\n    if (!next) {\n      mutable.set('hasMore', false);\n    }\n\n    if (shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), lastReadId) > 0));\n    } else {\n      const mostRecent = newItems.find(item => item !== null);\n      if (mostRecent && compareId(lastReadId, mostRecent.get('id')) < 0) {\n        mutable.set('lastReadId', mostRecent.get('id'));\n      }\n    }\n\n    mutable.update('isLoading', (nbLoading) => nbLoading - 1);\n  });\n};\n\nconst filterNotifications = (state, accountIds, type) => {\n  const helper = list => list.filterNot(item => item !== null && accountIds.includes(item.get('account')) && (type === undefined || type === item.get('type')));\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst clearUnread = (state) => {\n  state = state.set('unread', state.get('pendingItems').size);\n  const lastNotification = state.get('items').find(item => item !== null);\n  return state.set('lastReadId', lastNotification ? lastNotification.get('id') : '0');\n};\n\nconst updateTop = (state, top) => {\n  state = state.set('top', top);\n\n  if (!shouldCountUnreadNotifications(state)) {\n    state = clearUnread(state);\n  }\n\n  return state;\n};\n\nconst deleteByStatus = (state, statusId) => {\n  const lastReadId = state.get('lastReadId');\n\n  if (shouldCountUnreadNotifications(state)) {\n    const deletedUnread = state.get('items').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n    state = state.update('unread', unread => unread - deletedUnread.size);\n  }\n\n  const helper = list => list.filterNot(item => item !== null && item.get('status') === statusId);\n  const deletedUnread = state.get('pendingItems').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n  state = state.update('unread', unread => unread - deletedUnread.size);\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst markForDelete = (state, notificationId, yes) => {\n  return state.update('items', list => list.map(item => {\n    if (item === null) {\n      return null;\n    } else if(item.get('id') === notificationId) {\n      return item.set('markedForDelete', yes);\n    } else {\n      return item;\n    }\n  }));\n};\n\nconst markAllForDelete = (state, yes) => {\n  return state.update('items', list => list.map(item => {\n    if (item === null) {\n      return null;\n    } else if(yes !== null) {\n      return item.set('markedForDelete', yes);\n    } else {\n      return item.set('markedForDelete', !item.get('markedForDelete'));\n    }\n  }));\n};\n\nconst unmarkAllForDelete = (state) => {\n  return state.update('items', list => list.map(item => item === null ? item : item.set('markedForDelete', false)));\n};\n\nconst deleteMarkedNotifs = (state) => {\n  return state.update('items', list => list.filterNot(item => item === null ? item : item.get('markedForDelete')));\n};\n\nconst updateMounted = (state) => {\n  state = state.update('mounted', count => count + 1);\n  if (!shouldCountUnreadNotifications(state, state.get('mounted') === 1)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst updateVisibility = (state, visibility) => {\n  state = state.set('isTabVisible', visibility);\n  if (!shouldCountUnreadNotifications(state)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst shouldCountUnreadNotifications = (state, ignoreScroll = false) => {\n  const isTabVisible   = state.get('isTabVisible');\n  const isOnTop        = state.get('top');\n  const isMounted      = state.get('mounted') > 0;\n  const lastReadId     = state.get('lastReadId');\n  const lastItem       = state.get('items').findLast(item => item !== null);\n  const lastItemReached = !state.get('hasMore') || lastReadId === '0' || (lastItem && compareId(lastItem.get('id'), lastReadId) <= 0);\n\n  return !(isTabVisible && (ignoreScroll || isOnTop) && isMounted && lastItemReached);\n};\n\nconst recountUnread = (state, last_read_id) => {\n  return state.withMutations(mutable => {\n    if (compareId(last_read_id, mutable.get('lastReadId')) > 0) {\n      mutable.set('lastReadId', last_read_id);\n    }\n\n    if (compareId(last_read_id, mutable.get('readMarkerId')) > 0) {\n      mutable.set('readMarkerId', last_read_id);\n    }\n\n    if (state.get('unread') > 0 || shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), last_read_id) > 0));\n    }\n  });\n};\n\nexport default function notifications(state = initialState, action) {\n  let st;\n\n  switch(action.type) {\n  case fetchMarkers.fulfilled.type:\n    return action.payload.markers.notifications ? recountUnread(state, action.payload.markers.notifications.last_read_id) : state;\n  case NOTIFICATIONS_MOUNT:\n    return updateMounted(state);\n  case NOTIFICATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case NOTIFICATIONS_SET_VISIBILITY:\n    return updateVisibility(state, action.visibility);\n  case NOTIFICATIONS_LOAD_PENDING:\n    return state.update('items', list => state.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0);\n  case NOTIFICATIONS_EXPAND_REQUEST:\n  case NOTIFICATIONS_DELETE_MARKED_REQUEST:\n    return state.update('isLoading', (nbLoading) => nbLoading + 1);\n  case NOTIFICATIONS_DELETE_MARKED_FAIL:\n  case NOTIFICATIONS_EXPAND_FAIL:\n    return state.update('isLoading', (nbLoading) => nbLoading - 1);\n  case NOTIFICATIONS_FILTER_SET:\n    return state.set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('hasMore', true);\n  case NOTIFICATIONS_SCROLL_TOP:\n    return updateTop(state, action.top);\n  case notificationsUpdate.type:\n    return normalizeNotification(state, action.payload.notification, action.payload.usePendingItems);\n  case NOTIFICATIONS_EXPAND_SUCCESS:\n    return expandNormalizedNotifications(state, action.notifications, action.next, action.isLoadingMore, action.isLoadingRecent, action.usePendingItems);\n  case blockAccountSuccess.type:\n    return filterNotifications(state, [action.payload.relationship.id]);\n  case muteAccountSuccess.type:\n    return action.payload.relationship.muting_notifications ? filterNotifications(state, [action.payload.relationship.id]) : state;\n  case blockDomainSuccess.type:\n    return filterNotifications(state, action.payload.accounts);\n  case authorizeFollowRequestSuccess.type:\n  case rejectFollowRequestSuccess.type:\n    return filterNotifications(state, [action.payload.id], 'follow_request');\n  case clearNotifications.pending.type:\n    return state.set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('hasMore', false);\n  case timelineDelete.type:\n    return deleteByStatus(state, action.payload.statusId);\n  case disconnectTimeline.type:\n    return action.payload.timeline === 'home' ?\n      state.update(action.payload.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(null) : items) :\n      state;\n  case NOTIFICATIONS_SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case NOTIFICATIONS_SET_BROWSER_PERMISSION:\n    return state.set('browserPermission', action.value);\n\n  case NOTIFICATION_MARK_FOR_DELETE:\n    return markForDelete(state, action.id, action.yes);\n\n  case NOTIFICATIONS_DELETE_MARKED_SUCCESS:\n    return deleteMarkedNotifs(state).update('isLoading', (nbLoading) => nbLoading - 1);\n\n  case NOTIFICATIONS_ENTER_CLEARING_MODE:\n    st = state.set('cleaningMode', action.yes);\n    if (!action.yes) {\n      return unmarkAllForDelete(st).set('markNewForDelete', false);\n    } else {\n      return st;\n    }\n\n  case NOTIFICATIONS_MARK_ALL_FOR_DELETE:\n    st = state;\n    if (action.yes === null) {\n      // Toggle - this is a bit confusing, as it toggles the all-none mode\n      //st = st.set('markNewForDelete', !st.get('markNewForDelete'));\n    } else {\n      st = st.set('markNewForDelete', action.yes);\n    }\n    return markAllForDelete(st, action.yes);\n\n  case NOTIFICATIONS_MARK_AS_READ:\n    const lastNotification = state.get('items').find(item => item !== null);\n    return lastNotification ? recountUnread(state, lastNotification.get('id')) : state;\n\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  NOTIFICATION_REQUESTS_EXPAND_REQUEST,\n  NOTIFICATION_REQUESTS_EXPAND_SUCCESS,\n  NOTIFICATION_REQUESTS_EXPAND_FAIL,\n  NOTIFICATION_REQUESTS_FETCH_REQUEST,\n  NOTIFICATION_REQUESTS_FETCH_SUCCESS,\n  NOTIFICATION_REQUESTS_FETCH_FAIL,\n  NOTIFICATION_REQUEST_FETCH_REQUEST,\n  NOTIFICATION_REQUEST_FETCH_SUCCESS,\n  NOTIFICATION_REQUEST_FETCH_FAIL,\n  NOTIFICATION_REQUEST_ACCEPT_REQUEST,\n  NOTIFICATION_REQUEST_DISMISS_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL,\n} from 'flavours/glitch/actions/notifications';\n\nimport { notificationToMap } from './notifications';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  next: null,\n  current: ImmutableMap({\n    isLoading: false,\n    item: null,\n    removed: false,\n    notifications: ImmutableMap({\n      items: ImmutableList(),\n      isLoading: false,\n      next: null,\n    }),\n  }),\n});\n\nconst normalizeRequest = request => fromJS({\n  ...request,\n  account: request.account.id,\n});\n\nconst removeRequest = (state, id) => {\n  if (state.getIn(['current', 'item', 'id']) === id) {\n    state = state.setIn(['current', 'removed'], true);\n  }\n\n  return state.update('items', list => list.filterNot(item => item.get('id') === id));\n};\n\nexport const notificationRequestsReducer = (state = initialState, action) => {\n  switch(action.type) {\n  case NOTIFICATION_REQUESTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', list => ImmutableList(action.requests.map(normalizeRequest)).concat(list));\n      map.set('isLoading', false);\n      map.update('next', next => next ?? action.next);\n    });\n  case NOTIFICATION_REQUESTS_EXPAND_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', list => list.concat(ImmutableList(action.requests.map(normalizeRequest))));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case NOTIFICATION_REQUESTS_EXPAND_REQUEST:\n  case NOTIFICATION_REQUESTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case NOTIFICATION_REQUESTS_EXPAND_FAIL:\n  case NOTIFICATION_REQUESTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case NOTIFICATION_REQUEST_ACCEPT_REQUEST:\n  case NOTIFICATION_REQUEST_DISMISS_REQUEST:\n    return removeRequest(state, action.id);\n  case NOTIFICATION_REQUEST_FETCH_REQUEST:\n    return state.set('current', initialState.get('current').set('isLoading', true));\n  case NOTIFICATION_REQUEST_FETCH_SUCCESS:\n    return state.update('current', map => map.set('isLoading', false).set('item', normalizeRequest(action.request)));\n  case NOTIFICATION_REQUEST_FETCH_FAIL:\n    return state.update('current', map => map.set('isLoading', false));\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST:\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST:\n    return state.setIn(['current', 'notifications', 'isLoading'], true);\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS:\n    return state.updateIn(['current', 'notifications'], map => map.set('isLoading', false).update('items', list => ImmutableList(action.notifications.map(notificationToMap)).concat(list)).update('next', next => next ?? action.next));\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS:\n    return state.updateIn(['current', 'notifications'], map => map.set('isLoading', false).update('items', list => list.concat(ImmutableList(action.notifications.map(notificationToMap)))).set('next', action.next));\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL:\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL:\n    return state.setIn(['current', 'notifications', 'isLoading'], false);\n  default:\n    return state;\n  }\n};\n","import type { Reducer } from '@reduxjs/toolkit';\n\nimport {\n  deployPictureInPictureAction,\n  removePictureInPicture,\n} from 'flavours/glitch/actions/picture_in_picture';\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nexport interface PIPMediaProps {\n  src: string;\n  muted: boolean;\n  volume: number;\n  currentTime: number;\n  poster: string;\n  backgroundColor: string;\n  foregroundColor: string;\n  accentColor: string;\n}\n\ninterface PIPStateWithValue extends Partial<PIPMediaProps> {\n  statusId: string;\n  accountId: string;\n  type: 'audio' | 'video';\n}\n\ninterface PIPStateEmpty extends Partial<PIPMediaProps> {\n  type: null;\n}\n\ntype PIPState = PIPStateWithValue | PIPStateEmpty;\n\nconst initialState = {\n  type: null,\n  muted: false,\n  volume: 0,\n  currentTime: 0,\n};\n\nexport const pictureInPictureReducer: Reducer<PIPState> = (\n  state = initialState,\n  action,\n) => {\n  if (deployPictureInPictureAction.match(action))\n    return {\n      statusId: action.payload.statusId,\n      accountId: action.payload.accountId,\n      type: action.payload.playerType,\n      ...action.payload.props,\n    };\n  else if (removePictureInPicture.match(action)) return initialState;\n  else if (timelineDelete.match(action))\n    if (state.type && state.statusId === action.payload.statusId)\n      return initialState;\n\n  return state;\n};\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport {\n  PINNED_ACCOUNTS_EDITOR_RESET,\n  PINNED_ACCOUNTS_FETCH_REQUEST,\n  PINNED_ACCOUNTS_FETCH_SUCCESS,\n  PINNED_ACCOUNTS_FETCH_FAIL,\n  PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS,\n  PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR,\n  PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE,\n  pinAccountSuccess,\n  unpinAccountSuccess,\n} from '../actions/accounts';\n\nconst initialState = ImmutableMap({\n  accounts: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n\n  suggestions: ImmutableMap({\n    value: '',\n    items: ImmutableList(),\n  }),\n});\n\nexport default function listEditorReducer(state = initialState, action) {\n  switch(action.type) {\n  case PINNED_ACCOUNTS_EDITOR_RESET:\n    return initialState;\n  case PINNED_ACCOUNTS_FETCH_REQUEST:\n    return state.setIn(['accounts', 'isLoading'], true);\n  case PINNED_ACCOUNTS_FETCH_FAIL:\n    return state.setIn(['accounts', 'isLoading'], false);\n  case PINNED_ACCOUNTS_FETCH_SUCCESS:\n    return state.update('accounts', accounts => accounts.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.accounts.map(item => item.id)));\n    }));\n  case PINNED_ACCOUNTS_SUGGESTIONS_FETCH_SUCCESS:\n    return state.setIn(['suggestions', 'items'], ImmutableList(action.accounts.map(item => item.id)));\n  case PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CHANGE:\n    return state.setIn(['suggestions', 'value'], action.value);\n  case PINNED_ACCOUNTS_EDITOR_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', suggestions => suggestions.withMutations(map => {\n      map.set('items', ImmutableList());\n      map.set('value', '');\n    }));\n  case pinAccountSuccess.type:\n    return state.updateIn(['accounts', 'items'], list => list.unshift(action.payload.relationship.id));\n  case unpinAccountSuccess.type:\n    return state.updateIn(['accounts', 'items'], list => list.filterNot(item => item === action.payload.relationship.id));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { POLLS_IMPORT } from 'flavours/glitch/actions/importer';\n\nimport { normalizePollOptionTranslation } from '../actions/importer/normalizer';\nimport { STATUS_TRANSLATE_SUCCESS, STATUS_TRANSLATE_UNDO } from '../actions/statuses';\n\nconst importPolls = (state, polls) => state.withMutations(map => polls.forEach(poll => map.set(poll.id, fromJS(poll))));\n\nconst statusTranslateSuccess = (state, pollTranslation) => {\n  return state.withMutations(map => {\n    if (pollTranslation) {\n      const poll = state.get(pollTranslation.id);\n\n      pollTranslation.options.forEach((item, index) => {\n        map.setIn([pollTranslation.id, 'options', index, 'translation'], fromJS(normalizePollOptionTranslation(item, poll)));\n      });\n    }\n  });\n};\n\nconst statusTranslateUndo = (state, id) => {\n  return state.withMutations(map => {\n    const options = map.getIn([id, 'options']);\n\n    if (options) {\n      options.forEach((item, index) => map.deleteIn([id, 'options', index, 'translation']));\n    }\n  });\n};\n\nconst initialState = ImmutableMap();\n\nexport default function polls(state = initialState, action) {\n  switch(action.type) {\n  case POLLS_IMPORT:\n    return importPolls(state, action.polls);\n  case STATUS_TRANSLATE_SUCCESS:\n    return statusTranslateSuccess(state, action.translation.poll);\n  case STATUS_TRANSLATE_UNDO:\n    return statusTranslateUndo(state, action.pollId);\n  default:\n    return state;\n  }\n}\n","import Immutable from 'immutable';\n\nimport { SET_BROWSER_SUPPORT, SET_SUBSCRIPTION, CLEAR_SUBSCRIPTION, SET_ALERTS } from '../actions/push_notifications';\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = Immutable.Map({\n  subscription: null,\n  alerts: new Immutable.Map({\n    follow: false,\n    follow_request: false,\n    favourite: false,\n    reblog: false,\n    mention: false,\n    poll: false,\n  }),\n  isSubscribed: false,\n  browserSupport: false,\n});\n\nexport default function push_subscriptions(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE: {\n    const push_subscription = action.state.get('push_subscription');\n\n    if (push_subscription) {\n      return state\n        .set('subscription', new Immutable.Map({\n          id: push_subscription.get('id'),\n          endpoint: push_subscription.get('endpoint'),\n        }))\n        .set('alerts', push_subscription.get('alerts') || initialState.get('alerts'))\n        .set('isSubscribed', true);\n    }\n\n    return state;\n  }\n  case SET_SUBSCRIPTION:\n    return state\n      .set('subscription', new Immutable.Map({\n        id: action.subscription.id,\n        endpoint: action.subscription.endpoint,\n      }))\n      .set('alerts', new Immutable.Map(action.subscription.alerts))\n      .set('isSubscribed', true);\n  case SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case CLEAR_SUBSCRIPTION:\n    return initialState;\n  case SET_ALERTS:\n    return state.setIn(action.path, action.value);\n  default:\n    return state;\n  }\n}\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'flavours/glitch/api_types/relationships';\n\ntype RelationshipShape = Required<ApiRelationshipJSON>; // no changes from server shape\nexport type Relationship = RecordOf<RelationshipShape>;\n\nconst RelationshipFactory = Record<RelationshipShape>({\n  blocked_by: false,\n  blocking: false,\n  domain_blocking: false,\n  endorsed: false,\n  followed_by: false,\n  following: false,\n  id: '',\n  languages: null,\n  muting_notifications: false,\n  muting: false,\n  note: '',\n  notifying: false,\n  requested_by: false,\n  requested: false,\n  showing_reblogs: false,\n});\n\nexport function createRelationship(attributes: Partial<RelationshipShape>) {\n  return RelationshipFactory(attributes);\n}\n","import { isFulfilled } from '@reduxjs/toolkit';\nimport type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'flavours/glitch/api_types/relationships';\nimport type { Account } from 'flavours/glitch/models/account';\nimport { createRelationship } from 'flavours/glitch/models/relationship';\nimport type { Relationship } from 'flavours/glitch/models/relationship';\n\nimport { submitAccountNote } from '../actions/account_notes';\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n  followAccountRequest,\n  followAccountFail,\n  unfollowAccountRequest,\n  unfollowAccountFail,\n  blockAccountSuccess,\n  unblockAccountSuccess,\n  muteAccountSuccess,\n  unmuteAccountSuccess,\n  pinAccountSuccess,\n  unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n} from '../actions/accounts_typed';\nimport {\n  blockDomainSuccess,\n  unblockDomainSuccess,\n} from '../actions/domain_blocks_typed';\nimport { notificationsUpdate } from '../actions/notifications_typed';\n\nconst initialState = ImmutableMap<string, Relationship>();\ntype State = typeof initialState;\n\nconst normalizeRelationship = (\n  state: State,\n  relationship: ApiRelationshipJSON,\n) => state.set(relationship.id, createRelationship(relationship));\n\nconst normalizeRelationships = (\n  state: State,\n  relationships: ApiRelationshipJSON[],\n) => {\n  relationships.forEach((relationship) => {\n    state = normalizeRelationship(state, relationship);\n  });\n\n  return state;\n};\n\nconst setDomainBlocking = (\n  state: State,\n  accounts: Account[],\n  blocking: boolean,\n) => {\n  return state.withMutations((map) => {\n    accounts.forEach((id) => {\n      map.setIn([id, 'domain_blocking'], blocking);\n    });\n  });\n};\n\nexport const relationshipsReducer: Reducer<State> = (\n  state = initialState,\n  action,\n) => {\n  if (authorizeFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], true)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (rejectFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], false)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (notificationsUpdate.match(action))\n    return action.payload.notification.type === 'follow_request'\n      ? state.setIn(\n          [action.payload.notification.account.id, 'requested_by'],\n          true,\n        )\n      : state;\n  else if (followAccountRequest.match(action))\n    return state.getIn([action.payload.id, 'following'])\n      ? state\n      : state.setIn(\n          [\n            action.payload.id,\n            action.payload.locked ? 'requested' : 'following',\n          ],\n          true,\n        );\n  else if (followAccountFail.match(action))\n    return state.setIn(\n      [action.payload.id, action.payload.locked ? 'requested' : 'following'],\n      false,\n    );\n  else if (unfollowAccountRequest.match(action))\n    return state.setIn([action.payload.id, 'following'], false);\n  else if (unfollowAccountFail.match(action))\n    return state.setIn([action.payload.id, 'following'], true);\n  else if (\n    followAccountSuccess.match(action) ||\n    unfollowAccountSuccess.match(action) ||\n    blockAccountSuccess.match(action) ||\n    unblockAccountSuccess.match(action) ||\n    muteAccountSuccess.match(action) ||\n    unmuteAccountSuccess.match(action) ||\n    pinAccountSuccess.match(action) ||\n    unpinAccountSuccess.match(action) ||\n    isFulfilled(submitAccountNote)(action)\n  )\n    return normalizeRelationship(state, action.payload.relationship);\n  else if (fetchRelationshipsSuccess.match(action))\n    return normalizeRelationships(state, action.payload.relationships);\n  else if (blockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, true);\n  else if (unblockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, false);\n  else return state;\n};\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport {\n  COMPOSE_MENTION,\n  COMPOSE_REPLY,\n  COMPOSE_DIRECT,\n} from '../actions/compose';\nimport {\n  SEARCH_CHANGE,\n  SEARCH_CLEAR,\n  SEARCH_FETCH_REQUEST,\n  SEARCH_FETCH_FAIL,\n  SEARCH_FETCH_SUCCESS,\n  SEARCH_SHOW,\n  SEARCH_EXPAND_REQUEST,\n  SEARCH_EXPAND_SUCCESS,\n  SEARCH_EXPAND_FAIL,\n  SEARCH_HISTORY_UPDATE,\n} from '../actions/search';\n\nconst initialState = ImmutableMap({\n  value: '',\n  submitted: false,\n  hidden: false,\n  results: ImmutableMap(),\n  isLoading: false,\n  searchTerm: '',\n  type: null,\n  recent: ImmutableOrderedSet(),\n});\n\nexport default function search(state = initialState, action) {\n  switch(action.type) {\n  case SEARCH_CHANGE:\n    return state.set('value', action.value);\n  case SEARCH_CLEAR:\n    return state.withMutations(map => {\n      map.set('value', '');\n      map.set('results', ImmutableMap());\n      map.set('submitted', false);\n      map.set('hidden', false);\n      map.set('searchTerm', '');\n      map.set('type', null);\n    });\n  case SEARCH_SHOW:\n    return state.set('hidden', false);\n  case COMPOSE_REPLY:\n  case COMPOSE_MENTION:\n  case COMPOSE_DIRECT:\n    return state.set('hidden', true);\n  case SEARCH_FETCH_REQUEST:\n    return state.withMutations(map => {\n      map.set('results', ImmutableMap());\n      map.set('isLoading', true);\n      map.set('submitted', true);\n      map.set('type', action.searchType);\n    });\n  case SEARCH_FETCH_FAIL:\n  case SEARCH_EXPAND_FAIL:\n    return state.set('isLoading', false);\n  case SEARCH_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('results', ImmutableMap({\n        accounts: ImmutableOrderedSet(action.results.accounts.map(item => item.id)),\n        statuses: ImmutableOrderedSet(action.results.statuses.map(item => item.id)),\n        hashtags: ImmutableOrderedSet(fromJS(action.results.hashtags)),\n      }));\n\n      map.set('searchTerm', action.searchTerm);\n      map.set('type', action.searchType);\n      map.set('isLoading', false);\n    });\n  case SEARCH_EXPAND_REQUEST:\n    return state.set('type', action.searchType).set('isLoading', true);\n  case SEARCH_EXPAND_SUCCESS:\n    const results = action.searchType === 'hashtags' ? ImmutableOrderedSet(fromJS(action.results.hashtags)) : action.results[action.searchType].map(item => item.id);\n    return state.updateIn(['results', action.searchType], list => list.union(results)).set('isLoading', false);\n  case SEARCH_HISTORY_UPDATE:\n    return state.set('recent', ImmutableOrderedSet(fromJS(action.recent)));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  SERVER_FETCH_REQUEST,\n  SERVER_FETCH_SUCCESS,\n  SERVER_FETCH_FAIL,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  EXTENDED_DESCRIPTION_REQUEST,\n  EXTENDED_DESCRIPTION_SUCCESS,\n  EXTENDED_DESCRIPTION_FAIL,\n  SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n  SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n} from 'flavours/glitch/actions/server';\n\nconst initialState = ImmutableMap({\n  server: ImmutableMap({\n    isLoading: false,\n  }),\n\n  extendedDescription: ImmutableMap({\n    isLoading: false,\n  }),\n\n  domainBlocks: ImmutableMap({\n    isLoading: false,\n    isAvailable: true,\n    items: ImmutableList(),\n  }),\n});\n\nexport default function server(state = initialState, action) {\n  switch (action.type) {\n  case SERVER_FETCH_REQUEST:\n    return state.setIn(['server', 'isLoading'], true);\n  case SERVER_FETCH_SUCCESS:\n    return state.set('server', fromJS(action.server)).setIn(['server', 'isLoading'], false);\n  case SERVER_FETCH_FAIL:\n    return state.setIn(['server', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST:\n    return state.setIn(['translationLanguages', 'isLoading'], true);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS:\n    return state.setIn(['translationLanguages', 'items'], fromJS(action.translationLanguages)).setIn(['translationLanguages', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL:\n    return state.setIn(['translationLanguages', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_REQUEST:\n    return state.setIn(['extendedDescription', 'isLoading'], true);\n  case EXTENDED_DESCRIPTION_SUCCESS:\n    return state.set('extendedDescription', fromJS(action.description)).setIn(['extendedDescription', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_FAIL:\n    return state.setIn(['extendedDescription', 'isLoading'], false);\n  case SERVER_DOMAIN_BLOCKS_FETCH_REQUEST:\n    return state.setIn(['domainBlocks', 'isLoading'], true);\n  case SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['domainBlocks', 'items'], fromJS(action.blocks)).setIn(['domainBlocks', 'isLoading'], false).setIn(['domainBlocks', 'isAvailable'], action.isAvailable);\n  case SERVER_DOMAIN_BLOCKS_FETCH_FAIL:\n    return state.setIn(['domainBlocks', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { COLUMN_ADD, COLUMN_REMOVE, COLUMN_MOVE, COLUMN_PARAMS_CHANGE } from '../actions/columns';\nimport { EMOJI_USE } from '../actions/emojis';\nimport { LANGUAGE_USE } from '../actions/languages';\nimport { LIST_DELETE_SUCCESS, LIST_FETCH_FAIL } from '../actions/lists';\nimport { NOTIFICATIONS_FILTER_SET } from '../actions/notifications';\nimport { SETTING_CHANGE, SETTING_SAVE } from '../actions/settings';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  saved: true,\n\n  skinTone: 1,\n\n  trends: ImmutableMap({\n    show: true,\n  }),\n\n  home: ImmutableMap({\n    shows: ImmutableMap({\n      reblog: true,\n      reply: true,\n      direct: true,\n    }),\n\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  notifications: ImmutableMap({\n    alerts: ImmutableMap({\n      follow: false,\n      follow_request: false,\n      favourite: false,\n      reaction: false,\n      reblog: false,\n      mention: false,\n      poll: false,\n      status: false,\n      update: false,\n      'admin.sign_up': false,\n      'admin.report': false,\n    }),\n\n    quickFilter: ImmutableMap({\n      active: 'all',\n      show: true,\n      advanced: false,\n    }),\n\n    dismissPermissionBanner: false,\n    showUnread: true,\n    minimizeFilteredBanner: false,\n\n    shows: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      reaction: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    sounds: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      reaction: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n  }),\n\n  firehose: ImmutableMap({\n    onlyMedia: false,\n    allowLocalOnly: true,\n\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  community: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  public: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  direct: ImmutableMap({\n    conversations: true,\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  dismissed_banners: ImmutableMap({\n    'public_timeline': false,\n    'community_timeline': false,\n    'home/follow-suggestions': false,\n    'explore/links': false,\n    'explore/statuses': false,\n    'explore/tags': false,\n  }),\n});\n\nconst defaultColumns = fromJS([\n  { id: 'COMPOSE', uuid: uuid(), params: {} },\n  { id: 'HOME', uuid: uuid(), params: {} },\n  { id: 'NOTIFICATIONS', uuid: uuid(), params: {} },\n]);\n\nconst hydrate = (state, settings) => state.mergeDeep(settings).update('columns', (val = defaultColumns) => val);\n\nconst moveColumn = (state, uuid, direction) => {\n  const columns  = state.get('columns');\n  const index    = columns.findIndex(item => item.get('uuid') === uuid);\n  const newIndex = index + direction;\n\n  let newColumns;\n\n  newColumns = columns.splice(index, 1);\n  newColumns = newColumns.splice(newIndex, 0, columns.get(index));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst changeColumnParams = (state, uuid, path, value) => {\n  const columns = state.get('columns');\n  const index   = columns.findIndex(item => item.get('uuid') === uuid);\n\n  const newColumns = columns.update(index, column => column.updateIn(['params', ...path], () => value));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst updateFrequentEmojis = (state, emoji) => state.update('frequentlyUsedEmojis', ImmutableMap(), map => map.update(emoji.id, 0, count => count + 1)).set('saved', false);\n\nconst updateFrequentLanguages = (state, language) => state.update('frequentlyUsedLanguages', ImmutableMap(), map => map.update(language, 0, count => count + 1)).set('saved', false);\n\nconst filterDeadListColumns = (state, listId) => state.update('columns', columns => columns.filterNot(column => column.get('id') === 'LIST' && column.get('params').get('id') === listId));\n\nexport default function settings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('settings'));\n  case NOTIFICATIONS_FILTER_SET:\n  case SETTING_CHANGE:\n    return state\n      .setIn(action.path, action.value)\n      .set('saved', false);\n  case COLUMN_ADD:\n    return state\n      .update('columns', list => list.push(fromJS({ id: action.id, uuid: uuid(), params: action.params })))\n      .set('saved', false);\n  case COLUMN_REMOVE:\n    return state\n      .update('columns', list => list.filterNot(item => item.get('uuid') === action.uuid))\n      .set('saved', false);\n  case COLUMN_MOVE:\n    return moveColumn(state, action.uuid, action.direction);\n  case COLUMN_PARAMS_CHANGE:\n    return changeColumnParams(state, action.uuid, action.path, action.value);\n  case EMOJI_USE:\n    return updateFrequentEmojis(state, action.emoji);\n  case LANGUAGE_USE:\n    return updateFrequentLanguages(state, action.language);\n  case SETTING_SAVE:\n    return state.set('saved', true);\n  case LIST_FETCH_FAIL:\n    return action.error.response.status === 404 ? filterDeadListColumns(state, action.id) : state;\n  case LIST_DELETE_SUCCESS:\n    return filterDeadListColumns(state, action.id);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from '../actions/accounts';\nimport {\n  BOOKMARKED_STATUSES_FETCH_REQUEST,\n  BOOKMARKED_STATUSES_FETCH_SUCCESS,\n  BOOKMARKED_STATUSES_FETCH_FAIL,\n  BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n  BOOKMARKED_STATUSES_EXPAND_FAIL,\n} from '../actions/bookmarks';\nimport {\n  FAVOURITED_STATUSES_FETCH_REQUEST,\n  FAVOURITED_STATUSES_FETCH_SUCCESS,\n  FAVOURITED_STATUSES_FETCH_FAIL,\n  FAVOURITED_STATUSES_EXPAND_REQUEST,\n  FAVOURITED_STATUSES_EXPAND_SUCCESS,\n  FAVOURITED_STATUSES_EXPAND_FAIL,\n} from '../actions/favourites';\nimport {\n  FAVOURITE_SUCCESS,\n  UNFAVOURITE_SUCCESS,\n  BOOKMARK_SUCCESS,\n  UNBOOKMARK_SUCCESS,\n  PIN_SUCCESS,\n  UNPIN_SUCCESS,\n} from '../actions/interactions';\nimport {\n  PINNED_STATUSES_FETCH_SUCCESS,\n} from '../actions/pin_statuses';\nimport {\n  TRENDS_STATUSES_FETCH_REQUEST,\n  TRENDS_STATUSES_FETCH_SUCCESS,\n  TRENDS_STATUSES_FETCH_FAIL,\n  TRENDS_STATUSES_EXPAND_REQUEST,\n  TRENDS_STATUSES_EXPAND_SUCCESS,\n  TRENDS_STATUSES_EXPAND_FAIL,\n} from '../actions/trends';\n\n\n\nconst initialState = ImmutableMap({\n  favourites: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  bookmarks: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  pins: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  trending: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nconst normalizeList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('loaded', true);\n    map.set('isLoading', false);\n    map.set('items', ImmutableOrderedSet(statuses.map(item => item.id)));\n  }));\n};\n\nconst appendToList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('isLoading', false);\n    map.set('items', map.get('items').union(statuses.map(item => item.id)));\n  }));\n};\n\nconst prependOneToList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => {\n    if (list.includes(status.get('id'))) {\n      return list;\n    } else {\n      return ImmutableOrderedSet([status.get('id')]).union(list);\n    }\n  });\n};\n\nconst removeOneFromList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => list.delete(status.get('id')));\n};\n\nexport default function statusLists(state = initialState, action) {\n  switch(action.type) {\n  case FAVOURITED_STATUSES_FETCH_REQUEST:\n  case FAVOURITED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['favourites', 'isLoading'], true);\n  case FAVOURITED_STATUSES_FETCH_FAIL:\n  case FAVOURITED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['favourites', 'isLoading'], false);\n  case FAVOURITED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'favourites', action.statuses, action.next);\n  case FAVOURITED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'favourites', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_FETCH_REQUEST:\n  case BOOKMARKED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['bookmarks', 'isLoading'], true);\n  case BOOKMARKED_STATUSES_FETCH_FAIL:\n  case BOOKMARKED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['bookmarks', 'isLoading'], false);\n  case BOOKMARKED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'bookmarks', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'bookmarks', action.statuses, action.next);\n  case TRENDS_STATUSES_FETCH_REQUEST:\n  case TRENDS_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['trending', 'isLoading'], true);\n  case TRENDS_STATUSES_FETCH_FAIL:\n  case TRENDS_STATUSES_EXPAND_FAIL:\n    return state.setIn(['trending', 'isLoading'], false);\n  case TRENDS_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'trending', action.statuses, action.next);\n  case TRENDS_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'trending', action.statuses, action.next);\n  case FAVOURITE_SUCCESS:\n    return prependOneToList(state, 'favourites', action.status);\n  case UNFAVOURITE_SUCCESS:\n    return removeOneFromList(state, 'favourites', action.status);\n  case BOOKMARK_SUCCESS:\n    return prependOneToList(state, 'bookmarks', action.status);\n  case UNBOOKMARK_SUCCESS:\n    return removeOneFromList(state, 'bookmarks', action.status);\n  case PINNED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'pins', action.statuses, action.next);\n  case PIN_SUCCESS:\n    return prependOneToList(state, 'pins', action.status);\n  case UNPIN_SUCCESS:\n    return removeOneFromList(state, 'pins', action.status);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return state.updateIn(['trending', 'items'], ImmutableOrderedSet(), list => list.filterNot(statusId => action.payload.statuses.getIn([statusId, 'account']) === action.payload.relationship.id));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport { STATUS_IMPORT, STATUSES_IMPORT } from '../actions/importer';\nimport { normalizeStatusTranslation } from '../actions/importer/normalizer';\nimport {\n  FAVOURITE_REQUEST,\n  FAVOURITE_FAIL,\n  UNFAVOURITE_REQUEST,\n  UNFAVOURITE_FAIL,\n  BOOKMARK_REQUEST,\n  BOOKMARK_FAIL,\n  REACTION_UPDATE,\n  REACTION_ADD_FAIL,\n  REACTION_REMOVE_FAIL,\n  REACTION_ADD_REQUEST,\n  REACTION_REMOVE_REQUEST,\n  UNBOOKMARK_REQUEST,\n  UNBOOKMARK_FAIL,\n} from '../actions/interactions';\nimport {\n  reblog,\n  unreblog,\n} from '../actions/interactions_typed';\nimport {\n  STATUS_MUTE_SUCCESS,\n  STATUS_UNMUTE_SUCCESS,\n  STATUS_REVEAL,\n  STATUS_HIDE,\n  STATUS_COLLAPSE,\n  STATUS_TRANSLATE_SUCCESS,\n  STATUS_TRANSLATE_UNDO,\n  STATUS_FETCH_REQUEST,\n  STATUS_FETCH_FAIL,\n} from '../actions/statuses';\n\nconst importStatus = (state, status) => state.set(status.id, fromJS(status));\n\nconst importStatuses = (state, statuses) =>\n  state.withMutations(mutable => statuses.forEach(status => importStatus(mutable, status)));\n\nconst deleteStatus = (state, id, references) => {\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, []);\n  });\n\n  return state.delete(id);\n};\n\nconst updateReaction = (state, id, name, updater) => state.update(\n  id,\n  status => status.update(\n    'reactions',\n    reactions => {\n      const index = reactions.findIndex(reaction => reaction.get('name') === name);\n      if (index > -1) {\n        return reactions.update(index, reaction => updater(reaction));\n      } else {\n        return reactions.push(updater(fromJS({ name, count: 0 })));\n      }\n    },\n  ),\n);\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.status_id, reaction.name, x => x.set('count', reaction.count));\n\n// The url parameter is only used when adding a new custom emoji reaction\n// (one that wasn't in the reactions list before) because we don't have its\n// URL yet.  In all other cases, it's undefined.\nconst addReaction = (state, id, name, url) => updateReaction(\n  state,\n  id,\n  name,\n  x => x.set('me', true)\n    .update('count', n => n + 1)\n    .update('url', old => old ? old : url)\n    .update('static_url', old => old ? old : url),\n);\n\nconst removeReaction = (state, id, name) => updateReaction(\n  state,\n  id,\n  name,\n  x => x.set('me', false).update('count', n => n - 1),\n);\n\nconst statusTranslateSuccess = (state, id, translation) => {\n  return state.withMutations(map => {\n    map.setIn([id, 'translation'], fromJS(normalizeStatusTranslation(translation, map.get(id))));\n\n    const list = map.getIn([id, 'media_attachments']);\n    if (translation.media_attachments && list) {\n      translation.media_attachments.forEach(item => {\n        const index = list.findIndex(i => i.get('id') === item.id);\n        map.setIn([id, 'media_attachments', index, 'translation'], fromJS({ description: item.description }));\n      });\n    }\n  });\n};\n\nconst statusTranslateUndo = (state, id) => {\n  return state.withMutations(map => {\n    map.deleteIn([id, 'translation']);\n    map.getIn([id, 'media_attachments']).forEach((item, index) => map.deleteIn([id, 'media_attachments', index, 'translation']));\n  });\n};\n\nconst initialState = ImmutableMap();\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case STATUS_FETCH_REQUEST:\n    return state.setIn([action.id, 'isLoading'], true);\n  case STATUS_FETCH_FAIL:\n    return state.delete(action.id);\n  case STATUS_IMPORT:\n    return importStatus(state, action.status);\n  case STATUSES_IMPORT:\n    return importStatuses(state, action.statuses);\n  case FAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], true);\n  case FAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], true);\n  case BOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case BOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case REACTION_ADD_REQUEST:\n  case REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name, action.url);\n  case REACTION_REMOVE_REQUEST:\n  case REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case STATUS_MUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], true);\n  case STATUS_UNMUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], false);\n  case STATUS_REVEAL:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], false);\n        }\n      });\n    });\n  case STATUS_HIDE:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], true);\n        }\n      });\n    });\n  case STATUS_COLLAPSE:\n    return state.setIn([action.id, 'collapsed'], action.isCollapsed);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references);\n  case STATUS_TRANSLATE_SUCCESS:\n    return statusTranslateSuccess(state, action.id, action.translation);\n  case STATUS_TRANSLATE_UNDO:\n    return statusTranslateUndo(state, action.id);\n  default:\n    if(reblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else if(reblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else\n      return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport { blockAccountSuccess, muteAccountSuccess } from 'flavours/glitch/actions/accounts';\nimport { blockDomainSuccess } from 'flavours/glitch/actions/domain_blocks';\n\nimport {\n  SUGGESTIONS_FETCH_REQUEST,\n  SUGGESTIONS_FETCH_SUCCESS,\n  SUGGESTIONS_FETCH_FAIL,\n  SUGGESTIONS_DISMISS,\n} from '../actions/suggestions';\n\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n});\n\nexport default function suggestionsReducer(state = initialState, action) {\n  switch(action.type) {\n  case SUGGESTIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case SUGGESTIONS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.suggestions.map(x => ({ ...x, account: x.account.id }))));\n      map.set('isLoading', false);\n    });\n  case SUGGESTIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case SUGGESTIONS_DISMISS:\n    return state.update('items', list => list.filterNot(x => x.get('account') === action.id));\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return state.update('items', list => list.filterNot(x => x.get('account') === action.payload.relationship.id));\n  case blockDomainSuccess.type:\n    return state.update('items', list => list.filterNot(x => action.payload.accounts.includes(x.get('account'))));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport {\n  HASHTAG_FETCH_SUCCESS,\n  HASHTAG_FOLLOW_REQUEST,\n  HASHTAG_FOLLOW_FAIL,\n  HASHTAG_UNFOLLOW_REQUEST,\n  HASHTAG_UNFOLLOW_FAIL,\n} from 'flavours/glitch/actions/tags';\n\nconst initialState = ImmutableMap();\n\nexport default function tags(state = initialState, action) {\n  switch(action.type) {\n  case HASHTAG_FETCH_SUCCESS:\n    return state.set(action.name, fromJS(action.tag));\n  case HASHTAG_FOLLOW_REQUEST:\n  case HASHTAG_UNFOLLOW_FAIL:\n    return state.setIn([action.name, 'following'], true);\n  case HASHTAG_FOLLOW_FAIL:\n  case HASHTAG_UNFOLLOW_REQUEST:\n    return state.setIn([action.name, 'following'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'flavours/glitch/actions/timelines_typed';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n  unfollowAccountSuccess\n} from '../actions/accounts';\nimport {\n  TIMELINE_UPDATE,\n  TIMELINE_CLEAR,\n  TIMELINE_EXPAND_SUCCESS,\n  TIMELINE_EXPAND_REQUEST,\n  TIMELINE_EXPAND_FAIL,\n  TIMELINE_SCROLL_TOP,\n  TIMELINE_CONNECT,\n  TIMELINE_LOAD_PENDING,\n  TIMELINE_MARK_AS_PARTIAL,\n  TIMELINE_INSERT,\n  TIMELINE_GAP,\n  TIMELINE_SUGGESTIONS,\n  disconnectTimeline,\n} from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap();\n\nconst initialTimeline = ImmutableMap({\n  unread: 0,\n  online: false,\n  top: true,\n  isLoading: false,\n  hasMore: true,\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n});\n\nconst isPlaceholder = value => value === TIMELINE_GAP || value === TIMELINE_SUGGESTIONS;\n\nconst expandNormalizedTimeline = (state, timeline, statuses, next, isPartial, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing items in the timeline might be out of order\n  // - the existing timeline may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items of the timeline\n  // - `statuses` may include items that are already included in the timeline\n  // - this function can be called either to fill in a gap, or load newer items\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    mMap.set('isLoading', false);\n    mMap.set('isPartial', isPartial);\n\n    if (!next && !isLoadingRecent) mMap.set('hasMore', false);\n\n    if (timeline.endsWith(':pinned')) {\n      mMap.set('items', statuses.map(status => status.get('id')));\n    } else if (!statuses.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mMap.get('pendingItems').isEmpty());\n\n      mMap.update(usePendingItems ? 'pendingItems' : 'items', ImmutableList(), oldIds => {\n        const newIds = statuses.map(status => status.get('id'));\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newIds.last()` is the oldest item that was requested and that\n        // there is no “hole” between `newIds.last()` and `newIds.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the timeline that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldIds.findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.last()) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the timeline that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newIds` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldIds.take(lastIndex).findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.first()) > 0) + 1;\n\n        let insertedIds = ImmutableOrderedSet(newIds).withMutations(insertedIds => {\n          // It is possible, though unlikely, that the slice we are replacing contains items older\n          // than the elements we got from the API. Get them and add them back at the back of the\n          // slice.\n          const olderIds = oldIds.slice(firstIndex, lastIndex).filter(id => !isPlaceholder(id) && compareId(id, newIds.last()) < 0);\n          insertedIds.union(olderIds);\n\n          // Make sure we aren't inserting duplicates\n          insertedIds.subtract(oldIds.take(firstIndex), oldIds.skip(lastIndex));\n        }).toList();\n\n        // Finally, insert a gap marker if the data is marked as partial by the server\n        if (isPartial && (firstIndex === 0 || oldIds.get(firstIndex - 1) !== TIMELINE_GAP)) {\n          insertedIds = insertedIds.unshift(TIMELINE_GAP);\n        }\n\n        return oldIds.take(firstIndex).concat(\n          insertedIds,\n          oldIds.skip(lastIndex),\n        );\n      });\n    }\n  }));\n};\n\nconst updateTimeline = (state, timeline, status, usePendingItems, filtered) => {\n  const top = state.getIn([timeline, 'top']);\n\n  if (usePendingItems || !state.getIn([timeline, 'pendingItems']).isEmpty()) {\n    if (state.getIn([timeline, 'pendingItems'], ImmutableList()).includes(status.get('id')) || state.getIn([timeline, 'items'], ImmutableList()).includes(status.get('id'))) {\n      return state;\n    }\n\n    state = state.update(timeline, initialTimeline, map => map.update('pendingItems', list => list.unshift(status.get('id'))));\n\n    if (!filtered) {\n      state = state.updateIn([timeline, 'unread'], unread => unread + 1);\n    }\n\n    return state;\n  }\n\n  const ids        = state.getIn([timeline, 'items'], ImmutableList());\n  const includesId = ids.includes(status.get('id'));\n  const unread     = state.getIn([timeline, 'unread'], 0);\n\n  if (includesId) {\n    return state;\n  }\n\n  let newIds = ids;\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (!top && !filtered) mMap.set('unread', unread + 1);\n    if (top && ids.size > 40) newIds = newIds.take(20);\n    mMap.set('items', newIds.unshift(status.get('id')));\n  }));\n};\n\nconst deleteStatus = (state, id, references, exclude_account = null) => {\n  state.keySeq().forEach(timeline => {\n    if (exclude_account === null || (timeline !== `account:${exclude_account}` && !timeline.startsWith(`account:${exclude_account}:`))) {\n      const helper = list => list.filterNot(item => item === id);\n      state = state.updateIn([timeline, 'items'], helper).updateIn([timeline, 'pendingItems'], helper);\n    }\n  });\n\n  // Remove reblogs of deleted status\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, [], exclude_account);\n  });\n\n  return state;\n};\n\nconst clearTimeline = (state, timeline) => {\n  return state.set(timeline, initialTimeline);\n};\n\nconst filterTimelines = (state, relationship, statuses) => {\n  let references;\n\n  statuses.forEach(status => {\n    if (status.get('account') !== relationship.id) {\n      return;\n    }\n\n    references = statuses.filter(item => item.get('reblog') === status.get('id')).map(item => item.get('id')).valueSeq().toJSON();\n    state      = deleteStatus(state, status.get('id'), references, relationship.id);\n  });\n\n  return state;\n};\n\nconst filterTimeline = (timeline, state, relationship, statuses) => {\n  const helper = list => list.filterNot(statusId => statuses.getIn([statusId, 'account']) === relationship.id);\n  return state.updateIn([timeline, 'items'], ImmutableList(), helper).updateIn([timeline, 'pendingItems'], ImmutableList(), helper);\n};\n\nconst updateTop = (state, timeline, top) => {\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (top) mMap.set('unread', mMap.get('pendingItems').size);\n    mMap.set('top', top);\n  }));\n};\n\nconst reconnectTimeline = (state, usePendingItems) => {\n  if (state.get('online')) {\n    return state;\n  }\n\n  return state.withMutations(mMap => {\n    mMap.update(usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items);\n    mMap.set('online', true);\n  });\n};\n\nexport default function timelines(state = initialState, action) {\n  switch(action.type) {\n  case TIMELINE_LOAD_PENDING:\n    return state.update(action.timeline, initialTimeline, map =>\n      map.update('items', list => map.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0));\n  case TIMELINE_EXPAND_REQUEST:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', true));\n  case TIMELINE_EXPAND_FAIL:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', false));\n  case TIMELINE_EXPAND_SUCCESS:\n    return expandNormalizedTimeline(state, action.timeline, fromJS(action.statuses), action.next, action.partial, action.isLoadingRecent, action.usePendingItems);\n  case TIMELINE_UPDATE:\n    return updateTimeline(state, action.timeline, fromJS(action.status), action.usePendingItems, action.filtered);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references, action.payload.reblogOf);\n  case TIMELINE_CLEAR:\n    return clearTimeline(state, action.timeline);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterTimelines(state, action.payload.relationship, action.payload.statuses);\n  case unfollowAccountSuccess.type:\n    return filterTimeline('home', state, action.payload.relationship, action.payload.statuses);\n  case TIMELINE_SCROLL_TOP:\n    return updateTop(state, action.timeline, action.top);\n  case TIMELINE_CONNECT:\n    return state.update(action.timeline, initialTimeline, map => reconnectTimeline(map, action.usePendingItems));\n  case disconnectTimeline.type:\n    return state.update(\n      action.payload.timeline,\n      initialTimeline,\n      map => map.set('online', false).update(action.payload.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items),\n    );\n  case TIMELINE_MARK_AS_PARTIAL:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.set('isPartial', true).set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('unread', 0),\n    );\n  case TIMELINE_INSERT:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.update('items', ImmutableList(), list => {\n        if (!list.includes(action.key)) {\n          return list.insert(action.index, action.key);\n        }\n\n        return list;\n      })\n    );\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  TRENDS_TAGS_FETCH_REQUEST,\n  TRENDS_TAGS_FETCH_SUCCESS,\n  TRENDS_TAGS_FETCH_FAIL,\n  TRENDS_LINKS_FETCH_REQUEST,\n  TRENDS_LINKS_FETCH_SUCCESS,\n  TRENDS_LINKS_FETCH_FAIL,\n} from 'flavours/glitch/actions/trends';\n\nconst initialState = ImmutableMap({\n  tags: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n\n  links: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n});\n\nexport default function trendsReducer(state = initialState, action) {\n  switch(action.type) {\n  case TRENDS_TAGS_FETCH_REQUEST:\n    return state.setIn(['tags', 'isLoading'], true);\n  case TRENDS_TAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['tags', 'items'], fromJS(action.trends));\n      map.setIn(['tags', 'isLoading'], false);\n    });\n  case TRENDS_TAGS_FETCH_FAIL:\n    return state.setIn(['tags', 'isLoading'], false);\n  case TRENDS_LINKS_FETCH_REQUEST:\n    return state.setIn(['links', 'isLoading'], true);\n  case TRENDS_LINKS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['links', 'items'], fromJS(action.trends));\n      map.setIn(['links', 'isLoading'], false);\n    });\n  case TRENDS_LINKS_FETCH_FAIL:\n    return state.setIn(['links', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  expandDirectory,\n  fetchDirectory\n} from 'flavours/glitch/actions/directory';\nimport {\n  FEATURED_TAGS_FETCH_REQUEST,\n  FEATURED_TAGS_FETCH_SUCCESS,\n  FEATURED_TAGS_FETCH_FAIL,\n} from 'flavours/glitch/actions/featured_tags';\n\nimport {\n  FOLLOWERS_FETCH_REQUEST,\n  FOLLOWERS_FETCH_SUCCESS,\n  FOLLOWERS_FETCH_FAIL,\n  FOLLOWERS_EXPAND_REQUEST,\n  FOLLOWERS_EXPAND_SUCCESS,\n  FOLLOWERS_EXPAND_FAIL,\n  FOLLOWING_FETCH_REQUEST,\n  FOLLOWING_FETCH_SUCCESS,\n  FOLLOWING_FETCH_FAIL,\n  FOLLOWING_EXPAND_REQUEST,\n  FOLLOWING_EXPAND_SUCCESS,\n  FOLLOWING_EXPAND_FAIL,\n  FOLLOW_REQUESTS_FETCH_REQUEST,\n  FOLLOW_REQUESTS_FETCH_SUCCESS,\n  FOLLOW_REQUESTS_FETCH_FAIL,\n  FOLLOW_REQUESTS_EXPAND_REQUEST,\n  FOLLOW_REQUESTS_EXPAND_SUCCESS,\n  FOLLOW_REQUESTS_EXPAND_FAIL,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n} from '../actions/accounts';\nimport {\n  BLOCKS_FETCH_REQUEST,\n  BLOCKS_FETCH_SUCCESS,\n  BLOCKS_FETCH_FAIL,\n  BLOCKS_EXPAND_REQUEST,\n  BLOCKS_EXPAND_SUCCESS,\n  BLOCKS_EXPAND_FAIL,\n} from '../actions/blocks';\nimport {\n  REBLOGS_FETCH_REQUEST,\n  REBLOGS_FETCH_SUCCESS,\n  REBLOGS_FETCH_FAIL,\n  REBLOGS_EXPAND_REQUEST,\n  REBLOGS_EXPAND_SUCCESS,\n  REBLOGS_EXPAND_FAIL,\n  FAVOURITES_FETCH_REQUEST,\n  FAVOURITES_FETCH_SUCCESS,\n  FAVOURITES_FETCH_FAIL,\n  FAVOURITES_EXPAND_REQUEST,\n  FAVOURITES_EXPAND_SUCCESS,\n  FAVOURITES_EXPAND_FAIL,\n} from '../actions/interactions';\nimport {\n  MUTES_FETCH_REQUEST,\n  MUTES_FETCH_SUCCESS,\n  MUTES_FETCH_FAIL,\n  MUTES_EXPAND_REQUEST,\n  MUTES_EXPAND_SUCCESS,\n  MUTES_EXPAND_FAIL,\n} from '../actions/mutes';\nimport { notificationsUpdate } from '../actions/notifications';\n\nconst initialListState = ImmutableMap({\n  next: null,\n  isLoading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap({\n  followers: initialListState,\n  following: initialListState,\n  reblogged_by: initialListState,\n  favourited_by: initialListState,\n  follow_requests: initialListState,\n  blocks: initialListState,\n  mutes: initialListState,\n  featured_tags: initialListState,\n});\n\nconst normalizeList = (state, path, accounts, next) => {\n  return state.setIn(path, ImmutableMap({\n    next,\n    items: ImmutableList(accounts.map(item => item.id)),\n    isLoading: false,\n  }));\n};\n\nconst appendToList = (state, path, accounts, next) => {\n  return state.updateIn(path, map => {\n    return map.set('next', next).set('isLoading', false).update('items', list => list.concat(accounts.map(item => item.id)));\n  });\n};\n\nconst normalizeFollowRequest = (state, notification) => {\n  return state.updateIn(['follow_requests', 'items'], list => {\n    return list.filterNot(item => item === notification.account.id).unshift(notification.account.id);\n  });\n};\n\nconst normalizeFeaturedTag = (featuredTags, accountId) => {\n  const normalizeFeaturedTag = { ...featuredTags, accountId: accountId };\n  return fromJS(normalizeFeaturedTag);\n};\n\nconst normalizeFeaturedTags = (state, path, featuredTags, accountId) => {\n  return state.setIn(path, ImmutableMap({\n    items: ImmutableList(featuredTags.map(featuredTag => normalizeFeaturedTag(featuredTag, accountId)).sort((a, b) => b.get('statuses_count') - a.get('statuses_count'))),\n    isLoading: false,\n  }));\n};\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function userLists(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWERS_FETCH_SUCCESS:\n    return normalizeList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_EXPAND_SUCCESS:\n    return appendToList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_FETCH_REQUEST:\n  case FOLLOWERS_EXPAND_REQUEST:\n    return state.setIn(['followers', action.id, 'isLoading'], true);\n  case FOLLOWERS_FETCH_FAIL:\n  case FOLLOWERS_EXPAND_FAIL:\n    return state.setIn(['followers', action.id, 'isLoading'], false);\n  case FOLLOWING_FETCH_SUCCESS:\n    return normalizeList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_EXPAND_SUCCESS:\n    return appendToList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_FETCH_REQUEST:\n  case FOLLOWING_EXPAND_REQUEST:\n    return state.setIn(['following', action.id, 'isLoading'], true);\n  case FOLLOWING_FETCH_FAIL:\n  case FOLLOWING_EXPAND_FAIL:\n    return state.setIn(['following', action.id, 'isLoading'], false);\n  case REBLOGS_FETCH_SUCCESS:\n    return normalizeList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_EXPAND_SUCCESS:\n    return appendToList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_FETCH_REQUEST:\n  case REBLOGS_EXPAND_REQUEST:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], true);\n  case REBLOGS_FETCH_FAIL:\n  case REBLOGS_EXPAND_FAIL:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], false);\n  case FAVOURITES_FETCH_SUCCESS:\n    return normalizeList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_EXPAND_SUCCESS:\n    return appendToList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_FETCH_REQUEST:\n  case FAVOURITES_EXPAND_REQUEST:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], true);\n  case FAVOURITES_FETCH_FAIL:\n  case FAVOURITES_EXPAND_FAIL:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], false);\n  case notificationsUpdate.type:\n    return action.payload.notification.type === 'follow_request' ? normalizeFollowRequest(state, action.payload.notification) : state;\n  case FOLLOW_REQUESTS_FETCH_SUCCESS:\n    return normalizeList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_EXPAND_SUCCESS:\n    return appendToList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_FETCH_REQUEST:\n  case FOLLOW_REQUESTS_EXPAND_REQUEST:\n    return state.setIn(['follow_requests', 'isLoading'], true);\n  case FOLLOW_REQUESTS_FETCH_FAIL:\n  case FOLLOW_REQUESTS_EXPAND_FAIL:\n    return state.setIn(['follow_requests', 'isLoading'], false);\n  case authorizeFollowRequestSuccess.type:\n  case rejectFollowRequestSuccess.type:\n    return state.updateIn(['follow_requests', 'items'], list => list.filterNot(item => item === action.payload.id));\n  case BLOCKS_FETCH_SUCCESS:\n    return normalizeList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_EXPAND_SUCCESS:\n    return appendToList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_FETCH_REQUEST:\n  case BLOCKS_EXPAND_REQUEST:\n    return state.setIn(['blocks', 'isLoading'], true);\n  case BLOCKS_FETCH_FAIL:\n  case BLOCKS_EXPAND_FAIL:\n    return state.setIn(['blocks', 'isLoading'], false);\n  case MUTES_FETCH_SUCCESS:\n    return normalizeList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_EXPAND_SUCCESS:\n    return appendToList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_FETCH_REQUEST:\n  case MUTES_EXPAND_REQUEST:\n    return state.setIn(['mutes', 'isLoading'], true);\n  case MUTES_FETCH_FAIL:\n  case MUTES_EXPAND_FAIL:\n    return state.setIn(['mutes', 'isLoading'], false);\n  case FEATURED_TAGS_FETCH_SUCCESS:\n    return normalizeFeaturedTags(state, ['featured_tags', action.id], action.tags, action.id);\n  case FEATURED_TAGS_FETCH_REQUEST:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], true);\n  case FEATURED_TAGS_FETCH_FAIL:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], false);\n  default:\n    if(fetchDirectory.fulfilled.match(action))\n      return normalizeList(state, ['directory'], action.payload.accounts, undefined);\n    else if( expandDirectory.fulfilled.match(action))\n      return appendToList(state, ['directory'], action.payload.accounts, undefined);\n    else if(fetchDirectory.pending.match(action) ||\n     expandDirectory.pending.match(action))\n      return state.setIn(['directory', 'isLoading'], true);\n    else if(fetchDirectory.rejected.match(action) ||\n     expandDirectory.rejected.match(action))\n      return state.setIn(['directory', 'isLoading'], false);\n    else\n      return state;\n  }\n}\n","import { Record as ImmutableRecord } from 'immutable';\n\nimport { loadingBarReducer } from 'react-redux-loading-bar';\nimport { combineReducers } from 'redux-immutable';\n\nimport { accountsReducer } from './accounts';\nimport accounts_map from './accounts_map';\nimport alerts from './alerts';\nimport announcements from './announcements';\nimport compose from './compose';\nimport contexts from './contexts';\nimport conversations from './conversations';\nimport custom_emojis from './custom_emojis';\nimport domain_lists from './domain_lists';\nimport { dropdownMenuReducer } from './dropdown_menu';\nimport filters from './filters';\nimport followed_tags from './followed_tags';\nimport height_cache from './height_cache';\nimport history from './history';\nimport listAdder from './list_adder';\nimport listEditor from './list_editor';\nimport lists from './lists';\nimport local_settings from './local_settings';\nimport { markersReducer } from './markers';\nimport media_attachments from './media_attachments';\nimport meta from './meta';\nimport { modalReducer } from './modal';\nimport { notificationGroupsReducer } from './notification_groups';\nimport { notificationPolicyReducer } from './notification_policy';\nimport { notificationRequestsReducer } from './notification_requests';\nimport notifications from './notifications';\nimport { pictureInPictureReducer } from './picture_in_picture';\nimport pinnedAccountsEditor from './pinned_accounts_editor';\nimport polls from './polls';\nimport push_notifications from './push_notifications';\nimport { relationshipsReducer } from './relationships';\nimport search from './search';\nimport server from './server';\nimport settings from './settings';\nimport status_lists from './status_lists';\nimport statuses from './statuses';\nimport suggestions from './suggestions';\nimport tags from './tags';\nimport timelines from './timelines';\nimport trends from './trends';\nimport user_lists from './user_lists';\n\nconst reducers = {\n  announcements,\n  dropdownMenu: dropdownMenuReducer,\n  timelines,\n  meta,\n  alerts,\n  loadingBar: loadingBarReducer,\n  modal: modalReducer,\n  user_lists,\n  domain_lists,\n  status_lists,\n  accounts: accountsReducer,\n  accounts_map,\n  statuses,\n  relationships: relationshipsReducer,\n  settings,\n  local_settings,\n  push_notifications,\n  server,\n  contexts,\n  compose,\n  search,\n  media_attachments,\n  notifications,\n  notificationGroups: notificationGroupsReducer,\n  height_cache,\n  custom_emojis,\n  lists,\n  listEditor,\n  listAdder,\n  filters,\n  conversations,\n  suggestions,\n  pinnedAccountsEditor,\n  polls,\n  trends,\n  markers: markersReducer,\n  picture_in_picture: pictureInPictureReducer,\n  history,\n  tags,\n  followed_tags,\n  notificationPolicy: notificationPolicyReducer,\n  notificationRequests: notificationRequestsReducer,\n};\n\n// We want the root state to be an ImmutableRecord, which is an object with a defined list of keys,\n// so it is properly typed and keys can be accessed using `state.<key>` syntax.\n// This will allow an easy conversion to a plain object once we no longer call `get` or `getIn` on the root state\n\n// By default with `combineReducers` it is a Collection, so we provide our own implementation to get a Record\nconst initialRootState = Object.fromEntries(\n  Object.entries(reducers).map(([name, reducer]) => [\n    name,\n    reducer(undefined, {\n      // empty action\n    }),\n  ]),\n);\n\nconst RootStateRecord = ImmutableRecord(initialRootState, 'RootState');\n\nconst rootReducer = combineReducers(reducers, RootStateRecord);\n\nexport { rootReducer };\n","import {\n  isAction,\n  isAsyncThunkAction,\n  isRejectedWithValue,\n} from '@reduxjs/toolkit';\nimport type { Action, Middleware } from '@reduxjs/toolkit';\n\nimport type { RootState } from '..';\nimport { showAlertForError } from '../../actions/alerts';\nimport type { AsyncThunkRejectValue } from '../typed_functions';\n\nconst defaultFailSuffix = 'FAIL';\nconst isFailedAction = new RegExp(`${defaultFailSuffix}$`, 'g');\n\ninterface ActionWithMaybeAlertParams extends Action, AsyncThunkRejectValue {}\n\ninterface RejectedAction extends Action {\n  payload: AsyncThunkRejectValue;\n}\n\nfunction isRejectedActionWithPayload(\n  action: unknown,\n): action is RejectedAction {\n  return isAsyncThunkAction(action) && isRejectedWithValue(action);\n}\n\nfunction isActionWithmaybeAlertParams(\n  action: unknown,\n): action is ActionWithMaybeAlertParams {\n  return isAction(action);\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types -- we need to use `{}` here to ensure the dispatch types can be merged\nexport const errorsMiddleware: Middleware<{}, RootState> =\n  ({ dispatch }) =>\n  (next) =>\n  (action) => {\n    if (isRejectedActionWithPayload(action) && !action.payload.skipAlert) {\n      dispatch(\n        showAlertForError(action.payload.error, action.payload.skipNotFound),\n      );\n    } else if (\n      isActionWithmaybeAlertParams(action) &&\n      !action.skipAlert &&\n      action.type.match(isFailedAction)\n    ) {\n      dispatch(showAlertForError(action.error, action.skipNotFound));\n    }\n\n    return next(action);\n  };\n","import {\n  isAsyncThunkAction,\n  isPending as isThunkActionPending,\n  isFulfilled as isThunkActionFulfilled,\n  isRejected as isThunkActionRejected,\n  isAction,\n} from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\n\nimport type { RootState } from '..';\n\ninterface Config {\n  promiseTypeSuffixes?: string[];\n}\n\nconst defaultTypeSuffixes: Config['promiseTypeSuffixes'] = [\n  'PENDING',\n  'FULFILLED',\n  'REJECTED',\n];\n\ninterface ActionWithSkipLoading extends UnknownAction {\n  skipLoading: boolean;\n}\n\nfunction isActionWithSkipLoading(\n  action: unknown,\n): action is ActionWithSkipLoading {\n  return (\n    isAction(action) &&\n    'skipLoading' in action &&\n    typeof action.skipLoading === 'boolean'\n  );\n}\n\nexport const loadingBarMiddleware = (\n  config: Config = {},\n): Middleware<{ skipLoading?: boolean }, RootState> => {\n  const promiseTypeSuffixes = config.promiseTypeSuffixes ?? defaultTypeSuffixes;\n\n  return ({ dispatch }) =>\n    (next) =>\n    (action) => {\n      let isPending = false;\n      let isFulfilled = false;\n      let isRejected = false;\n\n      if (\n        isAsyncThunkAction(action)\n        // TODO: once we get the first use-case for it, add a check for skipLoading\n      ) {\n        if (isThunkActionPending(action)) isPending = true;\n        else if (isThunkActionFulfilled(action)) isFulfilled = true;\n        else if (isThunkActionRejected(action)) isRejected = true;\n      } else if (\n        isActionWithSkipLoading(action) &&\n        !action.skipLoading &&\n        typeof action.type === 'string'\n      ) {\n        const [PENDING, FULFILLED, REJECTED] = promiseTypeSuffixes;\n\n        const isPendingRegexp = new RegExp(`${PENDING}$`, 'g');\n        const isFulfilledRegexp = new RegExp(`${FULFILLED}$`, 'g');\n        const isRejectedRegexp = new RegExp(`${REJECTED}$`, 'g');\n\n        if (action.type.match(isPendingRegexp)) {\n          isPending = true;\n        } else if (action.type.match(isFulfilledRegexp)) {\n          isFulfilled = true;\n        } else if (action.type.match(isRejectedRegexp)) {\n          isRejected = true;\n        }\n      }\n\n      if (isPending) {\n        dispatch(showLoading());\n      } else if (isFulfilled || isRejected) {\n        dispatch(hideLoading());\n      }\n\n      return next(action);\n    };\n};\n","import { isAction } from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport ready from 'flavours/glitch/ready';\nimport { assetHost } from 'flavours/glitch/utils/config';\n\nimport type { RootState } from '..';\n\ninterface AudioSource {\n  src: string;\n  type: string;\n}\n\ninterface ActionWithMetaSound extends UnknownAction {\n  meta: { sound: string };\n}\n\nfunction isActionWithMetaSound(action: unknown): action is ActionWithMetaSound {\n  return (\n    isAction(action) &&\n    'meta' in action &&\n    typeof action.meta === 'object' &&\n    !!action.meta &&\n    'sound' in action.meta &&\n    typeof action.meta.sound === 'string'\n  );\n}\n\nconst createAudio = (sources: AudioSource[]) => {\n  const audio = new Audio();\n  sources.forEach(({ type, src }) => {\n    const source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nconst play = (audio: HTMLAudioElement) => {\n  if (!audio.paused) {\n    audio.pause();\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  void audio.play();\n};\n\nexport const soundsMiddleware = (): Middleware<\n  // eslint-disable-next-line @typescript-eslint/ban-types -- we need to use `{}` here to ensure the dispatch types can be merged\n  {},\n  RootState\n> => {\n  const soundCache: Record<string, HTMLAudioElement> = {};\n\n  void ready(() => {\n    soundCache.boop = createAudio([\n      {\n        src: `${assetHost}/sounds/boop.ogg`,\n        type: 'audio/ogg',\n      },\n      {\n        src: `${assetHost}/sounds/boop.mp3`,\n        type: 'audio/mpeg',\n      },\n    ]);\n  });\n\n  return () => (next) => (action) => {\n    if (isActionWithMetaSound(action)) {\n      const sound = action.meta.sound;\n\n      if (sound) {\n        const s = soundCache[sound];\n        if (s) play(s);\n      }\n    }\n\n    return next(action);\n  };\n};\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport { rootReducer } from '../reducers';\n\nimport { errorsMiddleware } from './middlewares/errors';\nimport { loadingBarMiddleware } from './middlewares/loading_bar';\nimport { soundsMiddleware } from './middlewares/sounds';\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      // In development, Redux Toolkit enables 2 default middlewares to detect\n      // common issues with states. Unfortunately, our use of ImmutableJS for state\n      // triggers both, so lets disable them until our state is fully refactored\n\n      // https://redux-toolkit.js.org/api/serializabilityMiddleware\n      // This checks recursively that every values in the state are serializable in JSON\n      // Which is not the case, as we use ImmutableJS structures, but also File objects\n      serializableCheck: false,\n\n      // https://redux-toolkit.js.org/api/immutabilityMiddleware\n      // This checks recursively if every value in the state is immutable (ie, a JS primitive type)\n      // But this is not the case, as our Root State is an ImmutableJS map, which is an object\n      immutableCheck: false,\n    })\n      .concat(\n        loadingBarMiddleware({\n          promiseTypeSuffixes: ['REQUEST', 'SUCCESS', 'FAIL'],\n        }),\n      )\n      .concat(errorsMiddleware)\n      .concat(soundsMiddleware()),\n});\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof store.dispatch;\nexport type GetState = typeof store.getState;\n","'use strict';\nvar $ = require('../internals/export');\nvar $findLastIndex = require('../internals/array-iteration-from-last').findLastIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.findLastIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findlastindex\n$({ target: 'Array', proto: true }, {\n  findLastIndex: function findLastIndex(callbackfn /* , that = undefined */) {\n    return $findLastIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\naddToUnscopables('findLastIndex');\n","\n\n// currently used to initiate the velocity style object to 0\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = mapToZero;\n\nfunction mapToZero(obj) {\n  var ret = {};\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      ret[key] = 0;\n    }\n  }\n  return ret;\n}\n\nmodule.exports = exports['default'];","\n\n// stepper is used a lot. Saves allocation to return the same array wrapper.\n// This is fine and danger-free against mutations because the callsite\n// immediately destructures it and gets the numbers inside without passing the\n\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = stepper;\n\nvar reusedTuple = [0, 0];\n\nfunction stepper(secondPerFrame, x, v, destX, k, b, precision) {\n  // Spring stiffness, in kg / s^2\n\n  // for animations, destX is really spring length (spring at rest). initial\n  // position is considered as the stretched/compressed position of a spring\n  var Fspring = -k * (x - destX);\n\n  // Damping, in kg / s\n  var Fdamper = -b * v;\n\n  // usually we put mass here, but for animation purposes, specifying mass is a\n  // bit redundant. you could simply adjust k and b accordingly\n  // let a = (Fspring + Fdamper) / mass;\n  var a = Fspring + Fdamper;\n\n  var newV = v + a * secondPerFrame;\n  var newX = x + newV * secondPerFrame;\n\n  if (Math.abs(newV) < precision && Math.abs(newX - destX) < precision) {\n    reusedTuple[0] = destX;\n    reusedTuple[1] = 0;\n    return reusedTuple;\n  }\n\n  reusedTuple[0] = newX;\n  reusedTuple[1] = newV;\n  return reusedTuple;\n}\n\nmodule.exports = exports[\"default\"];\n// array reference around.","// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function(object) {\n  if (!object) {\n    object = root;\n  }\n  object.requestAnimationFrame = raf\n  object.cancelAnimationFrame = caf\n}\n","\n\n// usage assumption: currentStyle values have already been rendered but it says\n// nothing of whether currentStyle is stale (see unreadPropStyle)\n'use strict';\n\nexports.__esModule = true;\nexports['default'] = shouldStopAnimation;\n\nfunction shouldStopAnimation(currentStyle, style, currentVelocity) {\n  for (var key in style) {\n    if (!Object.prototype.hasOwnProperty.call(style, key)) {\n      continue;\n    }\n\n    if (currentVelocity[key] !== 0) {\n      return false;\n    }\n\n    var styleValue = typeof style[key] === 'number' ? style[key] : style[key].val;\n    // stepper will have already taken care of rounding precision errors, so\n    // won't have such thing as 0.9999 !=== 1\n    if (currentStyle[key] !== styleValue) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = exports['default'];","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n","'use strict';\nvar global = require('../internals/global');\nvar classof = require('../internals/classof-raw');\n\nmodule.exports = classof(global.process) === 'process';\n","/**\n * Tries Notification.requestPermission, console warning instead of rejecting on error.\n * @param callback Runs with the permission result on completion.\n */\nexport const requestNotificationPermission = async (\n  callback: NotificationPermissionCallback,\n) => {\n  try {\n    callback(await Notification.requestPermission());\n  } catch (error) {\n    console.warn(error);\n  }\n};\n","import { IntlMessageFormat } from 'intl-messageformat';\nimport { defineMessages } from 'react-intl';\n\nimport { List as ImmutableList } from 'immutable';\n\nimport { compareId } from 'flavours/glitch/compare_id';\nimport { usePendingItems as preferPendingItems } from 'flavours/glitch/initial_state';\n\nimport api, { getLinks } from '../api';\nimport { unescapeHTML } from '../utils/html';\nimport { requestNotificationPermission } from '../utils/notifications';\n\nimport { fetchFollowRequests, fetchRelationships } from './accounts';\nimport {\n  importFetchedAccount,\n  importFetchedAccounts,\n  importFetchedStatus,\n  importFetchedStatuses,\n} from './importer';\nimport { submitMarkers } from './markers';\nimport { decreasePendingNotificationsCount } from './notification_policies';\nimport { notificationsUpdate } from \"./notifications_typed\";\nimport { register as registerPushNotifications } from './push_notifications';\nimport { saveSettings } from './settings';\n\nexport * from \"./notifications_typed\";\n\nexport const NOTIFICATIONS_UPDATE_NOOP = 'NOTIFICATIONS_UPDATE_NOOP';\n\n// tracking the notif cleaning request\nexport const NOTIFICATIONS_DELETE_MARKED_REQUEST = 'NOTIFICATIONS_DELETE_MARKED_REQUEST';\nexport const NOTIFICATIONS_DELETE_MARKED_SUCCESS = 'NOTIFICATIONS_DELETE_MARKED_SUCCESS';\nexport const NOTIFICATIONS_DELETE_MARKED_FAIL = 'NOTIFICATIONS_DELETE_MARKED_FAIL';\nexport const NOTIFICATIONS_MARK_ALL_FOR_DELETE = 'NOTIFICATIONS_MARK_ALL_FOR_DELETE';\nexport const NOTIFICATIONS_ENTER_CLEARING_MODE = 'NOTIFICATIONS_ENTER_CLEARING_MODE'; // arg: yes\n// Unmark notifications (when the cleaning mode is left)\nexport const NOTIFICATIONS_UNMARK_ALL_FOR_DELETE = 'NOTIFICATIONS_UNMARK_ALL_FOR_DELETE';\n// Mark one for delete\nexport const NOTIFICATION_MARK_FOR_DELETE = 'NOTIFICATION_MARK_FOR_DELETE';\n\nexport const NOTIFICATIONS_EXPAND_REQUEST = 'NOTIFICATIONS_EXPAND_REQUEST';\nexport const NOTIFICATIONS_EXPAND_SUCCESS = 'NOTIFICATIONS_EXPAND_SUCCESS';\nexport const NOTIFICATIONS_EXPAND_FAIL    = 'NOTIFICATIONS_EXPAND_FAIL';\n\nexport const NOTIFICATIONS_FILTER_SET = 'NOTIFICATIONS_FILTER_SET';\n\nexport const NOTIFICATIONS_SCROLL_TOP   = 'NOTIFICATIONS_SCROLL_TOP';\nexport const NOTIFICATIONS_LOAD_PENDING = 'NOTIFICATIONS_LOAD_PENDING';\n\nexport const NOTIFICATIONS_MOUNT   = 'NOTIFICATIONS_MOUNT';\nexport const NOTIFICATIONS_UNMOUNT = 'NOTIFICATIONS_UNMOUNT';\n\nexport const NOTIFICATIONS_SET_VISIBILITY = 'NOTIFICATIONS_SET_VISIBILITY';\n\nexport const NOTIFICATIONS_MARK_AS_READ = 'NOTIFICATIONS_MARK_AS_READ';\n\nexport const NOTIFICATIONS_SET_BROWSER_SUPPORT    = 'NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const NOTIFICATIONS_SET_BROWSER_PERMISSION = 'NOTIFICATIONS_SET_BROWSER_PERMISSION';\n\nexport const NOTIFICATION_REQUESTS_FETCH_REQUEST = 'NOTIFICATION_REQUESTS_FETCH_REQUEST';\nexport const NOTIFICATION_REQUESTS_FETCH_SUCCESS = 'NOTIFICATION_REQUESTS_FETCH_SUCCESS';\nexport const NOTIFICATION_REQUESTS_FETCH_FAIL    = 'NOTIFICATION_REQUESTS_FETCH_FAIL';\n\nexport const NOTIFICATION_REQUESTS_EXPAND_REQUEST = 'NOTIFICATION_REQUESTS_EXPAND_REQUEST';\nexport const NOTIFICATION_REQUESTS_EXPAND_SUCCESS = 'NOTIFICATION_REQUESTS_EXPAND_SUCCESS';\nexport const NOTIFICATION_REQUESTS_EXPAND_FAIL    = 'NOTIFICATION_REQUESTS_EXPAND_FAIL';\n\nexport const NOTIFICATION_REQUEST_FETCH_REQUEST = 'NOTIFICATION_REQUEST_FETCH_REQUEST';\nexport const NOTIFICATION_REQUEST_FETCH_SUCCESS = 'NOTIFICATION_REQUEST_FETCH_SUCCESS';\nexport const NOTIFICATION_REQUEST_FETCH_FAIL    = 'NOTIFICATION_REQUEST_FETCH_FAIL';\n\nexport const NOTIFICATION_REQUEST_ACCEPT_REQUEST = 'NOTIFICATION_REQUEST_ACCEPT_REQUEST';\nexport const NOTIFICATION_REQUEST_ACCEPT_SUCCESS = 'NOTIFICATION_REQUEST_ACCEPT_SUCCESS';\nexport const NOTIFICATION_REQUEST_ACCEPT_FAIL    = 'NOTIFICATION_REQUEST_ACCEPT_FAIL';\n\nexport const NOTIFICATION_REQUEST_DISMISS_REQUEST = 'NOTIFICATION_REQUEST_DISMISS_REQUEST';\nexport const NOTIFICATION_REQUEST_DISMISS_SUCCESS = 'NOTIFICATION_REQUEST_DISMISS_SUCCESS';\nexport const NOTIFICATION_REQUEST_DISMISS_FAIL    = 'NOTIFICATION_REQUEST_DISMISS_FAIL';\n\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST = 'NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST';\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS = 'NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS';\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL    = 'NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL';\n\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST';\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS';\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL    = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL';\n\ndefineMessages({\n  mention: { id: 'notification.mention', defaultMessage: '{name} mentioned you' },\n});\n\nconst fetchRelatedRelationships = (dispatch, notifications) => {\n  const accountIds = notifications.filter(item => ['follow', 'follow_request', 'admin.sign_up'].indexOf(item.type) !== -1).map(item => item.account.id);\n\n  if (accountIds.length > 0) {\n    dispatch(fetchRelationships(accountIds));\n  }\n};\n\nconst selectNotificationCountForRequest = (state, id) => {\n  const requests = state.getIn(['notificationRequests', 'items']);\n  const thisRequest = requests.find(request => request.get('id') === id);\n  return thisRequest ? thisRequest.get('notifications_count') : 0;\n};\n\nexport const loadPending = () => ({\n  type: NOTIFICATIONS_LOAD_PENDING,\n});\n\nexport function updateNotifications(notification, intlMessages, intlLocale) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const showInColumn = activeFilter === 'all' ? getState().getIn(['settings', 'notifications', 'shows', notification.type], true) : activeFilter === notification.type;\n    const showAlert    = getState().getIn(['settings', 'notifications', 'alerts', notification.type], true);\n    const playSound    = getState().getIn(['settings', 'notifications', 'sounds', notification.type], true);\n\n    let filtered = false;\n\n    if (['mention', 'status'].includes(notification.type) && notification.status.filtered) {\n      const filters = notification.status.filtered.filter(result => result.filter.context.includes('notifications'));\n\n      if (filters.some(result => result.filter.filter_action === 'hide')) {\n        return;\n      }\n\n      filtered = filters.length > 0;\n    }\n\n    if (['follow_request'].includes(notification.type)) {\n      dispatch(fetchFollowRequests());\n    }\n\n    dispatch(submitMarkers());\n\n    if (showInColumn) {\n      dispatch(importFetchedAccount(notification.account));\n\n      if (notification.status) {\n        dispatch(importFetchedStatus(notification.status));\n      }\n\n      if (notification.report) {\n        dispatch(importFetchedAccount(notification.report.target_account));\n      }\n\n\n      dispatch(notificationsUpdate({ notification, preferPendingItems, playSound: playSound && !filtered}));\n\n      fetchRelatedRelationships(dispatch, [notification]);\n    } else if (playSound && !filtered) {\n      dispatch({\n        type: NOTIFICATIONS_UPDATE_NOOP,\n        meta: { sound: 'boop' },\n      });\n    }\n\n    // Desktop notifications\n    if (typeof window.Notification !== 'undefined' && showAlert && !filtered) {\n      const title = new IntlMessageFormat(intlMessages[`notification.${notification.type}`], intlLocale).format({ name: notification.account.display_name.length > 0 ? notification.account.display_name : notification.account.username });\n      const body  = (notification.status && notification.status.spoiler_text.length > 0) ? notification.status.spoiler_text : unescapeHTML(notification.status ? notification.status.content : '');\n\n      const notify = new Notification(title, { body, icon: notification.account.avatar, tag: notification.id });\n\n      notify.addEventListener('click', () => {\n        window.focus();\n        notify.close();\n      });\n    }\n  };\n}\n\nconst excludeTypesFromSettings = state => state.getIn(['settings', 'notifications', 'shows']).filter(enabled => !enabled).keySeq().toJS();\n\nconst excludeTypesFromFilter = filter => {\n  const allTypes = ImmutableList([\n    'follow',\n    'follow_request',\n    'favourite',\n    'reaction',\n    'reblog',\n    'mention',\n    'poll',\n    'status',\n    'update',\n    'admin.sign_up',\n    'admin.report',\n  ]);\n\n  return allTypes.filterNot(item => item === filter).toJS();\n};\n\nconst noOp = () => {};\n\nlet expandNotificationsController = new AbortController();\n\nexport function expandNotifications({ maxId, forceLoad = false } = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const notifications = getState().get('notifications');\n    const isLoadingMore = !!maxId;\n\n    if (notifications.get('isLoading')) {\n      if (forceLoad) {\n        expandNotificationsController.abort();\n        expandNotificationsController = new AbortController();\n      } else {\n        done();\n        return;\n      }\n    }\n\n    const params = {\n      max_id: maxId,\n      exclude_types: activeFilter === 'all'\n        ? excludeTypesFromSettings(getState())\n        : excludeTypesFromFilter(activeFilter),\n    };\n\n    if (!params.max_id && (notifications.get('items', ImmutableList()).size + notifications.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = notifications.getIn(['pendingItems', 0, 'id']);\n      const b = notifications.getIn(['items', 0, 'id']);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandNotificationsRequest(isLoadingMore));\n\n    api().get('/api/v1/notifications', { params, signal: expandNotificationsController.signal }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n      dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n      dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n      dispatch(expandNotificationsSuccess(response.data, next ? next.uri : null, isLoadingMore, isLoadingRecent, isLoadingRecent && preferPendingItems));\n      fetchRelatedRelationships(dispatch, response.data);\n      dispatch(submitMarkers());\n    }).catch(error => {\n      dispatch(expandNotificationsFail(error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function expandNotificationsRequest(isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_REQUEST,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsSuccess(notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) {\n  return {\n    type: NOTIFICATIONS_EXPAND_SUCCESS,\n    notifications,\n    next,\n    isLoadingRecent: isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsFail(error, isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_FAIL,\n    error,\n    skipLoading: !isLoadingMore,\n    skipAlert: !isLoadingMore || error.name === 'AbortError',\n  };\n}\n\nexport function scrollTopNotifications(top) {\n  return {\n    type: NOTIFICATIONS_SCROLL_TOP,\n    top,\n  };\n}\n\nexport function deleteMarkedNotifications() {\n  return (dispatch, getState) => {\n    dispatch(deleteMarkedNotificationsRequest());\n\n    let ids = [];\n    getState().getIn(['notifications', 'items']).forEach((n) => {\n      if (n.get('markedForDelete')) {\n        ids.push(n.get('id'));\n      }\n    });\n\n    if (ids.length === 0) {\n      return;\n    }\n\n    api().delete(`/api/v1/notifications/destroy_multiple?ids[]=${ids.join('&ids[]=')}`).then(() => {\n      dispatch(deleteMarkedNotificationsSuccess());\n    }).catch(error => {\n      console.error(error);\n      dispatch(deleteMarkedNotificationsFail(error));\n    });\n  };\n}\n\nexport function enterNotificationClearingMode(yes) {\n  return {\n    type: NOTIFICATIONS_ENTER_CLEARING_MODE,\n    yes: yes,\n  };\n}\n\nexport function markAllNotifications(yes) {\n  return {\n    type: NOTIFICATIONS_MARK_ALL_FOR_DELETE,\n    yes: yes, // true, false or null. null = invert\n  };\n}\n\nexport function deleteMarkedNotificationsRequest() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_REQUEST,\n  };\n}\n\nexport function deleteMarkedNotificationsFail() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_FAIL,\n  };\n}\n\nexport function markNotificationForDelete(id, yes) {\n  return {\n    type: NOTIFICATION_MARK_FOR_DELETE,\n    id: id,\n    yes: yes,\n  };\n}\n\nexport function deleteMarkedNotificationsSuccess() {\n  return {\n    type: NOTIFICATIONS_DELETE_MARKED_SUCCESS,\n  };\n}\n\nexport function mountNotifications() {\n  return {\n    type: NOTIFICATIONS_MOUNT,\n  };\n}\n\nexport function unmountNotifications() {\n  return {\n    type: NOTIFICATIONS_UNMOUNT,\n  };\n}\n\nexport function notificationsSetVisibility(visibility) {\n  return {\n    type: NOTIFICATIONS_SET_VISIBILITY,\n    visibility: visibility,\n  };\n}\n\nexport function setFilter (filterType) {\n  return dispatch => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    dispatch(expandNotifications({ forceLoad: true }));\n    dispatch(saveSettings());\n  };\n}\n\nexport function markNotificationsAsRead() {\n  return {\n    type: NOTIFICATIONS_MARK_AS_READ,\n  };\n}\n\n// Browser support\nexport function setupBrowserNotifications() {\n  return dispatch => {\n    dispatch(setBrowserSupport('Notification' in window));\n    if ('Notification' in window) {\n      dispatch(setBrowserPermission(Notification.permission));\n    }\n\n    if ('Notification' in window && 'permissions' in navigator) {\n      navigator.permissions.query({ name: 'notifications' }).then((status) => {\n        status.onchange = () => dispatch(setBrowserPermission(Notification.permission));\n      }).catch(console.warn);\n    }\n  };\n}\n\nexport function requestBrowserPermission(callback = noOp) {\n  return dispatch => {\n    requestNotificationPermission((permission) => {\n      dispatch(setBrowserPermission(permission));\n      callback(permission);\n\n      if (permission === 'granted') {\n        dispatch(registerPushNotifications());\n      }\n    });\n  };\n}\n\nexport function setBrowserSupport (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setBrowserPermission (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_PERMISSION,\n    value,\n  };\n}\n\nexport const fetchNotificationRequests = () => (dispatch, getState) => {\n  const params = {};\n\n  if (getState().getIn(['notificationRequests', 'isLoading'])) {\n    return;\n  }\n\n  if (getState().getIn(['notificationRequests', 'items'])?.size > 0) {\n    params.since_id = getState().getIn(['notificationRequests', 'items', 0, 'id']);\n  }\n\n  dispatch(fetchNotificationRequestsRequest());\n\n  api().get('/api/v1/notifications/requests', { params }).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n    dispatch(fetchNotificationRequestsSuccess(response.data, next ? next.uri : null));\n  }).catch(err => {\n    dispatch(fetchNotificationRequestsFail(err));\n  });\n};\n\nexport const fetchNotificationRequestsRequest = () => ({\n  type: NOTIFICATION_REQUESTS_FETCH_REQUEST,\n});\n\nexport const fetchNotificationRequestsSuccess = (requests, next) => ({\n  type: NOTIFICATION_REQUESTS_FETCH_SUCCESS,\n  requests,\n  next,\n});\n\nexport const fetchNotificationRequestsFail = error => ({\n  type: NOTIFICATION_REQUESTS_FETCH_FAIL,\n  error,\n});\n\nexport const expandNotificationRequests = () => (dispatch, getState) => {\n  const url = getState().getIn(['notificationRequests', 'next']);\n\n  if (!url || getState().getIn(['notificationRequests', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandNotificationRequestsRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n    dispatch(expandNotificationRequestsSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(expandNotificationRequestsFail(err));\n  });\n};\n\nexport const expandNotificationRequestsRequest = () => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_REQUEST,\n});\n\nexport const expandNotificationRequestsSuccess = (requests, next) => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_SUCCESS,\n  requests,\n  next,\n});\n\nexport const expandNotificationRequestsFail = error => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_FAIL,\n  error,\n});\n\nexport const fetchNotificationRequest = id => (dispatch, getState) => {\n  const current = getState().getIn(['notificationRequests', 'current']);\n\n  if (current.getIn(['item', 'id']) === id || current.get('isLoading')) {\n    return;\n  }\n\n  dispatch(fetchNotificationRequestRequest(id));\n\n  api().get(`/api/v1/notifications/requests/${id}`).then(({ data }) => {\n    dispatch(fetchNotificationRequestSuccess(data));\n  }).catch(err => {\n    dispatch(fetchNotificationRequestFail(id, err));\n  });\n};\n\nexport const fetchNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchNotificationRequestSuccess = request => ({\n  type: NOTIFICATION_REQUEST_FETCH_SUCCESS,\n  request,\n});\n\nexport const fetchNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const acceptNotificationRequest = (id) => (dispatch, getState) => {\n  const count = selectNotificationCountForRequest(getState(), id);\n  dispatch(acceptNotificationRequestRequest(id));\n\n  api().post(`/api/v1/notifications/requests/${id}/accept`).then(() => {\n    dispatch(acceptNotificationRequestSuccess(id));\n    dispatch(decreasePendingNotificationsCount(count));\n  }).catch(err => {\n    dispatch(acceptNotificationRequestFail(id, err));\n  });\n};\n\nexport const acceptNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_REQUEST,\n  id,\n});\n\nexport const acceptNotificationRequestSuccess = id => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_SUCCESS,\n  id,\n});\n\nexport const acceptNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_FAIL,\n  id,\n  error,\n});\n\nexport const dismissNotificationRequest = (id) => (dispatch, getState) => {\n  const count = selectNotificationCountForRequest(getState(), id);\n  dispatch(dismissNotificationRequestRequest(id));\n\n  api().post(`/api/v1/notifications/requests/${id}/dismiss`).then(() =>{\n    dispatch(dismissNotificationRequestSuccess(id));\n    dispatch(decreasePendingNotificationsCount(count));\n  }).catch(err => {\n    dispatch(dismissNotificationRequestFail(id, err));\n  });\n};\n\nexport const dismissNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_DISMISS_REQUEST,\n  id,\n});\n\nexport const dismissNotificationRequestSuccess = id => ({\n  type: NOTIFICATION_REQUEST_DISMISS_SUCCESS,\n  id,\n});\n\nexport const dismissNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_DISMISS_FAIL,\n  id,\n  error,\n});\n\nexport const fetchNotificationsForRequest = accountId => (dispatch, getState) => {\n  const current = getState().getIn(['notificationRequests', 'current']);\n  const params = { account_id: accountId };\n\n  if (current.getIn(['item', 'account']) === accountId) {\n    if (current.getIn(['notifications', 'isLoading'])) {\n      return;\n    }\n\n    if (current.getIn(['notifications', 'items'])?.size > 0) {\n      params.since_id = current.getIn(['notifications', 'items', 0, 'id']);\n    }\n  }\n\n  dispatch(fetchNotificationsForRequestRequest());\n\n  api().get('/api/v1/notifications', { params }).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n    dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n    dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n    dispatch(fetchNotificationsForRequestSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(fetchNotificationsForRequestFail(err));\n  });\n};\n\nexport const fetchNotificationsForRequestRequest = () => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST,\n});\n\nexport const fetchNotificationsForRequestSuccess = (notifications, next) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS,\n  notifications,\n  next,\n});\n\nexport const fetchNotificationsForRequestFail = (error) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL,\n  error,\n});\n\nexport const expandNotificationsForRequest = () => (dispatch, getState) => {\n  const url = getState().getIn(['notificationRequests', 'current', 'notifications', 'next']);\n\n  if (!url || getState().getIn(['notificationRequests', 'current', 'notifications', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandNotificationsForRequestRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n    dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n    dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n    dispatch(expandNotificationsForRequestSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(expandNotificationsForRequestFail(err));\n  });\n};\n\nexport const expandNotificationsForRequestRequest = () => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST,\n});\n\nexport const expandNotificationsForRequestSuccess = (notifications, next) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS,\n  notifications,\n  next,\n});\n\nexport const expandNotificationsForRequestFail = (error) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL,\n  error,\n});\n","// NB: This function can still return unsafe HTML\nexport const unescapeHTML = (html: string) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html\n    .replace(/<br\\s*\\/?>/g, '\\n')\n    .replace(/<\\/p><p>/g, '\\n\\n')\n    .replace(/<[^>]*>/g, '');\n  return wrapper.textContent;\n};\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport OpenInNewIcon from '@/material-icons/400-24px/open_in_new.svg?react';\nimport RepeatIcon from '@/material-icons/400-24px/repeat.svg?react';\nimport ReplyIcon from '@/material-icons/400-24px/reply.svg?react';\nimport ReplyAllIcon from '@/material-icons/400-24px/reply_all.svg?react';\nimport StarIcon from '@/material-icons/400-24px/star.svg?react';\nimport { replyCompose } from 'mastodon/actions/compose';\nimport { toggleReblog, toggleFavourite } from 'mastodon/actions/interactions';\nimport { openModal } from 'mastodon/actions/modal';\nimport { IconButton } from 'mastodon/components/icon_button';\nimport { identityContextPropShape, withIdentity } from 'mastodon/identity_context';\nimport { me } from 'mastodon/initial_state';\nimport { makeGetStatus } from 'mastodon/selectors';\nimport { WithRouterPropTypes } from 'mastodon/utils/react_router';\n\nconst messages = defineMessages({\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  replyAll: { id: 'status.replyAll', defaultMessage: 'Reply to thread' },\n  reblog: { id: 'status.reblog', defaultMessage: 'Boost' },\n  reblog_private: { id: 'status.reblog_private', defaultMessage: 'Boost with original visibility' },\n  cancel_reblog_private: { id: 'status.cancel_reblog_private', defaultMessage: 'Unboost' },\n  cannot_reblog: { id: 'status.cannot_reblog', defaultMessage: 'This post cannot be boosted' },\n  favourite: { id: 'status.favourite', defaultMessage: 'Favorite' },\n  open: { id: 'status.open', defaultMessage: 'Expand this status' },\n});\n\nconst makeMapStateToProps = () => {\n  const getStatus = makeGetStatus();\n\n  const mapStateToProps = (state, { statusId }) => ({\n    status: getStatus(state, { id: statusId }),\n    askReplyConfirmation: state.getIn(['compose', 'text']).trim().length !== 0,\n  });\n\n  return mapStateToProps;\n};\n\nclass Footer extends ImmutablePureComponent {\n  static propTypes = {\n    identity: identityContextPropShape,\n    statusId: PropTypes.string.isRequired,\n    status: ImmutablePropTypes.map.isRequired,\n    intl: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    askReplyConfirmation: PropTypes.bool,\n    withOpenButton: PropTypes.bool,\n    onClose: PropTypes.func,\n    ...WithRouterPropTypes,\n  };\n\n  _performReply = () => {\n    const { dispatch, status, onClose } = this.props;\n\n    if (onClose) {\n      onClose(true);\n    }\n\n    dispatch(replyCompose(status));\n  };\n\n  handleReplyClick = () => {\n    const { dispatch, askReplyConfirmation, status, onClose } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      if (askReplyConfirmation) {\n        onClose(true);\n        dispatch(openModal({ modalType: 'CONFIRM_REPLY', modalProps: { status } }));\n      } else {\n        this._performReply();\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reply',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleFavouriteClick = () => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      dispatch(toggleFavourite(status.get('id')));\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'favourite',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleReblogClick = e => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      dispatch(toggleReblog(status.get('id'), e && e.shiftKey));\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reblog',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleOpenClick = e => {\n    if (e.button !== 0 || !history) {\n      return;\n    }\n\n    const { status, onClose } = this.props;\n\n    if (onClose) {\n      onClose();\n    }\n\n    this.props.history.push(`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`);\n  };\n\n  render () {\n    const { status, intl, withOpenButton } = this.props;\n\n    const publicStatus  = ['public', 'unlisted'].includes(status.get('visibility'));\n    const reblogPrivate = status.getIn(['account', 'id']) === me && status.get('visibility') === 'private';\n\n    let replyIcon, replyIconComponent, replyTitle;\n\n    if (status.get('in_reply_to_id', null) === null) {\n      replyIcon = 'reply';\n      replyIconComponent = ReplyIcon;\n      replyTitle = intl.formatMessage(messages.reply);\n    } else {\n      replyIcon = 'reply-all';\n      replyIconComponent = ReplyAllIcon;\n      replyTitle = intl.formatMessage(messages.replyAll);\n    }\n\n    let reblogTitle = '';\n\n    if (status.get('reblogged')) {\n      reblogTitle = intl.formatMessage(messages.cancel_reblog_private);\n    } else if (publicStatus) {\n      reblogTitle = intl.formatMessage(messages.reblog);\n    } else if (reblogPrivate) {\n      reblogTitle = intl.formatMessage(messages.reblog_private);\n    } else {\n      reblogTitle = intl.formatMessage(messages.cannot_reblog);\n    }\n\n    return (\n      <div className='picture-in-picture__footer'>\n        <IconButton className='status__action-bar-button' title={replyTitle} icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon} iconComponent={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? ReplyIcon : replyIconComponent} onClick={this.handleReplyClick} counter={status.get('replies_count')} />\n        <IconButton className={classNames('status__action-bar-button', { reblogPrivate })} disabled={!publicStatus && !reblogPrivate}  active={status.get('reblogged')} title={reblogTitle} icon='retweet' iconComponent={RepeatIcon} onClick={this.handleReblogClick} counter={status.get('reblogs_count')} />\n        <IconButton className='status__action-bar-button star-icon' animate active={status.get('favourited')} title={intl.formatMessage(messages.favourite)} icon='star' iconComponent={StarIcon} onClick={this.handleFavouriteClick} counter={status.get('favourites_count')} />\n        {withOpenButton && <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.open)} icon='external-link' iconComponent={OpenInNewIcon} onClick={this.handleOpenClick} href={`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`} />}\n      </div>\n    );\n  }\n\n}\n\nexport default  connect(makeMapStateToProps)(withIdentity(withRouter(injectIntl(Footer))));\n","import PropTypes from 'prop-types';\n\nimport { defineMessages, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\nimport { withRouter } from 'react-router-dom';\n\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport ImmutablePureComponent from 'react-immutable-pure-component';\nimport { connect } from 'react-redux';\n\nimport OpenInNewIcon from '@/material-icons/400-24px/open_in_new.svg?react';\nimport RepeatIcon from '@/material-icons/400-24px/repeat.svg?react';\nimport ReplyIcon from '@/material-icons/400-24px/reply.svg?react';\nimport ReplyAllIcon from '@/material-icons/400-24px/reply_all.svg?react';\nimport StarIcon from '@/material-icons/400-24px/star.svg?react';\nimport { replyCompose } from 'flavours/glitch/actions/compose';\nimport { toggleReblog, toggleFavourite } from 'flavours/glitch/actions/interactions';\nimport { openModal } from 'flavours/glitch/actions/modal';\nimport { IconButton } from 'flavours/glitch/components/icon_button';\nimport { identityContextPropShape, withIdentity } from 'flavours/glitch/identity_context';\nimport { me } from 'flavours/glitch/initial_state';\nimport { makeGetStatus } from 'flavours/glitch/selectors';\nimport { WithRouterPropTypes } from 'flavours/glitch/utils/react_router';\n\nconst messages = defineMessages({\n  reply: { id: 'status.reply', defaultMessage: 'Reply' },\n  replyAll: { id: 'status.replyAll', defaultMessage: 'Reply to thread' },\n  reblog: { id: 'status.reblog', defaultMessage: 'Boost' },\n  reblog_private: { id: 'status.reblog_private', defaultMessage: 'Boost with original visibility' },\n  cancel_reblog_private: { id: 'status.cancel_reblog_private', defaultMessage: 'Unboost' },\n  cannot_reblog: { id: 'status.cannot_reblog', defaultMessage: 'This post cannot be boosted' },\n  favourite: { id: 'status.favourite', defaultMessage: 'Favorite' },\n  open: { id: 'status.open', defaultMessage: 'Expand this status' },\n});\n\nconst makeMapStateToProps = () => {\n  const getStatus = makeGetStatus();\n\n  const mapStateToProps = (state, { statusId }) => ({\n    status: getStatus(state, { id: statusId }),\n    askReplyConfirmation: state.getIn(['compose', 'text']).trim().length !== 0,\n    showReplyCount: state.getIn(['local_settings', 'show_reply_count']),\n  });\n\n  return mapStateToProps;\n};\n\nclass Footer extends ImmutablePureComponent {\n  static propTypes = {\n    identity: identityContextPropShape,\n    statusId: PropTypes.string.isRequired,\n    status: ImmutablePropTypes.map.isRequired,\n    intl: PropTypes.object.isRequired,\n    dispatch: PropTypes.func.isRequired,\n    askReplyConfirmation: PropTypes.bool,\n    showReplyCount: PropTypes.bool,\n    withOpenButton: PropTypes.bool,\n    onClose: PropTypes.func,\n    ...WithRouterPropTypes,\n  };\n\n  _performReply = () => {\n    const { dispatch, status, onClose } = this.props;\n\n    if (onClose) {\n      onClose(true);\n    }\n\n    dispatch(replyCompose(status));\n  };\n\n  handleReplyClick = () => {\n    const { dispatch, askReplyConfirmation, status, onClose } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      if (askReplyConfirmation) {\n        onClose(true);\n        dispatch(openModal({ modalType: 'CONFIRM_REPLY', modalProps: { status } }));\n      } else {\n        this._performReply();\n      }\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reply',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleFavouriteClick = e => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      dispatch(toggleFavourite(status.get('id'), e && e.shiftKey));\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'favourite',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleReblogClick = e => {\n    const { dispatch, status } = this.props;\n    const { signedIn } = this.props.identity;\n\n    if (signedIn) {\n      dispatch(toggleReblog(status.get('id'), e && e.shiftKey));\n    } else {\n      dispatch(openModal({\n        modalType: 'INTERACTION',\n        modalProps: {\n          type: 'reblog',\n          accountId: status.getIn(['account', 'id']),\n          url: status.get('uri'),\n        },\n      }));\n    }\n  };\n\n  handleOpenClick = e => {\n    if (e.button !== 0 || !history) {\n      return;\n    }\n\n    const { status, onClose } = this.props;\n\n    if (onClose) {\n      onClose();\n    }\n\n    this.props.history.push(`/@${status.getIn(['account', 'acct'])}/${status.get('id')}`);\n  };\n\n  render () {\n    const { status, intl, showReplyCount, withOpenButton } = this.props;\n\n    const publicStatus  = ['public', 'unlisted'].includes(status.get('visibility'));\n    const reblogPrivate = status.getIn(['account', 'id']) === me && status.get('visibility') === 'private';\n\n    let replyIcon, replyIconComponent, replyTitle;\n\n    if (status.get('in_reply_to_id', null) === null) {\n      replyIcon = 'reply';\n      replyIconComponent = ReplyIcon;\n      replyTitle = intl.formatMessage(messages.reply);\n    } else {\n      replyIcon = 'reply-all';\n      replyIconComponent = ReplyAllIcon;\n      replyTitle = intl.formatMessage(messages.replyAll);\n    }\n\n    let reblogTitle = '';\n\n    if (status.get('reblogged')) {\n      reblogTitle = intl.formatMessage(messages.cancel_reblog_private);\n    } else if (publicStatus) {\n      reblogTitle = intl.formatMessage(messages.reblog);\n    } else if (reblogPrivate) {\n      reblogTitle = intl.formatMessage(messages.reblog_private);\n    } else {\n      reblogTitle = intl.formatMessage(messages.cannot_reblog);\n    }\n\n    let replyButton = null;\n    if (showReplyCount) {\n      replyButton = (\n        <IconButton\n          className='status__action-bar-button'\n          title={replyTitle}\n          icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon}\n          iconComponent={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? ReplyIcon : replyIconComponent}\n          onClick={this.handleReplyClick}\n          counter={status.get('replies_count')}\n          obfuscateCount\n        />\n      );\n    } else {\n      replyButton = (\n        <IconButton\n          className='status__action-bar-button'\n          title={replyTitle}\n          icon={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? 'reply' : replyIcon}\n          iconComponent={status.get('in_reply_to_account_id') === status.getIn(['account', 'id']) ? ReplyIcon : replyIconComponent}\n          onClick={this.handleReplyClick}\n        />\n      );\n    }\n\n    return (\n      <div className='picture-in-picture__footer'>\n        {replyButton}\n        <IconButton className={classNames('status__action-bar-button', { reblogPrivate })} disabled={!publicStatus && !reblogPrivate}  active={status.get('reblogged')} title={reblogTitle} icon='retweet' iconComponent={RepeatIcon} onClick={this.handleReblogClick} counter={status.get('reblogs_count')} />\n        <IconButton className='status__action-bar-button star-icon' animate active={status.get('favourited')} title={intl.formatMessage(messages.favourite)} icon='star' iconComponent={StarIcon} onClick={this.handleFavouriteClick} counter={status.get('favourites_count')} />\n        {withOpenButton && <IconButton className='status__action-bar-button' title={intl.formatMessage(messages.open)} icon='external-link' iconComponent={OpenInNewIcon} onClick={this.handleOpenClick} href={status.get('url')} />}\n      </div>\n    );\n  }\n\n}\n\nexport default  connect(makeMapStateToProps)(withIdentity(withRouter(injectIntl(Footer))));\n","// src/index.ts\nfunction createThunkMiddleware(extraArgument) {\n  const middleware = ({ dispatch, getState }) => (next) => (action) => {\n    if (typeof action === \"function\") {\n      return action(dispatch, getState, extraArgument);\n    }\n    return next(action);\n  };\n  return middleware;\n}\nvar thunk = createThunkMiddleware();\nvar withExtraArgument = createThunkMiddleware;\nexport {\n  thunk,\n  withExtraArgument\n};\n","/**\n * MIT License\n * \n * Copyright (c) 2014-present, Lee Byron and other contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return { value: false };\n}\n\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\n\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\n\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^32−1.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction wholeSlice(begin, end, size) {\n  return (\n    ((begin === 0 && !isNeg(begin)) ||\n      (size !== undefined && begin <= -size)) &&\n    (end === undefined || (size !== undefined && end >= size))\n  );\n}\n\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\n\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\n\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined\n    ? defaultIndex\n    : isNeg(index)\n    ? size === Infinity\n      ? size\n      : Math.max(0, size + index) | 0\n    : size === undefined || size === index\n    ? index\n    : Math.min(size, index) | 0;\n}\n\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || (value === 0 && 1 / value === -Infinity);\n}\n\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\n\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\n\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\n\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\n\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\n\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\n\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\n\nvar Collection = function Collection(value) {\n  // eslint-disable-next-line no-constructor-return\n  return isCollection(value) ? value : Seq(value);\n};\n\nvar KeyedCollection = /*@__PURE__*/(function (Collection) {\n  function KeyedCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n\n  if ( Collection ) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create( Collection && Collection.prototype );\n  KeyedCollection.prototype.constructor = KeyedCollection;\n\n  return KeyedCollection;\n}(Collection));\n\nvar IndexedCollection = /*@__PURE__*/(function (Collection) {\n  function IndexedCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n\n  if ( Collection ) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create( Collection && Collection.prototype );\n  IndexedCollection.prototype.constructor = IndexedCollection;\n\n  return IndexedCollection;\n}(Collection));\n\nvar SetCollection = /*@__PURE__*/(function (Collection) {\n  function SetCollection(value) {\n    // eslint-disable-next-line no-constructor-return\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n\n  if ( Collection ) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create( Collection && Collection.prototype );\n  SetCollection.prototype.constructor = SetCollection;\n\n  return SetCollection;\n}(Collection));\n\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\n\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\n\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\n\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\n\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\n\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\n\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\n\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\n\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\n\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\n\nIterator.prototype.toString = function toString () {\n  return '[Iterator]';\n};\n\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\n\nIterator.prototype.inspect = Iterator.prototype.toSource = function () {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function () {\n  return this;\n};\n\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult\n    ? (iteratorResult.value = value)\n    : (iteratorResult = {\n        value: value,\n        done: false,\n      });\n  return iteratorResult;\n}\n\nfunction iteratorDone() {\n  return { value: undefined, done: true };\n}\n\nfunction hasIterator(maybeIterable) {\n  if (Array.isArray(maybeIterable)) {\n    // IE11 trick as it does not support `Symbol.iterator`\n    return true;\n  }\n\n  return !!getIteratorFn(maybeIterable);\n}\n\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\n\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\n\nfunction getIteratorFn(iterable) {\n  var iteratorFn =\n    iterable &&\n    ((REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\n\nfunction isEntriesIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.entries;\n}\n\nfunction isKeysIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.keys;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n\n  return (\n    value &&\n    typeof value === 'object' &&\n    Number.isInteger(value.length) &&\n    value.length >= 0 &&\n    (value.length === 0\n      ? // Only {length: 0} is considered Array-like.\n        Object.keys(value).length === 1\n      : // An object is only Array-like if it has a property where the last value\n        // in the array-like may be found (which could be undefined).\n        value.hasOwnProperty(value.length - 1))\n  );\n}\n\nvar Seq = /*@__PURE__*/(function (Collection) {\n  function Seq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence()\n      : isImmutable(value)\n      ? value.toSeq()\n      : seqFromValue(value);\n  }\n\n  if ( Collection ) Seq.__proto__ = Collection;\n  Seq.prototype = Object.create( Collection && Collection.prototype );\n  Seq.prototype.constructor = Seq;\n\n  Seq.prototype.toSeq = function toSeq () {\n    return this;\n  };\n\n  Seq.prototype.toString = function toString () {\n    return this.__toString('Seq {', '}');\n  };\n\n  Seq.prototype.cacheResult = function cacheResult () {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate (fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator (type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n\n  return Seq;\n}(Collection));\n\nvar KeyedSeq = /*@__PURE__*/(function (Seq) {\n  function KeyedSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence().toKeyedSeq()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.toSeq()\n        : value.fromEntrySeq()\n      : isRecord(value)\n      ? value.toSeq()\n      : keyedSeqFromValue(value);\n  }\n\n  if ( Seq ) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create( Seq && Seq.prototype );\n  KeyedSeq.prototype.constructor = KeyedSeq;\n\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq () {\n    return this;\n  };\n\n  return KeyedSeq;\n}(Seq));\n\nvar IndexedSeq = /*@__PURE__*/(function (Seq) {\n  function IndexedSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySequence()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.entrySeq()\n        : value.toIndexedSeq()\n      : isRecord(value)\n      ? value.toSeq().entrySeq()\n      : indexedSeqFromValue(value);\n  }\n\n  if ( Seq ) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create( Seq && Seq.prototype );\n  IndexedSeq.prototype.constructor = IndexedSeq;\n\n  IndexedSeq.of = function of (/*...values*/) {\n    return IndexedSeq(arguments);\n  };\n\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq () {\n    return this;\n  };\n\n  IndexedSeq.prototype.toString = function toString () {\n    return this.__toString('Seq [', ']');\n  };\n\n  return IndexedSeq;\n}(Seq));\n\nvar SetSeq = /*@__PURE__*/(function (Seq) {\n  function SetSeq(value) {\n    // eslint-disable-next-line no-constructor-return\n    return (\n      isCollection(value) && !isAssociative(value) ? value : IndexedSeq(value)\n    ).toSetSeq();\n  }\n\n  if ( Seq ) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create( Seq && Seq.prototype );\n  SetSeq.prototype.constructor = SetSeq;\n\n  SetSeq.of = function of (/*...values*/) {\n    return SetSeq(arguments);\n  };\n\n  SetSeq.prototype.toSetSeq = function toSetSeq () {\n    return this;\n  };\n\n  return SetSeq;\n}(Seq));\n\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\n\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/(function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n\n  if ( IndexedSeq ) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ArraySeq.prototype.constructor = ArraySeq;\n\n  ArraySeq.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n\n  ArraySeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ArraySeq.prototype.__iterator = function __iterator (type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n\n  return ArraySeq;\n}(IndexedSeq));\n\nvar ObjectSeq = /*@__PURE__*/(function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object).concat(\n      Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(object) : []\n    );\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n\n  if ( KeyedSeq ) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ObjectSeq.prototype.constructor = ObjectSeq;\n\n  ObjectSeq.prototype.get = function get (key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n\n  ObjectSeq.prototype.has = function has (key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n\n  ObjectSeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ObjectSeq.prototype.__iterator = function __iterator (type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n\n  return ObjectSeq;\n}(KeyedSeq));\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar CollectionSeq = /*@__PURE__*/(function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n\n  if ( IndexedSeq ) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  CollectionSeq.prototype.constructor = CollectionSeq;\n\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n\n  return CollectionSeq;\n}(IndexedSeq));\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\n\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\n\nfunction keyedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of [k, v] entries, or keyed object: ' +\n      value\n  );\n}\n\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values: ' + value\n  );\n}\n\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return isEntriesIterable(value)\n      ? seq.fromEntrySeq()\n      : isKeysIterable(value)\n      ? seq.toSetSeq()\n      : seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values, or keyed object: ' + value\n  );\n}\n\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n    ? new CollectionSeq(value)\n    : undefined;\n}\n\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\n\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\n\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\n\nfunction isValueObject(maybeValue) {\n  return Boolean(\n    maybeValue &&\n      typeof maybeValue.equals === 'function' &&\n      typeof maybeValue.hashCode === 'function'\n  );\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (\n    typeof valueA.valueOf === 'function' &&\n    typeof valueB.valueOf === 'function'\n  ) {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(\n    isValueObject(valueA) &&\n    isValueObject(valueB) &&\n    valueA.equals(valueB)\n  );\n}\n\nvar imul =\n  typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2\n    ? Math.imul\n    : function imul(a, b) {\n        a |= 0; // int\n        b |= 0; // int\n        var c = a & 0xffff;\n        var d = b & 0xffff;\n        // Shift by 0 fixes the sign on the high part.\n        return (c * d + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0)) | 0; // int\n      };\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return ((i32 >>> 1) & 0x40000000) | (i32 & 0xbfffffff);\n}\n\nvar defaultValueOf = Object.prototype.valueOf;\n\nfunction hash(o) {\n  if (o == null) {\n    return hashNullish(o);\n  }\n\n  if (typeof o.hashCode === 'function') {\n    // Drop any high bits from accidentally long hash codes.\n    return smi(o.hashCode(o));\n  }\n\n  var v = valueOf(o);\n\n  if (v == null) {\n    return hashNullish(v);\n  }\n\n  switch (typeof v) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return v ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(v);\n    case 'string':\n      return v.length > STRING_HASH_CACHE_MIN_STRLEN\n        ? cachedHashString(v)\n        : hashString(v);\n    case 'object':\n    case 'function':\n      return hashJSObj(v);\n    case 'symbol':\n      return hashSymbol(v);\n    default:\n      if (typeof v.toString === 'function') {\n        return hashString(v.toString());\n      }\n      throw new Error('Value type ' + typeof v + ' cannot be hashed.');\n  }\n}\n\nfunction hashNullish(nullish) {\n  return nullish === null ? 0x42108422 : /* undefined */ 0x42108423;\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\n\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = (31 * hashed + string.charCodeAt(ii)) | 0;\n  }\n  return smi(hashed);\n}\n\nfunction hashSymbol(sym) {\n  var hashed = symbolMap[sym];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  hashed = nextHash();\n\n  symbolMap[sym] = hashed;\n\n  return hashed;\n}\n\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = nextHash();\n\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed,\n    });\n  } else if (\n    obj.propertyIsEnumerable !== undefined &&\n    obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable\n  ) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function () {\n      return this.constructor.prototype.propertyIsEnumerable.apply(\n        this,\n        arguments\n      );\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = (function () {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1: // Element\n        return node.uniqueID;\n      case 9: // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\n\nfunction valueOf(obj) {\n  return obj.valueOf !== defaultValueOf && typeof obj.valueOf === 'function'\n    ? obj.valueOf(obj)\n    : obj;\n}\n\nfunction nextHash() {\n  var nextHash = ++_objHashUID;\n  if (_objHashUID & 0x40000000) {\n    _objHashUID = 0;\n  }\n  return nextHash;\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\n\nvar symbolMap = Object.create(null);\n\nvar _objHashUID = 0;\n\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\n\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\n\nvar ToKeyedSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n\n  if ( KeyedSeq ) ToKeyedSequence.__proto__ = KeyedSeq;\n  ToKeyedSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n\n  ToKeyedSequence.prototype.get = function get (key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n\n  ToKeyedSequence.prototype.has = function has (key) {\n    return this._iter.has(key);\n  };\n\n  ToKeyedSequence.prototype.valueSeq = function valueSeq () {\n    return this._iter.valueSeq();\n  };\n\n  ToKeyedSequence.prototype.reverse = function reverse () {\n    var this$1$1 = this;\n\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () { return this$1$1._iter.toSeq().reverse(); };\n    }\n    return reversedSequence;\n  };\n\n  ToKeyedSequence.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () { return this$1$1._iter.toSeq().map(mapper, context); };\n    }\n    return mappedSequence;\n  };\n\n  ToKeyedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v, k) { return fn(v, k, this$1$1); }, reverse);\n  };\n\n  ToKeyedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n\n  return ToKeyedSequence;\n}(KeyedSeq));\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar ToIndexedSequence = /*@__PURE__*/(function (IndexedSeq) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( IndexedSeq ) ToIndexedSequence.__proto__ = IndexedSeq;\n  ToIndexedSequence.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n\n  ToIndexedSequence.prototype.includes = function includes (value) {\n    return this._iter.includes(value);\n  };\n\n  ToIndexedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(\n      function (v) { return fn(v, reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      reverse\n    );\n  };\n\n  ToIndexedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(\n            type,\n            reverse ? this$1$1.size - ++i : i++,\n            step.value,\n            step\n          );\n    });\n  };\n\n  return ToIndexedSequence;\n}(IndexedSeq));\n\nvar ToSetSequence = /*@__PURE__*/(function (SetSeq) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( SetSeq ) ToSetSequence.__proto__ = SetSeq;\n  ToSetSequence.prototype = Object.create( SetSeq && SetSeq.prototype );\n  ToSetSequence.prototype.constructor = ToSetSequence;\n\n  ToSetSequence.prototype.has = function has (key) {\n    return this._iter.includes(key);\n  };\n\n  ToSetSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v) { return fn(v, v, this$1$1); }, reverse);\n  };\n\n  ToSetSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n\n  return ToSetSequence;\n}(SetSeq));\n\nvar FromEntriesSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n\n  if ( KeyedSeq ) FromEntriesSequence.__proto__ = KeyedSeq;\n  FromEntriesSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n\n  FromEntriesSequence.prototype.entrySeq = function entrySeq () {\n    return this._iter.toSeq();\n  };\n\n  FromEntriesSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(\n          indexedCollection ? entry.get(1) : entry[1],\n          indexedCollection ? entry.get(0) : entry[0],\n          this$1$1\n        );\n      }\n    }, reverse);\n  };\n\n  FromEntriesSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(\n            type,\n            indexedCollection ? entry.get(0) : entry[0],\n            indexedCollection ? entry.get(1) : entry[1],\n            step\n          );\n        }\n      }\n    });\n  };\n\n  return FromEntriesSequence;\n}(KeyedSeq));\n\nToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () { return collection; };\n  flipSequence.reverse = function () {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () { return collection.reverse(); };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) { return collection.includes(key); };\n  flipSequence.includes = function (key) { return collection.has(key); };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(function (v, k) { return fn(k, v, this$1$1) !== false; }, reverse);\n  };\n  flipSequence.__iteratorUncached = function (type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(\n      type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n      reverse\n    );\n  };\n  return flipSequence;\n}\n\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) { return collection.has(key); };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET\n      ? notSetValue\n      : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(\n      function (v, k, c) { return fn(mapper.call(context, v, k, c), k, this$1$1) !== false; },\n      reverse\n    );\n  };\n  mappedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(\n        type,\n        key,\n        mapper.call(context, entry[1], key, collection),\n        step\n      );\n    });\n  };\n  return mappedSequence;\n}\n\nfunction reverseFactory(collection, useKeys) {\n  var this$1$1 = this;\n\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () { return collection; };\n  if (collection.flip) {\n    reversedSequence.flip = function () {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () { return collection.flip(); };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) { return collection.get(useKeys ? key : -1 - key, notSetValue); };\n  reversedSequence.has = function (key) { return collection.has(useKeys ? key : -1 - key); };\n  reversedSequence.includes = function (value) { return collection.includes(value); };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(\n      function (v, k) { return fn(v, useKeys ? k : reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      !reverse\n    );\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(\n        type,\n        useKeys ? entry[0] : reverse ? this$1$1.size - ++i : i++,\n        entry[1],\n        step\n      );\n    });\n  };\n  return reversedSequence;\n}\n\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection)\n        ? v\n        : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\n\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) { return a + 1; });\n  });\n  return groups.asImmutable();\n}\n\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(\n      grouper.call(context, v, k, collection),\n      function (a) { return ((a = a || []), a.push(isKeyedIter ? [k, v] : v), a); }\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); }).asImmutable();\n}\n\nfunction partitionFactory(collection, predicate, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = [[], []];\n  collection.__iterate(function (v, k) {\n    groups[predicate.call(context, v, k, collection) ? 1 : 0].push(\n      isKeyedIter ? [k, v] : v\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); });\n}\n\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n\n  // begin or end can not be resolved if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (typeof originalSize === 'undefined' && (begin < 0 || end < 0)) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size =\n    sliceSize === 0 ? sliceSize : (collection.size && sliceSize) || undefined;\n\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function (index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize\n        ? collection.get(index + resolvedBegin, notSetValue)\n        : notSetValue;\n    };\n  }\n\n  sliceSeq.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return (\n          fn(v, useKeys ? k : iterations - 1, this$1$1) !== false &&\n          iterations !== sliceSize\n        );\n      }\n    });\n    return iterations;\n  };\n\n  sliceSeq.__iteratorUncached = function (type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n\n  return sliceSeq;\n}\n\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(\n      function (v, k, c) { return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1$1); }\n    );\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\n\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\n\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection]\n    .concat(values)\n    .map(function (v) {\n      if (!isCollection(v)) {\n        v = isKeyedCollection\n          ? keyedSeqFromValue(v)\n          : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedCollection) {\n        v = KeyedCollection(v);\n      }\n      return v;\n    })\n    .filter(function (v) { return v.size !== 0; });\n\n  if (iters.length === 0) {\n    return collection;\n  }\n\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (\n      singleton === collection ||\n      (isKeyedCollection && isKeyed(singleton)) ||\n      (isIndexed(collection) && isIndexed(singleton))\n    ) {\n      return singleton;\n    }\n  }\n\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\n\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\n\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection\n    .toSeq()\n    .map(function (v, k) { return coerce(mapper.call(context, v, k, collection)); })\n    .flatten(true);\n}\n\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(\n      function (v) { return (!iterations || fn(separator, iterations++, this$1$1) !== false) &&\n        fn(v, iterations++, this$1$1) !== false; },\n      reverse\n    );\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2\n        ? iteratorValue(type, iterations++, separator)\n        : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\n\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection\n    .toSeq()\n    .map(function (v, k) { return [k, v, index++, mapper ? mapper(v, k, collection) : v]; })\n    .valueSeq()\n    .toArray();\n  entries\n    .sort(function (a, b) { return comparator(a[3], b[3]) || a[2] - b[2]; })\n    .forEach(\n      isKeyedCollection\n        ? function (v, i) {\n            entries[i].length = 2;\n          }\n        : function (v, i) {\n            entries[i] = v[1];\n          }\n    );\n  return isKeyedCollection\n    ? KeyedSeq(entries)\n    : isIndexed(collection)\n    ? IndexedSeq(entries)\n    : SetSeq(entries);\n}\n\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection\n      .toSeq()\n      .map(function (v, k) { return [v, mapper(v, k, collection)]; })\n      .reduce(function (a, b) { return (maxCompare(comparator, a[1], b[1]) ? b : a); });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) { return (maxCompare(comparator, a, b) ? b : a); });\n}\n\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return (\n    (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) ||\n    comp > 0\n  );\n}\n\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) { return i.size; });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function (fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function (type, reverse) {\n    var iterators = iters.map(\n      function (i) { return ((i = Collection(i)), getIterator(reverse ? i.reverse() : i)); }\n    );\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) { return i.next(); });\n        isDone = zipAll ? steps.every(function (s) { return s.done; }) : steps.some(function (s) { return s.done; });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(\n        type,\n        iterations++,\n        zipper.apply(\n          null,\n          steps.map(function (s) { return s.value; })\n        )\n      );\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\n\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\n\nfunction collectionClass(collection) {\n  return isKeyed(collection)\n    ? KeyedCollection\n    : isIndexed(collection)\n    ? IndexedCollection\n    : SetCollection;\n}\n\nfunction makeSequence(collection) {\n  return Object.create(\n    (isKeyed(collection)\n      ? KeyedSeq\n      : isIndexed(collection)\n      ? IndexedSeq\n      : SetSeq\n    ).prototype\n  );\n}\n\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\n\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n\n  if (a === undefined) {\n    return 1;\n  }\n\n  if (b === undefined) {\n    return -1;\n  }\n\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\n\nfunction invariant(condition, error) {\n  if (!condition) { throw new Error(error); }\n}\n\nfunction assertNotInfinite(size) {\n  invariant(\n    size !== Infinity,\n    'Cannot perform this action with an infinite size.'\n  );\n}\n\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError(\n    'Invalid keyPath: expected Ordered Collection or Array: ' + keyPath\n  );\n}\n\nvar toString = Object.prototype.toString;\n\nfunction isPlainObject(value) {\n  // The base prototype's toString deals with Argument objects and native namespaces like Math\n  if (\n    !value ||\n    typeof value !== 'object' ||\n    toString.call(value) !== '[object Object]'\n  ) {\n    return false;\n  }\n\n  var proto = Object.getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n\n  // Iteratively going up the prototype chain is needed for cross-realm environments (differing contexts, iframes, etc)\n  var parentProto = proto;\n  var nextProto = Object.getPrototypeOf(proto);\n  while (nextProto !== null) {\n    parentProto = nextProto;\n    nextProto = Object.getPrototypeOf(parentProto);\n  }\n  return parentProto === proto;\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return (\n    typeof value === 'object' &&\n    (isImmutable(value) || Array.isArray(value) || isPlainObject(value))\n  );\n}\n\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\n\nfunction has(collection, key) {\n  return isImmutable(collection)\n    ? collection.has(key)\n    : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\n\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection)\n    ? collection.get(key, notSetValue)\n    : !has(collection, key)\n    ? notSetValue\n    : typeof collection.get === 'function'\n    ? collection.get(key)\n    : collection[key];\n}\n\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\n\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError(\n        'Cannot update immutable value without .remove() method: ' + collection\n      );\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\n\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError(\n        'Cannot update immutable value without .set() method: ' + collection\n      );\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\n\nfunction updateIn$1(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(\n    isImmutable(collection),\n    collection,\n    coerceKeyPath(keyPath),\n    0,\n    notSetValue,\n    updater\n  );\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\n\nfunction updateInDeeply(\n  inImmutable,\n  existing,\n  keyPath,\n  i,\n  notSetValue,\n  updater\n) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError(\n      'Cannot update within non-data-structure value in path [' +\n        keyPath.slice(0, i).map(quoteString) +\n        ']: ' +\n        existing\n    );\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(\n    nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting),\n    nextExisting,\n    keyPath,\n    i + 1,\n    notSetValue,\n    updater\n  );\n  return nextUpdated === nextExisting\n    ? existing\n    : nextUpdated === NOT_SET\n    ? remove(existing, key)\n    : set(\n        wasNotSet ? (inImmutable ? emptyMap() : {}) : existing,\n        key,\n        nextUpdated\n      );\n}\n\nfunction setIn$1(collection, keyPath, value) {\n  return updateIn$1(collection, keyPath, NOT_SET, function () { return value; });\n}\n\nfunction setIn(keyPath, v) {\n  return setIn$1(this, keyPath, v);\n}\n\nfunction removeIn(collection, keyPath) {\n  return updateIn$1(collection, keyPath, function () { return NOT_SET; });\n}\n\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\n\nfunction update$1(collection, key, notSetValue, updater) {\n  return updateIn$1(collection, [key], notSetValue, updater);\n}\n\nfunction update(key, notSetValue, updater) {\n  return arguments.length === 1\n    ? key(this)\n    : update$1(this, key, notSetValue, updater);\n}\n\nfunction updateIn(keyPath, notSetValue, updater) {\n  return updateIn$1(this, keyPath, notSetValue, updater);\n}\n\nfunction merge$1() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeIntoKeyedWith(this, iters);\n}\n\nfunction mergeWith$1(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\n\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (\n    collection.toSeq().size === 0 &&\n    !collection.__ownerID &&\n    iters.length === 1\n  ) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger\n      ? function (value, key) {\n          update$1(collection, key, NOT_SET, function (oldVal) { return oldVal === NOT_SET ? value : merger(oldVal, value, key); }\n          );\n        }\n      : function (value, key) {\n          collection.set(key, value);\n        };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\n\nfunction merge(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeWithSources(collection, sources);\n}\n\nfunction mergeWith(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeWithSources(collection, sources, merger);\n}\n\nfunction mergeDeep$1(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(collection, sources);\n}\n\nfunction mergeDeepWith$1(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeDeepWithSources(collection, sources, merger);\n}\n\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\n\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot merge into non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith\n      ? collection.mergeWith.apply(collection, [ merger ].concat( sources ))\n      : collection.merge\n      ? collection.merge.apply(collection, sources)\n      : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray\n    ? function (value) {\n        // Copy on write\n        if (merged === collection) {\n          merged = shallowCopy(merged);\n        }\n        merged.push(value);\n      }\n    : function (value, key) {\n        var hasVal = hasOwnProperty.call(merged, key);\n        var nextVal =\n          hasVal && merger ? merger(merged[key], value, key) : value;\n        if (!hasVal || nextVal !== merged[key]) {\n          // Copy on write\n          if (merged === collection) {\n            merged = shallowCopy(merged);\n          }\n          merged[key] = nextVal;\n        }\n      };\n  for (var i = 0; i < sources.length; i++) {\n    Collection(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\n\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) &&\n      isDataStructure(newValue) &&\n      areMergeable(oldValue, newValue)\n      ? mergeWithSources(oldValue, [newValue], deepMerger)\n      : merger\n      ? merger(oldValue, newValue, key)\n      : newValue;\n  }\n  return deepMerger;\n}\n\n/**\n * It's unclear what the desired behavior is for merging two collections that\n * fall into separate categories between keyed, indexed, or set-like, so we only\n * consider them mergeable if they fall into the same category.\n */\nfunction areMergeable(oldDataStructure, newDataStructure) {\n  var oldSeq = Seq(oldDataStructure);\n  var newSeq = Seq(newDataStructure);\n  // This logic assumes that a sequence can only fall into one of the three\n  // categories mentioned above (since there's no `isSetLike()` method).\n  return (\n    isIndexed(oldSeq) === isIndexed(newSeq) &&\n    isKeyed(oldSeq) === isKeyed(newSeq)\n  );\n}\n\nfunction mergeDeep() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeDeepWithSources(this, iters);\n}\n\nfunction mergeDeepWith(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(this, iters, merger);\n}\n\nfunction mergeIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeWithSources(m, iters); });\n}\n\nfunction mergeDeepIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeDeepWithSources(m, iters); }\n  );\n}\n\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\n\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\n\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\n\nfunction wasAltered() {\n  return this.__altered;\n}\n\nvar Map = /*@__PURE__*/(function (KeyedCollection) {\n  function Map(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyMap()\n      : isMap(value) && !isOrdered(value)\n      ? value\n      : emptyMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( KeyedCollection ) Map.__proto__ = KeyedCollection;\n  Map.prototype = Object.create( KeyedCollection && KeyedCollection.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.of = function of () {\n    var keyValues = [], len = arguments.length;\n    while ( len-- ) keyValues[ len ] = arguments[ len ];\n\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n\n  Map.prototype.toString = function toString () {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get (k, notSetValue) {\n    return this._root\n      ? this._root.get(0, undefined, k, notSetValue)\n      : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set (k, v) {\n    return updateMap(this, k, v);\n  };\n\n  Map.prototype.remove = function remove (k) {\n    return updateMap(this, k, NOT_SET);\n  };\n\n  Map.prototype.deleteAll = function deleteAll (keys) {\n    var collection = Collection(keys);\n\n    if (collection.size === 0) {\n      return this;\n    }\n\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) { return map.remove(key); });\n    });\n  };\n\n  Map.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n\n  Map.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n\n  Map.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, this$1$1));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator (type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n\n  Map.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    this._root &&\n      this._root.iterate(function (entry) {\n        iterations++;\n        return fn(entry[1], entry[0], this$1$1);\n      }, reverse);\n    return iterations;\n  };\n\n  Map.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n\n  return Map;\n}(KeyedCollection));\n\nMap.isMap = isMap;\n\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update;\nMapPrototype.updateIn = updateIn;\nMapPrototype.merge = MapPrototype.concat = merge$1;\nMapPrototype.mergeWith = mergeWith$1;\nMapPrototype.mergeDeep = mergeDeep;\nMapPrototype.mergeDeepWith = mergeDeepWith;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function (result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\n\nArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new ArrayMapNode(ownerID, newEntries);\n};\n\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\n\nBitmapIndexedNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0\n    ? notSetValue\n    : this.nodes[popCount(bitmap & (bit - 1))].get(\n        shift + SHIFT,\n        keyHash,\n        key,\n        notSetValue\n      );\n};\n\nBitmapIndexedNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n\n  var idx = popCount(bitmap & (bit - 1));\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n\n  if (newNode === node) {\n    return this;\n  }\n\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n\n  if (\n    exists &&\n    !newNode &&\n    nodes.length === 2 &&\n    isLeafNode(nodes[idx ^ 1])\n  ) {\n    return nodes[idx ^ 1];\n  }\n\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? (newNode ? bitmap : bitmap ^ bit) : bitmap | bit;\n  var newNodes = exists\n    ? newNode\n      ? setAt(nodes, idx, newNode, isEditable)\n      : spliceOut(nodes, idx, isEditable)\n    : spliceIn(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\n\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\n\nHashArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node\n    ? node.get(shift + SHIFT, keyHash, key, notSetValue)\n    : notSetValue;\n};\n\nHashArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n\n  if (removed && !node) {\n    return this;\n  }\n\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n  if (newNode === node) {\n    return this;\n  }\n\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\n\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\n\nHashCollisionNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nHashCollisionNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n\n  var removed = value === NOT_SET;\n\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\n\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\n\nValueNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\n\nValueNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate =\n  function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  };\n\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate =\n  function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  };\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function (fn, reverse) {\n  return fn(this.entry);\n};\n\nvar MapIterator = /*@__PURE__*/(function (Iterator) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n\n  if ( Iterator ) MapIterator.__proto__ = Iterator;\n  MapIterator.prototype = Object.create( Iterator && Iterator.prototype );\n  MapIterator.prototype.constructor = MapIterator;\n\n  MapIterator.prototype.next = function next () {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = (void 0);\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(\n            type,\n            node.entries[this._reverse ? maxIndex - index : index]\n          );\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n\n  return MapIterator;\n}(Iterator));\n\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\n\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev,\n  };\n}\n\nfunction makeMap(size, root, ownerID, hash) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\n\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(\n      map._root,\n      map.__ownerID,\n      0,\n      undefined,\n      k,\n      v,\n      didChangeSize,\n      didAlter\n    );\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? (v === NOT_SET ? -1 : 1) : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\n\nfunction updateNode(\n  node,\n  ownerID,\n  shift,\n  keyHash,\n  key,\n  value,\n  didChangeSize,\n  didAlter\n) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(\n    ownerID,\n    shift,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n}\n\nfunction isLeafNode(node) {\n  return (\n    node.constructor === ValueNode || node.constructor === HashCollisionNode\n  );\n}\n\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n  var newNode;\n  var nodes =\n    idx1 === idx2\n      ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)]\n      : ((newNode = new ValueNode(ownerID, keyHash, entry)),\n        idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n  return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n}\n\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\n\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\n\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\n\nfunction popCount(x) {\n  x -= (x >> 1) & 0x55555555;\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n  x = (x + (x >> 4)) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\n\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\n\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\n\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\n\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\n\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\n\nvar List = /*@__PURE__*/(function (IndexedCollection) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === undefined || value === null) {\n      // eslint-disable-next-line no-constructor-return\n      return empty;\n    }\n    if (isList(value)) {\n      // eslint-disable-next-line no-constructor-return\n      return value;\n    }\n    var iter = IndexedCollection(value);\n    var size = iter.size;\n    if (size === 0) {\n      // eslint-disable-next-line no-constructor-return\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      // eslint-disable-next-line no-constructor-return\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    // eslint-disable-next-line no-constructor-return\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) { return list.set(i, v); });\n    });\n  }\n\n  if ( IndexedCollection ) List.__proto__ = IndexedCollection;\n  List.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  List.prototype.constructor = List;\n\n  List.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  List.prototype.toString = function toString () {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get (index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set (index, value) {\n    return updateList(this, index, value);\n  };\n\n  List.prototype.remove = function remove (index) {\n    return !this.has(index)\n      ? this\n      : index === 0\n      ? this.shift()\n      : index === this.size - 1\n      ? this.pop()\n      : this.splice(index, 1);\n  };\n\n  List.prototype.insert = function insert (index, value) {\n    return this.splice(index, 0, value);\n  };\n\n  List.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n\n  List.prototype.push = function push (/*...values*/) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.pop = function pop () {\n    return setListBounds(this, 0, -1);\n  };\n\n  List.prototype.unshift = function unshift (/*...values*/) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.shift = function shift () {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat (/*...collections*/) {\n    var arguments$1 = arguments;\n\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection(\n        typeof argument !== 'string' && hasIterator(argument)\n          ? argument\n          : [argument]\n      );\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) { return seq.forEach(function (value) { return list.push(value); }); });\n    });\n  };\n\n  List.prototype.setSize = function setSize (size) {\n    return setListBounds(this, 0, size);\n  };\n\n  List.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, this$1$1));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(\n      this,\n      resolveBegin(begin, size),\n      resolveEnd(end, size)\n    );\n  };\n\n  List.prototype.__iterator = function __iterator (type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n\n  List.prototype.__iterate = function __iterate (fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n\n  List.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(\n      this._origin,\n      this._capacity,\n      this._level,\n      this._root,\n      this._tail,\n      ownerID,\n      this.__hash\n    );\n  };\n\n  return List;\n}(IndexedCollection));\n\nList.isList = isList;\n\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update;\nListPrototype.updateIn = updateIn;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function (result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore (ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = (index >>> level) & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild =\n      oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\n\nVNode.prototype.removeAfter = function removeAfter (ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = ((index - 1) >>> level) & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild =\n      oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\n\nvar DONE = {};\n\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0\n      ? iterateLeaf(node, offset)\n      : iterateNode(node, level, offset);\n  }\n\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : (left - offset) >> level;\n    var to = ((right - offset) >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(\n          array && array[idx],\n          level - SHIFT,\n          offset + (idx << level)\n        );\n      }\n    };\n  }\n}\n\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\n\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\n\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n\n  if (index !== index) {\n    return list;\n  }\n\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0\n        ? setListBounds(list, index).set(0, value)\n        : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n\n  index += list._origin;\n\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(\n      newRoot,\n      list.__ownerID,\n      list._level,\n      index,\n      value,\n      didAlter\n    );\n  }\n\n  if (!didAlter.value) {\n    return list;\n  }\n\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\n\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = (index >>> level) & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n\n  var newNode;\n\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(\n      lowerNode,\n      ownerID,\n      level - SHIFT,\n      index,\n      value,\n      didAlter\n    );\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\n\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\n\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << (list._level + SHIFT)) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[(rawIndex >>> level) & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\n\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity =\n    end === undefined\n      ? oldCapacity\n      : end < 0\n      ? oldCapacity + end\n      : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [undefined, newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail =\n    newTailOffset < oldTailOffset\n      ? listNodeFor(list, newCapacity - 1)\n      : newTailOffset > oldTailOffset\n      ? new VNode([], owner)\n      : oldTail;\n\n  // Merge Tail into tree.\n  if (\n    oldTail &&\n    newTailOffset > oldTailOffset &&\n    newOrigin < oldCapacity &&\n    oldTail.array.length\n  ) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = (oldTailOffset >>> level) & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = (newOrigin >>> newLevel) & MASK;\n      if ((beginIndex !== newTailOffset >>> newLevel) & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(\n        owner,\n        newLevel,\n        newTailOffset - offsetShift\n      );\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\n\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : ((size - 1) >>> SHIFT) << SHIFT;\n}\n\nvar OrderedMap = /*@__PURE__*/(function (Map) {\n  function OrderedMap(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyOrderedMap()\n      : isOrderedMap(value)\n      ? value\n      : emptyOrderedMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( Map ) OrderedMap.__proto__ = Map;\n  OrderedMap.prototype = Object.create( Map && Map.prototype );\n  OrderedMap.prototype.constructor = OrderedMap;\n\n  OrderedMap.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedMap.prototype.toString = function toString () {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get (k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      this.__altered = true;\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n\n  OrderedMap.prototype.set = function set (k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n\n  OrderedMap.prototype.remove = function remove (k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n\n  OrderedMap.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._list.__iterate(\n      function (entry) { return entry && fn(entry[1], entry[0], this$1$1); },\n      reverse\n    );\n  };\n\n  OrderedMap.prototype.__iterator = function __iterator (type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n\n  return OrderedMap;\n}(Map));\n\nOrderedMap.isOrderedMap = isOrderedMap;\n\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  omap.__altered = false;\n  return omap;\n}\n\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return (\n    EMPTY_ORDERED_MAP ||\n    (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()))\n  );\n}\n\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) { return entry !== undefined && i !== idx; });\n      newMap = newList\n        .toKeyedSeq()\n        .map(function (entry) { return entry[0]; })\n        .flip()\n        .toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    omap.__altered = true;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\n\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\n\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\n\nvar Stack = /*@__PURE__*/(function (IndexedCollection) {\n  function Stack(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyStack()\n      : isStack(value)\n      ? value\n      : emptyStack().pushAll(value);\n  }\n\n  if ( IndexedCollection ) Stack.__proto__ = IndexedCollection;\n  Stack.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  Stack.prototype.constructor = Stack;\n\n  Stack.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Stack.prototype.toString = function toString () {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get (index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n\n  Stack.prototype.peek = function peek () {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push (/*...values*/) {\n    var arguments$1 = arguments;\n\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head,\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pushAll = function pushAll (iter) {\n    iter = IndexedCollection(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head,\n      };\n    }, /* reverse */ true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pop = function pop () {\n    return this.slice(1);\n  };\n\n  Stack.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n\n  Stack.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(\n        function (v, k) { return fn(v, k, this$1$1); },\n        reverse\n      );\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n\n  Stack.prototype.__iterator = function __iterator (type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n\n  return Stack;\n}(IndexedCollection));\n\nStack.isStack = isStack;\n\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function (result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\n\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\n\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\n\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    !isCollection(b) ||\n    (a.size !== undefined && b.size !== undefined && a.size !== b.size) ||\n    (a.__hash !== undefined &&\n      b.__hash !== undefined &&\n      a.__hash !== b.__hash) ||\n    isKeyed(a) !== isKeyed(b) ||\n    isIndexed(a) !== isIndexed(b) ||\n    isOrdered(a) !== isOrdered(b)\n  ) {\n    return false;\n  }\n\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n\n  var notAssociative = !isAssociative(a);\n\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return (\n      b.every(function (v, k) {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done\n    );\n  }\n\n  var flipped = false;\n\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (\n      notAssociative\n        ? !a.has(v)\n        : flipped\n        ? !is(v, a.get(k, NOT_SET))\n        : !is(a.get(k, NOT_SET), v)\n    ) {\n      allEqual = false;\n      return false;\n    }\n  });\n\n  return allEqual && a.size === bSize;\n}\n\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols &&\n    Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\n\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\n\nvar Set = /*@__PURE__*/(function (SetCollection) {\n  function Set(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptySet()\n      : isSet(value) && !isOrdered(value)\n      ? value\n      : emptySet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( SetCollection ) Set.__proto__ = SetCollection;\n  Set.prototype = Object.create( SetCollection && SetCollection.prototype );\n  Set.prototype.constructor = Set;\n\n  Set.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Set.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  Set.intersect = function intersect (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.intersect.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.union = function union (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.union.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.prototype.toString = function toString () {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has (value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add (value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n\n  Set.prototype.remove = function remove (value) {\n    return updateSet(this, this._map.remove(value));\n  };\n\n  Set.prototype.clear = function clear () {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    // keep track if the set is altered by the map function\n    var didChanges = false;\n\n    var newMap = updateSet(\n      this,\n      this._map.mapEntries(function (ref) {\n        var v = ref[1];\n\n        var mapped = mapper.call(context, v, v, this$1$1);\n\n        if (mapped !== v) {\n          didChanges = true;\n        }\n\n        return [mapped, mapped];\n      }, context)\n    );\n\n    return didChanges ? newMap : this;\n  };\n\n  Set.prototype.union = function union () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    iters = iters.filter(function (x) { return x.size !== 0; });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        if (typeof iters[ii] === 'string') {\n          set.add(iters[ii]);\n        } else {\n          SetCollection(iters[ii]).forEach(function (value) { return set.add(value); });\n        }\n      }\n    });\n  };\n\n  Set.prototype.intersect = function intersect () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.subtract = function subtract () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n\n  Set.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n\n  Set.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered();\n  };\n\n  Set.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._map.__iterate(function (k) { return fn(k, k, this$1$1); }, reverse);\n  };\n\n  Set.prototype.__iterator = function __iterator (type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n\n  Set.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n\n  return Set;\n}(SetCollection));\n\nSet.isSet = isSet;\n\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function (result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\n\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map\n    ? set\n    : newMap.size === 0\n    ? set.__empty()\n    : set.__make(newMap);\n}\n\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/(function (IndexedSeq) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      // eslint-disable-next-line no-constructor-return\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        // eslint-disable-next-line no-constructor-return\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n\n  if ( IndexedSeq ) Range.__proto__ = IndexedSeq;\n  Range.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Range.prototype.constructor = Range;\n\n  Range.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return (\n      'Range [ ' +\n      this._start +\n      '...' +\n      this._end +\n      (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]'\n    );\n  };\n\n  Range.prototype.get = function get (index, notSetValue) {\n    return this.has(index)\n      ? this._start + wrapIndex(this, index) * this._step\n      : notSetValue;\n  };\n\n  Range.prototype.includes = function includes (searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return (\n      possibleIndex >= 0 &&\n      possibleIndex < this.size &&\n      possibleIndex === Math.floor(possibleIndex)\n    );\n  };\n\n  Range.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(\n      this.get(begin, this._end),\n      this.get(end, this._end),\n      this._step\n    );\n  };\n\n  Range.prototype.indexOf = function indexOf (searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n\n  Range.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    return this.indexOf(searchValue);\n  };\n\n  Range.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n\n  Range.prototype.__iterator = function __iterator (type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n\n  Range.prototype.equals = function equals (other) {\n    return other instanceof Range\n      ? this._start === other._start &&\n          this._end === other._end &&\n          this._step === other._step\n      : deepEqual(this, other);\n  };\n\n  return Range;\n}(IndexedSeq));\n\nvar EMPTY_RANGE;\n\nfunction getIn$1(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\n\nfunction getIn(searchKeyPath, notSetValue) {\n  return getIn$1(this, searchKeyPath, notSetValue);\n}\n\nfunction hasIn$1(collection, keyPath) {\n  return getIn$1(collection, keyPath, NOT_SET) !== NOT_SET;\n}\n\nfunction hasIn(searchKeyPath) {\n  return hasIn$1(this, searchKeyPath);\n}\n\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\n\nCollection.Iterator = Iterator;\n\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n\n  toObject: toObject,\n\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n\n  toSeq: function toSeq() {\n    return isIndexed(this)\n      ? this.toIndexedSeq()\n      : isKeyed(this)\n      ? this.toKeyedSeq()\n      : this.toSetSeq();\n  },\n\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return (\n      head +\n      ' ' +\n      this.toSeq().map(this.__toStringMapper).join(', ') +\n      ' ' +\n      tail\n    );\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n    return reify(this, concatFactory(this, values));\n  },\n\n  includes: function includes(searchValue) {\n    return this.some(function (value) { return is(value, searchValue); });\n  },\n\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n\n  partition: function partition(predicate, context) {\n    return partitionFactory(this, predicate, context);\n  },\n\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? (isFirst = false) : (joined += separator);\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      false\n    );\n  },\n\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      true\n    );\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n\n  some: function some(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = false;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        returnValue = true;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () { return true; });\n  },\n\n  count: function count(predicate, context) {\n    return ensureSize(\n      predicate ? this.toSeq().filter(predicate, context) : this\n    );\n  },\n\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection.toSeq().map(entryMapper).toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () { return collection.toSeq(); };\n    return entriesSequence;\n  },\n\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n  },\n\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findEntry(predicate, context, notSetValue);\n  },\n\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq().reverse().findKey(predicate, context);\n  },\n\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) { return is(key, searchKey); }, undefined, notSetValue);\n  },\n\n  getIn: getIn,\n\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n\n  hasIn: hasIn,\n\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) { return iter.includes(value); });\n  },\n\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) { return is(value, searchValue); });\n  },\n\n  keySeq: function keySeq() {\n    return this.toSeq().map(keyMapper).toIndexedSeq();\n  },\n\n  last: function last(notSetValue) {\n    return this.toSeq().reverse().first(notSetValue);\n  },\n\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq().reverse().keyOf(searchValue);\n  },\n\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n\n  min: function min(comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator\n    );\n  },\n\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator,\n      mapper\n    );\n  },\n\n  rest: function rest() {\n    return this.slice(1);\n  },\n\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n\n  update: function update(fn) {\n    return fn(this);\n  },\n\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  },\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function () {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\n\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    return reify(\n      this,\n      this.toSeq()\n        .map(function (v, k) { return mapper.call(context, [k, v], iterations++, this$1$1); })\n        .fromEntrySeq()\n    );\n  },\n\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1$1 = this;\n\n    return reify(\n      this,\n      this.toSeq()\n        .flip()\n        .map(function (k, v) { return mapper.call(context, k, v, this$1$1); })\n        .flip()\n    );\n  },\n});\n\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) { return quoteString(k) + ': ' + quoteString(v); };\n\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(\n      this,\n      numArgs === 1\n        ? spliced\n        : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n    );\n  },\n\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 ||\n      this.size === Infinity ||\n      (this.size !== undefined && index > this.size)\n      ? notSetValue\n      : this.find(function (_, key) { return key === index; }, undefined, notSetValue);\n  },\n\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return (\n      index >= 0 &&\n      (this.size !== undefined\n        ? this.size === Infinity || index < this.size\n        : this.indexOf(index) !== -1)\n    );\n  },\n\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n\n  interleave: function interleave(/*...collections*/) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n\n  zip: function zip(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n\n  zipAll: function zipAll(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  },\n});\n\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\n\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n\n  includes: function includes(value) {\n    return this.has(value);\n  },\n\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  },\n});\n\nvar SetCollectionPrototype = SetCollection.prototype;\nSetCollectionPrototype.has = CollectionPrototype.includes;\nSetCollectionPrototype.contains = SetCollectionPrototype.includes;\nSetCollectionPrototype.keys = SetCollectionPrototype.values;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollectionPrototype);\nmixin(IndexedSeq, IndexedCollectionPrototype);\nmixin(SetSeq, SetCollectionPrototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\n\nfunction keyMapper(v, k) {\n  return k;\n}\n\nfunction entryMapper(v, k) {\n  return [k, v];\n}\n\nfunction not(predicate) {\n  return function () {\n    return !predicate.apply(this, arguments);\n  };\n}\n\nfunction neg(predicate) {\n  return function () {\n    return -predicate.apply(this, arguments);\n  };\n}\n\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\n\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(\n    keyed\n      ? ordered\n        ? function (v, k) {\n            h = (31 * h + hashMerge(hash(v), hash(k))) | 0;\n          }\n        : function (v, k) {\n            h = (h + hashMerge(hash(v), hash(k))) | 0;\n          }\n      : ordered\n      ? function (v) {\n          h = (31 * h + hash(v)) | 0;\n        }\n      : function (v) {\n          h = (h + hash(v)) | 0;\n        }\n  );\n  return murmurHashOfSize(size, h);\n}\n\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul((h << 15) | (h >>> -15), 0x1b873593);\n  h = imul((h << 13) | (h >>> -13), 5);\n  h = ((h + 0xe6546b64) | 0) ^ size;\n  h = imul(h ^ (h >>> 16), 0x85ebca6b);\n  h = imul(h ^ (h >>> 13), 0xc2b2ae35);\n  h = smi(h ^ (h >>> 16));\n  return h;\n}\n\nfunction hashMerge(a, b) {\n  return (a ^ (b + 0x9e3779b9 + (a << 6) + (a >> 2))) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/(function (Set) {\n  function OrderedSet(value) {\n    // eslint-disable-next-line no-constructor-return\n    return value === undefined || value === null\n      ? emptyOrderedSet()\n      : isOrderedSet(value)\n      ? value\n      : emptyOrderedSet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( Set ) OrderedSet.__proto__ = Set;\n  OrderedSet.prototype = Object.create( Set && Set.prototype );\n  OrderedSet.prototype.constructor = OrderedSet;\n\n  OrderedSet.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedSet.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  OrderedSet.prototype.toString = function toString () {\n    return this.__toString('OrderedSet {', '}');\n  };\n\n  return OrderedSet;\n}(Set));\n\nOrderedSet.isOrderedSet = isOrderedSet;\n\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\nOrderedSetPrototype.zipAll = IndexedCollectionPrototype.zipAll;\n\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\n\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return (\n    EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()))\n  );\n}\n\nvar PairSorting = {\n  LeftThenRight: -1,\n  RightThenLeft: +1,\n};\n\nfunction throwOnInvalidDefaultValues(defaultValues) {\n  if (isRecord(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (isImmutable(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (defaultValues === null || typeof defaultValues !== 'object') {\n    throw new Error(\n      'Can not call `Record` with a non-object as default values. Use a plain javascript object instead.'\n    );\n  }\n}\n\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n\n  throwOnInvalidDefaultValues(defaultValues);\n\n  var RecordType = function Record(values) {\n    var this$1$1 = this;\n\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = (RecordTypePrototype._indices = {});\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' &&\n            console.warn &&\n            console.warn(\n              'Cannot define ' +\n                recordName(this) +\n                ' with property \"' +\n                propName +\n                '\" since that property name is part of the Record API.'\n            );\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1$1._indices[k], v === this$1$1._defaultValues[k] ? undefined : v);\n      });\n    });\n    return this;\n  };\n\n  var RecordTypePrototype = (RecordType.prototype =\n    Object.create(RecordPrototype));\n  RecordTypePrototype.constructor = RecordType;\n\n  if (name) {\n    RecordType.displayName = name;\n  }\n\n  // eslint-disable-next-line no-constructor-return\n  return RecordType;\n};\n\nRecord.prototype.toString = function toString () {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\n\nRecord.prototype.equals = function equals (other) {\n  return (\n    this === other ||\n    (isRecord(other) && recordSeq(this).equals(recordSeq(other)))\n  );\n};\n\nRecord.prototype.hashCode = function hashCode () {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has (k) {\n  return this._indices.hasOwnProperty(k);\n};\n\nRecord.prototype.get = function get (k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set (k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(\n      this._indices[k],\n      v === this._defaultValues[k] ? undefined : v\n    );\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\n\nRecord.prototype.remove = function remove (k) {\n  return this.set(k);\n};\n\nRecord.prototype.clear = function clear () {\n  var newValues = this._values.clear().setSize(this._keys.length);\n\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\n\nRecord.prototype.wasAltered = function wasAltered () {\n  return this._values.wasAltered();\n};\n\nRecord.prototype.toSeq = function toSeq () {\n  return recordSeq(this);\n};\n\nRecord.prototype.toJS = function toJS$1 () {\n  return toJS(this);\n};\n\nRecord.prototype.entries = function entries () {\n  return this.__iterator(ITERATE_ENTRIES);\n};\n\nRecord.prototype.__iterator = function __iterator (type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\n\nRecord.prototype.__iterate = function __iterate (fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\n\nRecord.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\n\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge$1;\nRecordPrototype.mergeWith = mergeWith$1;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep;\nRecordPrototype.mergeDeepWith = mergeDeepWith;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn;\nRecordPrototype.update = update;\nRecordPrototype.updateIn = updateIn;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject =\n  CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function () {\n  return this.toString();\n};\n\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\n\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\n\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) { return [k, record.get(k)]; }));\n}\n\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function () {\n        return this.get(name);\n      },\n      set: function (value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      },\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/(function (IndexedSeq) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      // eslint-disable-next-line no-constructor-return\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        // eslint-disable-next-line no-constructor-return\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n\n  if ( IndexedSeq ) Repeat.__proto__ = IndexedSeq;\n  Repeat.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Repeat.prototype.constructor = Repeat;\n\n  Repeat.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n\n  Repeat.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n\n  Repeat.prototype.includes = function includes (searchValue) {\n    return is(this._value, searchValue);\n  };\n\n  Repeat.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size)\n      ? this\n      : new Repeat(\n          this._value,\n          resolveEnd(end, size) - resolveBegin(begin, size)\n        );\n  };\n\n  Repeat.prototype.reverse = function reverse () {\n    return this;\n  };\n\n  Repeat.prototype.indexOf = function indexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  Repeat.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var size = this.size;\n    var i = 0;\n    return new Iterator(function () { return i === size\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? size - ++i : i++, this$1$1._value); }\n    );\n  };\n\n  Repeat.prototype.equals = function equals (other) {\n    return other instanceof Repeat\n      ? is(this._value, other._value)\n      : deepEqual(this, other);\n  };\n\n  return Repeat;\n}(IndexedSeq));\n\nvar EMPTY_REPEAT;\n\nfunction fromJS(value, converter) {\n  return fromJSWith(\n    [],\n    converter || defaultConverter,\n    value,\n    '',\n    converter && converter.length > 2 ? [] : undefined,\n    { '': value }\n  );\n}\n\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  if (\n    typeof value !== 'string' &&\n    !isImmutable(value) &&\n    (isArrayLike(value) || hasIterator(value) || isPlainObject(value))\n  ) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(\n      parentValue,\n      key,\n      Seq(value).map(function (v, k) { return fromJSWith(stack, converter, v, k, keyPath, value); }\n      ),\n      keyPath && keyPath.slice()\n    );\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\n\nfunction defaultConverter(k, v) {\n  // Effectively the opposite of \"Collection.toSeq()\"\n  return isIndexed(v) ? v.toList() : isKeyed(v) ? v.toMap() : v.toSet();\n}\n\nvar version = \"4.3.7\";\n\nvar Immutable = {\n  version: version,\n\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n  PairSorting: PairSorting,\n\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isPlainObject: isPlainObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n\n  get: get,\n  getIn: getIn$1,\n  has: has,\n  hasIn: hasIn$1,\n  merge: merge,\n  mergeDeep: mergeDeep$1,\n  mergeWith: mergeWith,\n  mergeDeepWith: mergeDeepWith$1,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn$1,\n  update: update$1,\n  updateIn: updateIn$1,\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\n\nexport default Immutable;\nexport { Collection, Iterable, List, Map, OrderedMap, OrderedSet, PairSorting, Range, Record, Repeat, Seq, Set, Stack, fromJS, get, getIn$1 as getIn, has, hasIn$1 as hasIn, hash, is, isAssociative, isCollection, isImmutable, isIndexed, isKeyed, isList, isMap, isOrdered, isOrderedMap, isOrderedSet, isPlainObject, isRecord, isSeq, isSet, isStack, isValueObject, merge, mergeDeep$1 as mergeDeep, mergeDeepWith$1 as mergeDeepWith, mergeWith, remove, removeIn, set, setIn$1 as setIn, update$1 as update, updateIn$1 as updateIn, version };\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { PIPMediaProps } from 'mastodon/reducers/picture_in_picture';\nimport { createAppAsyncThunk } from 'mastodon/store/typed_functions';\n\ninterface DeployParams {\n  statusId: string;\n  accountId: string;\n  playerType: 'audio' | 'video';\n  props: PIPMediaProps;\n}\n\nexport const removePictureInPicture = createAction('pip/remove');\n\nexport const deployPictureInPictureAction =\n  createAction<DeployParams>('pip/deploy');\n\nexport const deployPictureInPicture = createAppAsyncThunk(\n  'pip/deploy',\n  (args: DeployParams, { dispatch, getState }) => {\n    const { statusId } = args;\n\n    // Do not open a player for a toot that does not exist\n\n    // @ts-expect-error state.statuses is not yet typed\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    if (getState().hasIn(['statuses', statusId])) {\n      dispatch(deployPictureInPictureAction(args));\n    }\n  },\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { LayoutType } from '../is_mobile';\n\nexport const focusApp = createAction('APP_FOCUS');\nexport const unfocusApp = createAction('APP_UNFOCUS');\n\ninterface ChangeLayoutPayload {\n  layout: LayoutType;\n}\nexport const changeLayout =\n  createAction<ChangeLayoutPayload>('APP_LAYOUT_CHANGE');\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { PIPMediaProps } from 'flavours/glitch/reducers/picture_in_picture';\nimport { createAppAsyncThunk } from 'flavours/glitch/store/typed_functions';\n\ninterface DeployParams {\n  statusId: string;\n  accountId: string;\n  playerType: 'audio' | 'video';\n  props: PIPMediaProps;\n}\n\nexport const removePictureInPicture = createAction('pip/remove');\n\nexport const deployPictureInPictureAction =\n  createAction<DeployParams>('pip/deploy');\n\nexport const deployPictureInPicture = createAppAsyncThunk(\n  'pip/deploy',\n  (args: DeployParams, { dispatch, getState }) => {\n    const { statusId } = args;\n\n    // Do not open a player for a toot that does not exist\n\n    // @ts-expect-error state.statuses is not yet typed\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    if (getState().hasIn(['statuses', statusId])) {\n      dispatch(deployPictureInPictureAction(args));\n    }\n  },\n);\n","import type {\n  ApiAccountRelationshipSeveranceEventJSON,\n  ApiAccountWarningJSON,\n  BaseNotificationGroupJSON,\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n  NotificationType,\n  NotificationWithStatusType,\n} from 'mastodon/api_types/notifications';\nimport type { ApiReportJSON } from 'mastodon/api_types/reports';\n\n// Maximum number of avatars displayed in a notification group\n// This corresponds to the max lenght of `group.sampleAccountIds`\nexport const NOTIFICATIONS_GROUP_MAX_AVATARS = 8;\n\ninterface BaseNotificationGroup\n  extends Omit<BaseNotificationGroupJSON, 'sample_account_ids'> {\n  sampleAccountIds: string[];\n}\n\ninterface BaseNotificationWithStatus<Type extends NotificationWithStatusType>\n  extends BaseNotificationGroup {\n  type: Type;\n  statusId: string;\n}\n\ninterface BaseNotification<Type extends NotificationType>\n  extends BaseNotificationGroup {\n  type: Type;\n}\n\nexport type NotificationGroupFavourite =\n  BaseNotificationWithStatus<'favourite'>;\nexport type NotificationGroupReblog = BaseNotificationWithStatus<'reblog'>;\nexport type NotificationGroupStatus = BaseNotificationWithStatus<'status'>;\nexport type NotificationGroupMention = BaseNotificationWithStatus<'mention'>;\nexport type NotificationGroupPoll = BaseNotificationWithStatus<'poll'>;\nexport type NotificationGroupUpdate = BaseNotificationWithStatus<'update'>;\nexport type NotificationGroupFollow = BaseNotification<'follow'>;\nexport type NotificationGroupFollowRequest = BaseNotification<'follow_request'>;\nexport type NotificationGroupAdminSignUp = BaseNotification<'admin.sign_up'>;\n\nexport type AccountWarningAction =\n  | 'none'\n  | 'disable'\n  | 'mark_statuses_as_sensitive'\n  | 'delete_statuses'\n  | 'sensitive'\n  | 'silence'\n  | 'suspend';\nexport interface AccountWarning\n  extends Omit<ApiAccountWarningJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupModerationWarning\n  extends BaseNotification<'moderation_warning'> {\n  moderationWarning: AccountWarning;\n}\n\ntype AccountRelationshipSeveranceEvent =\n  ApiAccountRelationshipSeveranceEventJSON;\nexport interface NotificationGroupSeveredRelationships\n  extends BaseNotification<'severed_relationships'> {\n  event: AccountRelationshipSeveranceEvent;\n}\n\ninterface Report extends Omit<ApiReportJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupAdminReport\n  extends BaseNotification<'admin.report'> {\n  report: Report;\n}\n\nexport type NotificationGroup =\n  | NotificationGroupFavourite\n  | NotificationGroupReblog\n  | NotificationGroupStatus\n  | NotificationGroupMention\n  | NotificationGroupPoll\n  | NotificationGroupUpdate\n  | NotificationGroupFollow\n  | NotificationGroupFollowRequest\n  | NotificationGroupModerationWarning\n  | NotificationGroupSeveredRelationships\n  | NotificationGroupAdminSignUp\n  | NotificationGroupAdminReport;\n\nfunction createReportFromJSON(reportJSON: ApiReportJSON): Report {\n  const { target_account, ...report } = reportJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...report,\n  };\n}\n\nfunction createAccountWarningFromJSON(\n  warningJSON: ApiAccountWarningJSON,\n): AccountWarning {\n  const { target_account, ...warning } = warningJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...warning,\n  };\n}\n\nfunction createAccountRelationshipSeveranceEventFromJSON(\n  eventJson: ApiAccountRelationshipSeveranceEventJSON,\n): AccountRelationshipSeveranceEvent {\n  return eventJson;\n}\n\nexport function createNotificationGroupFromJSON(\n  groupJson: ApiNotificationGroupJSON,\n): NotificationGroup {\n  const { sample_account_ids: sampleAccountIds, ...group } = groupJson;\n\n  switch (group.type) {\n    case 'favourite':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update': {\n      const { status_id: statusId, ...groupWithoutStatus } = group;\n      return {\n        statusId,\n        sampleAccountIds,\n        ...groupWithoutStatus,\n      };\n    }\n    case 'admin.report': {\n      const { report, ...groupWithoutTargetAccount } = group;\n      return {\n        report: createReportFromJSON(report),\n        sampleAccountIds,\n        ...groupWithoutTargetAccount,\n      };\n    }\n    case 'severed_relationships':\n      return {\n        ...group,\n        event: createAccountRelationshipSeveranceEventFromJSON(group.event),\n        sampleAccountIds,\n      };\n\n    case 'moderation_warning': {\n      const { moderation_warning, ...groupWithoutModerationWarning } = group;\n      return {\n        ...groupWithoutModerationWarning,\n        moderationWarning: createAccountWarningFromJSON(moderation_warning),\n        sampleAccountIds,\n      };\n    }\n    default:\n      return {\n        sampleAccountIds,\n        ...group,\n      };\n  }\n}\n\nexport function createNotificationGroupFromNotificationJSON(\n  notification: ApiNotificationJSON,\n) {\n  const group = {\n    sampleAccountIds: [notification.account.id],\n    group_key: notification.group_key,\n    notifications_count: 1,\n    type: notification.type,\n    most_recent_notification_id: notification.id,\n    page_min_id: notification.id,\n    page_max_id: notification.id,\n    latest_page_notification_at: notification.created_at,\n  } as NotificationGroup;\n\n  switch (notification.type) {\n    case 'favourite':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update':\n      return { ...group, statusId: notification.status.id };\n    case 'admin.report':\n      return { ...group, report: createReportFromJSON(notification.report) };\n    case 'severed_relationships':\n      return {\n        ...group,\n        event: createAccountRelationshipSeveranceEventFromJSON(\n          notification.event,\n        ),\n      };\n    case 'moderation_warning':\n      return {\n        ...group,\n        moderationWarning: createAccountWarningFromJSON(\n          notification.moderation_warning,\n        ),\n      };\n    default:\n      return group;\n  }\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const BOOKMARKED_STATUSES_FETCH_REQUEST = 'BOOKMARKED_STATUSES_FETCH_REQUEST';\nexport const BOOKMARKED_STATUSES_FETCH_SUCCESS = 'BOOKMARKED_STATUSES_FETCH_SUCCESS';\nexport const BOOKMARKED_STATUSES_FETCH_FAIL    = 'BOOKMARKED_STATUSES_FETCH_FAIL';\n\nexport const BOOKMARKED_STATUSES_EXPAND_REQUEST = 'BOOKMARKED_STATUSES_EXPAND_REQUEST';\nexport const BOOKMARKED_STATUSES_EXPAND_SUCCESS = 'BOOKMARKED_STATUSES_EXPAND_SUCCESS';\nexport const BOOKMARKED_STATUSES_EXPAND_FAIL    = 'BOOKMARKED_STATUSES_EXPAND_FAIL';\n\nexport function fetchBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchBookmarkedStatusesRequest());\n\n    api().get('/api/v1/bookmarks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'bookmarks', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandBookmarkedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const FAVOURITED_STATUSES_FETCH_REQUEST = 'FAVOURITED_STATUSES_FETCH_REQUEST';\nexport const FAVOURITED_STATUSES_FETCH_SUCCESS = 'FAVOURITED_STATUSES_FETCH_SUCCESS';\nexport const FAVOURITED_STATUSES_FETCH_FAIL    = 'FAVOURITED_STATUSES_FETCH_FAIL';\n\nexport const FAVOURITED_STATUSES_EXPAND_REQUEST = 'FAVOURITED_STATUSES_EXPAND_REQUEST';\nexport const FAVOURITED_STATUSES_EXPAND_SUCCESS = 'FAVOURITED_STATUSES_EXPAND_SUCCESS';\nexport const FAVOURITED_STATUSES_EXPAND_FAIL    = 'FAVOURITED_STATUSES_EXPAND_FAIL';\n\nexport function fetchFavouritedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchFavouritedStatusesRequest());\n\n    api().get('/api/v1/favourites').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function expandFavouritedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'favourites', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandFavouritedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import type {\n  ApiAccountRelationshipSeveranceEventJSON,\n  ApiAccountWarningJSON,\n  BaseNotificationGroupJSON,\n  ApiNotificationGroupJSON,\n  ApiNotificationJSON,\n  NotificationType,\n  NotificationWithStatusType,\n} from 'flavours/glitch/api_types/notifications';\nimport type { ApiReportJSON } from 'flavours/glitch/api_types/reports';\n\n// Maximum number of avatars displayed in a notification group\n// This corresponds to the max lenght of `group.sampleAccountIds`\nexport const NOTIFICATIONS_GROUP_MAX_AVATARS = 8;\n\ninterface BaseNotificationGroup\n  extends Omit<BaseNotificationGroupJSON, 'sample_account_ids'> {\n  sampleAccountIds: string[];\n}\n\ninterface BaseNotificationWithStatus<Type extends NotificationWithStatusType>\n  extends BaseNotificationGroup {\n  type: Type;\n  statusId: string;\n}\n\ninterface BaseNotification<Type extends NotificationType>\n  extends BaseNotificationGroup {\n  type: Type;\n}\n\nexport type NotificationGroupFavourite =\n  BaseNotificationWithStatus<'favourite'>;\nexport type NotificationGroupReaction = BaseNotificationWithStatus<'reaction'>;\nexport type NotificationGroupReblog = BaseNotificationWithStatus<'reblog'>;\nexport type NotificationGroupStatus = BaseNotificationWithStatus<'status'>;\nexport type NotificationGroupMention = BaseNotificationWithStatus<'mention'>;\nexport type NotificationGroupPoll = BaseNotificationWithStatus<'poll'>;\nexport type NotificationGroupUpdate = BaseNotificationWithStatus<'update'>;\nexport type NotificationGroupFollow = BaseNotification<'follow'>;\nexport type NotificationGroupFollowRequest = BaseNotification<'follow_request'>;\nexport type NotificationGroupAdminSignUp = BaseNotification<'admin.sign_up'>;\n\nexport type AccountWarningAction =\n  | 'none'\n  | 'disable'\n  | 'mark_statuses_as_sensitive'\n  | 'delete_statuses'\n  | 'sensitive'\n  | 'silence'\n  | 'suspend';\nexport interface AccountWarning\n  extends Omit<ApiAccountWarningJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupModerationWarning\n  extends BaseNotification<'moderation_warning'> {\n  moderationWarning: AccountWarning;\n}\n\ntype AccountRelationshipSeveranceEvent =\n  ApiAccountRelationshipSeveranceEventJSON;\nexport interface NotificationGroupSeveredRelationships\n  extends BaseNotification<'severed_relationships'> {\n  event: AccountRelationshipSeveranceEvent;\n}\n\ninterface Report extends Omit<ApiReportJSON, 'target_account'> {\n  targetAccountId: string;\n}\n\nexport interface NotificationGroupAdminReport\n  extends BaseNotification<'admin.report'> {\n  report: Report;\n}\n\nexport type NotificationGroup =\n  | NotificationGroupFavourite\n  | NotificationGroupReaction\n  | NotificationGroupReblog\n  | NotificationGroupStatus\n  | NotificationGroupMention\n  | NotificationGroupPoll\n  | NotificationGroupUpdate\n  | NotificationGroupFollow\n  | NotificationGroupFollowRequest\n  | NotificationGroupModerationWarning\n  | NotificationGroupSeveredRelationships\n  | NotificationGroupAdminSignUp\n  | NotificationGroupAdminReport;\n\nfunction createReportFromJSON(reportJSON: ApiReportJSON): Report {\n  const { target_account, ...report } = reportJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...report,\n  };\n}\n\nfunction createAccountWarningFromJSON(\n  warningJSON: ApiAccountWarningJSON,\n): AccountWarning {\n  const { target_account, ...warning } = warningJSON;\n  return {\n    targetAccountId: target_account.id,\n    ...warning,\n  };\n}\n\nfunction createAccountRelationshipSeveranceEventFromJSON(\n  eventJson: ApiAccountRelationshipSeveranceEventJSON,\n): AccountRelationshipSeveranceEvent {\n  return eventJson;\n}\n\nexport function createNotificationGroupFromJSON(\n  groupJson: ApiNotificationGroupJSON,\n): NotificationGroup {\n  const { sample_account_ids: sampleAccountIds, ...group } = groupJson;\n\n  switch (group.type) {\n    case 'favourite':\n    case 'reaction':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update': {\n      const { status_id: statusId, ...groupWithoutStatus } = group;\n      return {\n        statusId,\n        sampleAccountIds,\n        ...groupWithoutStatus,\n      };\n    }\n    case 'admin.report': {\n      const { report, ...groupWithoutTargetAccount } = group;\n      return {\n        report: createReportFromJSON(report),\n        sampleAccountIds,\n        ...groupWithoutTargetAccount,\n      };\n    }\n    case 'severed_relationships':\n      return {\n        ...group,\n        event: createAccountRelationshipSeveranceEventFromJSON(group.event),\n        sampleAccountIds,\n      };\n\n    case 'moderation_warning': {\n      const { moderation_warning, ...groupWithoutModerationWarning } = group;\n      return {\n        ...groupWithoutModerationWarning,\n        moderationWarning: createAccountWarningFromJSON(moderation_warning),\n        sampleAccountIds,\n      };\n    }\n    default:\n      return {\n        sampleAccountIds,\n        ...group,\n      };\n  }\n}\n\nexport function createNotificationGroupFromNotificationJSON(\n  notification: ApiNotificationJSON,\n) {\n  const group = {\n    sampleAccountIds: [notification.account.id],\n    group_key: notification.group_key,\n    notifications_count: 1,\n    type: notification.type,\n    most_recent_notification_id: notification.id,\n    page_min_id: notification.id,\n    page_max_id: notification.id,\n    latest_page_notification_at: notification.created_at,\n  } as NotificationGroup;\n\n  switch (notification.type) {\n    case 'favourite':\n    case 'reaction':\n    case 'reblog':\n    case 'status':\n    case 'mention':\n    case 'poll':\n    case 'update':\n      return { ...group, statusId: notification.status.id };\n    case 'admin.report':\n      return { ...group, report: createReportFromJSON(notification.report) };\n    case 'severed_relationships':\n      return {\n        ...group,\n        event: createAccountRelationshipSeveranceEventFromJSON(\n          notification.event,\n        ),\n      };\n    case 'moderation_warning':\n      return {\n        ...group,\n        moderationWarning: createAccountWarningFromJSON(\n          notification.moderation_warning,\n        ),\n      };\n    default:\n      return group;\n  }\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const BOOKMARKED_STATUSES_FETCH_REQUEST = 'BOOKMARKED_STATUSES_FETCH_REQUEST';\nexport const BOOKMARKED_STATUSES_FETCH_SUCCESS = 'BOOKMARKED_STATUSES_FETCH_SUCCESS';\nexport const BOOKMARKED_STATUSES_FETCH_FAIL    = 'BOOKMARKED_STATUSES_FETCH_FAIL';\n\nexport const BOOKMARKED_STATUSES_EXPAND_REQUEST = 'BOOKMARKED_STATUSES_EXPAND_REQUEST';\nexport const BOOKMARKED_STATUSES_EXPAND_SUCCESS = 'BOOKMARKED_STATUSES_EXPAND_SUCCESS';\nexport const BOOKMARKED_STATUSES_EXPAND_FAIL    = 'BOOKMARKED_STATUSES_EXPAND_FAIL';\n\nexport function fetchBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchBookmarkedStatusesRequest());\n\n    api().get('/api/v1/bookmarks').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_REQUEST,\n  };\n}\n\nexport function fetchBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function fetchBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_FETCH_FAIL,\n    error,\n  };\n}\n\nexport function expandBookmarkedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'bookmarks', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'bookmarks', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandBookmarkedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandBookmarkedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandBookmarkedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandBookmarkedStatusesRequest() {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandBookmarkedStatusesSuccess(statuses, next) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandBookmarkedStatusesFail(error) {\n  return {\n    type: BOOKMARKED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import api, { getLinks } from '../api';\n\nimport { importFetchedStatuses } from './importer';\n\nexport const FAVOURITED_STATUSES_FETCH_REQUEST = 'FAVOURITED_STATUSES_FETCH_REQUEST';\nexport const FAVOURITED_STATUSES_FETCH_SUCCESS = 'FAVOURITED_STATUSES_FETCH_SUCCESS';\nexport const FAVOURITED_STATUSES_FETCH_FAIL    = 'FAVOURITED_STATUSES_FETCH_FAIL';\n\nexport const FAVOURITED_STATUSES_EXPAND_REQUEST = 'FAVOURITED_STATUSES_EXPAND_REQUEST';\nexport const FAVOURITED_STATUSES_EXPAND_SUCCESS = 'FAVOURITED_STATUSES_EXPAND_SUCCESS';\nexport const FAVOURITED_STATUSES_EXPAND_FAIL    = 'FAVOURITED_STATUSES_EXPAND_FAIL';\n\nexport function fetchFavouritedStatuses() {\n  return (dispatch, getState) => {\n    if (getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(fetchFavouritedStatusesRequest());\n\n    api().get('/api/v1/favourites').then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(fetchFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(fetchFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function fetchFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_SUCCESS,\n    statuses,\n    next,\n    skipLoading: true,\n  };\n}\n\nexport function fetchFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_FETCH_FAIL,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function expandFavouritedStatuses() {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['status_lists', 'favourites', 'next'], null);\n\n    if (url === null || getState().getIn(['status_lists', 'favourites', 'isLoading'])) {\n      return;\n    }\n\n    dispatch(expandFavouritedStatusesRequest());\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandFavouritedStatusesSuccess(response.data, next ? next.uri : null));\n    }).catch(error => {\n      dispatch(expandFavouritedStatusesFail(error));\n    });\n  };\n}\n\nexport function expandFavouritedStatusesRequest() {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_REQUEST,\n  };\n}\n\nexport function expandFavouritedStatusesSuccess(statuses, next) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_SUCCESS,\n    statuses,\n    next,\n  };\n}\n\nexport function expandFavouritedStatusesFail(error) {\n  return {\n    type: FAVOURITED_STATUSES_EXPAND_FAIL,\n    error,\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ModalProps } from 'flavours/glitch/reducers/modal';\n\nimport type { MODAL_COMPONENTS } from '../features/ui/components/modal_root';\n\nexport type ModalType = keyof typeof MODAL_COMPONENTS;\n\ninterface OpenModalPayload {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\nexport const openModal = createAction<OpenModalPayload>('MODAL_OPEN');\n\ninterface CloseModalPayload {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nexport const closeModal = createAction<CloseModalPayload>('MODAL_CLOSE');\n","import { apiRequestGet } from 'mastodon/api';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\n\nexport const apiGetDirectory = (\n  params: {\n    order: string;\n    local: boolean;\n    offset?: number;\n  },\n  limit = 20,\n) =>\n  apiRequestGet<ApiAccountJSON[]>('v1/directory', {\n    ...params,\n    limit,\n  });\n","import type { List as ImmutableList } from 'immutable';\n\nimport { apiGetDirectory } from 'mastodon/api/directory';\nimport { createDataLoadingThunk } from 'mastodon/store/typed_functions';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const fetchDirectory = createDataLoadingThunk(\n  'directory/fetch',\n  async (params: Parameters<typeof apiGetDirectory>[0]) =>\n    apiGetDirectory(params),\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n\nexport const expandDirectory = createDataLoadingThunk(\n  'directory/expand',\n  async (params: Parameters<typeof apiGetDirectory>[0], { getState }) => {\n    const loadedItems = getState().user_lists.getIn([\n      'directory',\n      'items',\n    ]) as ImmutableList<unknown>;\n\n    return apiGetDirectory({ ...params, offset: loadedItems.size }, 20);\n  },\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n","import { apiRequestGet } from 'flavours/glitch/api';\nimport type { ApiAccountJSON } from 'flavours/glitch/api_types/accounts';\n\nexport const apiGetDirectory = (\n  params: {\n    order: string;\n    local: boolean;\n    offset?: number;\n  },\n  limit = 20,\n) =>\n  apiRequestGet<ApiAccountJSON[]>('v1/directory', {\n    ...params,\n    limit,\n  });\n","import type { List as ImmutableList } from 'immutable';\n\nimport { apiGetDirectory } from 'flavours/glitch/api/directory';\nimport { createDataLoadingThunk } from 'flavours/glitch/store/typed_functions';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const fetchDirectory = createDataLoadingThunk(\n  'directory/fetch',\n  async (params: Parameters<typeof apiGetDirectory>[0]) =>\n    apiGetDirectory(params),\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n\nexport const expandDirectory = createDataLoadingThunk(\n  'directory/expand',\n  async (params: Parameters<typeof apiGetDirectory>[0], { getState }) => {\n    const loadedItems = getState().user_lists.getIn([\n      'directory',\n      'items',\n    ]) as ImmutableList<unknown>;\n\n    return apiGetDirectory({ ...params, offset: loadedItems.size }, 20);\n  },\n  (data, { dispatch }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchRelationships(data.map((x) => x.id)));\n\n    return { accounts: data };\n  },\n);\n","import api from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const SUGGESTIONS_FETCH_REQUEST = 'SUGGESTIONS_FETCH_REQUEST';\nexport const SUGGESTIONS_FETCH_SUCCESS = 'SUGGESTIONS_FETCH_SUCCESS';\nexport const SUGGESTIONS_FETCH_FAIL    = 'SUGGESTIONS_FETCH_FAIL';\n\nexport const SUGGESTIONS_DISMISS = 'SUGGESTIONS_DISMISS';\n\nexport function fetchSuggestions(withRelationships = false) {\n  return (dispatch) => {\n    dispatch(fetchSuggestionsRequest());\n\n    api().get('/api/v2/suggestions', { params: { limit: 20 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n      dispatch(fetchSuggestionsSuccess(response.data));\n\n      if (withRelationships) {\n        dispatch(fetchRelationships(response.data.map(item => item.account.id)));\n      }\n    }).catch(error => dispatch(fetchSuggestionsFail(error)));\n  };\n}\n\nexport function fetchSuggestionsRequest() {\n  return {\n    type: SUGGESTIONS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsSuccess(suggestions) {\n  return {\n    type: SUGGESTIONS_FETCH_SUCCESS,\n    suggestions,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsFail(error) {\n  return {\n    type: SUGGESTIONS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipAlert: true,\n  };\n}\n\nexport const dismissSuggestion = accountId => (dispatch) => {\n  dispatch({\n    type: SUGGESTIONS_DISMISS,\n    id: accountId,\n  });\n\n  api().delete(`/api/v1/suggestions/${accountId}`).catch(() => {});\n};\n","import api from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts } from './importer';\n\nexport const SUGGESTIONS_FETCH_REQUEST = 'SUGGESTIONS_FETCH_REQUEST';\nexport const SUGGESTIONS_FETCH_SUCCESS = 'SUGGESTIONS_FETCH_SUCCESS';\nexport const SUGGESTIONS_FETCH_FAIL    = 'SUGGESTIONS_FETCH_FAIL';\n\nexport const SUGGESTIONS_DISMISS = 'SUGGESTIONS_DISMISS';\n\nexport function fetchSuggestions(withRelationships = false) {\n  return (dispatch) => {\n    dispatch(fetchSuggestionsRequest());\n\n    api().get('/api/v2/suggestions', { params: { limit: 20 } }).then(response => {\n      dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n      dispatch(fetchSuggestionsSuccess(response.data));\n\n      if (withRelationships) {\n        dispatch(fetchRelationships(response.data.map(item => item.account.id)));\n      }\n    }).catch(error => dispatch(fetchSuggestionsFail(error)));\n  };\n}\n\nexport function fetchSuggestionsRequest() {\n  return {\n    type: SUGGESTIONS_FETCH_REQUEST,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsSuccess(suggestions) {\n  return {\n    type: SUGGESTIONS_FETCH_SUCCESS,\n    suggestions,\n    skipLoading: true,\n  };\n}\n\nexport function fetchSuggestionsFail(error) {\n  return {\n    type: SUGGESTIONS_FETCH_FAIL,\n    error,\n    skipLoading: true,\n    skipAlert: true,\n  };\n}\n\nexport const dismissSuggestion = accountId => (dispatch) => {\n  dispatch({\n    type: SUGGESTIONS_DISMISS,\n    id: accountId,\n  });\n\n  api().delete(`/api/v1/suggestions/${accountId}`).catch(() => {});\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.at` method\n// https://tc39.es/ecma262/#sec-array.prototype.at\n$({ target: 'Array', proto: true }, {\n  at: function at(index) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : O[k];\n  }\n});\n\naddToUnscopables('at');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\n\nvar charAt = uncurryThis(''.charAt);\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-array-string-prototype-at -- safe\n  return '𠮷'.at(-2) !== '\\uD842';\n});\n\n// `String.prototype.at` method\n// https://tc39.es/ecma262/#sec-string.prototype.at\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiNotificationJSON } from 'mastodon/api_types/notifications';\n\nexport const notificationsUpdate = createAction(\n  'notifications/update',\n  ({\n    playSound,\n    ...args\n  }: {\n    notification: ApiNotificationJSON;\n    usePendingItems: boolean;\n    playSound: boolean;\n  }) => ({\n    payload: args,\n    meta: { sound: playSound ? 'boop' : undefined },\n  }),\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiNotificationJSON } from 'flavours/glitch/api_types/notifications';\n\nexport const notificationsUpdate = createAction(\n  'notifications/update',\n  ({\n    playSound,\n    ...args\n  }: {\n    notification: ApiNotificationJSON;\n    usePendingItems: boolean;\n    playSound: boolean;\n  }) => ({\n    payload: args,\n    meta: { sound: playSound ? 'boop' : undefined },\n  }),\n);\n","import { PureComponent, createRef } from 'react';\n\nimport classNames from 'classnames';\n\nimport { AnimatedNumber } from './animated_number';\nimport type { IconProp } from './icon';\nimport { Icon } from './icon';\n\ninterface Props {\n  className?: string;\n  title: string;\n  icon: string;\n  iconComponent: IconProp;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onMouseDown?: React.MouseEventHandler<HTMLButtonElement>;\n  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement>;\n  onKeyPress?: React.KeyboardEventHandler<HTMLButtonElement>;\n  active: boolean;\n  expanded?: boolean;\n  style?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  disabled: boolean;\n  inverted?: boolean;\n  animate: boolean;\n  overlay: boolean;\n  tabIndex: number;\n  label?: string;\n  counter?: number;\n  obfuscateCount?: boolean;\n  href?: string;\n  ariaHidden: boolean;\n}\ninterface States {\n  activate: boolean;\n  deactivate: boolean;\n}\nexport class IconButton extends PureComponent<Props, States> {\n  buttonRef = createRef<HTMLButtonElement>();\n\n  static defaultProps = {\n    active: false,\n    disabled: false,\n    animate: false,\n    overlay: false,\n    tabIndex: 0,\n    ariaHidden: false,\n  };\n\n  state = {\n    activate: false,\n    deactivate: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({ activate: false, deactivate: true });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({ activate: true, deactivate: false });\n    }\n  }\n\n  handleClick: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    e.preventDefault();\n\n    if (!this.props.disabled && this.props.onClick != null) {\n      this.props.onClick(e);\n    }\n  };\n\n  handleKeyPress: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (this.props.onKeyPress && !this.props.disabled) {\n      this.props.onKeyPress(e);\n    }\n  };\n\n  handleMouseDown: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onMouseDown) {\n      this.props.onMouseDown(e);\n    }\n  };\n\n  handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  };\n\n  render() {\n    const style = {\n      ...this.props.style,\n      ...(this.props.active ? this.props.activeStyle : {}),\n    };\n\n    const {\n      active,\n      className,\n      disabled,\n      expanded,\n      icon,\n      iconComponent,\n      inverted,\n      overlay,\n      tabIndex,\n      title,\n      counter,\n      obfuscateCount,\n      href,\n      ariaHidden,\n    } = this.props;\n\n    const { activate, deactivate } = this.state;\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    let contents = (\n      <>\n        <Icon id={icon} icon={iconComponent} aria-hidden='true' />{' '}\n        {typeof counter !== 'undefined' && (\n          <span className='icon-button__counter'>\n            <AnimatedNumber value={counter} obfuscate={obfuscateCount} />\n          </span>\n        )}\n        {this.props.label}\n      </>\n    );\n\n    if (href != null) {\n      contents = (\n        <a href={href} target='_blank' rel='noopener noreferrer'>\n          {contents}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        aria-label={title}\n        aria-expanded={expanded}\n        aria-hidden={ariaHidden}\n        title={title}\n        className={classes}\n        onClick={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onKeyDown={this.handleKeyDown}\n        onKeyPress={this.handleKeyPress}\n        style={style}\n        tabIndex={tabIndex}\n        disabled={disabled}\n        ref={this.buttonRef}\n      >\n        {contents}\n      </button>\n    );\n  }\n}\n","/*\nCopyright (c) 2020 by Alex Permyakov (https://codepen.io/alexdevp/pen/RNELPV)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst hex2rgba = (hex, alpha = 1) => {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport default class Visualizer {\n\n  constructor (tickSize) {\n    this.tickSize = tickSize;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n    if (canvas) {\n      this.context = canvas.getContext('2d');\n    }\n  }\n\n  setAudioContext(context, source) {\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = 0.6;\n    analyser.fftSize = 2048;\n\n    source.connect(analyser);\n\n    this.analyser = analyser;\n  }\n\n  getTickPoints (count) {\n    const coords = [];\n\n    for(let i = 0; i < count; i++) {\n      const rad = Math.PI * 2 * i / count;\n      coords.push({ x: Math.cos(rad), y: -Math.sin(rad) });\n    }\n\n    return coords;\n  }\n\n  drawTick (cx, cy, mainColor, x1, y1, x2, y2) {\n    const dx1 = Math.ceil(cx + x1);\n    const dy1 = Math.ceil(cy + y1);\n    const dx2 = Math.ceil(cx + x2);\n    const dy2 = Math.ceil(cy + y2);\n\n    const gradient = this.context.createLinearGradient(dx1, dy1, dx2, dy2);\n\n    const lastColor = hex2rgba(mainColor, 0);\n\n    gradient.addColorStop(0, mainColor);\n    gradient.addColorStop(0.6, mainColor);\n    gradient.addColorStop(1, lastColor);\n\n    this.context.beginPath();\n    this.context.strokeStyle = gradient;\n    this.context.lineWidth = 2;\n    this.context.moveTo(dx1, dy1);\n    this.context.lineTo(dx2, dy2);\n    this.context.stroke();\n  }\n\n  getTicks (count, size, radius, scaleCoefficient) {\n    const ticks = this.getTickPoints(count);\n    const lesser = 200;\n    const m = [];\n    const bufferLength = this.analyser ? this.analyser.frequencyBinCount : 0;\n    const frequencyData = new Uint8Array(bufferLength);\n    const allScales = [];\n\n    if (this.analyser) {\n      this.analyser.getByteFrequencyData(frequencyData);\n    }\n\n    ticks.forEach((tick, i) => {\n      const coef = 1 - i / (ticks.length * 2.5);\n\n      let delta = ((frequencyData[i] || 0) - lesser * coef) * scaleCoefficient;\n\n      if (delta < 0) {\n        delta = 0;\n      }\n\n      const k = radius / (radius - (size + delta));\n\n      const x1 = tick.x * (radius - size);\n      const y1 = tick.y * (radius - size);\n      const x2 = x1 * k;\n      const y2 = y1 * k;\n\n      m.push({ x1, y1, x2, y2 });\n\n      if (i < 20) {\n        let scale = delta / (200 * scaleCoefficient);\n        scale = scale < 1 ? 1 : scale;\n        allScales.push(scale);\n      }\n    });\n\n    const scale = allScales.reduce((pv, cv) => pv + cv, 0) / allScales.length;\n\n    return m.map(({ x1, y1, x2, y2 }) => ({\n      x1: x1,\n      y1: y1,\n      x2: x2 * scale,\n      y2: y2 * scale,\n    }));\n  }\n\n  clear (width, height) {\n    this.context.clearRect(0, 0, width, height);\n  }\n\n  draw (cx, cy, color, radius, coefficient) {\n    this.context.save();\n\n    const ticks = this.getTicks(parseInt(360 * coefficient), this.tickSize, radius, coefficient);\n\n    ticks.forEach(tick => {\n      this.drawTick(cx, cy, color, tick.x1, tick.y1, tick.x2, tick.y2);\n    });\n\n    this.context.restore();\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle, debounce } from 'lodash';\n\nimport DownloadIcon from '@/material-icons/400-24px/download.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Icon }  from 'mastodon/components/icon';\nimport { formatTime, getPointerPosition, fileNameFromURL } from 'mastodon/features/video';\n\nimport { Blurhash } from '../../components/blurhash';\nimport { displayMedia, useBlurhash } from '../../initial_state';\n\nimport Visualizer from './visualizer';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  download: { id: 'video.download', defaultMessage: 'Download file' },\n  hide: { id: 'audio.hide', defaultMessage: 'Hide audio' },\n});\n\nconst TICK_SIZE = 10;\nconst PADDING   = 180;\n\nclass Audio extends PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    poster: PropTypes.string,\n    duration: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    sensitive: PropTypes.bool,\n    editable: PropTypes.bool,\n    fullscreen: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    cacheWidth: PropTypes.func,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    deployPictureInPicture: PropTypes.func,\n  };\n\n  state = {\n    width: this.props.width,\n    currentTime: 0,\n    buffer: 0,\n    duration: null,\n    paused: true,\n    muted: false,\n    volume: 1,\n    dragging: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  constructor (props) {\n    super(props);\n    this.visualizer = new Visualizer(TICK_SIZE);\n  }\n\n  setPlayerRef = c => {\n    this.player = c;\n\n    if (this.player) {\n      this._setDimensions();\n    }\n  };\n\n  _pack() {\n    return {\n      src: this.props.src,\n      volume: this.state.volume,\n      muted: this.state.muted,\n      currentTime: this.audio.currentTime,\n      poster: this.props.poster,\n      backgroundColor: this.props.backgroundColor,\n      foregroundColor: this.props.foregroundColor,\n      accentColor: this.props.accentColor,\n      sensitive: this.props.sensitive,\n      visible: this.props.visible,\n    };\n  }\n\n  _setDimensions () {\n    const width  = this.player.offsetWidth;\n    const height = this.props.fullscreen ? this.player.offsetHeight : (width / (16/9));\n\n    if (this.props.cacheWidth) {\n      this.props.cacheWidth(width);\n    }\n\n    this.setState({ width, height });\n  }\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  setAudioRef = c => {\n    this.audio = c;\n\n    if (this.audio) {\n      this.audio.volume = 1;\n      this.audio.muted = false;\n    }\n  };\n\n  setCanvasRef = c => {\n    this.canvas = c;\n\n    this.visualizer.setCanvas(c);\n  };\n\n  componentDidMount () {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevProps.src !== this.props.src || this.state.width !== prevState.width || this.state.height !== prevState.height || prevProps.accentColor !== this.props.accentColor) {\n      this._clear();\n      this._draw();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n\n    if (!this.state.paused && this.audio && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('audio', this._pack());\n    }\n  }\n\n  togglePlay = () => {\n    if (!this.audioContext) {\n      this._initAudioContext();\n    }\n\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.audio.play());\n    } else {\n      this.setState({ paused: true }, () => this.audio.pause());\n    }\n  };\n\n  handleResize = debounce(() => {\n    if (this.player) {\n      this._setDimensions();\n    }\n  }, 250, {\n    trailing: true,\n  });\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n\n    this._renderCanvas();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n\n    if (this.audioContext) {\n      this.audioContext.suspend();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.audio.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.audio.buffered.end(lastTimeRange) / this.audio.duration * 100) });\n    }\n  };\n\n  toggleMute = () => {\n    const muted = !(this.state.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      if (this.gainNode) {\n        this.gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n      }\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.audio.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.audio.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.audio.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.audio.currentTime,\n      duration: this.audio.duration,\n    });\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        if (this.gainNode) {\n          this.gainNode.gain.value = this.state.muted ? 0 : x;\n        }\n      });\n    }\n  }, 15);\n\n  handleScroll = throttle(() => {\n    if (!this.canvas || !this.audio) {\n      return;\n    }\n\n    const { top, height } = this.canvas.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.audio.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('audio', this._pack());\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  handleLoadedData = () => {\n    const { autoPlay, currentTime } = this.props;\n\n    if (currentTime) {\n      this.audio.currentTime = currentTime;\n    }\n\n    if (autoPlay) {\n      this.togglePlay();\n    }\n  };\n\n  _initAudioContext () {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    const context      = new AudioContext();\n    const source       = context.createMediaElementSource(this.audio);\n    const gainNode     = context.createGain();\n\n    gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n\n    this.visualizer.setAudioContext(context, source);\n    source.connect(gainNode);\n    gainNode.connect(context.destination);\n\n    this.audioContext = context;\n    this.gainNode = gainNode;\n  }\n\n  handleDownload = () => {\n    fetch(this.props.src).then(res => res.blob()).then(blob => {\n      const element   = document.createElement('a');\n      const objectURL = URL.createObjectURL(blob);\n\n      element.setAttribute('href', objectURL);\n      element.setAttribute('download', fileNameFromURL(this.props.src));\n\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      URL.revokeObjectURL(objectURL);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  _renderCanvas () {\n    requestAnimationFrame(() => {\n      if (!this.audio) return;\n\n      this.handleTimeUpdate();\n      this._clear();\n      this._draw();\n\n      if (!this.state.paused) {\n        this._renderCanvas();\n      }\n    });\n  }\n\n  _clear() {\n    this.visualizer.clear(this.state.width, this.state.height);\n  }\n\n  _draw() {\n    this.visualizer.draw(this._getCX(), this._getCY(), this._getAccentColor(), this._getRadius(), this._getScaleCoefficient());\n  }\n\n  _getRadius () {\n    return parseInt((this.state.height || this.props.height) / 2 - PADDING * this._getScaleCoefficient());\n  }\n\n  _getScaleCoefficient () {\n    return (this.state.height || this.props.height) / 982;\n  }\n\n  _getCX() {\n    return Math.floor(this.state.width / 2);\n  }\n\n  _getCY() {\n    return Math.floor((this.state.height || this.props.height) / 2);\n  }\n\n  _getAccentColor () {\n    return this.props.accentColor || '#ffffff';\n  }\n\n  _getBackgroundColor () {\n    return this.props.backgroundColor || '#000000';\n  }\n\n  _getForegroundColor () {\n    return this.props.foregroundColor || '#ffffff';\n  }\n\n  seekBy (time) {\n    const currentTime = this.audio.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleAudioKeyDown = e => {\n    // On the audio element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    }\n  };\n\n  render () {\n    const { src, intl, alt, lang, editable, autoPlay, sensitive, blurhash } = this.props;\n    const { paused, volume, currentTime, duration, buffer, dragging, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div className={classNames('audio-player', { editable, inactive: !revealed })} ref={this.setPlayerRef} style={{ backgroundColor: this._getBackgroundColor(), color: this._getForegroundColor(), aspectRatio: '16 / 9' }} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} tabIndex={0} onKeyDown={this.handleKeyDown}>\n\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <audio\n          src={src}\n          ref={this.setAudioRef}\n          preload={autoPlay ? 'auto' : 'none'}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onProgress={this.handleProgress}\n          onLoadedData={this.handleLoadedData}\n          crossOrigin='anonymous'\n        />}\n\n        <canvas\n          role='button'\n          tabIndex={0}\n          className='audio-player__canvas'\n          width={this.state.width}\n          height={this.state.height}\n          style={{ width: '100%', position: 'absolute', top: 0, left: 0 }}\n          ref={this.setCanvasRef}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleAudioKeyDown}\n          title={alt}\n          aria-label={alt}\n          lang={lang}\n        />\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        {(revealed || editable) && <img\n          src={this.props.poster}\n          alt=''\n          style={{\n            position: 'absolute',\n            left: '50%',\n            top: '50%',\n            height: `calc(${(100 - 2 * 100 * PADDING / 982)}% - ${TICK_SIZE * 2}px)`,\n            aspectRatio: '1',\n            transform: 'translate(-50%, -50%)',\n            borderRadius: '50%',\n            pointerEvents: 'none',\n          }}\n        />}\n\n        <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n          <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n          <div className='video-player__seek__progress' style={{ width: `${progress}%`, backgroundColor: this._getAccentColor() }} />\n\n          <span\n            className={classNames('video-player__seek__handle', { active: dragging })}\n            tabIndex={0}\n            style={{ left: `${progress}%`, backgroundColor: this._getAccentColor() }}\n            onKeyDown={this.handleAudioKeyDown}\n          />\n        </div>\n\n        <div className='video-player__controls active'>\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay}><Icon id={paused ? 'play' : 'pause'} icon={paused ? PlayArrowIcon : PauseIcon} /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} icon={muted ? VolumeOffIcon : VolumeUpIcon} /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} ref={this.setVolumeRef} onMouseDown={this.handleVolumeMouseDown}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }} />\n\n                <span\n                  className='video-player__volume__handle'\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }}\n                />\n              </div>\n\n              <span className='video-player__time'>\n                <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                <span className='video-player__time-sep'>/</span>\n                <span className='video-player__time-total'>{formatTime(Math.floor(this.state.duration || this.props.duration))}</span>\n              </span>\n            </div>\n\n            <div className='video-player__buttons right'>\n              {!editable && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' icon={VisibilityOffIcon} /></button>}\n              <a title={intl.formatMessage(messages.download)} aria-label={intl.formatMessage(messages.download)} className='video-player__download__icon player-button' href={this.props.src} download>\n                <Icon id={'download'} icon={DownloadIcon} />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Audio);\n","/*\nCopyright (c) 2020 by Alex Permyakov (https://codepen.io/alexdevp/pen/RNELPV)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nconst hex2rgba = (hex, alpha = 1) => {\n  const [r, g, b] = hex.match(/\\w\\w/g).map(x => parseInt(x, 16));\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport default class Visualizer {\n\n  constructor (tickSize) {\n    this.tickSize = tickSize;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n    if (canvas) {\n      this.context = canvas.getContext('2d');\n    }\n  }\n\n  setAudioContext(context, source) {\n    const analyser = context.createAnalyser();\n\n    analyser.smoothingTimeConstant = 0.6;\n    analyser.fftSize = 2048;\n\n    source.connect(analyser);\n\n    this.analyser = analyser;\n  }\n\n  getTickPoints (count) {\n    const coords = [];\n\n    for(let i = 0; i < count; i++) {\n      const rad = Math.PI * 2 * i / count;\n      coords.push({ x: Math.cos(rad), y: -Math.sin(rad) });\n    }\n\n    return coords;\n  }\n\n  drawTick (cx, cy, mainColor, x1, y1, x2, y2) {\n    const dx1 = Math.ceil(cx + x1);\n    const dy1 = Math.ceil(cy + y1);\n    const dx2 = Math.ceil(cx + x2);\n    const dy2 = Math.ceil(cy + y2);\n\n    const gradient = this.context.createLinearGradient(dx1, dy1, dx2, dy2);\n\n    const lastColor = hex2rgba(mainColor, 0);\n\n    gradient.addColorStop(0, mainColor);\n    gradient.addColorStop(0.6, mainColor);\n    gradient.addColorStop(1, lastColor);\n\n    this.context.beginPath();\n    this.context.strokeStyle = gradient;\n    this.context.lineWidth = 2;\n    this.context.moveTo(dx1, dy1);\n    this.context.lineTo(dx2, dy2);\n    this.context.stroke();\n  }\n\n  getTicks (count, size, radius, scaleCoefficient) {\n    const ticks = this.getTickPoints(count);\n    const lesser = 200;\n    const m = [];\n    const bufferLength = this.analyser ? this.analyser.frequencyBinCount : 0;\n    const frequencyData = new Uint8Array(bufferLength);\n    const allScales = [];\n\n    if (this.analyser) {\n      this.analyser.getByteFrequencyData(frequencyData);\n    }\n\n    ticks.forEach((tick, i) => {\n      const coef = 1 - i / (ticks.length * 2.5);\n\n      let delta = ((frequencyData[i] || 0) - lesser * coef) * scaleCoefficient;\n\n      if (delta < 0) {\n        delta = 0;\n      }\n\n      const k = radius / (radius - (size + delta));\n\n      const x1 = tick.x * (radius - size);\n      const y1 = tick.y * (radius - size);\n      const x2 = x1 * k;\n      const y2 = y1 * k;\n\n      m.push({ x1, y1, x2, y2 });\n\n      if (i < 20) {\n        let scale = delta / (200 * scaleCoefficient);\n        scale = scale < 1 ? 1 : scale;\n        allScales.push(scale);\n      }\n    });\n\n    const scale = allScales.reduce((pv, cv) => pv + cv, 0) / allScales.length;\n\n    return m.map(({ x1, y1, x2, y2 }) => ({\n      x1: x1,\n      y1: y1,\n      x2: x2 * scale,\n      y2: y2 * scale,\n    }));\n  }\n\n  clear (width, height) {\n    this.context.clearRect(0, 0, width, height);\n  }\n\n  draw (cx, cy, color, radius, coefficient) {\n    this.context.save();\n\n    const ticks = this.getTicks(parseInt(360 * coefficient), this.tickSize, radius, coefficient);\n\n    ticks.forEach(tick => {\n      this.drawTick(cx, cy, color, tick.x1, tick.y1, tick.x2, tick.y2);\n    });\n\n    this.context.restore();\n  }\n\n}\n","import PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\n\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\n\nimport classNames from 'classnames';\n\nimport { is } from 'immutable';\n\nimport { throttle, debounce } from 'lodash';\n\nimport DownloadIcon from '@/material-icons/400-24px/download.svg?react';\nimport PauseIcon from '@/material-icons/400-24px/pause.svg?react';\nimport PlayArrowIcon from '@/material-icons/400-24px/play_arrow-fill.svg?react';\nimport VisibilityOffIcon from '@/material-icons/400-24px/visibility_off.svg?react';\nimport VolumeOffIcon from '@/material-icons/400-24px/volume_off-fill.svg?react';\nimport VolumeUpIcon from '@/material-icons/400-24px/volume_up-fill.svg?react';\nimport { Icon }  from 'flavours/glitch/components/icon';\nimport { formatTime, getPointerPosition, fileNameFromURL } from 'flavours/glitch/features/video';\n\nimport { Blurhash } from '../../components/blurhash';\nimport { displayMedia, useBlurhash } from '../../initial_state';\n\nimport Visualizer from './visualizer';\n\nconst messages = defineMessages({\n  play: { id: 'video.play', defaultMessage: 'Play' },\n  pause: { id: 'video.pause', defaultMessage: 'Pause' },\n  mute: { id: 'video.mute', defaultMessage: 'Mute sound' },\n  unmute: { id: 'video.unmute', defaultMessage: 'Unmute sound' },\n  download: { id: 'video.download', defaultMessage: 'Download file' },\n  hide: { id: 'audio.hide', defaultMessage: 'Hide audio' },\n});\n\nconst TICK_SIZE = 10;\nconst PADDING   = 180;\n\nclass Audio extends PureComponent {\n\n  static propTypes = {\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n    lang: PropTypes.string,\n    poster: PropTypes.string,\n    duration: PropTypes.number,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    sensitive: PropTypes.bool,\n    editable: PropTypes.bool,\n    fullscreen: PropTypes.bool,\n    intl: PropTypes.object.isRequired,\n    blurhash: PropTypes.string,\n    cacheWidth: PropTypes.func,\n    visible: PropTypes.bool,\n    onToggleVisibility: PropTypes.func,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    accentColor: PropTypes.string,\n    currentTime: PropTypes.number,\n    autoPlay: PropTypes.bool,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n    deployPictureInPicture: PropTypes.func,\n  };\n\n  state = {\n    width: this.props.width,\n    currentTime: 0,\n    buffer: 0,\n    duration: null,\n    paused: true,\n    muted: false,\n    volume: 1,\n    dragging: false,\n    revealed: this.props.visible !== undefined ? this.props.visible : (displayMedia !== 'hide_all' && !this.props.sensitive || displayMedia === 'show_all'),\n  };\n\n  constructor (props) {\n    super(props);\n    this.visualizer = new Visualizer(TICK_SIZE);\n  }\n\n  setPlayerRef = c => {\n    this.player = c;\n\n    if (this.player) {\n      this._setDimensions();\n    }\n  };\n\n  _pack() {\n    return {\n      src: this.props.src,\n      volume: this.state.volume,\n      muted: this.state.muted,\n      currentTime: this.audio.currentTime,\n      poster: this.props.poster,\n      backgroundColor: this.props.backgroundColor,\n      foregroundColor: this.props.foregroundColor,\n      accentColor: this.props.accentColor,\n      sensitive: this.props.sensitive,\n      visible: this.props.visible,\n    };\n  }\n\n  _setDimensions () {\n    const width  = this.player.offsetWidth;\n    const height = this.props.fullscreen ? this.player.offsetHeight : (width / (16/9));\n\n    if (width && width !== this.state.containerWidth) {\n      if (this.props.cacheWidth) {\n        this.props.cacheWidth(width);\n      }\n\n      this.setState({ width, height });\n    }\n  }\n\n  setSeekRef = c => {\n    this.seek = c;\n  };\n\n  setVolumeRef = c => {\n    this.volume = c;\n  };\n\n  setAudioRef = c => {\n    this.audio = c;\n\n    if (this.audio) {\n      this.audio.volume = 1;\n      this.audio.muted = false;\n    }\n  };\n\n  setCanvasRef = c => {\n    this.canvas = c;\n\n    this.visualizer.setCanvas(c);\n  };\n\n  componentDidMount () {\n    window.addEventListener('scroll', this.handleScroll);\n    window.addEventListener('resize', this.handleResize, { passive: true });\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.player) {\n      this._setDimensions();\n    }\n\n    if (prevProps.src !== this.props.src || this.state.width !== prevState.width || this.state.height !== prevState.height || prevProps.accentColor !== this.props.accentColor) {\n      this._clear();\n      this._draw();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps (nextProps) {\n    if (!is(nextProps.visible, this.props.visible) && nextProps.visible !== undefined) {\n      this.setState({ revealed: nextProps.visible });\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n\n    if (!this.state.paused && this.audio && this.props.deployPictureInPicture) {\n      this.props.deployPictureInPicture('audio', this._pack());\n    }\n  }\n\n  togglePlay = () => {\n    if (!this.audioContext) {\n      this._initAudioContext();\n    }\n\n    if (this.state.paused) {\n      this.setState({ paused: false }, () => this.audio.play());\n    } else {\n      this.setState({ paused: true }, () => this.audio.pause());\n    }\n  };\n\n  handleResize = debounce(() => {\n    if (this.player) {\n      this._setDimensions();\n    }\n  }, 250, {\n    trailing: true,\n  });\n\n  handlePlay = () => {\n    this.setState({ paused: false });\n\n    if (this.audioContext && this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n\n    this._renderCanvas();\n  };\n\n  handlePause = () => {\n    this.setState({ paused: true });\n\n    if (this.audioContext) {\n      this.audioContext.suspend();\n    }\n  };\n\n  handleProgress = () => {\n    const lastTimeRange = this.audio.buffered.length - 1;\n\n    if (lastTimeRange > -1) {\n      this.setState({ buffer: Math.ceil(this.audio.buffered.end(lastTimeRange) / this.audio.duration * 100) });\n    }\n  };\n\n  toggleMute = () => {\n    const muted = !(this.state.muted || this.state.volume === 0);\n\n    this.setState((state) => ({ muted, volume: Math.max(state.volume || 0.5, 0.05) }), () => {\n      if (this.gainNode) {\n        this.gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n      }\n    });\n  };\n\n  toggleReveal = () => {\n    if (this.props.onToggleVisibility) {\n      this.props.onToggleVisibility();\n    } else {\n      this.setState({ revealed: !this.state.revealed });\n    }\n  };\n\n  handleVolumeMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.addEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.addEventListener('touchend', this.handleVolumeMouseUp, true);\n\n    this.handleMouseVolSlide(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleVolumeMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseVolSlide, true);\n    document.removeEventListener('mouseup', this.handleVolumeMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseVolSlide, true);\n    document.removeEventListener('touchend', this.handleVolumeMouseUp, true);\n  };\n\n  handleMouseDown = e => {\n    document.addEventListener('mousemove', this.handleMouseMove, true);\n    document.addEventListener('mouseup', this.handleMouseUp, true);\n    document.addEventListener('touchmove', this.handleMouseMove, true);\n    document.addEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: true });\n    this.audio.pause();\n    this.handleMouseMove(e);\n\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  handleMouseUp = () => {\n    document.removeEventListener('mousemove', this.handleMouseMove, true);\n    document.removeEventListener('mouseup', this.handleMouseUp, true);\n    document.removeEventListener('touchmove', this.handleMouseMove, true);\n    document.removeEventListener('touchend', this.handleMouseUp, true);\n\n    this.setState({ dragging: false });\n    this.audio.play();\n  };\n\n  handleMouseMove = throttle(e => {\n    const { x } = getPointerPosition(this.seek, e);\n    const currentTime = this.audio.duration * x;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }, 15);\n\n  handleTimeUpdate = () => {\n    this.setState({\n      currentTime: this.audio.currentTime,\n      duration: this.audio.duration,\n    });\n  };\n\n  handleMouseVolSlide = throttle(e => {\n    const { x } = getPointerPosition(this.volume, e);\n\n    if(!isNaN(x)) {\n      this.setState((state) => ({ volume: x, muted: state.muted && x === 0 }), () => {\n        if (this.gainNode) {\n          this.gainNode.gain.value = this.state.muted ? 0 : x;\n        }\n      });\n    }\n  }, 15);\n\n  handleScroll = throttle(() => {\n    if (!this.canvas || !this.audio) {\n      return;\n    }\n\n    const { top, height } = this.canvas.getBoundingClientRect();\n    const inView = (top <= (window.innerHeight || document.documentElement.clientHeight)) && (top + height >= 0);\n\n    if (!this.state.paused && !inView) {\n      this.audio.pause();\n\n      if (this.props.deployPictureInPicture) {\n        this.props.deployPictureInPicture('audio', this._pack());\n      }\n\n      this.setState({ paused: true });\n    }\n  }, 150, { trailing: true });\n\n  handleMouseEnter = () => {\n    this.setState({ hovered: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ hovered: false });\n  };\n\n  handleLoadedData = () => {\n    const { autoPlay, currentTime } = this.props;\n\n    if (currentTime) {\n      this.audio.currentTime = currentTime;\n    }\n\n    if (autoPlay) {\n      this.togglePlay();\n    }\n  };\n\n  _initAudioContext () {\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    const context      = new AudioContext();\n    const source       = context.createMediaElementSource(this.audio);\n    const gainNode     = context.createGain();\n\n    gainNode.gain.value = this.state.muted ? 0 : this.state.volume;\n\n    this.visualizer.setAudioContext(context, source);\n    source.connect(gainNode);\n    gainNode.connect(context.destination);\n\n    this.audioContext = context;\n    this.gainNode = gainNode;\n  }\n\n  handleDownload = () => {\n    fetch(this.props.src).then(res => res.blob()).then(blob => {\n      const element   = document.createElement('a');\n      const objectURL = URL.createObjectURL(blob);\n\n      element.setAttribute('href', objectURL);\n      element.setAttribute('download', fileNameFromURL(this.props.src));\n\n      document.body.appendChild(element);\n      element.click();\n      document.body.removeChild(element);\n\n      URL.revokeObjectURL(objectURL);\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  _renderCanvas () {\n    requestAnimationFrame(() => {\n      if (!this.audio) return;\n\n      this.handleTimeUpdate();\n      this._clear();\n      this._draw();\n\n      if (!this.state.paused) {\n        this._renderCanvas();\n      }\n    });\n  }\n\n  _clear() {\n    this.visualizer.clear(this.state.width, this.state.height);\n  }\n\n  _draw() {\n    this.visualizer.draw(this._getCX(), this._getCY(), this._getAccentColor(), this._getRadius(), this._getScaleCoefficient());\n  }\n\n  _getRadius () {\n    return parseInt((this.state.height || this.props.height) / 2 - PADDING * this._getScaleCoefficient());\n  }\n\n  _getScaleCoefficient () {\n    return (this.state.height || this.props.height) / 982;\n  }\n\n  _getCX() {\n    return Math.floor(this.state.width / 2);\n  }\n\n  _getCY() {\n    return Math.floor((this.state.height || this.props.height) / 2);\n  }\n\n  _getAccentColor () {\n    return this.props.accentColor || '#ffffff';\n  }\n\n  _getBackgroundColor () {\n    return this.props.backgroundColor || '#000000';\n  }\n\n  _getForegroundColor () {\n    return this.props.foregroundColor || '#ffffff';\n  }\n\n  seekBy (time) {\n    const currentTime = this.audio.currentTime + time;\n\n    if (!isNaN(currentTime)) {\n      this.setState({ currentTime }, () => {\n        this.audio.currentTime = currentTime;\n      });\n    }\n  }\n\n  handleAudioKeyDown = e => {\n    // On the audio element or the seek bar, we can safely use the space bar\n    // for playback control because there are no buttons to press\n\n    if (e.key === ' ') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n    }\n  };\n\n  handleKeyDown = e => {\n    switch(e.key) {\n    case 'k':\n      e.preventDefault();\n      e.stopPropagation();\n      this.togglePlay();\n      break;\n    case 'm':\n      e.preventDefault();\n      e.stopPropagation();\n      this.toggleMute();\n      break;\n    case 'j':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(-10);\n      break;\n    case 'l':\n      e.preventDefault();\n      e.stopPropagation();\n      this.seekBy(10);\n      break;\n    }\n  };\n\n  render () {\n    const { src, intl, alt, lang, editable, autoPlay, sensitive, blurhash } = this.props;\n    const { paused, volume, currentTime, duration, buffer, dragging, revealed } = this.state;\n    const progress = Math.min((currentTime / duration) * 100, 100);\n    const muted = this.state.muted || volume === 0;\n\n    let warning;\n\n    if (sensitive) {\n      warning = <FormattedMessage id='status.sensitive_warning' defaultMessage='Sensitive content' />;\n    } else {\n      warning = <FormattedMessage id='status.media_hidden' defaultMessage='Media hidden' />;\n    }\n\n    return (\n      <div className={classNames('audio-player', { editable, inactive: !revealed })} ref={this.setPlayerRef} style={{ backgroundColor: this._getBackgroundColor(), color: this._getForegroundColor(), aspectRatio: '16 / 9' }} onMouseEnter={this.handleMouseEnter} onMouseLeave={this.handleMouseLeave} tabIndex={0} onKeyDown={this.handleKeyDown}>\n\n        <Blurhash\n          hash={blurhash}\n          className={classNames('media-gallery__preview', {\n            'media-gallery__preview--hidden': revealed,\n          })}\n          dummy={!useBlurhash}\n        />\n\n        {(revealed || editable) && <audio\n          src={src}\n          ref={this.setAudioRef}\n          preload={autoPlay ? 'auto' : 'none'}\n          onPlay={this.handlePlay}\n          onPause={this.handlePause}\n          onProgress={this.handleProgress}\n          onLoadedData={this.handleLoadedData}\n          crossOrigin='anonymous'\n        />}\n\n        <canvas\n          role='button'\n          tabIndex={0}\n          className='audio-player__canvas'\n          width={this.state.width}\n          height={this.state.height}\n          style={{ width: '100%', position: 'absolute', top: 0, left: 0 }}\n          ref={this.setCanvasRef}\n          onClick={this.togglePlay}\n          onKeyDown={this.handleAudioKeyDown}\n          title={alt}\n          aria-label={alt}\n          lang={lang}\n        />\n\n        <div className={classNames('spoiler-button', { 'spoiler-button--hidden': revealed || editable })}>\n          <button type='button' className='spoiler-button__overlay' onClick={this.toggleReveal}>\n            <span className='spoiler-button__overlay__label'>\n              {warning}\n              <span className='spoiler-button__overlay__action'><FormattedMessage id='status.media.show' defaultMessage='Click to show' /></span>\n            </span>\n          </button>\n        </div>\n\n        {(revealed || editable) && <img\n          src={this.props.poster}\n          alt=''\n          style={{\n            position: 'absolute',\n            left: '50%',\n            top: '50%',\n            height: `calc(${(100 - 2 * 100 * PADDING / 982)}% - ${TICK_SIZE * 2}px)`,\n            aspectRatio: '1',\n            transform: 'translate(-50%, -50%)',\n            borderRadius: '50%',\n            pointerEvents: 'none',\n          }}\n        />}\n\n        <div className='video-player__seek' onMouseDown={this.handleMouseDown} ref={this.setSeekRef}>\n          <div className='video-player__seek__buffer' style={{ width: `${buffer}%` }} />\n          <div className='video-player__seek__progress' style={{ width: `${progress}%`, backgroundColor: this._getAccentColor() }} />\n\n          <span\n            className={classNames('video-player__seek__handle', { active: dragging })}\n            tabIndex={0}\n            style={{ left: `${progress}%`, backgroundColor: this._getAccentColor() }}\n            onKeyDown={this.handleAudioKeyDown}\n          />\n        </div>\n\n        <div className='video-player__controls active'>\n          <div className='video-player__buttons-bar'>\n            <div className='video-player__buttons left'>\n              <button type='button' title={intl.formatMessage(paused ? messages.play : messages.pause)} aria-label={intl.formatMessage(paused ? messages.play : messages.pause)} className='player-button' onClick={this.togglePlay}><Icon id={paused ? 'play' : 'pause'} icon={paused ? PlayArrowIcon : PauseIcon} /></button>\n              <button type='button' title={intl.formatMessage(muted ? messages.unmute : messages.mute)} aria-label={intl.formatMessage(muted ? messages.unmute : messages.mute)} className='player-button' onClick={this.toggleMute}><Icon id={muted ? 'volume-off' : 'volume-up'} icon={muted ? VolumeOffIcon : VolumeUpIcon} /></button>\n\n              <div className={classNames('video-player__volume', { active: this.state.hovered })} ref={this.setVolumeRef} onMouseDown={this.handleVolumeMouseDown}>\n                <div className='video-player__volume__current' style={{ width: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }} />\n\n                <span\n                  className='video-player__volume__handle'\n                  tabIndex={0}\n                  style={{ left: `${muted ? 0 : volume * 100}%`, backgroundColor: this._getAccentColor() }}\n                />\n              </div>\n\n              <span className='video-player__time'>\n                <span className='video-player__time-current'>{formatTime(Math.floor(currentTime))}</span>\n                <span className='video-player__time-sep'>/</span>\n                <span className='video-player__time-total'>{formatTime(Math.floor(this.state.duration || this.props.duration))}</span>\n              </span>\n            </div>\n\n            <div className='video-player__buttons right'>\n              {!editable && <button type='button' title={intl.formatMessage(messages.hide)} aria-label={intl.formatMessage(messages.hide)} className='player-button' onClick={this.toggleReveal}><Icon id='eye-slash' icon={VisibilityOffIcon} /></button>}\n              <a title={intl.formatMessage(messages.download)} aria-label={intl.formatMessage(messages.download)} className='video-player__download__icon player-button' href={this.props.src} download>\n                <Icon id={'download'} icon={DownloadIcon} />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n\nexport default injectIntl(Audio);\n","import { saveSettings } from './settings';\n\nexport const EMOJI_USE = 'EMOJI_USE';\n\nexport function useEmoji(emoji) {\n  return dispatch => {\n    dispatch({\n      type: EMOJI_USE,\n      emoji,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { saveSettings } from './settings';\n\nexport const EMOJI_USE = 'EMOJI_USE';\n\nexport function useEmoji(emoji) {\n  return dispatch => {\n    dispatch({\n      type: EMOJI_USE,\n      emoji,\n    });\n\n    dispatch(saveSettings());\n  };\n}\n","import { expandSpoilers, disableSwiping } from 'flavours/glitch/initial_state';\n\nimport { openModal } from './modal';\n\nexport const LOCAL_SETTING_CHANGE = 'LOCAL_SETTING_CHANGE';\nexport const LOCAL_SETTING_DELETE = 'LOCAL_SETTING_DELETE';\n\nexport function checkDeprecatedLocalSettings() {\n  return (dispatch, getState) => {\n    const local_auto_unfold = getState().getIn(['local_settings', 'content_warnings', 'auto_unfold']);\n    const local_swipe_to_change_columns = getState().getIn(['local_settings', 'swipe_to_change_columns']);\n    let changed_settings = [];\n\n    if (local_auto_unfold !== null && local_auto_unfold !== undefined) {\n      if (local_auto_unfold === expandSpoilers) {\n        dispatch(deleteLocalSetting(['content_warnings', 'auto_unfold']));\n      } else {\n        changed_settings.push('user_setting_expand_spoilers');\n      }\n    }\n\n    if (local_swipe_to_change_columns !== null && local_swipe_to_change_columns !== undefined) {\n      if (local_swipe_to_change_columns === !disableSwiping) {\n        dispatch(deleteLocalSetting(['swipe_to_change_columns']));\n      } else {\n        changed_settings.push('user_setting_disable_swiping');\n      }\n    }\n\n    if (changed_settings.length > 0) {\n      dispatch(openModal({\n        modalType: 'DEPRECATED_SETTINGS',\n        modalProps: {\n          settings: changed_settings,\n          onConfirm: () => dispatch(clearDeprecatedLocalSettings()),\n        },\n      }));\n    }\n  };\n}\n\nexport function clearDeprecatedLocalSettings() {\n  return (dispatch) => {\n    dispatch(deleteLocalSetting(['content_warnings', 'auto_unfold']));\n    dispatch(deleteLocalSetting(['swipe_to_change_columns']));\n  };\n}\n\nexport function changeLocalSetting(key, value) {\n  return dispatch => {\n    dispatch({\n      type: LOCAL_SETTING_CHANGE,\n      key,\n      value,\n    });\n\n    dispatch(saveLocalSettings());\n  };\n}\n\nexport function deleteLocalSetting(key) {\n  return dispatch => {\n    dispatch({\n      type: LOCAL_SETTING_DELETE,\n      key,\n    });\n\n    dispatch(saveLocalSettings());\n  };\n}\n\n//  __TODO :__\n//  Right now `saveLocalSettings()` doesn't keep track of which user\n//  is currently signed in, but it might be better to give each user\n//  their *own* local settings.\nexport function saveLocalSettings() {\n  return (_, getState) => {\n    const localSettings = getState().get('local_settings').toJS();\n    localStorage.setItem('mastodon-settings', JSON.stringify(localSettings));\n  };\n}\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const openDropdownMenu = createAction<{\n  id: string;\n  keyboard: boolean;\n  scrollKey: string;\n}>('dropdownMenu/open');\n\nexport const closeDropdownMenu = createAction<{ id: string }>(\n  'dropdownMenu/close',\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nexport const openDropdownMenu = createAction<{\n  id: string;\n  keyboard: boolean;\n  scrollKey: string;\n}>('dropdownMenu/open');\n\nexport const closeDropdownMenu = createAction<{ id: string }>(\n  'dropdownMenu/close',\n);\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  importAccounts,\n  revealAccount,\n} from 'mastodon/actions/accounts_typed';\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport { me } from 'mastodon/initial_state';\nimport type { Account } from 'mastodon/models/account';\nimport { createAccountFromServerJSON } from 'mastodon/models/account';\n\nconst initialState = ImmutableMap<string, Account>();\n\nconst normalizeAccount = (\n  state: typeof initialState,\n  account: ApiAccountJSON,\n) => {\n  return state.set(\n    account.id,\n    createAccountFromServerJSON(account).set(\n      'hidden',\n      state.get(account.id)?.hidden === false\n        ? false\n        : account.limited || false,\n    ),\n  );\n};\n\nconst normalizeAccounts = (\n  state: typeof initialState,\n  accounts: ApiAccountJSON[],\n) => {\n  accounts.forEach((account) => {\n    state = normalizeAccount(state, account);\n  });\n\n  return state;\n};\n\nfunction getCurrentUser() {\n  if (!me)\n    throw new Error(\n      'No current user (me) defined when calling `accountsReducer`',\n    );\n\n  return me;\n}\n\nexport const accountsReducer: Reducer<typeof initialState> = (\n  state = initialState,\n  action,\n) => {\n  if (revealAccount.match(action))\n    return state.setIn([action.payload.id, 'hidden'], false);\n  else if (importAccounts.match(action))\n    return normalizeAccounts(state, action.payload.accounts);\n  else if (followAccountSuccess.match(action)) {\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => n + 1),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => n + 1),\n      );\n  } else if (unfollowAccountSuccess.match(action))\n    return state\n      .update(action.payload.relationship.id, (account) =>\n        account?.update('followers_count', (n) => Math.max(0, n - 1)),\n      )\n      .update(getCurrentUser(), (account) =>\n        account?.update('following_count', (n) => Math.max(0, n - 1)),\n      );\n  else return state;\n};\n","import { List as ImmutableList } from 'immutable';\n\nimport {\n  ALERT_SHOW,\n  ALERT_DISMISS,\n  ALERT_CLEAR,\n} from '../actions/alerts';\n\nconst initialState = ImmutableList([]);\n\nlet id = 0;\n\nconst addAlert = (state, alert) =>\n  state.push({\n    key: id++,\n    ...alert,\n  });\n\nexport default function alerts(state = initialState, action) {\n  switch(action.type) {\n  case ALERT_SHOW:\n    return addAlert(state, action.alert);\n  case ALERT_DISMISS:\n    return state.filterNot(item => item.key === action.alert.key);\n  case ALERT_CLEAR:\n    return state.clear();\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  ANNOUNCEMENTS_FETCH_REQUEST,\n  ANNOUNCEMENTS_FETCH_SUCCESS,\n  ANNOUNCEMENTS_FETCH_FAIL,\n  ANNOUNCEMENTS_UPDATE,\n  ANNOUNCEMENTS_REACTION_UPDATE,\n  ANNOUNCEMENTS_REACTION_ADD_REQUEST,\n  ANNOUNCEMENTS_REACTION_ADD_FAIL,\n  ANNOUNCEMENTS_REACTION_REMOVE_REQUEST,\n  ANNOUNCEMENTS_REACTION_REMOVE_FAIL,\n  ANNOUNCEMENTS_TOGGLE_SHOW,\n  ANNOUNCEMENTS_DELETE,\n  ANNOUNCEMENTS_DISMISS_SUCCESS,\n} from '../actions/announcements';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  show: false,\n});\n\nconst updateReaction = (state, id, name, updater) => state.update('items', list => list.map(announcement => {\n  if (announcement.get('id') === id) {\n    return announcement.update('reactions', reactions => {\n      const idx = reactions.findIndex(reaction => reaction.get('name') === name);\n\n      if (idx > -1) {\n        return reactions.update(idx, reaction => updater(reaction));\n      }\n\n      return reactions.push(updater(fromJS({ name, count: 0 })));\n    });\n  }\n\n  return announcement;\n}));\n\nconst updateReactionCount = (state, reaction) => updateReaction(state, reaction.announcement_id, reaction.name, x => x.set('count', reaction.count));\n\nconst addReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', true).update('count', y => y + 1));\n\nconst removeReaction = (state, id, name) => updateReaction(state, id, name, x => x.set('me', false).update('count', y => y - 1));\n\nconst sortAnnouncements = list => list.sortBy(x => x.get('starts_at') || x.get('published_at'));\n\nconst updateAnnouncement = (state, announcement) => {\n  const idx = state.get('items').findIndex(x => x.get('id') === announcement.get('id'));\n\n  if (idx > -1) {\n    // Deep merge is used because announcements from the streaming API do not contain\n    // personalized data about which reactions have been selected by the given user,\n    // and that is information we want to preserve\n    return state.update('items', list => sortAnnouncements(list.update(idx, x => x.mergeDeep(announcement))));\n  }\n\n  return state.update('items', list => sortAnnouncements(list.unshift(announcement)));\n};\n\nexport default function announcementsReducer(state = initialState, action) {\n  switch(action.type) {\n  case ANNOUNCEMENTS_TOGGLE_SHOW:\n    return state.withMutations(map => {\n      map.set('show', !map.get('show'));\n    });\n  case ANNOUNCEMENTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case ANNOUNCEMENTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      const items = fromJS(action.announcements);\n\n      map.set('items', items);\n      map.set('isLoading', false);\n    });\n  case ANNOUNCEMENTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case ANNOUNCEMENTS_UPDATE:\n    return updateAnnouncement(state, fromJS(action.announcement));\n  case ANNOUNCEMENTS_REACTION_UPDATE:\n    return updateReactionCount(state, action.reaction);\n  case ANNOUNCEMENTS_REACTION_ADD_REQUEST:\n  case ANNOUNCEMENTS_REACTION_REMOVE_FAIL:\n    return addReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_REACTION_REMOVE_REQUEST:\n  case ANNOUNCEMENTS_REACTION_ADD_FAIL:\n    return removeReaction(state, action.id, action.name);\n  case ANNOUNCEMENTS_DISMISS_SUCCESS:\n    return updateAnnouncement(state, fromJS({ 'id': action.id, 'read': true }));\n  case ANNOUNCEMENTS_DELETE:\n    return state.update('items', list => {\n      const idx = list.findIndex(x => x.get('id') === action.id);\n\n      if (idx > -1) {\n        return list.delete(idx);\n      }\n\n      return list;\n    });\n  default:\n    return state;\n  }\n}\n","export function uuid(a?: string): string {\n  return a\n    ? (\n        (a as unknown as number) ^\n        ((Math.random() * 16) >> ((a as unknown as number) / 4))\n      ).toString(16)\n    : // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n      ('' + 1e7 + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  COMPOSE_MOUNT,\n  COMPOSE_UNMOUNT,\n  COMPOSE_CHANGE,\n  COMPOSE_REPLY,\n  COMPOSE_REPLY_CANCEL,\n  COMPOSE_DIRECT,\n  COMPOSE_MENTION,\n  COMPOSE_SUBMIT_REQUEST,\n  COMPOSE_SUBMIT_SUCCESS,\n  COMPOSE_SUBMIT_FAIL,\n  COMPOSE_UPLOAD_REQUEST,\n  COMPOSE_UPLOAD_SUCCESS,\n  COMPOSE_UPLOAD_FAIL,\n  COMPOSE_UPLOAD_UNDO,\n  COMPOSE_UPLOAD_PROGRESS,\n  COMPOSE_UPLOAD_PROCESSING,\n  THUMBNAIL_UPLOAD_REQUEST,\n  THUMBNAIL_UPLOAD_SUCCESS,\n  THUMBNAIL_UPLOAD_FAIL,\n  THUMBNAIL_UPLOAD_PROGRESS,\n  COMPOSE_SUGGESTIONS_CLEAR,\n  COMPOSE_SUGGESTIONS_READY,\n  COMPOSE_SUGGESTION_SELECT,\n  COMPOSE_SUGGESTION_IGNORE,\n  COMPOSE_SUGGESTION_TAGS_UPDATE,\n  COMPOSE_TAG_HISTORY_UPDATE,\n  COMPOSE_SENSITIVITY_CHANGE,\n  COMPOSE_SPOILERNESS_CHANGE,\n  COMPOSE_SPOILER_TEXT_CHANGE,\n  COMPOSE_VISIBILITY_CHANGE,\n  COMPOSE_LANGUAGE_CHANGE,\n  COMPOSE_COMPOSING_CHANGE,\n  COMPOSE_EMOJI_INSERT,\n  COMPOSE_UPLOAD_CHANGE_REQUEST,\n  COMPOSE_UPLOAD_CHANGE_SUCCESS,\n  COMPOSE_UPLOAD_CHANGE_FAIL,\n  COMPOSE_RESET,\n  COMPOSE_POLL_ADD,\n  COMPOSE_POLL_REMOVE,\n  COMPOSE_POLL_OPTION_CHANGE,\n  COMPOSE_POLL_SETTINGS_CHANGE,\n  INIT_MEDIA_EDIT_MODAL,\n  COMPOSE_CHANGE_MEDIA_DESCRIPTION,\n  COMPOSE_CHANGE_MEDIA_FOCUS,\n  COMPOSE_CHANGE_MEDIA_ORDER,\n  COMPOSE_SET_STATUS,\n  COMPOSE_FOCUS,\n} from '../actions/compose';\nimport { REDRAFT } from '../actions/statuses';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { me } from '../initial_state';\nimport { unescapeHTML } from '../utils/html';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  mounted: 0,\n  sensitive: false,\n  spoiler: false,\n  spoiler_text: '',\n  privacy: null,\n  id: null,\n  text: '',\n  focusDate: null,\n  caretPosition: null,\n  preselectDate: null,\n  in_reply_to: null,\n  is_composing: false,\n  is_submitting: false,\n  is_changing_upload: false,\n  is_uploading: false,\n  progress: 0,\n  isUploadingThumbnail: false,\n  thumbnailProgress: 0,\n  media_attachments: ImmutableList(),\n  pending_media_attachments: 0,\n  poll: null,\n  suggestion_token: null,\n  suggestions: ImmutableList(),\n  default_privacy: 'public',\n  default_sensitive: false,\n  default_language: 'en',\n  resetFileKey: Math.floor((Math.random() * 0x10000)),\n  idempotencyKey: null,\n  tagHistory: ImmutableList(),\n  media_modal: ImmutableMap({\n    id: null,\n    description: '',\n    focusX: 0,\n    focusY: 0,\n    dirty: false,\n  }),\n});\n\nconst initialPoll = ImmutableMap({\n  options: ImmutableList(['', '']),\n  expires_in: 24 * 3600,\n  multiple: false,\n});\n\nfunction statusToTextMentions(state, status) {\n  let set = ImmutableOrderedSet([]);\n\n  if (status.getIn(['account', 'id']) !== me) {\n    set = set.add(`@${status.getIn(['account', 'acct'])} `);\n  }\n\n  return set.union(status.get('mentions').filterNot(mention => mention.get('id') === me).map(mention => `@${mention.get('acct')} `)).join('');\n}\n\nfunction clearAll(state) {\n  return state.withMutations(map => {\n    map.set('id', null);\n    map.set('text', '');\n    map.set('spoiler', false);\n    map.set('spoiler_text', '');\n    map.set('is_submitting', false);\n    map.set('is_changing_upload', false);\n    map.set('in_reply_to', null);\n    map.set('privacy', state.get('default_privacy'));\n    map.set('sensitive', state.get('default_sensitive'));\n    map.set('language', state.get('default_language'));\n    map.update('media_attachments', list => list.clear());\n    map.set('poll', null);\n    map.set('idempotencyKey', uuid());\n  });\n}\n\nfunction appendMedia(state, media, file) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    if (media.get('type') === 'image') {\n      media = media.set('file', file);\n    }\n    map.update('media_attachments', list => list.push(media.set('unattached', true)));\n    map.set('is_uploading', false);\n    map.set('is_processing', false);\n    map.set('resetFileKey', Math.floor((Math.random() * 0x10000)));\n    map.set('idempotencyKey', uuid());\n    map.update('pending_media_attachments', n => n - 1);\n\n    if (prevSize === 0 && (state.get('default_sensitive') || state.get('spoiler'))) {\n      map.set('sensitive', true);\n    }\n  });\n}\n\nfunction removeMedia(state, mediaId) {\n  const prevSize = state.get('media_attachments').size;\n\n  return state.withMutations(map => {\n    map.update('media_attachments', list => list.filterNot(item => item.get('id') === mediaId));\n    map.set('idempotencyKey', uuid());\n\n    if (prevSize === 1) {\n      map.set('sensitive', false);\n    }\n  });\n}\n\nconst insertSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position)}${completion} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    if (path.length === 1 && path[0] === 'text') {\n      map.set('focusDate', new Date());\n      map.set('caretPosition', position + completion.length + 1);\n    }\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst ignoreSuggestion = (state, position, token, completion, path) => {\n  return state.withMutations(map => {\n    map.updateIn(path, oldText => `${oldText.slice(0, position + token.length)} ${oldText.slice(position + token.length)}`);\n    map.set('suggestion_token', null);\n    map.set('suggestions', ImmutableList());\n    map.set('focusDate', new Date());\n    map.set('caretPosition', position + token.length + 1);\n    map.set('idempotencyKey', uuid());\n  });\n};\n\nconst sortHashtagsByUse = (state, tags) => {\n  const personalHistory = state.get('tagHistory').map(tag => tag.toLowerCase());\n\n  const tagsWithLowercase = tags.map(t => ({ ...t, lowerName: t.name.toLowerCase() }));\n  const sorted = tagsWithLowercase.sort((a, b) => {\n    const usedA = personalHistory.includes(a.lowerName);\n    const usedB = personalHistory.includes(b.lowerName);\n\n    if (usedA === usedB) {\n      return 0;\n    } else if (usedA && !usedB) {\n      return -1;\n    } else {\n      return 1;\n    }\n  });\n  sorted.forEach(tag => delete tag.lowerName);\n  return sorted;\n};\n\nconst insertEmoji = (state, position, emojiData, needsSpace) => {\n  const oldText = state.get('text');\n  const emoji = needsSpace ? ' ' + emojiData.native : emojiData.native;\n\n  return state.merge({\n    text: `${oldText.slice(0, position)}${emoji} ${oldText.slice(position)}`,\n    focusDate: new Date(),\n    caretPosition: position + emoji.length + 1,\n    idempotencyKey: uuid(),\n  });\n};\n\nconst privacyPreference = (a, b) => {\n  const order = ['public', 'unlisted', 'private', 'direct'];\n  return order[Math.max(order.indexOf(a), order.indexOf(b), 0)];\n};\n\nconst hydrate = (state, hydratedState) => {\n  state = clearAll(state.merge(hydratedState));\n\n  if (hydratedState.get('text')) {\n    state = state.set('text', hydratedState.get('text')).set('focusDate', new Date());\n  }\n\n  return state;\n};\n\nconst domParser = new DOMParser();\n\nconst expandMentions = status => {\n  const fragment = domParser.parseFromString(status.get('content'), 'text/html').documentElement;\n\n  status.get('mentions').forEach(mention => {\n    fragment.querySelector(`a[href=\"${mention.get('url')}\"]`).textContent = `@${mention.get('acct')}`;\n  });\n\n  return fragment.innerHTML;\n};\n\nconst expiresInFromExpiresAt = expires_at => {\n  if (!expires_at) return 24 * 3600;\n  const delta = (new Date(expires_at).getTime() - Date.now()) / 1000;\n  return [300, 1800, 3600, 21600, 86400, 259200, 604800].find(expires_in => expires_in >= delta) || 24 * 3600;\n};\n\nconst mergeLocalHashtagResults = (suggestions, prefix, tagHistory) => {\n  prefix = prefix.toLowerCase();\n  if (suggestions.length < 4) {\n    const localTags = tagHistory.filter(tag => tag.toLowerCase().startsWith(prefix) && !suggestions.some(suggestion => suggestion.type === 'hashtag' && suggestion.name.toLowerCase() === tag.toLowerCase()));\n    return suggestions.concat(localTags.slice(0, 4 - suggestions.length).toJS().map(tag => ({ type: 'hashtag', name: tag })));\n  } else {\n    return suggestions;\n  }\n};\n\nconst normalizeSuggestions = (state, { accounts, emojis, tags, token }) => {\n  if (accounts) {\n    return accounts.map(item => ({ id: item.id, type: 'account' }));\n  } else if (emojis) {\n    return emojis.map(item => ({ ...item, type: 'emoji' }));\n  } else {\n    return mergeLocalHashtagResults(sortHashtagsByUse(state, tags.map(item => ({ ...item, type: 'hashtag' }))), token.slice(1), state.get('tagHistory'));\n  }\n};\n\nconst updateSuggestionTags = (state, token) => {\n  const prefix = token.slice(1);\n\n  const suggestions = state.get('suggestions').toJS();\n  return state.merge({\n    suggestions: ImmutableList(mergeLocalHashtagResults(suggestions, prefix, state.get('tagHistory'))),\n    suggestion_token: token,\n  });\n};\n\nconst updatePoll = (state, index, value, maxOptions) => state.updateIn(['poll', 'options'], options => {\n  const tmp = options.set(index, value).filterNot(x => x.trim().length === 0);\n\n  if (tmp.size === 0) {\n    return tmp.push('').push('');\n  } else if (tmp.size < maxOptions) {\n    return tmp.push('');\n  }\n\n  return tmp;\n});\n\nexport default function compose(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('compose'));\n  case COMPOSE_MOUNT:\n    return state.set('mounted', state.get('mounted') + 1);\n  case COMPOSE_UNMOUNT:\n    return state\n      .set('mounted', Math.max(state.get('mounted') - 1, 0))\n      .set('is_composing', false);\n  case COMPOSE_SENSITIVITY_CHANGE:\n    return state.withMutations(map => {\n      if (!state.get('spoiler')) {\n        map.set('sensitive', !state.get('sensitive'));\n      }\n\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SPOILERNESS_CHANGE:\n    return state.withMutations(map => {\n      map.set('spoiler', !state.get('spoiler'));\n      map.set('idempotencyKey', uuid());\n\n      if (state.get('media_attachments').size >= 1 && !state.get('default_sensitive')) {\n        map.set('sensitive', !state.get('spoiler'));\n      }\n    });\n  case COMPOSE_SPOILER_TEXT_CHANGE:\n    if (!state.get('spoiler')) return state;\n    return state\n      .set('spoiler_text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_VISIBILITY_CHANGE:\n    return state\n      .set('privacy', action.value)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_CHANGE:\n    return state\n      .set('text', action.text)\n      .set('idempotencyKey', uuid());\n  case COMPOSE_COMPOSING_CHANGE:\n    return state.set('is_composing', action.value);\n  case COMPOSE_REPLY:\n    return state.withMutations(map => {\n      map.set('id', null);\n      map.set('in_reply_to', action.status.get('id'));\n      map.set('text', statusToTextMentions(state, action.status));\n      map.set('privacy', privacyPreference(action.status.get('visibility'), state.get('default_privacy')));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('preselectDate', new Date());\n      map.set('idempotencyKey', uuid());\n\n      map.update('media_attachments', list => list.filter(media => media.get('unattached')));\n\n      if (action.status.get('language') && !action.status.has('translation')) {\n        map.set('language', action.status.get('language'));\n      } else {\n        map.set('language', state.get('default_language'));\n      }\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n\n        if (map.get('media_attachments').size >= 1) {\n          map.set('sensitive', true);\n        }\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n    });\n  case COMPOSE_SUBMIT_REQUEST:\n    return state.set('is_submitting', true);\n  case COMPOSE_UPLOAD_CHANGE_REQUEST:\n    return state.set('is_changing_upload', true);\n  case COMPOSE_REPLY_CANCEL:\n  case COMPOSE_RESET:\n  case COMPOSE_SUBMIT_SUCCESS:\n    return clearAll(state);\n  case COMPOSE_SUBMIT_FAIL:\n    return state.set('is_submitting', false);\n  case COMPOSE_UPLOAD_CHANGE_FAIL:\n    return state.set('is_changing_upload', false);\n  case COMPOSE_UPLOAD_REQUEST:\n    return state.set('is_uploading', true).update('pending_media_attachments', n => n + 1);\n  case COMPOSE_UPLOAD_PROCESSING:\n    return state.set('is_processing', true);\n  case COMPOSE_UPLOAD_SUCCESS:\n    return appendMedia(state, fromJS(action.media), action.file);\n  case COMPOSE_UPLOAD_FAIL:\n    return state.set('is_uploading', false).set('is_processing', false).update('pending_media_attachments', n => n - 1);\n  case COMPOSE_UPLOAD_UNDO:\n    return removeMedia(state, action.media_id);\n  case COMPOSE_UPLOAD_PROGRESS:\n    return state.set('progress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_REQUEST:\n    return state.set('isUploadingThumbnail', true);\n  case THUMBNAIL_UPLOAD_PROGRESS:\n    return state.set('thumbnailProgress', Math.round((action.loaded / action.total) * 100));\n  case THUMBNAIL_UPLOAD_FAIL:\n    return state.set('isUploadingThumbnail', false);\n  case THUMBNAIL_UPLOAD_SUCCESS:\n    return state\n      .set('isUploadingThumbnail', false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media);\n        }\n\n        return item;\n      }));\n  case INIT_MEDIA_EDIT_MODAL:\n    const media =  state.get('media_attachments').find(item => item.get('id') === action.id);\n    return state.set('media_modal', ImmutableMap({\n      id: action.id,\n      description: media.get('description') || '',\n      focusX: media.getIn(['meta', 'focus', 'x'], 0),\n      focusY: media.getIn(['meta', 'focus', 'y'], 0),\n      dirty: false,\n    }));\n  case COMPOSE_CHANGE_MEDIA_DESCRIPTION:\n    return state.setIn(['media_modal', 'description'], action.description).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_CHANGE_MEDIA_FOCUS:\n    return state.setIn(['media_modal', 'focusX'], action.focusX).setIn(['media_modal', 'focusY'], action.focusY).setIn(['media_modal', 'dirty'], true);\n  case COMPOSE_MENTION:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_DIRECT:\n    return state.withMutations(map => {\n      map.update('text', text => [text.trim(), `@${action.account.get('acct')} `].filter((str) => str.length !== 0).join(' '));\n      map.set('privacy', 'direct');\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n    });\n  case COMPOSE_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', ImmutableList(), list => list.clear()).set('suggestion_token', null);\n  case COMPOSE_SUGGESTIONS_READY:\n    return state.set('suggestions', ImmutableList(normalizeSuggestions(state, action))).set('suggestion_token', action.token);\n  case COMPOSE_SUGGESTION_SELECT:\n    return insertSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_IGNORE:\n    return ignoreSuggestion(state, action.position, action.token, action.completion, action.path);\n  case COMPOSE_SUGGESTION_TAGS_UPDATE:\n    return updateSuggestionTags(state, action.token);\n  case COMPOSE_TAG_HISTORY_UPDATE:\n    return state.set('tagHistory', fromJS(action.tags));\n  case timelineDelete.type:\n    if (action.payload.statusId === state.get('in_reply_to')) {\n      return state.set('in_reply_to', null);\n    } else if (action.payload.statusId === state.get('id')) {\n      return state.set('id', null);\n    } else {\n      return state;\n    }\n  case COMPOSE_EMOJI_INSERT:\n    return insertEmoji(state, action.position, action.emoji, action.needsSpace);\n  case COMPOSE_UPLOAD_CHANGE_SUCCESS:\n    return state\n      .set('is_changing_upload', false)\n      .setIn(['media_modal', 'dirty'], false)\n      .update('media_attachments', list => list.map(item => {\n        if (item.get('id') === action.media.id) {\n          return fromJS(action.media).set('unattached', !action.attached);\n        }\n\n        return item;\n      }));\n  case REDRAFT:\n    return state.withMutations(map => {\n      map.set('text', action.raw_text || unescapeHTML(expandMentions(action.status)));\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments').map((media) => media.set('unattached', true)));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n      map.set('id', null);\n\n      if (action.status.get('spoiler_text').length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.status.get('spoiler_text'));\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_SET_STATUS:\n    return state.withMutations(map => {\n      map.set('id', action.status.get('id'));\n      map.set('text', action.text);\n      map.set('in_reply_to', action.status.get('in_reply_to_id'));\n      map.set('privacy', action.status.get('visibility'));\n      map.set('media_attachments', action.status.get('media_attachments'));\n      map.set('focusDate', new Date());\n      map.set('caretPosition', null);\n      map.set('idempotencyKey', uuid());\n      map.set('sensitive', action.status.get('sensitive'));\n      map.set('language', action.status.get('language'));\n\n      if (action.spoiler_text.length > 0) {\n        map.set('spoiler', true);\n        map.set('spoiler_text', action.spoiler_text);\n      } else {\n        map.set('spoiler', false);\n        map.set('spoiler_text', '');\n      }\n\n      if (action.status.get('poll')) {\n        map.set('poll', ImmutableMap({\n          options: action.status.getIn(['poll', 'options']).map(x => x.get('title')),\n          multiple: action.status.getIn(['poll', 'multiple']),\n          expires_in: expiresInFromExpiresAt(action.status.getIn(['poll', 'expires_at'])),\n        }));\n      }\n    });\n  case COMPOSE_POLL_ADD:\n    return state.set('poll', initialPoll);\n  case COMPOSE_POLL_REMOVE:\n    return state.set('poll', null);\n  case COMPOSE_POLL_OPTION_CHANGE:\n    return updatePoll(state, action.index, action.title, action.maxOptions);\n  case COMPOSE_POLL_SETTINGS_CHANGE:\n    return state.update('poll', poll => poll.set('expires_in', action.expiresIn).set('multiple', action.isMultiple));\n  case COMPOSE_LANGUAGE_CHANGE:\n    return state.set('language', action.language);\n  case COMPOSE_FOCUS:\n    return state.set('focusDate', new Date()).update('text', text => text.length > 0 ? text : action.defaultText);\n  case COMPOSE_CHANGE_MEDIA_ORDER:\n    return state.update('media_attachments', list => {\n      const indexA = list.findIndex(x => x.get('id') === action.a);\n      const moveItem = list.get(indexA);\n      const indexB = list.findIndex(x => x.get('id') === action.b);\n\n      return list.splice(indexA, 1).splice(indexB, 0, moveItem);\n    });\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from '../actions/accounts';\nimport { CONTEXT_FETCH_SUCCESS } from '../actions/statuses';\nimport { TIMELINE_UPDATE } from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  inReplyTos: ImmutableMap(),\n  replies: ImmutableMap(),\n});\n\nconst normalizeContext = (immutableState, id, ancestors, descendants) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      function addReply({ id, in_reply_to_id }) {\n        if (in_reply_to_id && !inReplyTos.has(id)) {\n\n          replies.update(in_reply_to_id, ImmutableList(), siblings => {\n            const index = siblings.findLastIndex(sibling => compareId(sibling, id) < 0);\n            return siblings.insert(index + 1, id);\n          });\n\n          inReplyTos.set(id, in_reply_to_id);\n        }\n      }\n\n      // We know in_reply_to_id of statuses but `id` itself.\n      // So we assume that the status of the id replies to last ancestors.\n\n      ancestors.forEach(addReply);\n\n      if (ancestors[0]) {\n        addReply({ id, in_reply_to_id: ancestors[ancestors.length - 1].id });\n      }\n\n      descendants.forEach(addReply);\n    }));\n  }));\n});\n\nconst deleteFromContexts = (immutableState, ids) => immutableState.withMutations(state => {\n  state.update('inReplyTos', immutableAncestors => immutableAncestors.withMutations(inReplyTos => {\n    state.update('replies', immutableDescendants => immutableDescendants.withMutations(replies => {\n      ids.forEach(id => {\n        const inReplyToIdOfId = inReplyTos.get(id);\n        const repliesOfId = replies.get(id);\n        const siblings = replies.get(inReplyToIdOfId);\n\n        if (siblings) {\n          replies.set(inReplyToIdOfId, siblings.filterNot(sibling => sibling === id));\n        }\n\n\n        if (repliesOfId) {\n          repliesOfId.forEach(reply => inReplyTos.delete(reply));\n        }\n\n        inReplyTos.delete(id);\n        replies.delete(id);\n      });\n    }));\n  }));\n});\n\nconst filterContexts = (state, relationship, statuses) => {\n  const ownedStatusIds = statuses\n    .filter(status => status.get('account') === relationship.id)\n    .map(status => status.get('id'));\n\n  return deleteFromContexts(state, ownedStatusIds);\n};\n\nconst updateContext = (state, status) => {\n  if (status.in_reply_to_id) {\n    return state.withMutations(mutable => {\n      const replies = mutable.getIn(['replies', status.in_reply_to_id], ImmutableList());\n\n      mutable.setIn(['inReplyTos', status.id], status.in_reply_to_id);\n\n      if (!replies.includes(status.id)) {\n        mutable.setIn(['replies', status.in_reply_to_id], replies.push(status.id));\n      }\n    });\n  }\n\n  return state;\n};\n\nexport default function replies(state = initialState, action) {\n  switch(action.type) {\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterContexts(state, action.payload.relationship, action.payload.statuses);\n  case CONTEXT_FETCH_SUCCESS:\n    return normalizeContext(state, action.id, action.ancestors, action.descendants);\n  case timelineDelete.type:\n    return deleteFromContexts(state, [action.payload.statusId]);\n  case TIMELINE_UPDATE:\n    return updateContext(state, action.status);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { blockAccountSuccess, muteAccountSuccess } from 'mastodon/actions/accounts';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks';\n\nimport {\n  CONVERSATIONS_MOUNT,\n  CONVERSATIONS_UNMOUNT,\n  CONVERSATIONS_FETCH_REQUEST,\n  CONVERSATIONS_FETCH_SUCCESS,\n  CONVERSATIONS_FETCH_FAIL,\n  CONVERSATIONS_UPDATE,\n  CONVERSATIONS_READ,\n  CONVERSATIONS_DELETE_SUCCESS,\n} from '../actions/conversations';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  hasMore: true,\n  mounted: false,\n});\n\nconst conversationToMap = item => ImmutableMap({\n  id: item.id,\n  unread: item.unread,\n  accounts: ImmutableList(item.accounts.map(a => a.id)),\n  last_status: item.last_status ? item.last_status.id : null,\n});\n\nconst updateConversation = (state, item) => state.update('items', list => {\n  const index   = list.findIndex(x => x.get('id') === item.id);\n  const newItem = conversationToMap(item);\n\n  if (index === -1) {\n    return list.unshift(newItem);\n  } else {\n    return list.set(index, newItem);\n  }\n});\n\nconst expandNormalizedConversations = (state, conversations, next, isLoadingRecent) => {\n  let items = ImmutableList(conversations.map(conversationToMap));\n\n  return state.withMutations(mutable => {\n    if (!items.isEmpty()) {\n      mutable.update('items', list => {\n        list = list.map(oldItem => {\n          const newItemIndex = items.findIndex(x => x.get('id') === oldItem.get('id'));\n\n          if (newItemIndex === -1) {\n            return oldItem;\n          }\n\n          const newItem = items.get(newItemIndex);\n          items = items.delete(newItemIndex);\n\n          return newItem;\n        });\n\n        list = list.concat(items);\n\n        return list.sortBy(x => x.get('last_status'), (a, b) => {\n          if(a === null || b === null) {\n            return -1;\n          }\n\n          return compareId(a, b) * -1;\n        });\n      });\n    }\n\n    if (!next && !isLoadingRecent) {\n      mutable.set('hasMore', false);\n    }\n\n    mutable.set('isLoading', false);\n  });\n};\n\nconst filterConversations = (state, accountIds) => {\n  return state.update('items', list => list.filterNot(item => item.get('accounts').some(accountId => accountIds.includes(accountId))));\n};\n\nexport default function conversations(state = initialState, action) {\n  switch (action.type) {\n  case CONVERSATIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case CONVERSATIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case CONVERSATIONS_FETCH_SUCCESS:\n    return expandNormalizedConversations(state, action.conversations, action.next, action.isLoadingRecent);\n  case CONVERSATIONS_UPDATE:\n    return updateConversation(state, action.conversation);\n  case CONVERSATIONS_MOUNT:\n    return state.update('mounted', count => count + 1);\n  case CONVERSATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case CONVERSATIONS_READ:\n    return state.update('items', list => list.map(item => {\n      if (item.get('id') === action.id) {\n        return item.set('unread', false);\n      }\n\n      return item;\n    }));\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterConversations(state, [action.payload.relationship.id]);\n  case blockDomainSuccess.type:\n    return filterConversations(state, action.payload.accounts);\n  case CONVERSATIONS_DELETE_SUCCESS:\n    return state.update('items', list => list.filterNot(item => item.get('id') === action.id));\n  default:\n    return state;\n  }\n}\n","import { List as ImmutableList, fromJS as ConvertToImmutable } from 'immutable';\n\nimport { CUSTOM_EMOJIS_FETCH_SUCCESS } from '../actions/custom_emojis';\nimport { buildCustomEmojis } from '../features/emoji/emoji';\nimport { search as emojiSearch } from '../features/emoji/emoji_mart_search_light';\n\nconst initialState = ImmutableList([]);\n\nexport default function custom_emojis(state = initialState, action) {\n  if(action.type === CUSTOM_EMOJIS_FETCH_SUCCESS) {\n    state = ConvertToImmutable(action.custom_emojis);\n    emojiSearch('', { custom: buildCustomEmojis(state) });\n  }\n\n  return state;\n}\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nimport {\n  DOMAIN_BLOCKS_FETCH_SUCCESS,\n  DOMAIN_BLOCKS_EXPAND_SUCCESS,\n  unblockDomainSuccess\n} from '../actions/domain_blocks';\n\nconst initialState = ImmutableMap({\n  blocks: ImmutableMap({\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nexport default function domainLists(state = initialState, action) {\n  switch(action.type) {\n  case DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['blocks', 'items'], ImmutableOrderedSet(action.domains)).setIn(['blocks', 'next'], action.next);\n  case DOMAIN_BLOCKS_EXPAND_SUCCESS:\n    return state.updateIn(['blocks', 'items'], set => set.union(action.domains)).setIn(['blocks', 'next'], action.next);\n  case unblockDomainSuccess.type:\n    return state.updateIn(['blocks', 'items'], set => set.delete(action.payload.domain));\n  default:\n    return state;\n  }\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { closeDropdownMenu, openDropdownMenu } from '../actions/dropdown_menu';\n\ninterface DropdownMenuState {\n  openId: string | null;\n  keyboard: boolean;\n  scrollKey: string | null;\n}\n\nconst initialState: DropdownMenuState = {\n  openId: null,\n  keyboard: false,\n  scrollKey: null,\n};\n\nexport const dropdownMenuReducer = createReducer(initialState, (builder) => {\n  builder\n    .addCase(\n      openDropdownMenu,\n      (state, { payload: { id, keyboard, scrollKey } }) => {\n        state.openId = id;\n        state.keyboard = keyboard;\n        state.scrollKey = scrollKey;\n      },\n    )\n    .addCase(closeDropdownMenu, (state, { payload: { id } }) => {\n      if (state.openId === id) {\n        state.openId = null;\n        state.scrollKey = null;\n      }\n    });\n});\n","import { Map as ImmutableMap, is, fromJS } from 'immutable';\n\nimport { FILTERS_FETCH_SUCCESS, FILTERS_CREATE_SUCCESS } from '../actions/filters';\nimport { FILTERS_IMPORT } from '../actions/importer';\n\nconst normalizeFilter = (state, filter) => {\n  const normalizedFilter = fromJS({\n    id: filter.id,\n    title: filter.title,\n    context: filter.context,\n    filter_action: filter.filter_action,\n    keywords: filter.keywords,\n    expires_at: filter.expires_at ? Date.parse(filter.expires_at) : null,\n  });\n\n  if (is(state.get(filter.id), normalizedFilter)) {\n    return state;\n  } else {\n    // Do not overwrite keywords when receiving a partial filter\n    return state.update(filter.id, ImmutableMap(), (old) => (\n      old.mergeWith(((old_value, new_value) => (new_value === undefined ? old_value : new_value)), normalizedFilter)\n    ));\n  }\n};\n\nconst normalizeFilters = (state, filters) => {\n  filters.forEach(filter => {\n    state = normalizeFilter(state, filter);\n  });\n\n  return state;\n};\n\nexport default function filters(state = ImmutableMap(), action) {\n  switch(action.type) {\n  case FILTERS_CREATE_SUCCESS:\n    return normalizeFilter(state, action.filter);\n  case FILTERS_FETCH_SUCCESS:\n    return normalizeFilters(ImmutableMap(), action.filters);\n  case FILTERS_IMPORT:\n    return normalizeFilters(state, action.filters);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  FOLLOWED_HASHTAGS_FETCH_REQUEST,\n  FOLLOWED_HASHTAGS_FETCH_SUCCESS,\n  FOLLOWED_HASHTAGS_FETCH_FAIL,\n  FOLLOWED_HASHTAGS_EXPAND_REQUEST,\n  FOLLOWED_HASHTAGS_EXPAND_SUCCESS,\n  FOLLOWED_HASHTAGS_EXPAND_FAIL,\n} from 'mastodon/actions/tags';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  next: null,\n});\n\nexport default function followed_tags(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWED_HASHTAGS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.followed_tags));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case FOLLOWED_HASHTAGS_EXPAND_REQUEST:\n    return state.set('isLoading', true);\n  case FOLLOWED_HASHTAGS_EXPAND_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', set => set.concat(fromJS(action.followed_tags)));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case FOLLOWED_HASHTAGS_EXPAND_FAIL:\n    return state.set('isLoading', false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { HEIGHT_CACHE_SET, HEIGHT_CACHE_CLEAR } from '../actions/height_cache';\n\nconst initialState = ImmutableMap();\n\nconst setHeight = (state, key, id, height) => {\n  return state.update(key, ImmutableMap(), map => map.set(id, height));\n};\n\nconst clearHeights = () => {\n  return ImmutableMap();\n};\n\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case HEIGHT_CACHE_SET:\n    return setHeight(state, action.key, action.id, action.height);\n  case HEIGHT_CACHE_CLEAR:\n    return clearHeights();\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport { HISTORY_FETCH_REQUEST, HISTORY_FETCH_SUCCESS, HISTORY_FETCH_FAIL } from 'mastodon/actions/history';\n\nconst initialHistory = ImmutableMap({\n  loading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap();\n\nexport default function history(state = initialState, action) {\n  switch(action.type) {\n  case HISTORY_FETCH_REQUEST:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', true);\n      map.set('items', ImmutableList());\n    }));\n  case HISTORY_FETCH_SUCCESS:\n    return state.update(action.statusId, initialHistory, history => history.withMutations(map => {\n      map.set('loading', false);\n      map.set('items', fromJS(action.history.map((x, i) => ({ ...x, account: x.account.id, original: i === 0 })).reverse()));\n    }));\n  case HISTORY_FETCH_FAIL:\n    return state.update(action.statusId, initialHistory, history => history.set('loading', false));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport {\n  LIST_ADDER_RESET,\n  LIST_ADDER_SETUP,\n  LIST_ADDER_LISTS_FETCH_REQUEST,\n  LIST_ADDER_LISTS_FETCH_SUCCESS,\n  LIST_ADDER_LISTS_FETCH_FAIL,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  accountId: null,\n\n  lists: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n});\n\nexport default function listAdderReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_ADDER_RESET:\n    return initialState;\n  case LIST_ADDER_SETUP:\n    return state.withMutations(map => {\n      map.set('accountId', action.account.get('id'));\n    });\n  case LIST_ADDER_LISTS_FETCH_REQUEST:\n    return state.setIn(['lists', 'isLoading'], true);\n  case LIST_ADDER_LISTS_FETCH_FAIL:\n    return state.setIn(['lists', 'isLoading'], false);\n  case LIST_ADDER_LISTS_FETCH_SUCCESS:\n    return state.update('lists', lists => lists.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.lists.map(item => item.id)));\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.unshift(action.listId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['lists', 'items'], list => list.filterNot(item => item === action.listId));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport {\n  LIST_CREATE_REQUEST,\n  LIST_CREATE_FAIL,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_REQUEST,\n  LIST_UPDATE_FAIL,\n  LIST_UPDATE_SUCCESS,\n  LIST_EDITOR_RESET,\n  LIST_EDITOR_SETUP,\n  LIST_EDITOR_TITLE_CHANGE,\n  LIST_ACCOUNTS_FETCH_REQUEST,\n  LIST_ACCOUNTS_FETCH_SUCCESS,\n  LIST_ACCOUNTS_FETCH_FAIL,\n  LIST_EDITOR_SUGGESTIONS_READY,\n  LIST_EDITOR_SUGGESTIONS_CLEAR,\n  LIST_EDITOR_SUGGESTIONS_CHANGE,\n  LIST_EDITOR_ADD_SUCCESS,\n  LIST_EDITOR_REMOVE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap({\n  listId: null,\n  isSubmitting: false,\n  isChanged: false,\n  title: '',\n  isExclusive: false,\n\n  accounts: ImmutableMap({\n    items: ImmutableList(),\n    loaded: false,\n    isLoading: false,\n  }),\n\n  suggestions: ImmutableMap({\n    value: '',\n    items: ImmutableList(),\n  }),\n});\n\nexport default function listEditorReducer(state = initialState, action) {\n  switch(action.type) {\n  case LIST_EDITOR_RESET:\n    return initialState;\n  case LIST_EDITOR_SETUP:\n    return state.withMutations(map => {\n      map.set('listId', action.list.get('id'));\n      map.set('title', action.list.get('title'));\n      map.set('isExclusive', action.list.get('is_exclusive'));\n      map.set('isSubmitting', false);\n    });\n  case LIST_EDITOR_TITLE_CHANGE:\n    return state.withMutations(map => {\n      map.set('title', action.value);\n      map.set('isChanged', true);\n    });\n  case LIST_CREATE_REQUEST:\n  case LIST_UPDATE_REQUEST:\n    return state.withMutations(map => {\n      map.set('isSubmitting', true);\n      map.set('isChanged', false);\n    });\n  case LIST_CREATE_FAIL:\n  case LIST_UPDATE_FAIL:\n    return state.set('isSubmitting', false);\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return state.withMutations(map => {\n      map.set('isSubmitting', false);\n      map.set('listId', action.list.id);\n    });\n  case LIST_ACCOUNTS_FETCH_REQUEST:\n    return state.setIn(['accounts', 'isLoading'], true);\n  case LIST_ACCOUNTS_FETCH_FAIL:\n    return state.setIn(['accounts', 'isLoading'], false);\n  case LIST_ACCOUNTS_FETCH_SUCCESS:\n    return state.update('accounts', accounts => accounts.withMutations(map => {\n      map.set('isLoading', false);\n      map.set('loaded', true);\n      map.set('items', ImmutableList(action.accounts.map(item => item.id)));\n    }));\n  case LIST_EDITOR_SUGGESTIONS_CHANGE:\n    return state.setIn(['suggestions', 'value'], action.value);\n  case LIST_EDITOR_SUGGESTIONS_READY:\n    return state.setIn(['suggestions', 'items'], ImmutableList(action.accounts.map(item => item.id)));\n  case LIST_EDITOR_SUGGESTIONS_CLEAR:\n    return state.update('suggestions', suggestions => suggestions.withMutations(map => {\n      map.set('items', ImmutableList());\n      map.set('value', '');\n    }));\n  case LIST_EDITOR_ADD_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.unshift(action.accountId));\n  case LIST_EDITOR_REMOVE_SUCCESS:\n    return state.updateIn(['accounts', 'items'], list => list.filterNot(item => item === action.accountId));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport {\n  LIST_FETCH_SUCCESS,\n  LIST_FETCH_FAIL,\n  LISTS_FETCH_SUCCESS,\n  LIST_CREATE_SUCCESS,\n  LIST_UPDATE_SUCCESS,\n  LIST_DELETE_SUCCESS,\n} from '../actions/lists';\n\nconst initialState = ImmutableMap();\n\nconst normalizeList = (state, list) => state.set(list.id, fromJS(list));\n\nconst normalizeLists = (state, lists) => {\n  lists.forEach(list => {\n    state = normalizeList(state, list);\n  });\n\n  return state;\n};\n\nexport default function lists(state = initialState, action) {\n  switch(action.type) {\n  case LIST_FETCH_SUCCESS:\n  case LIST_CREATE_SUCCESS:\n  case LIST_UPDATE_SUCCESS:\n    return normalizeList(state, action.list);\n  case LISTS_FETCH_SUCCESS:\n    return normalizeLists(state, action.lists);\n  case LIST_DELETE_SUCCESS:\n  case LIST_FETCH_FAIL:\n    return state.set(action.id, false);\n  default:\n    return state;\n  }\n}\n","import { createReducer } from '@reduxjs/toolkit';\n\nimport { submitMarkersAction, fetchMarkers } from 'mastodon/actions/markers';\nimport { compareId } from 'mastodon/compare_id';\n\nconst initialState = {\n  home: '0',\n  notifications: '0',\n};\n\nexport const markersReducer = createReducer(initialState, (builder) => {\n  builder.addCase(\n    submitMarkersAction.fulfilled,\n    (state, { payload: { home, notifications } }) => {\n      if (home) state.home = home;\n      if (notifications) state.notifications = notifications;\n    },\n  );\n  builder.addCase(\n    fetchMarkers.fulfilled,\n    (\n      state,\n      {\n        payload: {\n          markers: { home, notifications },\n        },\n      },\n    ) => {\n      if (home && compareId(home.last_read_id, state.home) > 0)\n        state.home = home.last_read_id;\n      if (\n        notifications &&\n        compareId(notifications.last_read_id, state.notifications) > 0\n      )\n        state.notifications = notifications.last_read_id;\n    },\n  );\n});\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = ImmutableMap({\n  accept_content_types: [],\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return state.merge(action.state.get('media_attachments'));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap } from 'immutable';\n\nimport { changeLayout } from 'mastodon/actions/app';\nimport { STORE_HYDRATE } from 'mastodon/actions/store';\nimport { layoutFromWindow } from 'mastodon/is_mobile';\n\nconst initialState = ImmutableMap({\n  streaming_api_base_url: null,\n  layout: layoutFromWindow(),\n  permissions: '0',\n});\n\nexport default function meta(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    // we do not want `access_token` to be stored in the state\n    return state.merge(action.state.get('meta')).delete('access_token').set('permissions', action.state.getIn(['role', 'permissions']));\n  case changeLayout.type:\n    return state.set('layout', action.payload.layout);\n  default:\n    return state;\n  }\n}\n","import type { Reducer } from '@reduxjs/toolkit';\nimport { Record as ImmutableRecord, Stack } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport { COMPOSE_UPLOAD_CHANGE_SUCCESS } from '../actions/compose';\nimport type { ModalType } from '../actions/modal';\nimport { openModal, closeModal } from '../actions/modal';\n\nexport type ModalProps = Record<string, unknown>;\ninterface Modal {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\n\nconst Modal = ImmutableRecord<Modal>({\n  modalType: 'ACTIONS',\n  modalProps: ImmutableRecord({})(),\n});\n\ninterface ModalState {\n  ignoreFocus: boolean;\n  stack: Stack<ImmutableRecord<Modal>>;\n}\n\nconst initialState = ImmutableRecord<ModalState>({\n  ignoreFocus: false,\n  stack: Stack(),\n})();\ntype State = typeof initialState;\n\ninterface PopModalOption {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nconst popModal = (\n  state: State,\n  { modalType, ignoreFocus }: PopModalOption,\n): State => {\n  if (\n    modalType === undefined ||\n    modalType === state.get('stack').get(0)?.get('modalType')\n  ) {\n    return state\n      .set('ignoreFocus', !!ignoreFocus)\n      .update('stack', (stack) => stack.shift());\n  } else {\n    return state;\n  }\n};\n\nconst pushModal = (\n  state: State,\n  modalType: ModalType,\n  modalProps: ModalProps,\n): State => {\n  return state.withMutations((record) => {\n    record.set('ignoreFocus', false);\n    record.update('stack', (stack) =>\n      stack.unshift(Modal({ modalType, modalProps })),\n    );\n  });\n};\n\nexport const modalReducer: Reducer<State> = (state = initialState, action) => {\n  if (openModal.match(action))\n    return pushModal(\n      state,\n      action.payload.modalType,\n      action.payload.modalProps,\n    );\n  else if (closeModal.match(action)) return popModal(state, action.payload);\n  // TODO: type those actions\n  else if (action.type === COMPOSE_UPLOAD_CHANGE_SUCCESS)\n    return popModal(state, { modalType: 'FOCAL_POINT', ignoreFocus: false });\n  else if (timelineDelete.match(action))\n    return state.update('stack', (stack) =>\n      stack.filterNot(\n        (modal) => modal.get('modalProps').statusId === action.payload.statusId,\n      ),\n    );\n  else return state;\n};\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  authorizeFollowRequestSuccess,\n  blockAccountSuccess,\n  muteAccountSuccess,\n  rejectFollowRequestSuccess,\n} from 'mastodon/actions/accounts_typed';\nimport { focusApp, unfocusApp } from 'mastodon/actions/app';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks_typed';\nimport { fetchMarkers } from 'mastodon/actions/markers';\nimport {\n  clearNotifications,\n  fetchNotifications,\n  fetchNotificationsGap,\n  processNewNotificationForGroups,\n  loadPending,\n  updateScrollPosition,\n  markNotificationsAsRead,\n  mountNotifications,\n  unmountNotifications,\n} from 'mastodon/actions/notification_groups';\nimport {\n  disconnectTimeline,\n  timelineDelete,\n} from 'mastodon/actions/timelines_typed';\nimport type { ApiNotificationJSON } from 'mastodon/api_types/notifications';\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems } from 'mastodon/initial_state';\nimport {\n  NOTIFICATIONS_GROUP_MAX_AVATARS,\n  createNotificationGroupFromJSON,\n  createNotificationGroupFromNotificationJSON,\n} from 'mastodon/models/notification_group';\nimport type { NotificationGroup } from 'mastodon/models/notification_group';\n\nconst NOTIFICATIONS_TRIM_LIMIT = 50;\n\nexport interface NotificationGap {\n  type: 'gap';\n  maxId?: string;\n  sinceId?: string;\n}\n\ninterface NotificationGroupsState {\n  groups: (NotificationGroup | NotificationGap)[];\n  pendingGroups: (NotificationGroup | NotificationGap)[];\n  scrolledToTop: boolean;\n  isLoading: boolean;\n  lastReadId: string;\n  mounted: number;\n  isTabVisible: boolean;\n}\n\nconst initialState: NotificationGroupsState = {\n  groups: [],\n  pendingGroups: [], // holds pending groups in slow mode\n  scrolledToTop: false,\n  isLoading: false,\n  // The following properties are used to track unread notifications\n  lastReadId: '0', // used for unread notifications\n  mounted: 0, // number of mounted notification list components, usually 0 or 1\n  isTabVisible: true,\n};\n\nfunction filterNotificationsForAccounts(\n  groups: NotificationGroupsState['groups'],\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  groups = groups\n    .map((group) => {\n      if (\n        group.type !== 'gap' &&\n        (!onlyForType || group.type === onlyForType)\n      ) {\n        const previousLength = group.sampleAccountIds.length;\n\n        group.sampleAccountIds = group.sampleAccountIds.filter(\n          (id) => !accountIds.includes(id),\n        );\n\n        const newLength = group.sampleAccountIds.length;\n        const removed = previousLength - newLength;\n\n        group.notifications_count -= removed;\n      }\n\n      return group;\n    })\n    .filter(\n      (group) => group.type === 'gap' || group.sampleAccountIds.length > 0,\n    );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction filterNotificationsForStatus(\n  groups: NotificationGroupsState['groups'],\n  statusId: string,\n) {\n  groups = groups.filter(\n    (group) =>\n      group.type === 'gap' ||\n      !('statusId' in group) ||\n      group.statusId !== statusId,\n  );\n  mergeGaps(groups);\n  return groups;\n}\n\nfunction removeNotificationsForAccounts(\n  state: NotificationGroupsState,\n  accountIds: string[],\n  onlyForType?: string,\n) {\n  state.groups = filterNotificationsForAccounts(\n    state.groups,\n    accountIds,\n    onlyForType,\n  );\n  state.pendingGroups = filterNotificationsForAccounts(\n    state.pendingGroups,\n    accountIds,\n    onlyForType,\n  );\n}\n\nfunction removeNotificationsForStatus(\n  state: NotificationGroupsState,\n  statusId: string,\n) {\n  state.groups = filterNotificationsForStatus(state.groups, statusId);\n  state.pendingGroups = filterNotificationsForStatus(\n    state.pendingGroups,\n    statusId,\n  );\n}\n\nfunction isNotificationGroup(\n  groupOrGap: NotificationGroup | NotificationGap,\n): groupOrGap is NotificationGroup {\n  return groupOrGap.type !== 'gap';\n}\n\n// Merge adjacent gaps in `groups` in-place\nfunction mergeGaps(groups: NotificationGroupsState['groups']) {\n  for (let i = 0; i < groups.length; i++) {\n    const firstGroupOrGap = groups[i];\n\n    if (firstGroupOrGap?.type === 'gap') {\n      let lastGap = firstGroupOrGap;\n      let j = i + 1;\n\n      for (; j < groups.length; j++) {\n        const groupOrGap = groups[j];\n        if (groupOrGap?.type === 'gap') lastGap = groupOrGap;\n        else break;\n      }\n\n      if (j - i > 1) {\n        groups.splice(i, j - i, {\n          type: 'gap',\n          maxId: firstGroupOrGap.maxId,\n          sinceId: lastGap.sinceId,\n        });\n      }\n    }\n  }\n}\n\n// Checks if `groups[index-1]` and `groups[index]` are gaps, and merge them in-place if they are\nfunction mergeGapsAround(\n  groups: NotificationGroupsState['groups'],\n  index: number,\n) {\n  if (index > 0) {\n    const potentialFirstGap = groups[index - 1];\n    const potentialSecondGap = groups[index];\n\n    if (\n      potentialFirstGap?.type === 'gap' &&\n      potentialSecondGap?.type === 'gap'\n    ) {\n      groups.splice(index - 1, 2, {\n        type: 'gap',\n        maxId: potentialFirstGap.maxId,\n        sinceId: potentialSecondGap.sinceId,\n      });\n    }\n  }\n}\n\nfunction processNewNotification(\n  groups: NotificationGroupsState['groups'],\n  notification: ApiNotificationJSON,\n) {\n  const existingGroupIndex = groups.findIndex(\n    (group) =>\n      group.type !== 'gap' && group.group_key === notification.group_key,\n  );\n\n  // In any case, we are going to add a group at the top\n  // If there is currently a gap at the top, now is the time to update it\n  if (groups.length > 0 && groups[0]?.type === 'gap') {\n    groups[0].maxId = notification.id;\n  }\n\n  if (existingGroupIndex > -1) {\n    const existingGroup = groups[existingGroupIndex];\n\n    if (\n      existingGroup &&\n      existingGroup.type !== 'gap' &&\n      !existingGroup.sampleAccountIds.includes(notification.account.id) // This can happen for example if you like, then unlike, then like again the same post\n    ) {\n      // Update the existing group\n      if (\n        existingGroup.sampleAccountIds.unshift(notification.account.id) >\n        NOTIFICATIONS_GROUP_MAX_AVATARS\n      )\n        existingGroup.sampleAccountIds.pop();\n\n      existingGroup.most_recent_notification_id = notification.id;\n      existingGroup.page_max_id = notification.id;\n      existingGroup.latest_page_notification_at = notification.created_at;\n      existingGroup.notifications_count += 1;\n\n      groups.splice(existingGroupIndex, 1);\n      mergeGapsAround(groups, existingGroupIndex);\n\n      groups.unshift(existingGroup);\n    }\n  } else {\n    // Create a new group\n    groups.unshift(createNotificationGroupFromNotificationJSON(notification));\n  }\n}\n\nfunction trimNotifications(state: NotificationGroupsState) {\n  if (state.scrolledToTop) {\n    state.groups.splice(NOTIFICATIONS_TRIM_LIMIT);\n  }\n}\n\nfunction shouldMarkNewNotificationsAsRead(\n  {\n    isTabVisible,\n    scrolledToTop,\n    mounted,\n    lastReadId,\n    groups,\n  }: NotificationGroupsState,\n  ignoreScroll = false,\n) {\n  const isMounted = mounted > 0;\n  const oldestGroup = groups.findLast(isNotificationGroup);\n  const hasMore = groups.at(-1)?.type === 'gap';\n  const oldestGroupReached =\n    !hasMore ||\n    lastReadId === '0' ||\n    (oldestGroup?.page_min_id &&\n      compareId(oldestGroup.page_min_id, lastReadId) <= 0);\n\n  return (\n    isTabVisible &&\n    (ignoreScroll || scrolledToTop) &&\n    isMounted &&\n    oldestGroupReached\n  );\n}\n\nfunction updateLastReadId(\n  state: NotificationGroupsState,\n  group: NotificationGroup | undefined = undefined,\n) {\n  if (shouldMarkNewNotificationsAsRead(state)) {\n    group = group ?? state.groups.find(isNotificationGroup);\n    if (\n      group?.page_max_id &&\n      compareId(state.lastReadId, group.page_max_id) < 0\n    )\n      state.lastReadId = group.page_max_id;\n  }\n}\n\nexport const notificationGroupsReducer = createReducer<NotificationGroupsState>(\n  initialState,\n  (builder) => {\n    builder\n      .addCase(fetchNotifications.fulfilled, (state, action) => {\n        state.groups = action.payload.map((json) =>\n          json.type === 'gap' ? json : createNotificationGroupFromJSON(json),\n        );\n        state.isLoading = false;\n        updateLastReadId(state);\n      })\n      .addCase(fetchNotificationsGap.fulfilled, (state, action) => {\n        const { notifications } = action.payload;\n\n        // find the gap in the existing notifications\n        const gapIndex = state.groups.findIndex(\n          (groupOrGap) =>\n            groupOrGap.type === 'gap' &&\n            groupOrGap.sinceId === action.meta.arg.gap.sinceId &&\n            groupOrGap.maxId === action.meta.arg.gap.maxId,\n        );\n\n        if (gapIndex < 0)\n          // We do not know where to insert, let's return\n          return;\n\n        // Filling a disconnection gap means we're getting historical data\n        // about groups we may know or may not know about.\n\n        // The notifications timeline is split in two by the gap, with\n        // group information newer than the gap, and group information older\n        // than the gap.\n\n        // Filling a gap should not touch anything before the gap, so any\n        // information on groups already appearing before the gap should be\n        // discarded, while any information on groups appearing after the gap\n        // can be updated and re-ordered.\n\n        const oldestPageNotification = notifications.at(-1)?.page_min_id;\n\n        // replace the gap with the notifications + a new gap\n\n        const newerGroupKeys = state.groups\n          .slice(0, gapIndex)\n          .filter(isNotificationGroup)\n          .map((group) => group.group_key);\n\n        const toInsert: NotificationGroupsState['groups'] = notifications\n          .map((json) => createNotificationGroupFromJSON(json))\n          .filter(\n            (notification) => !newerGroupKeys.includes(notification.group_key),\n          );\n\n        const apiGroupKeys = (toInsert as NotificationGroup[]).map(\n          (group) => group.group_key,\n        );\n\n        const sinceId = action.meta.arg.gap.sinceId;\n        if (\n          notifications.length > 0 &&\n          !(\n            oldestPageNotification &&\n            sinceId &&\n            compareId(oldestPageNotification, sinceId) <= 0\n          )\n        ) {\n          // If we get an empty page, it means we reached the bottom, so we do not need to insert a new gap\n          // Similarly, if we've fetched more than the gap's, this means we have completely filled it\n          toInsert.push({\n            type: 'gap',\n            maxId: notifications.at(-1)?.page_max_id,\n            sinceId,\n          } as NotificationGap);\n        }\n\n        // Remove older groups covered by the API\n        state.groups = state.groups.filter(\n          (groupOrGap) =>\n            groupOrGap.type !== 'gap' &&\n            !apiGroupKeys.includes(groupOrGap.group_key),\n        );\n\n        // Replace the gap with API results (+ the new gap if needed)\n        state.groups.splice(gapIndex, 1, ...toInsert);\n\n        // Finally, merge any adjacent gaps that could have been created by filtering\n        // groups earlier\n        mergeGaps(state.groups);\n\n        state.isLoading = false;\n\n        updateLastReadId(state);\n      })\n      .addCase(processNewNotificationForGroups.fulfilled, (state, action) => {\n        const notification = action.payload;\n        processNewNotification(\n          usePendingItems ? state.pendingGroups : state.groups,\n          notification,\n        );\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(disconnectTimeline, (state, action) => {\n        if (action.payload.timeline === 'home') {\n          if (state.groups.length > 0 && state.groups[0]?.type !== 'gap') {\n            state.groups.unshift({\n              type: 'gap',\n              sinceId: state.groups[0]?.page_min_id,\n            });\n          }\n        }\n      })\n      .addCase(timelineDelete, (state, action) => {\n        removeNotificationsForStatus(state, action.payload.statusId);\n      })\n      .addCase(clearNotifications.pending, (state) => {\n        state.groups = [];\n        state.pendingGroups = [];\n      })\n      .addCase(blockAccountSuccess, (state, action) => {\n        removeNotificationsForAccounts(state, [action.payload.relationship.id]);\n      })\n      .addCase(muteAccountSuccess, (state, action) => {\n        if (action.payload.relationship.muting_notifications)\n          removeNotificationsForAccounts(state, [\n            action.payload.relationship.id,\n          ]);\n      })\n      .addCase(blockDomainSuccess, (state, action) => {\n        removeNotificationsForAccounts(\n          state,\n          action.payload.accounts.map((account) => account.id),\n        );\n      })\n      .addCase(loadPending, (state) => {\n        // First, remove any existing group and merge data\n        state.pendingGroups.forEach((group) => {\n          if (group.type !== 'gap') {\n            const existingGroupIndex = state.groups.findIndex(\n              (groupOrGap) =>\n                isNotificationGroup(groupOrGap) &&\n                groupOrGap.group_key === group.group_key,\n            );\n            if (existingGroupIndex > -1) {\n              const existingGroup = state.groups[existingGroupIndex];\n              if (existingGroup && existingGroup.type !== 'gap') {\n                group.notifications_count += existingGroup.notifications_count;\n                group.sampleAccountIds = group.sampleAccountIds\n                  .concat(existingGroup.sampleAccountIds)\n                  .slice(0, NOTIFICATIONS_GROUP_MAX_AVATARS);\n                state.groups.splice(existingGroupIndex, 1);\n              }\n            }\n          }\n          trimNotifications(state);\n        });\n\n        // Then build the consolidated list and clear pending groups\n        state.groups = state.pendingGroups.concat(state.groups);\n        state.pendingGroups = [];\n      })\n      .addCase(updateScrollPosition, (state, action) => {\n        state.scrolledToTop = action.payload.top;\n        updateLastReadId(state);\n        trimNotifications(state);\n      })\n      .addCase(markNotificationsAsRead, (state) => {\n        const mostRecentGroup = state.groups.find(isNotificationGroup);\n        if (\n          mostRecentGroup?.page_max_id &&\n          compareId(state.lastReadId, mostRecentGroup.page_max_id) < 0\n        )\n          state.lastReadId = mostRecentGroup.page_max_id;\n      })\n      .addCase(fetchMarkers.fulfilled, (state, action) => {\n        if (\n          action.payload.markers.notifications &&\n          compareId(\n            state.lastReadId,\n            action.payload.markers.notifications.last_read_id,\n          ) < 0\n        )\n          state.lastReadId = action.payload.markers.notifications.last_read_id;\n      })\n      .addCase(mountNotifications, (state) => {\n        state.mounted += 1;\n        updateLastReadId(state);\n      })\n      .addCase(unmountNotifications, (state) => {\n        state.mounted -= 1;\n      })\n      .addCase(focusApp, (state) => {\n        state.isTabVisible = true;\n        updateLastReadId(state);\n      })\n      .addCase(unfocusApp, (state) => {\n        state.isTabVisible = false;\n      })\n      .addMatcher(\n        isAnyOf(authorizeFollowRequestSuccess, rejectFollowRequestSuccess),\n        (state, action) => {\n          removeNotificationsForAccounts(\n            state,\n            [action.payload.id],\n            'follow_request',\n          );\n        },\n      )\n      .addMatcher(\n        isAnyOf(fetchNotifications.pending, fetchNotificationsGap.pending),\n        (state) => {\n          state.isLoading = true;\n        },\n      )\n      .addMatcher(\n        isAnyOf(fetchNotifications.rejected, fetchNotificationsGap.rejected),\n        (state) => {\n          state.isLoading = false;\n        },\n      );\n  },\n);\n","import { createReducer, isAnyOf } from '@reduxjs/toolkit';\n\nimport {\n  fetchNotificationPolicy,\n  decreasePendingNotificationsCount,\n  updateNotificationsPolicy,\n} from 'mastodon/actions/notification_policies';\nimport type { NotificationPolicy } from 'mastodon/models/notification_policy';\n\nexport const notificationPolicyReducer =\n  createReducer<NotificationPolicy | null>(null, (builder) => {\n    builder\n      .addCase(decreasePendingNotificationsCount, (state, action) => {\n        if (state) {\n          state.summary.pending_notifications_count -= action.payload;\n          state.summary.pending_requests_count -= 1;\n        }\n      })\n      .addMatcher(\n        isAnyOf(\n          fetchNotificationPolicy.fulfilled,\n          updateNotificationsPolicy.fulfilled,\n        ),\n        (_state, action) => action.payload,\n      );\n  });\n","import { fromJS, Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks';\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  authorizeFollowRequestSuccess,\n  blockAccountSuccess,\n  muteAccountSuccess,\n  rejectFollowRequestSuccess,\n} from '../actions/accounts';\nimport {\n  focusApp,\n  unfocusApp,\n} from '../actions/app';\nimport {\n  fetchMarkers,\n} from '../actions/markers';\nimport { clearNotifications } from '../actions/notification_groups';\nimport {\n  notificationsUpdate,\n  NOTIFICATIONS_EXPAND_SUCCESS,\n  NOTIFICATIONS_EXPAND_REQUEST,\n  NOTIFICATIONS_EXPAND_FAIL,\n  NOTIFICATIONS_FILTER_SET,\n  NOTIFICATIONS_SCROLL_TOP,\n  NOTIFICATIONS_LOAD_PENDING,\n  NOTIFICATIONS_MOUNT,\n  NOTIFICATIONS_UNMOUNT,\n  NOTIFICATIONS_MARK_AS_READ,\n  NOTIFICATIONS_SET_BROWSER_SUPPORT,\n  NOTIFICATIONS_SET_BROWSER_PERMISSION,\n} from '../actions/notifications';\nimport { disconnectTimeline } from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap({\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n  hasMore: true,\n  top: false,\n  mounted: 0,\n  unread: 0,\n  lastReadId: '0',\n  readMarkerId: '0',\n  isTabVisible: true,\n  isLoading: 0,\n  browserSupport: false,\n  browserPermission: 'default',\n});\n\nexport const notificationToMap = notification => ImmutableMap({\n  id: notification.id,\n  type: notification.type,\n  account: notification.account.id,\n  created_at: notification.created_at,\n  status: notification.status ? notification.status.id : null,\n  report: notification.report ? fromJS(notification.report) : null,\n  event: notification.event ? fromJS(notification.event) : null,\n  moderation_warning: notification.moderation_warning ? fromJS(notification.moderation_warning) : null,\n});\n\nconst normalizeNotification = (state, notification, usePendingItems) => {\n  const top = state.get('top');\n\n  // Under currently unknown conditions, the client may receive duplicates from the server\n  if (state.get('pendingItems').some((item) => item?.get('id') === notification.id) || state.get('items').some((item) => item?.get('id') === notification.id)) {\n    return state;\n  }\n\n  if (usePendingItems || !state.get('pendingItems').isEmpty()) {\n    return state.update('pendingItems', list => list.unshift(notificationToMap(notification))).update('unread', unread => unread + 1);\n  }\n\n  if (shouldCountUnreadNotifications(state)) {\n    state = state.update('unread', unread => unread + 1);\n  } else {\n    state = state.set('lastReadId', notification.id);\n  }\n\n  return state.update('items', list => {\n    if (top && list.size > 40) {\n      list = list.take(20);\n    }\n\n    return list.unshift(notificationToMap(notification));\n  });\n};\n\nconst expandNormalizedNotifications = (state, notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing notifications might be out of order\n  // - the existing notifications may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items\n  // - `notifications` may include items that are already included\n  // - this function can be called either to fill in a gap, or load newer items\n\n  const lastReadId = state.get('lastReadId');\n  const newItems = ImmutableList(notifications.map(notificationToMap));\n\n  return state.withMutations(mutable => {\n    if (!newItems.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mutable.get('pendingItems').isEmpty());\n\n      mutable.update(usePendingItems ? 'pendingItems' : 'items', oldItems => {\n        // If called to poll *new* notifications, we just need to add them on top without duplicates\n        if (isLoadingRecent) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return insertedItems.concat(oldItems);\n        }\n\n        // If called to expand more (presumably older than any known to the WebUI), we just have to\n        // add them to the bottom without duplicates\n        if (isLoadingMore) {\n          const idsToCheck = oldItems.map(item => item?.get('id')).toSet();\n          const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n          return oldItems.concat(insertedItems);\n        }\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is,\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newItems.last()` is the oldest item that was requested and that\n        // there is no “hole” between `newItems.last()` and `newItems.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the notifications that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldItems.findLastIndex(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the notifications that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newItems` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldItems.take(lastIndex).findLastIndex(item => item !== null && compareId(item.get('id'), newItems.first().get('id')) > 0) + 1;\n\n        // At this point:\n        // - no `oldItems` after `firstIndex` is newer than any of the `newItems`\n        // - all `oldItems` after `lastIndex` are older than every of the `newItems`\n        // - it is possible for items in the replaced slice to be older than every `newItems`\n        // - it is possible for items before `firstIndex` to be in the `newItems` range\n        // Therefore:\n        // - to avoid losing items, items from the replaced slice that are older than `newItems`\n        //   should be added in the back.\n        // - to avoid duplicates, `newItems` should be checked the first `firstIndex` items of\n        //   `oldItems`\n        const idsToCheck = oldItems.take(firstIndex).map(item => item?.get('id')).toSet();\n        const insertedItems = newItems.filterNot(item => idsToCheck.includes(item.get('id')));\n        const olderItems = oldItems.slice(firstIndex, lastIndex).filter(item => item !== null && compareId(item.get('id'), newItems.last().get('id')) < 0);\n\n        return oldItems.take(firstIndex).concat(\n          insertedItems,\n          olderItems,\n          oldItems.skip(lastIndex),\n        );\n      });\n    }\n\n    if (!next) {\n      mutable.set('hasMore', false);\n    }\n\n    if (shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), lastReadId) > 0));\n    } else {\n      const mostRecent = newItems.find(item => item !== null);\n      if (mostRecent && compareId(lastReadId, mostRecent.get('id')) < 0) {\n        mutable.set('lastReadId', mostRecent.get('id'));\n      }\n    }\n\n    mutable.update('isLoading', (nbLoading) => nbLoading - 1);\n  });\n};\n\nconst filterNotifications = (state, accountIds, type) => {\n  const helper = list => list.filterNot(item => item !== null && accountIds.includes(item.get('account')) && (type === undefined || type === item.get('type')));\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst clearUnread = (state) => {\n  state = state.set('unread', state.get('pendingItems').size);\n  const lastNotification = state.get('items').find(item => item !== null);\n  return state.set('lastReadId', lastNotification ? lastNotification.get('id') : '0');\n};\n\nconst updateTop = (state, top) => {\n  state = state.set('top', top);\n\n  if (!shouldCountUnreadNotifications(state)) {\n    state = clearUnread(state);\n  }\n\n  return state;\n};\n\nconst deleteByStatus = (state, statusId) => {\n  const lastReadId = state.get('lastReadId');\n\n  if (shouldCountUnreadNotifications(state)) {\n    const deletedUnread = state.get('items').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n    state = state.update('unread', unread => unread - deletedUnread.size);\n  }\n\n  const helper = list => list.filterNot(item => item !== null && item.get('status') === statusId);\n  const deletedUnread = state.get('pendingItems').filter(item => item !== null && item.get('status') === statusId && compareId(item.get('id'), lastReadId) > 0);\n  state = state.update('unread', unread => unread - deletedUnread.size);\n  return state.update('items', helper).update('pendingItems', helper);\n};\n\nconst updateMounted = (state) => {\n  state = state.update('mounted', count => count + 1);\n  if (!shouldCountUnreadNotifications(state, state.get('mounted') === 1)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst updateVisibility = (state, visibility) => {\n  state = state.set('isTabVisible', visibility);\n  if (!shouldCountUnreadNotifications(state)) {\n    state = state.set('readMarkerId', state.get('lastReadId'));\n    state = clearUnread(state);\n  }\n  return state;\n};\n\nconst shouldCountUnreadNotifications = (state, ignoreScroll = false) => {\n  const isTabVisible   = state.get('isTabVisible');\n  const isOnTop        = state.get('top');\n  const isMounted      = state.get('mounted') > 0;\n  const lastReadId     = state.get('lastReadId');\n  const lastItem       = state.get('items').findLast(item => item !== null);\n  const lastItemReached = !state.get('hasMore') || lastReadId === '0' || (lastItem && compareId(lastItem.get('id'), lastReadId) <= 0);\n\n  return !(isTabVisible && (ignoreScroll || isOnTop) && isMounted && lastItemReached);\n};\n\nconst recountUnread = (state, last_read_id) => {\n  return state.withMutations(mutable => {\n    if (compareId(last_read_id, mutable.get('lastReadId')) > 0) {\n      mutable.set('lastReadId', last_read_id);\n    }\n\n    if (compareId(last_read_id, mutable.get('readMarkerId')) > 0) {\n      mutable.set('readMarkerId', last_read_id);\n    }\n\n    if (state.get('unread') > 0 || shouldCountUnreadNotifications(state)) {\n      mutable.set('unread', mutable.get('pendingItems').count(item => item !== null) + mutable.get('items').count(item => item && compareId(item.get('id'), last_read_id) > 0));\n    }\n  });\n};\n\nexport default function notifications(state = initialState, action) {\n  switch(action.type) {\n  case fetchMarkers.fulfilled.type:\n    return action.payload.markers.notifications ? recountUnread(state, action.payload.markers.notifications.last_read_id) : state;\n  case NOTIFICATIONS_MOUNT:\n    return updateMounted(state);\n  case NOTIFICATIONS_UNMOUNT:\n    return state.update('mounted', count => count - 1);\n  case focusApp.type:\n    return updateVisibility(state, true);\n  case unfocusApp.type:\n    return updateVisibility(state, false);\n  case NOTIFICATIONS_LOAD_PENDING:\n    return state.update('items', list => state.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0);\n  case NOTIFICATIONS_EXPAND_REQUEST:\n    return state.update('isLoading', (nbLoading) => nbLoading + 1);\n  case NOTIFICATIONS_EXPAND_FAIL:\n    return state.update('isLoading', (nbLoading) => nbLoading - 1);\n  case NOTIFICATIONS_FILTER_SET:\n    return state.set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('hasMore', true);\n  case NOTIFICATIONS_SCROLL_TOP:\n    return updateTop(state, action.top);\n  case notificationsUpdate.type:\n    return normalizeNotification(state, action.payload.notification, action.payload.usePendingItems);\n  case NOTIFICATIONS_EXPAND_SUCCESS:\n    return expandNormalizedNotifications(state, action.notifications, action.next, action.isLoadingMore, action.isLoadingRecent, action.usePendingItems);\n  case blockAccountSuccess.type:\n    return filterNotifications(state, [action.payload.relationship.id]);\n  case muteAccountSuccess.type:\n    return action.payload.relationship.muting_notifications ? filterNotifications(state, [action.payload.relationship.id]) : state;\n  case blockDomainSuccess.type:\n    return filterNotifications(state, action.payload.accounts);\n  case authorizeFollowRequestSuccess.type:\n  case rejectFollowRequestSuccess.type:\n    return filterNotifications(state, [action.payload.id], 'follow_request');\n  case clearNotifications.pending.type:\n    return state.set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('hasMore', false);\n  case timelineDelete.type:\n    return deleteByStatus(state, action.payload.statusId);\n  case disconnectTimeline.type:\n    return action.payload.timeline === 'home' ?\n      state.update(action.payload.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(null) : items) :\n      state;\n  case NOTIFICATIONS_MARK_AS_READ:\n    const lastNotification = state.get('items').find(item => item !== null);\n    return lastNotification ? recountUnread(state, lastNotification.get('id')) : state;\n  case NOTIFICATIONS_SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case NOTIFICATIONS_SET_BROWSER_PERMISSION:\n    return state.set('browserPermission', action.value);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  NOTIFICATION_REQUESTS_EXPAND_REQUEST,\n  NOTIFICATION_REQUESTS_EXPAND_SUCCESS,\n  NOTIFICATION_REQUESTS_EXPAND_FAIL,\n  NOTIFICATION_REQUESTS_FETCH_REQUEST,\n  NOTIFICATION_REQUESTS_FETCH_SUCCESS,\n  NOTIFICATION_REQUESTS_FETCH_FAIL,\n  NOTIFICATION_REQUEST_FETCH_REQUEST,\n  NOTIFICATION_REQUEST_FETCH_SUCCESS,\n  NOTIFICATION_REQUEST_FETCH_FAIL,\n  NOTIFICATION_REQUEST_ACCEPT_REQUEST,\n  NOTIFICATION_REQUEST_DISMISS_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS,\n  NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS,\n  NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL,\n} from 'mastodon/actions/notifications';\n\nimport { notificationToMap } from './notifications';\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n  next: null,\n  current: ImmutableMap({\n    isLoading: false,\n    item: null,\n    removed: false,\n    notifications: ImmutableMap({\n      items: ImmutableList(),\n      isLoading: false,\n      next: null,\n    }),\n  }),\n});\n\nconst normalizeRequest = request => fromJS({\n  ...request,\n  account: request.account.id,\n});\n\nconst removeRequest = (state, id) => {\n  if (state.getIn(['current', 'item', 'id']) === id) {\n    state = state.setIn(['current', 'removed'], true);\n  }\n\n  return state.update('items', list => list.filterNot(item => item.get('id') === id));\n};\n\nexport const notificationRequestsReducer = (state = initialState, action) => {\n  switch(action.type) {\n  case NOTIFICATION_REQUESTS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', list => ImmutableList(action.requests.map(normalizeRequest)).concat(list));\n      map.set('isLoading', false);\n      map.update('next', next => next ?? action.next);\n    });\n  case NOTIFICATION_REQUESTS_EXPAND_SUCCESS:\n    return state.withMutations(map => {\n      map.update('items', list => list.concat(ImmutableList(action.requests.map(normalizeRequest))));\n      map.set('isLoading', false);\n      map.set('next', action.next);\n    });\n  case NOTIFICATION_REQUESTS_EXPAND_REQUEST:\n  case NOTIFICATION_REQUESTS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case NOTIFICATION_REQUESTS_EXPAND_FAIL:\n  case NOTIFICATION_REQUESTS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case NOTIFICATION_REQUEST_ACCEPT_REQUEST:\n  case NOTIFICATION_REQUEST_DISMISS_REQUEST:\n    return removeRequest(state, action.id);\n  case NOTIFICATION_REQUEST_FETCH_REQUEST:\n    return state.set('current', initialState.get('current').set('isLoading', true));\n  case NOTIFICATION_REQUEST_FETCH_SUCCESS:\n    return state.update('current', map => map.set('isLoading', false).set('item', normalizeRequest(action.request)));\n  case NOTIFICATION_REQUEST_FETCH_FAIL:\n    return state.update('current', map => map.set('isLoading', false));\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST:\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST:\n    return state.setIn(['current', 'notifications', 'isLoading'], true);\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS:\n    return state.updateIn(['current', 'notifications'], map => map.set('isLoading', false).update('items', list => ImmutableList(action.notifications.map(notificationToMap)).concat(list)).update('next', next => next ?? action.next));\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS:\n    return state.updateIn(['current', 'notifications'], map => map.set('isLoading', false).update('items', list => list.concat(ImmutableList(action.notifications.map(notificationToMap)))).set('next', action.next));\n  case NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL:\n  case NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL:\n    return state.setIn(['current', 'notifications', 'isLoading'], false);\n  default:\n    return state;\n  }\n};\n","import type { Reducer } from '@reduxjs/toolkit';\n\nimport {\n  deployPictureInPictureAction,\n  removePictureInPicture,\n} from 'mastodon/actions/picture_in_picture';\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nexport interface PIPMediaProps {\n  src: string;\n  muted: boolean;\n  volume: number;\n  currentTime: number;\n  poster: string;\n  backgroundColor: string;\n  foregroundColor: string;\n  accentColor: string;\n}\n\ninterface PIPStateWithValue extends Partial<PIPMediaProps> {\n  statusId: string;\n  accountId: string;\n  type: 'audio' | 'video';\n}\n\ninterface PIPStateEmpty extends Partial<PIPMediaProps> {\n  type: null;\n}\n\ntype PIPState = PIPStateWithValue | PIPStateEmpty;\n\nconst initialState = {\n  type: null,\n  muted: false,\n  volume: 0,\n  currentTime: 0,\n};\n\nexport const pictureInPictureReducer: Reducer<PIPState> = (\n  state = initialState,\n  action,\n) => {\n  if (deployPictureInPictureAction.match(action))\n    return {\n      statusId: action.payload.statusId,\n      accountId: action.payload.accountId,\n      type: action.payload.playerType,\n      ...action.payload.props,\n    };\n  else if (removePictureInPicture.match(action)) return initialState;\n  else if (timelineDelete.match(action))\n    if (state.type && state.statusId === action.payload.statusId)\n      return initialState;\n\n  return state;\n};\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { POLLS_IMPORT } from 'mastodon/actions/importer';\n\nimport { normalizePollOptionTranslation } from '../actions/importer/normalizer';\nimport { STATUS_TRANSLATE_SUCCESS, STATUS_TRANSLATE_UNDO } from '../actions/statuses';\n\nconst importPolls = (state, polls) => state.withMutations(map => polls.forEach(poll => map.set(poll.id, fromJS(poll))));\n\nconst statusTranslateSuccess = (state, pollTranslation) => {\n  return state.withMutations(map => {\n    if (pollTranslation) {\n      const poll = state.get(pollTranslation.id);\n\n      pollTranslation.options.forEach((item, index) => {\n        map.setIn([pollTranslation.id, 'options', index, 'translation'], fromJS(normalizePollOptionTranslation(item, poll)));\n      });\n    }\n  });\n};\n\nconst statusTranslateUndo = (state, id) => {\n  return state.withMutations(map => {\n    const options = map.getIn([id, 'options']);\n\n    if (options) {\n      options.forEach((item, index) => map.deleteIn([id, 'options', index, 'translation']));\n    }\n  });\n};\n\nconst initialState = ImmutableMap();\n\nexport default function polls(state = initialState, action) {\n  switch(action.type) {\n  case POLLS_IMPORT:\n    return importPolls(state, action.polls);\n  case STATUS_TRANSLATE_SUCCESS:\n    return statusTranslateSuccess(state, action.translation.poll);\n  case STATUS_TRANSLATE_UNDO:\n    return statusTranslateUndo(state, action.pollId);\n  default:\n    return state;\n  }\n}\n","import Immutable from 'immutable';\n\nimport { SET_BROWSER_SUPPORT, SET_SUBSCRIPTION, CLEAR_SUBSCRIPTION, SET_ALERTS } from '../actions/push_notifications';\nimport { STORE_HYDRATE } from '../actions/store';\n\nconst initialState = Immutable.Map({\n  subscription: null,\n  alerts: new Immutable.Map({\n    follow: false,\n    follow_request: false,\n    favourite: false,\n    reblog: false,\n    mention: false,\n    poll: false,\n  }),\n  isSubscribed: false,\n  browserSupport: false,\n});\n\nexport default function push_subscriptions(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE: {\n    const push_subscription = action.state.get('push_subscription');\n\n    if (push_subscription) {\n      return state\n        .set('subscription', new Immutable.Map({\n          id: push_subscription.get('id'),\n          endpoint: push_subscription.get('endpoint'),\n        }))\n        .set('alerts', push_subscription.get('alerts') || initialState.get('alerts'))\n        .set('isSubscribed', true);\n    }\n\n    return state;\n  }\n  case SET_SUBSCRIPTION:\n    return state\n      .set('subscription', new Immutable.Map({\n        id: action.subscription.id,\n        endpoint: action.subscription.endpoint,\n      }))\n      .set('alerts', new Immutable.Map(action.subscription.alerts))\n      .set('isSubscribed', true);\n  case SET_BROWSER_SUPPORT:\n    return state.set('browserSupport', action.value);\n  case CLEAR_SUBSCRIPTION:\n    return initialState;\n  case SET_ALERTS:\n    return state.setIn(action.path, action.value);\n  default:\n    return state;\n  }\n}\n","import type { RecordOf } from 'immutable';\nimport { Record } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\n\ntype RelationshipShape = Required<ApiRelationshipJSON>; // no changes from server shape\nexport type Relationship = RecordOf<RelationshipShape>;\n\nconst RelationshipFactory = Record<RelationshipShape>({\n  blocked_by: false,\n  blocking: false,\n  domain_blocking: false,\n  endorsed: false,\n  followed_by: false,\n  following: false,\n  id: '',\n  languages: null,\n  muting_notifications: false,\n  muting: false,\n  note: '',\n  notifying: false,\n  requested_by: false,\n  requested: false,\n  showing_reblogs: false,\n});\n\nexport function createRelationship(attributes: Partial<RelationshipShape>) {\n  return RelationshipFactory(attributes);\n}\n","import { isFulfilled } from '@reduxjs/toolkit';\nimport type { Reducer } from '@reduxjs/toolkit';\nimport { Map as ImmutableMap } from 'immutable';\n\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\nimport type { Account } from 'mastodon/models/account';\nimport { createRelationship } from 'mastodon/models/relationship';\nimport type { Relationship } from 'mastodon/models/relationship';\n\nimport { submitAccountNote } from '../actions/account_notes';\nimport {\n  followAccountSuccess,\n  unfollowAccountSuccess,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n  followAccountRequest,\n  followAccountFail,\n  unfollowAccountRequest,\n  unfollowAccountFail,\n  blockAccountSuccess,\n  unblockAccountSuccess,\n  muteAccountSuccess,\n  unmuteAccountSuccess,\n  pinAccountSuccess,\n  unpinAccountSuccess,\n  fetchRelationshipsSuccess,\n} from '../actions/accounts_typed';\nimport {\n  blockDomainSuccess,\n  unblockDomainSuccess,\n} from '../actions/domain_blocks_typed';\nimport { notificationsUpdate } from '../actions/notifications_typed';\n\nconst initialState = ImmutableMap<string, Relationship>();\ntype State = typeof initialState;\n\nconst normalizeRelationship = (\n  state: State,\n  relationship: ApiRelationshipJSON,\n) => state.set(relationship.id, createRelationship(relationship));\n\nconst normalizeRelationships = (\n  state: State,\n  relationships: ApiRelationshipJSON[],\n) => {\n  relationships.forEach((relationship) => {\n    state = normalizeRelationship(state, relationship);\n  });\n\n  return state;\n};\n\nconst setDomainBlocking = (\n  state: State,\n  accounts: Account[],\n  blocking: boolean,\n) => {\n  return state.withMutations((map) => {\n    accounts.forEach((id) => {\n      map.setIn([id, 'domain_blocking'], blocking);\n    });\n  });\n};\n\nexport const relationshipsReducer: Reducer<State> = (\n  state = initialState,\n  action,\n) => {\n  if (authorizeFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], true)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (rejectFollowRequestSuccess.match(action))\n    return state\n      .setIn([action.payload.id, 'followed_by'], false)\n      .setIn([action.payload.id, 'requested_by'], false);\n  else if (notificationsUpdate.match(action))\n    return action.payload.notification.type === 'follow_request'\n      ? state.setIn(\n          [action.payload.notification.account.id, 'requested_by'],\n          true,\n        )\n      : state;\n  else if (followAccountRequest.match(action))\n    return state.getIn([action.payload.id, 'following'])\n      ? state\n      : state.setIn(\n          [\n            action.payload.id,\n            action.payload.locked ? 'requested' : 'following',\n          ],\n          true,\n        );\n  else if (followAccountFail.match(action))\n    return state.setIn(\n      [action.payload.id, action.payload.locked ? 'requested' : 'following'],\n      false,\n    );\n  else if (unfollowAccountRequest.match(action))\n    return state.setIn([action.payload.id, 'following'], false);\n  else if (unfollowAccountFail.match(action))\n    return state.setIn([action.payload.id, 'following'], true);\n  else if (\n    followAccountSuccess.match(action) ||\n    unfollowAccountSuccess.match(action) ||\n    blockAccountSuccess.match(action) ||\n    unblockAccountSuccess.match(action) ||\n    muteAccountSuccess.match(action) ||\n    unmuteAccountSuccess.match(action) ||\n    pinAccountSuccess.match(action) ||\n    unpinAccountSuccess.match(action) ||\n    isFulfilled(submitAccountNote)(action)\n  )\n    return normalizeRelationship(state, action.payload.relationship);\n  else if (fetchRelationshipsSuccess.match(action))\n    return normalizeRelationships(state, action.payload.relationships);\n  else if (blockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, true);\n  else if (unblockDomainSuccess.match(action))\n    return setDomainBlocking(state, action.payload.accounts, false);\n  else return state;\n};\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport {\n  COMPOSE_MENTION,\n  COMPOSE_REPLY,\n  COMPOSE_DIRECT,\n} from '../actions/compose';\nimport {\n  SEARCH_CHANGE,\n  SEARCH_CLEAR,\n  SEARCH_FETCH_REQUEST,\n  SEARCH_FETCH_FAIL,\n  SEARCH_FETCH_SUCCESS,\n  SEARCH_SHOW,\n  SEARCH_EXPAND_REQUEST,\n  SEARCH_EXPAND_SUCCESS,\n  SEARCH_EXPAND_FAIL,\n  SEARCH_HISTORY_UPDATE,\n} from '../actions/search';\n\nconst initialState = ImmutableMap({\n  value: '',\n  submitted: false,\n  hidden: false,\n  results: ImmutableMap(),\n  isLoading: false,\n  searchTerm: '',\n  type: null,\n  recent: ImmutableOrderedSet(),\n});\n\nexport default function search(state = initialState, action) {\n  switch(action.type) {\n  case SEARCH_CHANGE:\n    return state.set('value', action.value);\n  case SEARCH_CLEAR:\n    return state.withMutations(map => {\n      map.set('value', '');\n      map.set('results', ImmutableMap());\n      map.set('submitted', false);\n      map.set('hidden', false);\n      map.set('searchTerm', '');\n      map.set('type', null);\n    });\n  case SEARCH_SHOW:\n    return state.set('hidden', false);\n  case COMPOSE_REPLY:\n  case COMPOSE_MENTION:\n  case COMPOSE_DIRECT:\n    return state.set('hidden', true);\n  case SEARCH_FETCH_REQUEST:\n    return state.withMutations(map => {\n      map.set('results', ImmutableMap());\n      map.set('isLoading', true);\n      map.set('submitted', true);\n      map.set('type', action.searchType);\n    });\n  case SEARCH_FETCH_FAIL:\n  case SEARCH_EXPAND_FAIL:\n    return state.set('isLoading', false);\n  case SEARCH_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('results', ImmutableMap({\n        accounts: ImmutableOrderedSet(action.results.accounts.map(item => item.id)),\n        statuses: ImmutableOrderedSet(action.results.statuses.map(item => item.id)),\n        hashtags: ImmutableOrderedSet(fromJS(action.results.hashtags)),\n      }));\n\n      map.set('searchTerm', action.searchTerm);\n      map.set('type', action.searchType);\n      map.set('isLoading', false);\n    });\n  case SEARCH_EXPAND_REQUEST:\n    return state.set('type', action.searchType).set('isLoading', true);\n  case SEARCH_EXPAND_SUCCESS:\n    const results = action.searchType === 'hashtags' ? ImmutableOrderedSet(fromJS(action.results.hashtags)) : action.results[action.searchType].map(item => item.id);\n    return state.updateIn(['results', action.searchType], list => list.union(results)).set('isLoading', false);\n  case SEARCH_HISTORY_UPDATE:\n    return state.set('recent', ImmutableOrderedSet(fromJS(action.recent)));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  SERVER_FETCH_REQUEST,\n  SERVER_FETCH_SUCCESS,\n  SERVER_FETCH_FAIL,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS,\n  SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL,\n  EXTENDED_DESCRIPTION_REQUEST,\n  EXTENDED_DESCRIPTION_SUCCESS,\n  EXTENDED_DESCRIPTION_FAIL,\n  SERVER_DOMAIN_BLOCKS_FETCH_REQUEST,\n  SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS,\n  SERVER_DOMAIN_BLOCKS_FETCH_FAIL,\n} from 'mastodon/actions/server';\n\nconst initialState = ImmutableMap({\n  server: ImmutableMap({\n    isLoading: false,\n  }),\n\n  extendedDescription: ImmutableMap({\n    isLoading: false,\n  }),\n\n  domainBlocks: ImmutableMap({\n    isLoading: false,\n    isAvailable: true,\n    items: ImmutableList(),\n  }),\n});\n\nexport default function server(state = initialState, action) {\n  switch (action.type) {\n  case SERVER_FETCH_REQUEST:\n    return state.setIn(['server', 'isLoading'], true);\n  case SERVER_FETCH_SUCCESS:\n    return state.set('server', fromJS(action.server)).setIn(['server', 'isLoading'], false);\n  case SERVER_FETCH_FAIL:\n    return state.setIn(['server', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_REQUEST:\n    return state.setIn(['translationLanguages', 'isLoading'], true);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_SUCCESS:\n    return state.setIn(['translationLanguages', 'items'], fromJS(action.translationLanguages)).setIn(['translationLanguages', 'isLoading'], false);\n  case SERVER_TRANSLATION_LANGUAGES_FETCH_FAIL:\n    return state.setIn(['translationLanguages', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_REQUEST:\n    return state.setIn(['extendedDescription', 'isLoading'], true);\n  case EXTENDED_DESCRIPTION_SUCCESS:\n    return state.set('extendedDescription', fromJS(action.description)).setIn(['extendedDescription', 'isLoading'], false);\n  case EXTENDED_DESCRIPTION_FAIL:\n    return state.setIn(['extendedDescription', 'isLoading'], false);\n  case SERVER_DOMAIN_BLOCKS_FETCH_REQUEST:\n    return state.setIn(['domainBlocks', 'isLoading'], true);\n  case SERVER_DOMAIN_BLOCKS_FETCH_SUCCESS:\n    return state.setIn(['domainBlocks', 'items'], fromJS(action.blocks)).setIn(['domainBlocks', 'isLoading'], false).setIn(['domainBlocks', 'isAvailable'], action.isAvailable);\n  case SERVER_DOMAIN_BLOCKS_FETCH_FAIL:\n    return state.setIn(['domainBlocks', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { COLUMN_ADD, COLUMN_REMOVE, COLUMN_MOVE, COLUMN_PARAMS_CHANGE } from '../actions/columns';\nimport { EMOJI_USE } from '../actions/emojis';\nimport { LANGUAGE_USE } from '../actions/languages';\nimport { LIST_DELETE_SUCCESS, LIST_FETCH_FAIL } from '../actions/lists';\nimport { NOTIFICATIONS_FILTER_SET } from '../actions/notifications';\nimport { SETTING_CHANGE, SETTING_SAVE } from '../actions/settings';\nimport { STORE_HYDRATE } from '../actions/store';\nimport { uuid } from '../uuid';\n\nconst initialState = ImmutableMap({\n  saved: true,\n\n  skinTone: 1,\n\n  trends: ImmutableMap({\n    show: true,\n  }),\n\n  home: ImmutableMap({\n    shows: ImmutableMap({\n      reblog: true,\n      reply: true,\n    }),\n\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  notifications: ImmutableMap({\n    alerts: ImmutableMap({\n      follow: false,\n      follow_request: false,\n      favourite: false,\n      reblog: false,\n      mention: false,\n      poll: false,\n      status: false,\n      update: false,\n      'admin.sign_up': false,\n      'admin.report': false,\n    }),\n\n    quickFilter: ImmutableMap({\n      active: 'all',\n      show: true,\n      advanced: false,\n    }),\n\n    dismissPermissionBanner: false,\n    showUnread: true,\n    minimizeFilteredBanner: false,\n\n    shows: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n\n    sounds: ImmutableMap({\n      follow: true,\n      follow_request: false,\n      favourite: true,\n      reblog: true,\n      mention: true,\n      poll: true,\n      status: true,\n      update: true,\n      'admin.sign_up': true,\n      'admin.report': true,\n    }),\n  }),\n\n  firehose: ImmutableMap({\n    onlyMedia: false,\n  }),\n\n  community: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  public: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  direct: ImmutableMap({\n    regex: ImmutableMap({\n      body: '',\n    }),\n  }),\n\n  dismissed_banners: ImmutableMap({\n    'public_timeline': false,\n    'community_timeline': false,\n    'home/follow-suggestions': false,\n    'explore/links': false,\n    'explore/statuses': false,\n    'explore/tags': false,\n  }),\n});\n\nconst defaultColumns = fromJS([\n  { id: 'COMPOSE', uuid: uuid(), params: {} },\n  { id: 'HOME', uuid: uuid(), params: {} },\n  { id: 'NOTIFICATIONS', uuid: uuid(), params: {} },\n]);\n\nconst hydrate = (state, settings) => state.mergeDeep(settings).update('columns', (val = defaultColumns) => val);\n\nconst moveColumn = (state, uuid, direction) => {\n  const columns  = state.get('columns');\n  const index    = columns.findIndex(item => item.get('uuid') === uuid);\n  const newIndex = index + direction;\n\n  let newColumns;\n\n  newColumns = columns.splice(index, 1);\n  newColumns = newColumns.splice(newIndex, 0, columns.get(index));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst changeColumnParams = (state, uuid, path, value) => {\n  const columns = state.get('columns');\n  const index   = columns.findIndex(item => item.get('uuid') === uuid);\n\n  const newColumns = columns.update(index, column => column.updateIn(['params', ...path], () => value));\n\n  return state\n    .set('columns', newColumns)\n    .set('saved', false);\n};\n\nconst updateFrequentEmojis = (state, emoji) => state.update('frequentlyUsedEmojis', ImmutableMap(), map => map.update(emoji.id, 0, count => count + 1)).set('saved', false);\n\nconst updateFrequentLanguages = (state, language) => state.update('frequentlyUsedLanguages', ImmutableMap(), map => map.update(language, 0, count => count + 1)).set('saved', false);\n\nconst filterDeadListColumns = (state, listId) => state.update('columns', columns => columns.filterNot(column => column.get('id') === 'LIST' && column.get('params').get('id') === listId));\n\nexport default function settings(state = initialState, action) {\n  switch(action.type) {\n  case STORE_HYDRATE:\n    return hydrate(state, action.state.get('settings'));\n  case NOTIFICATIONS_FILTER_SET:\n  case SETTING_CHANGE:\n    return state\n      .setIn(action.path, action.value)\n      .set('saved', false);\n  case COLUMN_ADD:\n    return state\n      .update('columns', list => list.push(fromJS({ id: action.id, uuid: uuid(), params: action.params })))\n      .set('saved', false);\n  case COLUMN_REMOVE:\n    return state\n      .update('columns', list => list.filterNot(item => item.get('uuid') === action.uuid))\n      .set('saved', false);\n  case COLUMN_MOVE:\n    return moveColumn(state, action.uuid, action.direction);\n  case COLUMN_PARAMS_CHANGE:\n    return changeColumnParams(state, action.uuid, action.path, action.value);\n  case EMOJI_USE:\n    return updateFrequentEmojis(state, action.emoji);\n  case LANGUAGE_USE:\n    return updateFrequentLanguages(state, action.language);\n  case SETTING_SAVE:\n    return state.set('saved', true);\n  case LIST_FETCH_FAIL:\n    return action.error.response.status === 404 ? filterDeadListColumns(state, action.id) : state;\n  case LIST_DELETE_SUCCESS:\n    return filterDeadListColumns(state, action.id);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, OrderedSet as ImmutableOrderedSet } from 'immutable';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n} from '../actions/accounts';\nimport {\n  BOOKMARKED_STATUSES_FETCH_REQUEST,\n  BOOKMARKED_STATUSES_FETCH_SUCCESS,\n  BOOKMARKED_STATUSES_FETCH_FAIL,\n  BOOKMARKED_STATUSES_EXPAND_REQUEST,\n  BOOKMARKED_STATUSES_EXPAND_SUCCESS,\n  BOOKMARKED_STATUSES_EXPAND_FAIL,\n} from '../actions/bookmarks';\nimport {\n  FAVOURITED_STATUSES_FETCH_REQUEST,\n  FAVOURITED_STATUSES_FETCH_SUCCESS,\n  FAVOURITED_STATUSES_FETCH_FAIL,\n  FAVOURITED_STATUSES_EXPAND_REQUEST,\n  FAVOURITED_STATUSES_EXPAND_SUCCESS,\n  FAVOURITED_STATUSES_EXPAND_FAIL,\n} from '../actions/favourites';\nimport {\n  FAVOURITE_SUCCESS,\n  UNFAVOURITE_SUCCESS,\n  BOOKMARK_SUCCESS,\n  UNBOOKMARK_SUCCESS,\n  PIN_SUCCESS,\n  UNPIN_SUCCESS,\n} from '../actions/interactions';\nimport {\n  PINNED_STATUSES_FETCH_SUCCESS,\n} from '../actions/pin_statuses';\nimport {\n  TRENDS_STATUSES_FETCH_REQUEST,\n  TRENDS_STATUSES_FETCH_SUCCESS,\n  TRENDS_STATUSES_FETCH_FAIL,\n  TRENDS_STATUSES_EXPAND_REQUEST,\n  TRENDS_STATUSES_EXPAND_SUCCESS,\n  TRENDS_STATUSES_EXPAND_FAIL,\n} from '../actions/trends';\n\n\n\nconst initialState = ImmutableMap({\n  favourites: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  bookmarks: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  pins: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n  trending: ImmutableMap({\n    next: null,\n    loaded: false,\n    items: ImmutableOrderedSet(),\n  }),\n});\n\nconst normalizeList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('loaded', true);\n    map.set('isLoading', false);\n    map.set('items', ImmutableOrderedSet(statuses.map(item => item.id)));\n  }));\n};\n\nconst appendToList = (state, listType, statuses, next) => {\n  return state.update(listType, listMap => listMap.withMutations(map => {\n    map.set('next', next);\n    map.set('isLoading', false);\n    map.set('items', map.get('items').union(statuses.map(item => item.id)));\n  }));\n};\n\nconst prependOneToList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => {\n    if (list.includes(status.get('id'))) {\n      return list;\n    } else {\n      return ImmutableOrderedSet([status.get('id')]).union(list);\n    }\n  });\n};\n\nconst removeOneFromList = (state, listType, status) => {\n  return state.updateIn([listType, 'items'], (list) => list.delete(status.get('id')));\n};\n\nexport default function statusLists(state = initialState, action) {\n  switch(action.type) {\n  case FAVOURITED_STATUSES_FETCH_REQUEST:\n  case FAVOURITED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['favourites', 'isLoading'], true);\n  case FAVOURITED_STATUSES_FETCH_FAIL:\n  case FAVOURITED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['favourites', 'isLoading'], false);\n  case FAVOURITED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'favourites', action.statuses, action.next);\n  case FAVOURITED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'favourites', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_FETCH_REQUEST:\n  case BOOKMARKED_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['bookmarks', 'isLoading'], true);\n  case BOOKMARKED_STATUSES_FETCH_FAIL:\n  case BOOKMARKED_STATUSES_EXPAND_FAIL:\n    return state.setIn(['bookmarks', 'isLoading'], false);\n  case BOOKMARKED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'bookmarks', action.statuses, action.next);\n  case BOOKMARKED_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'bookmarks', action.statuses, action.next);\n  case TRENDS_STATUSES_FETCH_REQUEST:\n  case TRENDS_STATUSES_EXPAND_REQUEST:\n    return state.setIn(['trending', 'isLoading'], true);\n  case TRENDS_STATUSES_FETCH_FAIL:\n  case TRENDS_STATUSES_EXPAND_FAIL:\n    return state.setIn(['trending', 'isLoading'], false);\n  case TRENDS_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'trending', action.statuses, action.next);\n  case TRENDS_STATUSES_EXPAND_SUCCESS:\n    return appendToList(state, 'trending', action.statuses, action.next);\n  case FAVOURITE_SUCCESS:\n    return prependOneToList(state, 'favourites', action.status);\n  case UNFAVOURITE_SUCCESS:\n    return removeOneFromList(state, 'favourites', action.status);\n  case BOOKMARK_SUCCESS:\n    return prependOneToList(state, 'bookmarks', action.status);\n  case UNBOOKMARK_SUCCESS:\n    return removeOneFromList(state, 'bookmarks', action.status);\n  case PINNED_STATUSES_FETCH_SUCCESS:\n    return normalizeList(state, 'pins', action.statuses, action.next);\n  case PIN_SUCCESS:\n    return prependOneToList(state, 'pins', action.status);\n  case UNPIN_SUCCESS:\n    return removeOneFromList(state, 'pins', action.status);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return state.updateIn(['trending', 'items'], ImmutableOrderedSet(), list => list.filterNot(statusId => action.payload.statuses.getIn([statusId, 'account']) === action.payload.relationship.id));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport { STATUS_IMPORT, STATUSES_IMPORT } from '../actions/importer';\nimport { normalizeStatusTranslation } from '../actions/importer/normalizer';\nimport {\n  FAVOURITE_REQUEST,\n  FAVOURITE_FAIL,\n  UNFAVOURITE_REQUEST,\n  UNFAVOURITE_FAIL,\n  BOOKMARK_REQUEST,\n  BOOKMARK_FAIL,\n  UNBOOKMARK_REQUEST,\n  UNBOOKMARK_FAIL,\n} from '../actions/interactions';\nimport {\n  reblog,\n  unreblog,\n} from '../actions/interactions_typed';\nimport {\n  STATUS_MUTE_SUCCESS,\n  STATUS_UNMUTE_SUCCESS,\n  STATUS_REVEAL,\n  STATUS_HIDE,\n  STATUS_COLLAPSE,\n  STATUS_TRANSLATE_SUCCESS,\n  STATUS_TRANSLATE_UNDO,\n  STATUS_FETCH_REQUEST,\n  STATUS_FETCH_FAIL,\n} from '../actions/statuses';\n\nconst importStatus = (state, status) => state.set(status.id, fromJS(status));\n\nconst importStatuses = (state, statuses) =>\n  state.withMutations(mutable => statuses.forEach(status => importStatus(mutable, status)));\n\nconst deleteStatus = (state, id, references) => {\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, []);\n  });\n\n  return state.delete(id);\n};\n\nconst statusTranslateSuccess = (state, id, translation) => {\n  return state.withMutations(map => {\n    map.setIn([id, 'translation'], fromJS(normalizeStatusTranslation(translation, map.get(id))));\n\n    const list = map.getIn([id, 'media_attachments']);\n    if (translation.media_attachments && list) {\n      translation.media_attachments.forEach(item => {\n        const index = list.findIndex(i => i.get('id') === item.id);\n        map.setIn([id, 'media_attachments', index, 'translation'], fromJS({ description: item.description }));\n      });\n    }\n  });\n};\n\nconst statusTranslateUndo = (state, id) => {\n  return state.withMutations(map => {\n    map.deleteIn([id, 'translation']);\n    map.getIn([id, 'media_attachments']).forEach((item, index) => map.deleteIn([id, 'media_attachments', index, 'translation']));\n  });\n};\n\nconst initialState = ImmutableMap();\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function statuses(state = initialState, action) {\n  switch(action.type) {\n  case STATUS_FETCH_REQUEST:\n    return state.setIn([action.id, 'isLoading'], true);\n  case STATUS_FETCH_FAIL:\n    return state.delete(action.id);\n  case STATUS_IMPORT:\n    return importStatus(state, action.status);\n  case STATUSES_IMPORT:\n    return importStatuses(state, action.statuses);\n  case FAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], true);\n  case FAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_REQUEST:\n    return state.setIn([action.status.get('id'), 'favourited'], false);\n  case UNFAVOURITE_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'favourited'], true);\n  case BOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case BOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_REQUEST:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], false);\n  case UNBOOKMARK_FAIL:\n    return state.get(action.status.get('id')) === undefined ? state : state.setIn([action.status.get('id'), 'bookmarked'], true);\n  case STATUS_MUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], true);\n  case STATUS_UNMUTE_SUCCESS:\n    return state.setIn([action.id, 'muted'], false);\n  case STATUS_REVEAL:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], false);\n        }\n      });\n    });\n  case STATUS_HIDE:\n    return state.withMutations(map => {\n      action.ids.forEach(id => {\n        if (!(state.get(id) === undefined)) {\n          map.setIn([id, 'hidden'], true);\n        }\n      });\n    });\n  case STATUS_COLLAPSE:\n    return state.setIn([action.id, 'collapsed'], action.isCollapsed);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references);\n  case STATUS_TRANSLATE_SUCCESS:\n    return statusTranslateSuccess(state, action.id, action.translation);\n  case STATUS_TRANSLATE_UNDO:\n    return statusTranslateUndo(state, action.id);\n  default:\n    if(reblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else if(reblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.pending.match(action))\n      return state.setIn([action.meta.arg.statusId, 'reblogged'], false);\n    else if(unreblog.rejected.match(action))\n      return state.get(action.meta.arg.statusId) === undefined ? state : state.setIn([action.meta.arg.statusId, 'reblogged'], true);\n    else\n      return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport { blockAccountSuccess, muteAccountSuccess } from 'mastodon/actions/accounts';\nimport { blockDomainSuccess } from 'mastodon/actions/domain_blocks';\n\nimport {\n  SUGGESTIONS_FETCH_REQUEST,\n  SUGGESTIONS_FETCH_SUCCESS,\n  SUGGESTIONS_FETCH_FAIL,\n  SUGGESTIONS_DISMISS,\n} from '../actions/suggestions';\n\n\nconst initialState = ImmutableMap({\n  items: ImmutableList(),\n  isLoading: false,\n});\n\nexport default function suggestionsReducer(state = initialState, action) {\n  switch(action.type) {\n  case SUGGESTIONS_FETCH_REQUEST:\n    return state.set('isLoading', true);\n  case SUGGESTIONS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.set('items', fromJS(action.suggestions.map(x => ({ ...x, account: x.account.id }))));\n      map.set('isLoading', false);\n    });\n  case SUGGESTIONS_FETCH_FAIL:\n    return state.set('isLoading', false);\n  case SUGGESTIONS_DISMISS:\n    return state.update('items', list => list.filterNot(x => x.get('account') === action.id));\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return state.update('items', list => list.filterNot(x => x.get('account') === action.payload.relationship.id));\n  case blockDomainSuccess.type:\n    return state.update('items', list => list.filterNot(x => action.payload.accounts.includes(x.get('account'))));\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, fromJS } from 'immutable';\n\nimport {\n  HASHTAG_FETCH_SUCCESS,\n  HASHTAG_FOLLOW_REQUEST,\n  HASHTAG_FOLLOW_FAIL,\n  HASHTAG_UNFOLLOW_REQUEST,\n  HASHTAG_UNFOLLOW_FAIL,\n} from 'mastodon/actions/tags';\n\nconst initialState = ImmutableMap();\n\nexport default function tags(state = initialState, action) {\n  switch(action.type) {\n  case HASHTAG_FETCH_SUCCESS:\n    return state.set(action.name, fromJS(action.tag));\n  case HASHTAG_FOLLOW_REQUEST:\n  case HASHTAG_UNFOLLOW_FAIL:\n    return state.setIn([action.name, 'following'], true);\n  case HASHTAG_FOLLOW_FAIL:\n  case HASHTAG_UNFOLLOW_REQUEST:\n    return state.setIn([action.name, 'following'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, OrderedSet as ImmutableOrderedSet, fromJS } from 'immutable';\n\nimport { timelineDelete } from 'mastodon/actions/timelines_typed';\n\nimport {\n  blockAccountSuccess,\n  muteAccountSuccess,\n  unfollowAccountSuccess\n} from '../actions/accounts';\nimport {\n  TIMELINE_UPDATE,\n  TIMELINE_CLEAR,\n  TIMELINE_EXPAND_SUCCESS,\n  TIMELINE_EXPAND_REQUEST,\n  TIMELINE_EXPAND_FAIL,\n  TIMELINE_SCROLL_TOP,\n  TIMELINE_CONNECT,\n  TIMELINE_LOAD_PENDING,\n  TIMELINE_MARK_AS_PARTIAL,\n  TIMELINE_INSERT,\n  TIMELINE_GAP,\n  TIMELINE_SUGGESTIONS,\n  disconnectTimeline,\n} from '../actions/timelines';\nimport { compareId } from '../compare_id';\n\nconst initialState = ImmutableMap();\n\nconst initialTimeline = ImmutableMap({\n  unread: 0,\n  online: false,\n  top: true,\n  isLoading: false,\n  hasMore: true,\n  pendingItems: ImmutableList(),\n  items: ImmutableList(),\n});\n\nconst isPlaceholder = value => value === TIMELINE_GAP || value === TIMELINE_SUGGESTIONS;\n\nconst expandNormalizedTimeline = (state, timeline, statuses, next, isPartial, isLoadingRecent, usePendingItems) => {\n  // This method is pretty tricky because:\n  // - existing items in the timeline might be out of order\n  // - the existing timeline may have gaps, most often explicitly noted with a `null` item\n  // - ideally, we don't want it to reorder existing items of the timeline\n  // - `statuses` may include items that are already included in the timeline\n  // - this function can be called either to fill in a gap, or load newer items\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    mMap.set('isLoading', false);\n    mMap.set('isPartial', isPartial);\n\n    if (!next && !isLoadingRecent) mMap.set('hasMore', false);\n\n    if (timeline.endsWith(':pinned')) {\n      mMap.set('items', statuses.map(status => status.get('id')));\n    } else if (!statuses.isEmpty()) {\n      usePendingItems = isLoadingRecent && (usePendingItems || !mMap.get('pendingItems').isEmpty());\n\n      mMap.update(usePendingItems ? 'pendingItems' : 'items', ImmutableList(), oldIds => {\n        const newIds = statuses.map(status => status.get('id'));\n\n        // Now this gets tricky, as we don't necessarily know for sure where the gap to fill is\n        // and some items in the timeline may not be properly ordered.\n\n        // However, we know that `newIds.last()` is the oldest item that was requested and that\n        // there is no “hole” between `newIds.last()` and `newIds.first()`.\n\n        // First, find the furthest (if properly sorted, oldest) item in the timeline that is\n        // newer than the oldest fetched one, as it's most likely that it delimits the gap.\n        // Start the gap *after* that item.\n        const lastIndex = oldIds.findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.last()) >= 0) + 1;\n\n        // Then, try to find the furthest (if properly sorted, oldest) item in the timeline that\n        // is newer than the most recent fetched one, as it delimits a section comprised of only\n        // items older or within `newIds` (or that were deleted from the server, so should be removed\n        // anyway).\n        // Stop the gap *after* that item.\n        const firstIndex = oldIds.take(lastIndex).findLastIndex(id => !isPlaceholder(id) && compareId(id, newIds.first()) > 0) + 1;\n\n        let insertedIds = ImmutableOrderedSet(newIds).withMutations(insertedIds => {\n          // It is possible, though unlikely, that the slice we are replacing contains items older\n          // than the elements we got from the API. Get them and add them back at the back of the\n          // slice.\n          const olderIds = oldIds.slice(firstIndex, lastIndex).filter(id => !isPlaceholder(id) && compareId(id, newIds.last()) < 0);\n          insertedIds.union(olderIds);\n\n          // Make sure we aren't inserting duplicates\n          insertedIds.subtract(oldIds.take(firstIndex), oldIds.skip(lastIndex));\n        }).toList();\n\n        // Finally, insert a gap marker if the data is marked as partial by the server\n        if (isPartial && (firstIndex === 0 || oldIds.get(firstIndex - 1) !== TIMELINE_GAP)) {\n          insertedIds = insertedIds.unshift(TIMELINE_GAP);\n        }\n\n        return oldIds.take(firstIndex).concat(\n          insertedIds,\n          oldIds.skip(lastIndex),\n        );\n      });\n    }\n  }));\n};\n\nconst updateTimeline = (state, timeline, status, usePendingItems) => {\n  const top = state.getIn([timeline, 'top']);\n\n  if (usePendingItems || !state.getIn([timeline, 'pendingItems']).isEmpty()) {\n    if (state.getIn([timeline, 'pendingItems'], ImmutableList()).includes(status.get('id')) || state.getIn([timeline, 'items'], ImmutableList()).includes(status.get('id'))) {\n      return state;\n    }\n\n    return state.update(timeline, initialTimeline, map => map.update('pendingItems', list => list.unshift(status.get('id'))).update('unread', unread => unread + 1));\n  }\n\n  const ids        = state.getIn([timeline, 'items'], ImmutableList());\n  const includesId = ids.includes(status.get('id'));\n  const unread     = state.getIn([timeline, 'unread'], 0);\n\n  if (includesId) {\n    return state;\n  }\n\n  let newIds = ids;\n\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (!top) mMap.set('unread', unread + 1);\n    if (top && ids.size > 40) newIds = newIds.take(20);\n    mMap.set('items', newIds.unshift(status.get('id')));\n  }));\n};\n\nconst deleteStatus = (state, id, references, exclude_account = null) => {\n  state.keySeq().forEach(timeline => {\n    if (exclude_account === null || (timeline !== `account:${exclude_account}` && !timeline.startsWith(`account:${exclude_account}:`))) {\n      const helper = list => list.filterNot(item => item === id);\n      state = state.updateIn([timeline, 'items'], helper).updateIn([timeline, 'pendingItems'], helper);\n    }\n  });\n\n  // Remove reblogs of deleted status\n  references.forEach(ref => {\n    state = deleteStatus(state, ref, [], exclude_account);\n  });\n\n  return state;\n};\n\nconst clearTimeline = (state, timeline) => {\n  return state.set(timeline, initialTimeline);\n};\n\nconst filterTimelines = (state, relationship, statuses) => {\n  let references;\n\n  statuses.forEach(status => {\n    if (status.get('account') !== relationship.id) {\n      return;\n    }\n\n    references = statuses.filter(item => item.get('reblog') === status.get('id')).map(item => item.get('id')).valueSeq().toJSON();\n    state      = deleteStatus(state, status.get('id'), references, relationship.id);\n  });\n\n  return state;\n};\n\nconst filterTimeline = (timeline, state, relationship, statuses) => {\n  const helper = list => list.filterNot(statusId => statuses.getIn([statusId, 'account']) === relationship.id);\n  return state.updateIn([timeline, 'items'], ImmutableList(), helper).updateIn([timeline, 'pendingItems'], ImmutableList(), helper);\n};\n\nconst updateTop = (state, timeline, top) => {\n  return state.update(timeline, initialTimeline, map => map.withMutations(mMap => {\n    if (top) mMap.set('unread', mMap.get('pendingItems').size);\n    mMap.set('top', top);\n  }));\n};\n\nconst reconnectTimeline = (state, usePendingItems) => {\n  if (state.get('online')) {\n    return state;\n  }\n\n  return state.withMutations(mMap => {\n    mMap.update(usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items);\n    mMap.set('online', true);\n  });\n};\n\nexport default function timelines(state = initialState, action) {\n  switch(action.type) {\n  case TIMELINE_LOAD_PENDING:\n    return state.update(action.timeline, initialTimeline, map =>\n      map.update('items', list => map.get('pendingItems').concat(list.take(40))).set('pendingItems', ImmutableList()).set('unread', 0));\n  case TIMELINE_EXPAND_REQUEST:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', true));\n  case TIMELINE_EXPAND_FAIL:\n    return state.update(action.timeline, initialTimeline, map => map.set('isLoading', false));\n  case TIMELINE_EXPAND_SUCCESS:\n    return expandNormalizedTimeline(state, action.timeline, fromJS(action.statuses), action.next, action.partial, action.isLoadingRecent, action.usePendingItems);\n  case TIMELINE_UPDATE:\n    return updateTimeline(state, action.timeline, fromJS(action.status), action.usePendingItems);\n  case timelineDelete.type:\n    return deleteStatus(state, action.payload.statusId, action.payload.references, action.payload.reblogOf);\n  case TIMELINE_CLEAR:\n    return clearTimeline(state, action.timeline);\n  case blockAccountSuccess.type:\n  case muteAccountSuccess.type:\n    return filterTimelines(state, action.payload.relationship, action.payload.statuses);\n  case unfollowAccountSuccess.type:\n    return filterTimeline('home', state, action.payload.relationship, action.payload.statuses);\n  case TIMELINE_SCROLL_TOP:\n    return updateTop(state, action.timeline, action.top);\n  case TIMELINE_CONNECT:\n    return state.update(action.timeline, initialTimeline, map => reconnectTimeline(map, action.usePendingItems));\n  case disconnectTimeline.type:\n    return state.update(\n      action.payload.timeline,\n      initialTimeline,\n      map => map.set('online', false).update(action.payload.usePendingItems ? 'pendingItems' : 'items', items => items.first() ? items.unshift(TIMELINE_GAP) : items),\n    );\n  case TIMELINE_MARK_AS_PARTIAL:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.set('isPartial', true).set('items', ImmutableList()).set('pendingItems', ImmutableList()).set('unread', 0),\n    );\n  case TIMELINE_INSERT:\n    return state.update(\n      action.timeline,\n      initialTimeline,\n      map => map.update('items', ImmutableList(), list => {\n        if (!list.includes(action.key)) {\n          return list.insert(action.index, action.key);\n        }\n\n        return list;\n      })\n    );\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  TRENDS_TAGS_FETCH_REQUEST,\n  TRENDS_TAGS_FETCH_SUCCESS,\n  TRENDS_TAGS_FETCH_FAIL,\n  TRENDS_LINKS_FETCH_REQUEST,\n  TRENDS_LINKS_FETCH_SUCCESS,\n  TRENDS_LINKS_FETCH_FAIL,\n} from 'mastodon/actions/trends';\n\nconst initialState = ImmutableMap({\n  tags: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n\n  links: ImmutableMap({\n    items: ImmutableList(),\n    isLoading: false,\n  }),\n});\n\nexport default function trendsReducer(state = initialState, action) {\n  switch(action.type) {\n  case TRENDS_TAGS_FETCH_REQUEST:\n    return state.setIn(['tags', 'isLoading'], true);\n  case TRENDS_TAGS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['tags', 'items'], fromJS(action.trends));\n      map.setIn(['tags', 'isLoading'], false);\n    });\n  case TRENDS_TAGS_FETCH_FAIL:\n    return state.setIn(['tags', 'isLoading'], false);\n  case TRENDS_LINKS_FETCH_REQUEST:\n    return state.setIn(['links', 'isLoading'], true);\n  case TRENDS_LINKS_FETCH_SUCCESS:\n    return state.withMutations(map => {\n      map.setIn(['links', 'items'], fromJS(action.trends));\n      map.setIn(['links', 'isLoading'], false);\n    });\n  case TRENDS_LINKS_FETCH_FAIL:\n    return state.setIn(['links', 'isLoading'], false);\n  default:\n    return state;\n  }\n}\n","import { Map as ImmutableMap, List as ImmutableList, fromJS } from 'immutable';\n\nimport {\n  expandDirectory,\n  fetchDirectory\n} from 'mastodon/actions/directory';\nimport {\n  FEATURED_TAGS_FETCH_REQUEST,\n  FEATURED_TAGS_FETCH_SUCCESS,\n  FEATURED_TAGS_FETCH_FAIL,\n} from 'mastodon/actions/featured_tags';\n\nimport {\n  FOLLOWERS_FETCH_REQUEST,\n  FOLLOWERS_FETCH_SUCCESS,\n  FOLLOWERS_FETCH_FAIL,\n  FOLLOWERS_EXPAND_REQUEST,\n  FOLLOWERS_EXPAND_SUCCESS,\n  FOLLOWERS_EXPAND_FAIL,\n  FOLLOWING_FETCH_REQUEST,\n  FOLLOWING_FETCH_SUCCESS,\n  FOLLOWING_FETCH_FAIL,\n  FOLLOWING_EXPAND_REQUEST,\n  FOLLOWING_EXPAND_SUCCESS,\n  FOLLOWING_EXPAND_FAIL,\n  FOLLOW_REQUESTS_FETCH_REQUEST,\n  FOLLOW_REQUESTS_FETCH_SUCCESS,\n  FOLLOW_REQUESTS_FETCH_FAIL,\n  FOLLOW_REQUESTS_EXPAND_REQUEST,\n  FOLLOW_REQUESTS_EXPAND_SUCCESS,\n  FOLLOW_REQUESTS_EXPAND_FAIL,\n  authorizeFollowRequestSuccess,\n  rejectFollowRequestSuccess,\n} from '../actions/accounts';\nimport {\n  BLOCKS_FETCH_REQUEST,\n  BLOCKS_FETCH_SUCCESS,\n  BLOCKS_FETCH_FAIL,\n  BLOCKS_EXPAND_REQUEST,\n  BLOCKS_EXPAND_SUCCESS,\n  BLOCKS_EXPAND_FAIL,\n} from '../actions/blocks';\nimport {\n  REBLOGS_FETCH_REQUEST,\n  REBLOGS_FETCH_SUCCESS,\n  REBLOGS_FETCH_FAIL,\n  REBLOGS_EXPAND_REQUEST,\n  REBLOGS_EXPAND_SUCCESS,\n  REBLOGS_EXPAND_FAIL,\n  FAVOURITES_FETCH_REQUEST,\n  FAVOURITES_FETCH_SUCCESS,\n  FAVOURITES_FETCH_FAIL,\n  FAVOURITES_EXPAND_REQUEST,\n  FAVOURITES_EXPAND_SUCCESS,\n  FAVOURITES_EXPAND_FAIL,\n} from '../actions/interactions';\nimport {\n  MUTES_FETCH_REQUEST,\n  MUTES_FETCH_SUCCESS,\n  MUTES_FETCH_FAIL,\n  MUTES_EXPAND_REQUEST,\n  MUTES_EXPAND_SUCCESS,\n  MUTES_EXPAND_FAIL,\n} from '../actions/mutes';\nimport { notificationsUpdate } from '../actions/notifications';\n\nconst initialListState = ImmutableMap({\n  next: null,\n  isLoading: false,\n  items: ImmutableList(),\n});\n\nconst initialState = ImmutableMap({\n  followers: initialListState,\n  following: initialListState,\n  reblogged_by: initialListState,\n  favourited_by: initialListState,\n  follow_requests: initialListState,\n  blocks: initialListState,\n  mutes: initialListState,\n  featured_tags: initialListState,\n});\n\nconst normalizeList = (state, path, accounts, next) => {\n  return state.setIn(path, ImmutableMap({\n    next,\n    items: ImmutableList(accounts.map(item => item.id)),\n    isLoading: false,\n  }));\n};\n\nconst appendToList = (state, path, accounts, next) => {\n  return state.updateIn(path, map => {\n    return map.set('next', next).set('isLoading', false).update('items', list => list.concat(accounts.map(item => item.id)));\n  });\n};\n\nconst normalizeFollowRequest = (state, notification) => {\n  return state.updateIn(['follow_requests', 'items'], list => {\n    return list.filterNot(item => item === notification.account.id).unshift(notification.account.id);\n  });\n};\n\nconst normalizeFeaturedTag = (featuredTags, accountId) => {\n  const normalizeFeaturedTag = { ...featuredTags, accountId: accountId };\n  return fromJS(normalizeFeaturedTag);\n};\n\nconst normalizeFeaturedTags = (state, path, featuredTags, accountId) => {\n  return state.setIn(path, ImmutableMap({\n    items: ImmutableList(featuredTags.map(featuredTag => normalizeFeaturedTag(featuredTag, accountId)).sort((a, b) => b.get('statuses_count') - a.get('statuses_count'))),\n    isLoading: false,\n  }));\n};\n\n/** @type {import('@reduxjs/toolkit').Reducer<typeof initialState>} */\nexport default function userLists(state = initialState, action) {\n  switch(action.type) {\n  case FOLLOWERS_FETCH_SUCCESS:\n    return normalizeList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_EXPAND_SUCCESS:\n    return appendToList(state, ['followers', action.id], action.accounts, action.next);\n  case FOLLOWERS_FETCH_REQUEST:\n  case FOLLOWERS_EXPAND_REQUEST:\n    return state.setIn(['followers', action.id, 'isLoading'], true);\n  case FOLLOWERS_FETCH_FAIL:\n  case FOLLOWERS_EXPAND_FAIL:\n    return state.setIn(['followers', action.id, 'isLoading'], false);\n  case FOLLOWING_FETCH_SUCCESS:\n    return normalizeList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_EXPAND_SUCCESS:\n    return appendToList(state, ['following', action.id], action.accounts, action.next);\n  case FOLLOWING_FETCH_REQUEST:\n  case FOLLOWING_EXPAND_REQUEST:\n    return state.setIn(['following', action.id, 'isLoading'], true);\n  case FOLLOWING_FETCH_FAIL:\n  case FOLLOWING_EXPAND_FAIL:\n    return state.setIn(['following', action.id, 'isLoading'], false);\n  case REBLOGS_FETCH_SUCCESS:\n    return normalizeList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_EXPAND_SUCCESS:\n    return appendToList(state, ['reblogged_by', action.id], action.accounts, action.next);\n  case REBLOGS_FETCH_REQUEST:\n  case REBLOGS_EXPAND_REQUEST:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], true);\n  case REBLOGS_FETCH_FAIL:\n  case REBLOGS_EXPAND_FAIL:\n    return state.setIn(['reblogged_by', action.id, 'isLoading'], false);\n  case FAVOURITES_FETCH_SUCCESS:\n    return normalizeList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_EXPAND_SUCCESS:\n    return appendToList(state, ['favourited_by', action.id], action.accounts, action.next);\n  case FAVOURITES_FETCH_REQUEST:\n  case FAVOURITES_EXPAND_REQUEST:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], true);\n  case FAVOURITES_FETCH_FAIL:\n  case FAVOURITES_EXPAND_FAIL:\n    return state.setIn(['favourited_by', action.id, 'isLoading'], false);\n  case notificationsUpdate.type:\n    return action.payload.notification.type === 'follow_request' ? normalizeFollowRequest(state, action.payload.notification) : state;\n  case FOLLOW_REQUESTS_FETCH_SUCCESS:\n    return normalizeList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_EXPAND_SUCCESS:\n    return appendToList(state, ['follow_requests'], action.accounts, action.next);\n  case FOLLOW_REQUESTS_FETCH_REQUEST:\n  case FOLLOW_REQUESTS_EXPAND_REQUEST:\n    return state.setIn(['follow_requests', 'isLoading'], true);\n  case FOLLOW_REQUESTS_FETCH_FAIL:\n  case FOLLOW_REQUESTS_EXPAND_FAIL:\n    return state.setIn(['follow_requests', 'isLoading'], false);\n  case authorizeFollowRequestSuccess.type:\n  case rejectFollowRequestSuccess.type:\n    return state.updateIn(['follow_requests', 'items'], list => list.filterNot(item => item === action.payload.id));\n  case BLOCKS_FETCH_SUCCESS:\n    return normalizeList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_EXPAND_SUCCESS:\n    return appendToList(state, ['blocks'], action.accounts, action.next);\n  case BLOCKS_FETCH_REQUEST:\n  case BLOCKS_EXPAND_REQUEST:\n    return state.setIn(['blocks', 'isLoading'], true);\n  case BLOCKS_FETCH_FAIL:\n  case BLOCKS_EXPAND_FAIL:\n    return state.setIn(['blocks', 'isLoading'], false);\n  case MUTES_FETCH_SUCCESS:\n    return normalizeList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_EXPAND_SUCCESS:\n    return appendToList(state, ['mutes'], action.accounts, action.next);\n  case MUTES_FETCH_REQUEST:\n  case MUTES_EXPAND_REQUEST:\n    return state.setIn(['mutes', 'isLoading'], true);\n  case MUTES_FETCH_FAIL:\n  case MUTES_EXPAND_FAIL:\n    return state.setIn(['mutes', 'isLoading'], false);\n  case FEATURED_TAGS_FETCH_SUCCESS:\n    return normalizeFeaturedTags(state, ['featured_tags', action.id], action.tags, action.id);\n  case FEATURED_TAGS_FETCH_REQUEST:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], true);\n  case FEATURED_TAGS_FETCH_FAIL:\n    return state.setIn(['featured_tags', action.id, 'isLoading'], false);\n  default:\n    if(fetchDirectory.fulfilled.match(action))\n      return normalizeList(state, ['directory'], action.payload.accounts, undefined);\n    else if( expandDirectory.fulfilled.match(action))\n      return appendToList(state, ['directory'], action.payload.accounts, undefined);\n    else if(fetchDirectory.pending.match(action) ||\n     expandDirectory.pending.match(action))\n      return state.setIn(['directory', 'isLoading'], true);\n    else if(fetchDirectory.rejected.match(action) ||\n     expandDirectory.rejected.match(action))\n      return state.setIn(['directory', 'isLoading'], false);\n    else\n      return state;\n  }\n}\n","import { Record as ImmutableRecord } from 'immutable';\n\nimport { loadingBarReducer } from 'react-redux-loading-bar';\nimport { combineReducers } from 'redux-immutable';\n\nimport { accountsReducer } from './accounts';\nimport accounts_map from './accounts_map';\nimport alerts from './alerts';\nimport announcements from './announcements';\nimport compose from './compose';\nimport contexts from './contexts';\nimport conversations from './conversations';\nimport custom_emojis from './custom_emojis';\nimport domain_lists from './domain_lists';\nimport { dropdownMenuReducer } from './dropdown_menu';\nimport filters from './filters';\nimport followed_tags from './followed_tags';\nimport height_cache from './height_cache';\nimport history from './history';\nimport listAdder from './list_adder';\nimport listEditor from './list_editor';\nimport lists from './lists';\nimport { markersReducer } from './markers';\nimport media_attachments from './media_attachments';\nimport meta from './meta';\nimport { modalReducer } from './modal';\nimport { notificationGroupsReducer } from './notification_groups';\nimport { notificationPolicyReducer } from './notification_policy';\nimport { notificationRequestsReducer } from './notification_requests';\nimport notifications from './notifications';\nimport { pictureInPictureReducer } from './picture_in_picture';\nimport polls from './polls';\nimport push_notifications from './push_notifications';\nimport { relationshipsReducer } from './relationships';\nimport search from './search';\nimport server from './server';\nimport settings from './settings';\nimport status_lists from './status_lists';\nimport statuses from './statuses';\nimport suggestions from './suggestions';\nimport tags from './tags';\nimport timelines from './timelines';\nimport trends from './trends';\nimport user_lists from './user_lists';\n\nconst reducers = {\n  announcements,\n  dropdownMenu: dropdownMenuReducer,\n  timelines,\n  meta,\n  alerts,\n  loadingBar: loadingBarReducer,\n  modal: modalReducer,\n  user_lists,\n  domain_lists,\n  status_lists,\n  accounts: accountsReducer,\n  accounts_map,\n  statuses,\n  relationships: relationshipsReducer,\n  settings,\n  push_notifications,\n  server,\n  contexts,\n  compose,\n  search,\n  media_attachments,\n  notifications,\n  notificationGroups: notificationGroupsReducer,\n  height_cache,\n  custom_emojis,\n  lists,\n  listEditor,\n  listAdder,\n  filters,\n  conversations,\n  suggestions,\n  polls,\n  trends,\n  markers: markersReducer,\n  picture_in_picture: pictureInPictureReducer,\n  history,\n  tags,\n  followed_tags,\n  notificationPolicy: notificationPolicyReducer,\n  notificationRequests: notificationRequestsReducer,\n};\n\n// We want the root state to be an ImmutableRecord, which is an object with a defined list of keys,\n// so it is properly typed and keys can be accessed using `state.<key>` syntax.\n// This will allow an easy conversion to a plain object once we no longer call `get` or `getIn` on the root state\n\n// By default with `combineReducers` it is a Collection, so we provide our own implementation to get a Record\nconst initialRootState = Object.fromEntries(\n  Object.entries(reducers).map(([name, reducer]) => [\n    name,\n    reducer(undefined, {\n      // empty action\n    }),\n  ]),\n);\n\nconst RootStateRecord = ImmutableRecord(initialRootState, 'RootState');\n\nconst rootReducer = combineReducers(reducers, RootStateRecord);\n\nexport { rootReducer };\n","import {\n  isAction,\n  isAsyncThunkAction,\n  isRejectedWithValue,\n} from '@reduxjs/toolkit';\nimport type { Action, Middleware } from '@reduxjs/toolkit';\n\nimport type { RootState } from '..';\nimport { showAlertForError } from '../../actions/alerts';\nimport type { AsyncThunkRejectValue } from '../typed_functions';\n\nconst defaultFailSuffix = 'FAIL';\nconst isFailedAction = new RegExp(`${defaultFailSuffix}$`, 'g');\n\ninterface ActionWithMaybeAlertParams extends Action, AsyncThunkRejectValue {}\n\ninterface RejectedAction extends Action {\n  payload: AsyncThunkRejectValue;\n}\n\nfunction isRejectedActionWithPayload(\n  action: unknown,\n): action is RejectedAction {\n  return isAsyncThunkAction(action) && isRejectedWithValue(action);\n}\n\nfunction isActionWithmaybeAlertParams(\n  action: unknown,\n): action is ActionWithMaybeAlertParams {\n  return isAction(action);\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types -- we need to use `{}` here to ensure the dispatch types can be merged\nexport const errorsMiddleware: Middleware<{}, RootState> =\n  ({ dispatch }) =>\n  (next) =>\n  (action) => {\n    if (isRejectedActionWithPayload(action) && !action.payload.skipAlert) {\n      dispatch(\n        showAlertForError(action.payload.error, action.payload.skipNotFound),\n      );\n    } else if (\n      isActionWithmaybeAlertParams(action) &&\n      !action.skipAlert &&\n      action.type.match(isFailedAction)\n    ) {\n      dispatch(showAlertForError(action.error, action.skipNotFound));\n    }\n\n    return next(action);\n  };\n","import {\n  isAsyncThunkAction,\n  isPending as isThunkActionPending,\n  isFulfilled as isThunkActionFulfilled,\n  isRejected as isThunkActionRejected,\n  isAction,\n} from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport { showLoading, hideLoading } from 'react-redux-loading-bar';\n\nimport type { RootState } from '..';\n\ninterface Config {\n  promiseTypeSuffixes?: string[];\n}\n\nconst defaultTypeSuffixes: Config['promiseTypeSuffixes'] = [\n  'PENDING',\n  'FULFILLED',\n  'REJECTED',\n];\n\ninterface ActionWithSkipLoading extends UnknownAction {\n  skipLoading: boolean;\n}\n\nfunction isActionWithSkipLoading(\n  action: unknown,\n): action is ActionWithSkipLoading {\n  return (\n    isAction(action) &&\n    'skipLoading' in action &&\n    typeof action.skipLoading === 'boolean'\n  );\n}\n\nexport const loadingBarMiddleware = (\n  config: Config = {},\n): Middleware<{ skipLoading?: boolean }, RootState> => {\n  const promiseTypeSuffixes = config.promiseTypeSuffixes ?? defaultTypeSuffixes;\n\n  return ({ dispatch }) =>\n    (next) =>\n    (action) => {\n      let isPending = false;\n      let isFulfilled = false;\n      let isRejected = false;\n\n      if (\n        isAsyncThunkAction(action)\n        // TODO: once we get the first use-case for it, add a check for skipLoading\n      ) {\n        if (isThunkActionPending(action)) isPending = true;\n        else if (isThunkActionFulfilled(action)) isFulfilled = true;\n        else if (isThunkActionRejected(action)) isRejected = true;\n      } else if (\n        isActionWithSkipLoading(action) &&\n        !action.skipLoading &&\n        typeof action.type === 'string'\n      ) {\n        const [PENDING, FULFILLED, REJECTED] = promiseTypeSuffixes;\n\n        const isPendingRegexp = new RegExp(`${PENDING}$`, 'g');\n        const isFulfilledRegexp = new RegExp(`${FULFILLED}$`, 'g');\n        const isRejectedRegexp = new RegExp(`${REJECTED}$`, 'g');\n\n        if (action.type.match(isPendingRegexp)) {\n          isPending = true;\n        } else if (action.type.match(isFulfilledRegexp)) {\n          isFulfilled = true;\n        } else if (action.type.match(isRejectedRegexp)) {\n          isRejected = true;\n        }\n      }\n\n      if (isPending) {\n        dispatch(showLoading());\n      } else if (isFulfilled || isRejected) {\n        dispatch(hideLoading());\n      }\n\n      return next(action);\n    };\n};\n","import { isAction } from '@reduxjs/toolkit';\nimport type { Middleware, UnknownAction } from '@reduxjs/toolkit';\n\nimport ready from 'mastodon/ready';\nimport { assetHost } from 'mastodon/utils/config';\n\nimport type { RootState } from '..';\n\ninterface AudioSource {\n  src: string;\n  type: string;\n}\n\ninterface ActionWithMetaSound extends UnknownAction {\n  meta: { sound: string };\n}\n\nfunction isActionWithMetaSound(action: unknown): action is ActionWithMetaSound {\n  return (\n    isAction(action) &&\n    'meta' in action &&\n    typeof action.meta === 'object' &&\n    !!action.meta &&\n    'sound' in action.meta &&\n    typeof action.meta.sound === 'string'\n  );\n}\n\nconst createAudio = (sources: AudioSource[]) => {\n  const audio = new Audio();\n  sources.forEach(({ type, src }) => {\n    const source = document.createElement('source');\n    source.type = type;\n    source.src = src;\n    audio.appendChild(source);\n  });\n  return audio;\n};\n\nconst play = (audio: HTMLAudioElement) => {\n  if (!audio.paused) {\n    audio.pause();\n    if (typeof audio.fastSeek === 'function') {\n      audio.fastSeek(0);\n    } else {\n      audio.currentTime = 0;\n    }\n  }\n\n  void audio.play();\n};\n\nexport const soundsMiddleware = (): Middleware<\n  // eslint-disable-next-line @typescript-eslint/ban-types -- we need to use `{}` here to ensure the dispatch types can be merged\n  {},\n  RootState\n> => {\n  const soundCache: Record<string, HTMLAudioElement> = {};\n\n  void ready(() => {\n    soundCache.boop = createAudio([\n      {\n        src: `${assetHost}/sounds/boop.ogg`,\n        type: 'audio/ogg',\n      },\n      {\n        src: `${assetHost}/sounds/boop.mp3`,\n        type: 'audio/mpeg',\n      },\n    ]);\n  });\n\n  return () => (next) => (action) => {\n    if (isActionWithMetaSound(action)) {\n      const sound = action.meta.sound;\n\n      if (sound) {\n        const s = soundCache[sound];\n        if (s) play(s);\n      }\n    }\n\n    return next(action);\n  };\n};\n","import { configureStore } from '@reduxjs/toolkit';\n\nimport { rootReducer } from '../reducers';\n\nimport { errorsMiddleware } from './middlewares/errors';\nimport { loadingBarMiddleware } from './middlewares/loading_bar';\nimport { soundsMiddleware } from './middlewares/sounds';\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      // In development, Redux Toolkit enables 2 default middlewares to detect\n      // common issues with states. Unfortunately, our use of ImmutableJS for state\n      // triggers both, so lets disable them until our state is fully refactored\n\n      // https://redux-toolkit.js.org/api/serializabilityMiddleware\n      // This checks recursively that every values in the state are serializable in JSON\n      // Which is not the case, as we use ImmutableJS structures, but also File objects\n      serializableCheck: false,\n\n      // https://redux-toolkit.js.org/api/immutabilityMiddleware\n      // This checks recursively if every value in the state is immutable (ie, a JS primitive type)\n      // But this is not the case, as our Root State is an ImmutableJS map, which is an object\n      immutableCheck: false,\n    })\n      .concat(\n        loadingBarMiddleware({\n          promiseTypeSuffixes: ['REQUEST', 'SUCCESS', 'FAIL'],\n        }),\n      )\n      .concat(errorsMiddleware)\n      .concat(soundsMiddleware()),\n});\n\n// Infer the `RootState` and `AppDispatch` types from the store itself\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof store.dispatch;\nexport type GetState = typeof store.getState;\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here due to preval */\n// @preval\n// http://www.unicode.org/Public/emoji/5.0/emoji-test.txt\n// This file contains the compressed version of the emoji data from\n// both emoji_map.json and from emoji-mart's emojiIndex and data objects.\n// It's designed to be emitted in an array format to take up less space\n// over the wire.\n\n// This version comment should be bumped each time the emoji data is changed\n// to ensure that the prevaled file is regenerated by Babel\n// version: 2\n\nconst { emojiIndex } = require('emoji-mart');\nlet data = require('emoji-mart/data/all.json');\nconst { uncompress: emojiMartUncompress } = require('emoji-mart/dist/utils/data');\n\nconst emojiMap = require('./emoji_map.json');\nconst { unicodeToFilename } = require('./unicode_to_filename');\nconst { unicodeToUnifiedName } = require('./unicode_to_unified_name');\n\nif(data.compressed) {\n  data = emojiMartUncompress(data);\n}\n\nconst emojiMartData = data;\n\nconst excluded       = ['®', '©', '™'];\nconst skinTones      = ['🏻', '🏼', '🏽', '🏾', '🏿'];\nconst shortcodeMap   = {};\n\nconst shortCodesToEmojiData = {};\nconst emojisWithoutShortCodes = [];\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.hasOwn(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  shortcodeMap[emoji.native] = emoji.id;\n});\n\nconst stripModifiers = unicode => {\n  skinTones.forEach(tone => {\n    unicode = unicode.replace(tone, '');\n  });\n\n  return unicode;\n};\n\nObject.keys(emojiMap).forEach(key => {\n  if (excluded.includes(key)) {\n    delete emojiMap[key];\n    return;\n  }\n\n  const normalizedKey = stripModifiers(key);\n  let shortcode       = shortcodeMap[normalizedKey];\n\n  if (!shortcode) {\n    shortcode = shortcodeMap[normalizedKey + '\\uFE0F'];\n  }\n\n  const filename = emojiMap[key];\n\n  const filenameData = [key];\n\n  if (unicodeToFilename(key) !== filename) {\n    // filename can't be derived using unicodeToFilename\n    filenameData.push(filename);\n  }\n\n  if (typeof shortcode === 'undefined') {\n    emojisWithoutShortCodes.push(filenameData);\n  } else {\n    if (!Array.isArray(shortCodesToEmojiData[shortcode])) {\n      shortCodesToEmojiData[shortcode] = [[]];\n    }\n\n    shortCodesToEmojiData[shortcode][0].push(filenameData);\n  }\n});\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.hasOwn(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  const { native } = emoji;\n  let { short_names, search, unified } = emojiMartData.emojis[key];\n\n  if (short_names[0] !== key) {\n    throw new Error('The compressor expects the first short_code to be the ' +\n      'key. It may need to be rewritten if the emoji change such that this ' +\n      'is no longer the case.');\n  }\n\n  short_names = short_names.slice(1); // first short name can be inferred from the key\n\n  const searchData = [native, short_names, search];\n\n  if (unicodeToUnifiedName(native) !== unified) {\n    // unified name can't be derived from unicodeToUnifiedName\n    searchData.push(unified);\n  }\n\n  if (!Array.isArray(shortCodesToEmojiData[key])) {\n    shortCodesToEmojiData[key] = [[]];\n  }\n\n  shortCodesToEmojiData[key].push(searchData);\n});\n\n// JSON.parse/stringify is to emulate what @preval is doing and avoid any\n// inconsistent behavior in dev mode\nmodule.exports = JSON.parse(JSON.stringify([\n  shortCodesToEmojiData,\n  /*\n   * The property `skins` is not found in the current context.\n   * This could potentially lead to issues when interacting with modules or data structures\n   * that expect the presence of `skins` property.\n   * Currently, no definitions or references to `skins` property can be found in:\n   * - {@link node_modules/emoji-mart/dist/utils/data.js}\n   * - {@link node_modules/emoji-mart/data/all.json}\n   * - {@link app/javascript/mastodon/features/emoji/emoji_compressed.d.ts#Skins}\n   * Future refactorings or updates should consider adding definitions or handling for `skins` property.\n   */\n  emojiMartData.skins,\n  emojiMartData.categories,\n  emojiMartData.aliases,\n  emojisWithoutShortCodes,\n]));\n","/* eslint-disable import/no-commonjs --\n   We need to use CommonJS here due to preval */\n// @preval\n// http://www.unicode.org/Public/emoji/5.0/emoji-test.txt\n// This file contains the compressed version of the emoji data from\n// both emoji_map.json and from emoji-mart's emojiIndex and data objects.\n// It's designed to be emitted in an array format to take up less space\n// over the wire.\n\n// This version comment should be bumped each time the emoji data is changed\n// to ensure that the prevaled file is regenerated by Babel\n// version: 2\n\nconst { emojiIndex } = require('emoji-mart');\nlet data = require('emoji-mart/data/all.json');\nconst { uncompress: emojiMartUncompress } = require('emoji-mart/dist/utils/data');\n\nconst emojiMap = require('./emoji_map.json');\nconst { unicodeToFilename } = require('./unicode_to_filename');\nconst { unicodeToUnifiedName } = require('./unicode_to_unified_name');\n\nif(data.compressed) {\n  data = emojiMartUncompress(data);\n}\n\nconst emojiMartData = data;\n\nconst excluded       = ['®', '©', '™'];\nconst skinTones      = ['🏻', '🏼', '🏽', '🏾', '🏿'];\nconst shortcodeMap   = {};\n\nconst shortCodesToEmojiData = {};\nconst emojisWithoutShortCodes = [];\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.hasOwn(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  shortcodeMap[emoji.native] = emoji.id;\n});\n\nconst stripModifiers = unicode => {\n  skinTones.forEach(tone => {\n    unicode = unicode.replace(tone, '');\n  });\n\n  return unicode;\n};\n\nObject.keys(emojiMap).forEach(key => {\n  if (excluded.includes(key)) {\n    delete emojiMap[key];\n    return;\n  }\n\n  const normalizedKey = stripModifiers(key);\n  let shortcode       = shortcodeMap[normalizedKey];\n\n  if (!shortcode) {\n    shortcode = shortcodeMap[normalizedKey + '\\uFE0F'];\n  }\n\n  const filename = emojiMap[key];\n\n  const filenameData = [key];\n\n  if (unicodeToFilename(key) !== filename) {\n    // filename can't be derived using unicodeToFilename\n    filenameData.push(filename);\n  }\n\n  if (typeof shortcode === 'undefined') {\n    emojisWithoutShortCodes.push(filenameData);\n  } else {\n    if (!Array.isArray(shortCodesToEmojiData[shortcode])) {\n      shortCodesToEmojiData[shortcode] = [[]];\n    }\n\n    shortCodesToEmojiData[shortcode][0].push(filenameData);\n  }\n});\n\nObject.keys(emojiIndex.emojis).forEach(key => {\n  let emoji = emojiIndex.emojis[key];\n\n  // Emojis with skin tone modifiers are stored like this\n  if (Object.hasOwn(emoji, '1')) {\n    emoji = emoji['1'];\n  }\n\n  const { native } = emoji;\n  let { short_names, search, unified } = emojiMartData.emojis[key];\n\n  if (short_names[0] !== key) {\n    throw new Error('The compressor expects the first short_code to be the ' +\n      'key. It may need to be rewritten if the emoji change such that this ' +\n      'is no longer the case.');\n  }\n\n  short_names = short_names.slice(1); // first short name can be inferred from the key\n\n  const searchData = [native, short_names, search];\n\n  if (unicodeToUnifiedName(native) !== unified) {\n    // unified name can't be derived from unicodeToUnifiedName\n    searchData.push(unified);\n  }\n\n  if (!Array.isArray(shortCodesToEmojiData[key])) {\n    shortCodesToEmojiData[key] = [[]];\n  }\n\n  shortCodesToEmojiData[key].push(searchData);\n});\n\n// JSON.parse/stringify is to emulate what @preval is doing and avoid any\n// inconsistent behavior in dev mode\nmodule.exports = JSON.parse(JSON.stringify([\n  shortCodesToEmojiData,\n  /*\n   * The property `skins` is not found in the current context.\n   * This could potentially lead to issues when interacting with modules or data structures\n   * that expect the presence of `skins` property.\n   * Currently, no definitions or references to `skins` property can be found in:\n   * - {@link node_modules/emoji-mart/dist/utils/data.js}\n   * - {@link node_modules/emoji-mart/data/all.json}\n   * - {@link app/javascript/flavours/glitch/features/emoji/emoji_compressed.d.ts#Skins}\n   * Future refactorings or updates should consider adding definitions or handling for `skins` property.\n   */\n  emojiMartData.skins,\n  emojiMartData.categories,\n  emojiMartData.aliases,\n  emojisWithoutShortCodes,\n]));\n","'use strict';\nvar $ = require('../internals/export');\nvar $findLast = require('../internals/array-iteration-from-last').findLast;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.findLast` method\n// https://tc39.es/ecma262/#sec-array.prototype.findlast\n$({ target: 'Array', proto: true }, {\n  findLast: function findLast(callbackfn /* , that = undefined */) {\n    return $findLast(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\naddToUnscopables('findLast');\n","'use strict';\n// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","'use strict';\nvar isConstructor = require('../internals/is-constructor');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a constructor');\n};\n","\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = {\n  noWobble: { stiffness: 170, damping: 26 }, // the default, if nothing provided\n  gentle: { stiffness: 120, damping: 14 },\n  wobbly: { stiffness: 180, damping: 12 },\n  stiff: { stiffness: 210, damping: 20 }\n};\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.LoadingBar = exports.TERMINATING_ANIMATION_DURATION = exports.ANIMATION_DURATION = exports.PROGRESS_INCREASE = exports.MAX_PROGRESS = exports.UPDATE_TIME = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _loading_bar_ducks = require(\"./loading_bar_ducks\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar UPDATE_TIME = 400;\nexports.UPDATE_TIME = UPDATE_TIME;\nvar MAX_PROGRESS = 99;\nexports.MAX_PROGRESS = MAX_PROGRESS;\nvar PROGRESS_INCREASE = 20;\nexports.PROGRESS_INCREASE = PROGRESS_INCREASE;\nvar ANIMATION_DURATION = UPDATE_TIME * 2;\nexports.ANIMATION_DURATION = ANIMATION_DURATION;\nvar TERMINATING_ANIMATION_DURATION = UPDATE_TIME / 2;\nexports.TERMINATING_ANIMATION_DURATION = TERMINATING_ANIMATION_DURATION;\nvar initialState = {\n  percent: 0,\n  status: 'hidden'\n};\n\nvar LoadingBar = /*#__PURE__*/function (_Component) {\n  _inherits(LoadingBar, _Component);\n\n  var _super = _createSuper(LoadingBar);\n\n  _createClass(LoadingBar, null, [{\n    key: \"shouldStart\",\n    value: function shouldStart(props, state) {\n      return props.loading > 0 && ['hidden', 'stopping'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"shouldStop\",\n    value: function shouldStop(props, state) {\n      return props.loading === 0 && ['starting', 'running'].indexOf(state.status) >= 0;\n    }\n  }, {\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (LoadingBar.shouldStart(nextProps, prevState)) {\n        return {\n          status: 'starting'\n        };\n      }\n\n      if (LoadingBar.shouldStop(nextProps, prevState)) {\n        return {\n          status: 'stopping'\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  function LoadingBar(props) {\n    var _this;\n\n    _classCallCheck(this, LoadingBar);\n\n    _this = _super.call(this, props);\n\n    _this.reset = function () {\n      _this.terminatingAnimationTimeoutId = null;\n\n      _this.setState(initialState);\n    };\n\n    _this.newPercent = function (percent, progressIncrease) {\n      // Use cosine as a smoothing function\n      // It could be any function to slow down progress near the ending 100%\n      var smoothedProgressIncrease = progressIncrease * Math.cos(percent * (Math.PI / 2 / 100));\n      return percent + smoothedProgressIncrease;\n    };\n\n    _this.simulateProgress = function () {\n      _this.setState(function (prevState, _ref) {\n        var maxProgress = _ref.maxProgress,\n            progressIncrease = _ref.progressIncrease;\n        var percent = prevState.percent;\n\n        var newPercent = _this.newPercent(percent, progressIncrease);\n\n        if (newPercent <= maxProgress) {\n          percent = newPercent;\n        }\n\n        return {\n          percent: percent\n        };\n      });\n    };\n\n    _this.state = _objectSpread({}, initialState);\n    return _this;\n  }\n\n  _createClass(LoadingBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var status = this.state.status;\n\n      if (status === 'starting') {\n        this.start();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var status = this.state.status;\n\n      if (prevState.status !== status) {\n        if (status === 'starting') {\n          this.start();\n        }\n\n        if (status === 'stopping') {\n          this.stop();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.progressIntervalId);\n      clearTimeout(this.terminatingAnimationTimeoutId);\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      // There could be previous termination animation going, so we need to\n      // cancel it and forcefully reset the Loading Bar before starting\n      // the progress simulation from 0\n      if (this.terminatingAnimationTimeoutId) {\n        clearTimeout(this.terminatingAnimationTimeoutId);\n        this.reset();\n      }\n\n      var updateTime = this.props.updateTime;\n      this.progressIntervalId = setInterval(this.simulateProgress, updateTime);\n      this.setState({\n        status: 'running'\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var showFastActions = this.props.showFastActions;\n      clearInterval(this.progressIntervalId);\n      this.progressIntervalId = null;\n      var terminatingAnimationDuration = this.isShown() || showFastActions ? TERMINATING_ANIMATION_DURATION : 0;\n      this.terminatingAnimationTimeoutId = setTimeout(this.reset, terminatingAnimationDuration);\n      this.setState({\n        percent: 100\n      });\n    }\n  }, {\n    key: \"isShown\",\n    value: function isShown() {\n      var percent = this.state.percent;\n      return percent > 0 && percent <= 100;\n    }\n  }, {\n    key: \"buildStyle\",\n    value: function buildStyle() {\n      var _this$state = this.state,\n          status = _this$state.status,\n          percent = _this$state.percent;\n      var _this$props = this.props,\n          className = _this$props.className,\n          customStyle = _this$props.style;\n      var animationDuration = status === 'stopping' ? TERMINATING_ANIMATION_DURATION : ANIMATION_DURATION;\n      var style = {\n        width: \"\".concat(percent, \"%\"),\n        transition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        msTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        WebkitTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        MozTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        OTransition: \"width \".concat(animationDuration, \"ms linear 0s\"),\n        willChange: 'width, opacity'\n      }; // Use default styling if there's no CSS class applied\n\n      if (!className) {\n        style.height = '3px';\n        style.backgroundColor = 'red';\n        style.position = 'absolute';\n      }\n\n      if (this.isShown()) {\n        style.opacity = '1';\n      } else {\n        style.opacity = '0';\n      }\n\n      return _objectSpread(_objectSpread({}, style), customStyle);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var status = this.state.status;\n      var _this$props2 = this.props,\n          direction = _this$props2.direction,\n          className = _this$props2.className;\n\n      if (status === 'hidden') {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null);\n      }\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          direction: direction\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: this.buildStyle(),\n        className: className\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          display: 'table',\n          clear: 'both'\n        }\n      }));\n    }\n  }]);\n\n  return LoadingBar;\n}(_react.Component);\n\nexports.LoadingBar = LoadingBar;\nLoadingBar.propTypes = {\n  className: _propTypes.string,\n  direction: _propTypes.string,\n  loading: _propTypes.number,\n  maxProgress: _propTypes.number,\n  progressIncrease: _propTypes.number,\n  scope: _propTypes.string,\n  showFastActions: _propTypes.bool,\n  style: _propTypes.object,\n  updateTime: _propTypes.number\n};\nLoadingBar.defaultProps = {\n  className: '',\n  direction: 'ltr',\n  loading: 0,\n  maxProgress: MAX_PROGRESS,\n  progressIncrease: PROGRESS_INCREASE,\n  scope: _loading_bar_ducks.DEFAULT_SCOPE,\n  showFastActions: false,\n  style: {},\n  updateTime: UPDATE_TIME\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    loading: state.loadingBar[ownProps.scope || _loading_bar_ducks.DEFAULT_SCOPE]\n  };\n};\n\n(0, _reactLifecyclesCompat.polyfill)(LoadingBar);\nvar ConnectedLoadingBar = (0, _reactRedux.connect)(mapStateToProps)(LoadingBar);\nexports[\"default\"] = ConnectedLoadingBar;","'use strict';\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar toPositiveInteger = require('../internals/to-positive-integer');\n\nvar $RangeError = RangeError;\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw new $RangeError('Wrong offset');\n  return offset;\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar slice = uncurryThis(ArrayBuffer.prototype.slice);\n\nmodule.exports = function (O) {\n  if (arrayBufferByteLength(O) !== 0) return false;\n  try {\n    slice(O, 0, 0);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar $TypeError = TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new $TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar isDetached = require('../internals/array-buffer-is-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = global.structuredClone;\nvar ArrayBuffer = global.ArrayBuffer;\nvar DataView = global.DataView;\nvar TypeError = global.TypeError;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  if (isDetached(arrayBuffer)) throw new TypeError('ArrayBuffer is detached');\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/engine-v8-version');\nvar IS_BROWSER = require('../internals/engine-is-browser');\nvar IS_DENO = require('../internals/engine-is-deno');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar structuredClone = global.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((IS_DENO && V8 > 92) || (IS_NODE && V8 > 94) || (IS_BROWSER && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n/* global Deno -- Deno case */\nmodule.exports = typeof Deno == 'object' && Deno && typeof Deno.version == 'object';\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (action) {\n  return action && action.type === '@@redux/INIT' ? 'initialState argument passed to createStore' : 'previous state received by the reducer';\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=getStateName.js.map","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(global, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _SwipeableViews.default;\n  }\n});\nObject.defineProperty(exports, \"SwipeableViewsContext\", {\n  enumerable: true,\n  get: function get() {\n    return _SwipeableViews.SwipeableViewsContext;\n  }\n});\n\nvar _SwipeableViews = _interopRequireWildcard(require(\"./SwipeableViews\"));","function _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nmodule.exports = _interopRequireWildcard;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  RESISTANCE_COEF: 0.6,\n  // This value is closed to what browsers are using internally to\n  // trigger a native scroll.\n  UNCERTAINTY_THRESHOLD: 3 // px\n\n};\nexports.default = _default;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mapToZero = require('./mapToZero');\n\nvar _mapToZero2 = _interopRequireDefault(_mapToZero);\n\nvar _stripStyle = require('./stripStyle');\n\nvar _stripStyle2 = _interopRequireDefault(_stripStyle);\n\nvar _stepper3 = require('./stepper');\n\nvar _stepper4 = _interopRequireDefault(_stepper3);\n\nvar _mergeDiff = require('./mergeDiff');\n\nvar _mergeDiff2 = _interopRequireDefault(_mergeDiff);\n\nvar _performanceNow = require('performance-now');\n\nvar _performanceNow2 = _interopRequireDefault(_performanceNow);\n\nvar _raf = require('raf');\n\nvar _raf2 = _interopRequireDefault(_raf);\n\nvar _shouldStopAnimation = require('./shouldStopAnimation');\n\nvar _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar msPerFrame = 1000 / 60;\n\n// the children function & (potential) styles function asks as param an\n// Array<TransitionPlainStyle>, where each TransitionPlainStyle is of the format\n// {key: string, data?: any, style: PlainStyle}. However, the way we keep\n// internal states doesn't contain such a data structure (check the state and\n// TransitionMotionState). So when children function and others ask for such\n// data we need to generate them on the fly by combining mergedPropsStyles and\n// currentStyles/lastIdealStyles\nfunction rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {\n  // Copy the value to a `const` so that Flow understands that the const won't\n  // change and will be non-nullable in the callback below.\n  var cUnreadPropStyles = unreadPropStyles;\n  if (cUnreadPropStyles == null) {\n    return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n      return {\n        key: mergedPropsStyle.key,\n        data: mergedPropsStyle.data,\n        style: plainStyles[i]\n      };\n    });\n  }\n  return mergedPropsStyles.map(function (mergedPropsStyle, i) {\n    for (var j = 0; j < cUnreadPropStyles.length; j++) {\n      if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {\n        return {\n          key: cUnreadPropStyles[j].key,\n          data: cUnreadPropStyles[j].data,\n          style: plainStyles[i]\n        };\n      }\n    }\n    return { key: mergedPropsStyle.key, data: mergedPropsStyle.data, style: plainStyles[i] };\n  });\n}\n\nfunction shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {\n  if (mergedPropsStyles.length !== destStyles.length) {\n    return false;\n  }\n\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (mergedPropsStyles[i].key !== destStyles[i].key) {\n      return false;\n    }\n  }\n\n  // we have the invariant that mergedPropsStyles and\n  // currentStyles/currentVelocities/last* are synced in terms of cells, see\n  // mergeAndSync comment for more info\n  for (var i = 0; i < mergedPropsStyles.length; i++) {\n    if (!_shouldStopAnimation2['default'](currentStyles[i], destStyles[i].style, currentVelocities[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n// core key merging logic\n\n// things to do: say previously merged style is {a, b}, dest style (prop) is {b,\n// c}, previous current (interpolating) style is {a, b}\n// **invariant**: current[i] corresponds to merged[i] in terms of key\n\n// steps:\n// turn merged style into {a?, b, c}\n//    add c, value of c is destStyles.c\n//    maybe remove a, aka call willLeave(a), then merged is either {b, c} or {a, b, c}\n// turn current (interpolating) style from {a, b} into {a?, b, c}\n//    maybe remove a\n//    certainly add c, value of c is willEnter(c)\n// loop over merged and construct new current\n// dest doesn't change, that's owner's\nfunction mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {\n  var newMergedPropsStyles = _mergeDiff2['default'](oldMergedPropsStyles, destStyles, function (oldIndex, oldMergedPropsStyle) {\n    var leavingStyle = willLeave(oldMergedPropsStyle);\n    if (leavingStyle == null) {\n      didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });\n      return null;\n    }\n    if (_shouldStopAnimation2['default'](oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {\n      didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });\n      return null;\n    }\n    return { key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data, style: leavingStyle };\n  });\n\n  var newCurrentStyles = [];\n  var newCurrentVelocities = [];\n  var newLastIdealStyles = [];\n  var newLastIdealVelocities = [];\n  for (var i = 0; i < newMergedPropsStyles.length; i++) {\n    var newMergedPropsStyleCell = newMergedPropsStyles[i];\n    var foundOldIndex = null;\n    for (var j = 0; j < oldMergedPropsStyles.length; j++) {\n      if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {\n        foundOldIndex = j;\n        break;\n      }\n    }\n    // TODO: key search code\n    if (foundOldIndex == null) {\n      var plainStyle = willEnter(newMergedPropsStyleCell);\n      newCurrentStyles[i] = plainStyle;\n      newLastIdealStyles[i] = plainStyle;\n\n      var velocity = _mapToZero2['default'](newMergedPropsStyleCell.style);\n      newCurrentVelocities[i] = velocity;\n      newLastIdealVelocities[i] = velocity;\n    } else {\n      newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];\n      newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];\n      newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];\n      newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];\n    }\n  }\n\n  return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];\n}\n\nvar TransitionMotion = (function (_React$Component) {\n  _inherits(TransitionMotion, _React$Component);\n\n  _createClass(TransitionMotion, null, [{\n    key: 'propTypes',\n    value: {\n      defaultStyles: _propTypes2['default'].arrayOf(_propTypes2['default'].shape({\n        key: _propTypes2['default'].string.isRequired,\n        data: _propTypes2['default'].any,\n        style: _propTypes2['default'].objectOf(_propTypes2['default'].number).isRequired\n      })),\n      styles: _propTypes2['default'].oneOfType([_propTypes2['default'].func, _propTypes2['default'].arrayOf(_propTypes2['default'].shape({\n        key: _propTypes2['default'].string.isRequired,\n        data: _propTypes2['default'].any,\n        style: _propTypes2['default'].objectOf(_propTypes2['default'].oneOfType([_propTypes2['default'].number, _propTypes2['default'].object])).isRequired\n      }))]).isRequired,\n      children: _propTypes2['default'].func.isRequired,\n      willEnter: _propTypes2['default'].func,\n      willLeave: _propTypes2['default'].func,\n      didLeave: _propTypes2['default'].func\n    },\n    enumerable: true\n  }, {\n    key: 'defaultProps',\n    value: {\n      willEnter: function willEnter(styleThatEntered) {\n        return _stripStyle2['default'](styleThatEntered.style);\n      },\n      // recall: returning null makes the current unmounting TransitionStyle\n      // disappear immediately\n      willLeave: function willLeave() {\n        return null;\n      },\n      didLeave: function didLeave() {}\n    },\n    enumerable: true\n  }]);\n\n  function TransitionMotion(props) {\n    var _this = this;\n\n    _classCallCheck(this, TransitionMotion);\n\n    _React$Component.call(this, props);\n    this.unmounting = false;\n    this.animationID = null;\n    this.prevTime = 0;\n    this.accumulatedTime = 0;\n    this.unreadPropStyles = null;\n\n    this.clearUnreadPropStyle = function (unreadPropStyles) {\n      var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);\n\n      var mergedPropsStyles = _mergeAndSync[0];\n      var currentStyles = _mergeAndSync[1];\n      var currentVelocities = _mergeAndSync[2];\n      var lastIdealStyles = _mergeAndSync[3];\n      var lastIdealVelocities = _mergeAndSync[4];\n\n      for (var i = 0; i < unreadPropStyles.length; i++) {\n        var unreadPropStyle = unreadPropStyles[i].style;\n        var dirty = false;\n\n        for (var key in unreadPropStyle) {\n          if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {\n            continue;\n          }\n\n          var styleValue = unreadPropStyle[key];\n          if (typeof styleValue === 'number') {\n            if (!dirty) {\n              dirty = true;\n              currentStyles[i] = _extends({}, currentStyles[i]);\n              currentVelocities[i] = _extends({}, currentVelocities[i]);\n              lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);\n              lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);\n              mergedPropsStyles[i] = {\n                key: mergedPropsStyles[i].key,\n                data: mergedPropsStyles[i].data,\n                style: _extends({}, mergedPropsStyles[i].style)\n              };\n            }\n            currentStyles[i][key] = styleValue;\n            currentVelocities[i][key] = 0;\n            lastIdealStyles[i][key] = styleValue;\n            lastIdealVelocities[i][key] = 0;\n            mergedPropsStyles[i].style[key] = styleValue;\n          }\n        }\n      }\n\n      // unlike the other 2 components, we can't detect staleness and optionally\n      // opt out of setState here. each style object's data might contain new\n      // stuff we're not/cannot compare\n      _this.setState({\n        currentStyles: currentStyles,\n        currentVelocities: currentVelocities,\n        mergedPropsStyles: mergedPropsStyles,\n        lastIdealStyles: lastIdealStyles,\n        lastIdealVelocities: lastIdealVelocities\n      });\n    };\n\n    this.startAnimationIfNecessary = function () {\n      if (_this.unmounting) {\n        return;\n      }\n\n      // TODO: when config is {a: 10} and dest is {a: 10} do we raf once and\n      // call cb? No, otherwise accidental parent rerender causes cb trigger\n      _this.animationID = _raf2['default'](function (timestamp) {\n        // https://github.com/chenglou/react-motion/pull/420\n        // > if execution passes the conditional if (this.unmounting), then\n        // executes async defaultRaf and after that component unmounts and after\n        // that the callback of defaultRaf is called, then setState will be called\n        // on unmounted component.\n        if (_this.unmounting) {\n          return;\n        }\n\n        var propStyles = _this.props.styles;\n        var destStyles = typeof propStyles === 'function' ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles;\n\n        // check if we need to animate in the first place\n        if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.accumulatedTime = 0;\n          return;\n        }\n\n        var currentTime = timestamp || _performanceNow2['default']();\n        var timeDelta = currentTime - _this.prevTime;\n        _this.prevTime = currentTime;\n        _this.accumulatedTime = _this.accumulatedTime + timeDelta;\n        // more than 10 frames? prolly switched browser tab. Restart\n        if (_this.accumulatedTime > msPerFrame * 10) {\n          _this.accumulatedTime = 0;\n        }\n\n        if (_this.accumulatedTime === 0) {\n          // no need to cancel animationID here; shouldn't have any in flight\n          _this.animationID = null;\n          _this.startAnimationIfNecessary();\n          return;\n        }\n\n        var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;\n        var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);\n\n        var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);\n\n        var newMergedPropsStyles = _mergeAndSync2[0];\n        var newCurrentStyles = _mergeAndSync2[1];\n        var newCurrentVelocities = _mergeAndSync2[2];\n        var newLastIdealStyles = _mergeAndSync2[3];\n        var newLastIdealVelocities = _mergeAndSync2[4];\n\n        for (var i = 0; i < newMergedPropsStyles.length; i++) {\n          var newMergedPropsStyle = newMergedPropsStyles[i].style;\n          var newCurrentStyle = {};\n          var newCurrentVelocity = {};\n          var newLastIdealStyle = {};\n          var newLastIdealVelocity = {};\n\n          for (var key in newMergedPropsStyle) {\n            if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {\n              continue;\n            }\n\n            var styleValue = newMergedPropsStyle[key];\n            if (typeof styleValue === 'number') {\n              newCurrentStyle[key] = styleValue;\n              newCurrentVelocity[key] = 0;\n              newLastIdealStyle[key] = styleValue;\n              newLastIdealVelocity[key] = 0;\n            } else {\n              var newLastIdealStyleValue = newLastIdealStyles[i][key];\n              var newLastIdealVelocityValue = newLastIdealVelocities[i][key];\n              for (var j = 0; j < framesToCatchUp; j++) {\n                var _stepper = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n                newLastIdealStyleValue = _stepper[0];\n                newLastIdealVelocityValue = _stepper[1];\n              }\n\n              var _stepper2 = _stepper4['default'](msPerFrame / 1000, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);\n\n              var nextIdealX = _stepper2[0];\n              var nextIdealV = _stepper2[1];\n\n              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;\n              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;\n              newLastIdealStyle[key] = newLastIdealStyleValue;\n              newLastIdealVelocity[key] = newLastIdealVelocityValue;\n            }\n          }\n\n          newLastIdealStyles[i] = newLastIdealStyle;\n          newLastIdealVelocities[i] = newLastIdealVelocity;\n          newCurrentStyles[i] = newCurrentStyle;\n          newCurrentVelocities[i] = newCurrentVelocity;\n        }\n\n        _this.animationID = null;\n        // the amount we're looped over above\n        _this.accumulatedTime -= framesToCatchUp * msPerFrame;\n\n        _this.setState({\n          currentStyles: newCurrentStyles,\n          currentVelocities: newCurrentVelocities,\n          lastIdealStyles: newLastIdealStyles,\n          lastIdealVelocities: newLastIdealVelocities,\n          mergedPropsStyles: newMergedPropsStyles\n        });\n\n        _this.unreadPropStyles = null;\n\n        _this.startAnimationIfNecessary();\n      });\n    };\n\n    this.state = this.defaultState();\n  }\n\n  TransitionMotion.prototype.defaultState = function defaultState() {\n    var _props = this.props;\n    var defaultStyles = _props.defaultStyles;\n    var styles = _props.styles;\n    var willEnter = _props.willEnter;\n    var willLeave = _props.willLeave;\n    var didLeave = _props.didLeave;\n\n    var destStyles = typeof styles === 'function' ? styles(defaultStyles) : styles;\n\n    // this is special. for the first time around, we don't have a comparison\n    // between last (no last) and current merged props. we'll compute last so:\n    // say default is {a, b} and styles (dest style) is {b, c}, we'll\n    // fabricate last as {a, b}\n    var oldMergedPropsStyles = undefined;\n    if (defaultStyles == null) {\n      oldMergedPropsStyles = destStyles;\n    } else {\n      oldMergedPropsStyles = defaultStyles.map(function (defaultStyleCell) {\n        // TODO: key search code\n        for (var i = 0; i < destStyles.length; i++) {\n          if (destStyles[i].key === defaultStyleCell.key) {\n            return destStyles[i];\n          }\n        }\n        return defaultStyleCell;\n      });\n    }\n    var oldCurrentStyles = defaultStyles == null ? destStyles.map(function (s) {\n      return _stripStyle2['default'](s.style);\n    }) : defaultStyles.map(function (s) {\n      return _stripStyle2['default'](s.style);\n    });\n    var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function (s) {\n      return _mapToZero2['default'](s.style);\n    }) : defaultStyles.map(function (s) {\n      return _mapToZero2['default'](s.style);\n    });\n\n    var _mergeAndSync3 = mergeAndSync(\n    // Because this is an old-style createReactClass component, Flow doesn't\n    // understand that the willEnter and willLeave props have default values\n    // and will always be present.\n    willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldCurrentStyles, // oldLastIdealStyles really\n    oldCurrentVelocities);\n\n    var mergedPropsStyles = _mergeAndSync3[0];\n    var currentStyles = _mergeAndSync3[1];\n    var currentVelocities = _mergeAndSync3[2];\n    var lastIdealStyles = _mergeAndSync3[3];\n    var lastIdealVelocities = _mergeAndSync3[4];\n    // oldLastIdealVelocities really\n\n    return {\n      currentStyles: currentStyles,\n      currentVelocities: currentVelocities,\n      lastIdealStyles: lastIdealStyles,\n      lastIdealVelocities: lastIdealVelocities,\n      mergedPropsStyles: mergedPropsStyles\n    };\n  };\n\n  // after checking for unreadPropStyles != null, we manually go set the\n  // non-interpolating values (those that are a number, without a spring\n  // config)\n\n  TransitionMotion.prototype.componentDidMount = function componentDidMount() {\n    this.prevTime = _performanceNow2['default']();\n    this.startAnimationIfNecessary();\n  };\n\n  TransitionMotion.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {\n    if (this.unreadPropStyles) {\n      // previous props haven't had the chance to be set yet; set them here\n      this.clearUnreadPropStyle(this.unreadPropStyles);\n    }\n\n    var styles = props.styles;\n    if (typeof styles === 'function') {\n      this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));\n    } else {\n      this.unreadPropStyles = styles;\n    }\n\n    if (this.animationID == null) {\n      this.prevTime = _performanceNow2['default']();\n      this.startAnimationIfNecessary();\n    }\n  };\n\n  TransitionMotion.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.unmounting = true;\n    if (this.animationID != null) {\n      _raf2['default'].cancel(this.animationID);\n      this.animationID = null;\n    }\n  };\n\n  TransitionMotion.prototype.render = function render() {\n    var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);\n    var renderedChildren = this.props.children(hydratedStyles);\n    return renderedChildren && _react2['default'].Children.only(renderedChildren);\n  };\n\n  return TransitionMotion;\n})(_react2['default'].Component);\n\nexports['default'] = TransitionMotion;\nmodule.exports = exports['default'];\n\n// list of styles, each containing interpolating values. Part of what's passed\n// to children function. Notice that this is\n// Array<ActualInterpolatingStyleObject>, without the wrapper that is {key: ...,\n// data: ... style: ActualInterpolatingStyleObject}. Only mergedPropsStyles\n// contains the key & data info (so that we only have a single source of truth\n// for these, and to save space). Check the comment for `rehydrateStyles` to\n// see how we regenerate the entirety of what's passed to children function\n\n// the array that keeps track of currently rendered stuff! Including stuff\n// that you've unmounted but that's still animating. This is where it lives\n\n// it's possible that currentStyle's value is stale: if props is immediately\n// changed from 0 to 400 to spring(0) again, the async currentStyle is still\n// at 0 (didn't have time to tick and interpolate even once). If we naively\n// compare currentStyle with destVal it'll be 0 === 0 (no animation, stop).\n// In reality currentStyle should be 400","/**\n * Tries Notification.requestPermission, console warning instead of rejecting on error.\n * @param callback Runs with the permission result on completion.\n */\nexport const requestNotificationPermission = async (\n  callback: NotificationPermissionCallback,\n) => {\n  try {\n    callback(await Notification.requestPermission());\n  } catch (error) {\n    console.warn(error);\n  }\n};\n","import { IntlMessageFormat } from 'intl-messageformat';\nimport { defineMessages } from 'react-intl';\n\nimport { List as ImmutableList } from 'immutable';\n\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nimport api, { getLinks } from '../api';\nimport { unescapeHTML } from '../utils/html';\nimport { requestNotificationPermission } from '../utils/notifications';\n\nimport { fetchFollowRequests, fetchRelationships } from './accounts';\nimport {\n  importFetchedAccount,\n  importFetchedAccounts,\n  importFetchedStatus,\n  importFetchedStatuses,\n} from './importer';\nimport { submitMarkers } from './markers';\nimport { decreasePendingNotificationsCount } from './notification_policies';\nimport { notificationsUpdate } from \"./notifications_typed\";\nimport { register as registerPushNotifications } from './push_notifications';\nimport { saveSettings } from './settings';\n\nexport * from \"./notifications_typed\";\n\nexport const NOTIFICATIONS_UPDATE_NOOP = 'NOTIFICATIONS_UPDATE_NOOP';\n\nexport const NOTIFICATIONS_EXPAND_REQUEST = 'NOTIFICATIONS_EXPAND_REQUEST';\nexport const NOTIFICATIONS_EXPAND_SUCCESS = 'NOTIFICATIONS_EXPAND_SUCCESS';\nexport const NOTIFICATIONS_EXPAND_FAIL    = 'NOTIFICATIONS_EXPAND_FAIL';\n\nexport const NOTIFICATIONS_FILTER_SET = 'NOTIFICATIONS_FILTER_SET';\n\nexport const NOTIFICATIONS_SCROLL_TOP   = 'NOTIFICATIONS_SCROLL_TOP';\nexport const NOTIFICATIONS_LOAD_PENDING = 'NOTIFICATIONS_LOAD_PENDING';\n\nexport const NOTIFICATIONS_MOUNT   = 'NOTIFICATIONS_MOUNT';\nexport const NOTIFICATIONS_UNMOUNT = 'NOTIFICATIONS_UNMOUNT';\n\nexport const NOTIFICATIONS_MARK_AS_READ = 'NOTIFICATIONS_MARK_AS_READ';\n\nexport const NOTIFICATIONS_SET_BROWSER_SUPPORT    = 'NOTIFICATIONS_SET_BROWSER_SUPPORT';\nexport const NOTIFICATIONS_SET_BROWSER_PERMISSION = 'NOTIFICATIONS_SET_BROWSER_PERMISSION';\n\nexport const NOTIFICATION_REQUESTS_FETCH_REQUEST = 'NOTIFICATION_REQUESTS_FETCH_REQUEST';\nexport const NOTIFICATION_REQUESTS_FETCH_SUCCESS = 'NOTIFICATION_REQUESTS_FETCH_SUCCESS';\nexport const NOTIFICATION_REQUESTS_FETCH_FAIL    = 'NOTIFICATION_REQUESTS_FETCH_FAIL';\n\nexport const NOTIFICATION_REQUESTS_EXPAND_REQUEST = 'NOTIFICATION_REQUESTS_EXPAND_REQUEST';\nexport const NOTIFICATION_REQUESTS_EXPAND_SUCCESS = 'NOTIFICATION_REQUESTS_EXPAND_SUCCESS';\nexport const NOTIFICATION_REQUESTS_EXPAND_FAIL    = 'NOTIFICATION_REQUESTS_EXPAND_FAIL';\n\nexport const NOTIFICATION_REQUEST_FETCH_REQUEST = 'NOTIFICATION_REQUEST_FETCH_REQUEST';\nexport const NOTIFICATION_REQUEST_FETCH_SUCCESS = 'NOTIFICATION_REQUEST_FETCH_SUCCESS';\nexport const NOTIFICATION_REQUEST_FETCH_FAIL    = 'NOTIFICATION_REQUEST_FETCH_FAIL';\n\nexport const NOTIFICATION_REQUEST_ACCEPT_REQUEST = 'NOTIFICATION_REQUEST_ACCEPT_REQUEST';\nexport const NOTIFICATION_REQUEST_ACCEPT_SUCCESS = 'NOTIFICATION_REQUEST_ACCEPT_SUCCESS';\nexport const NOTIFICATION_REQUEST_ACCEPT_FAIL    = 'NOTIFICATION_REQUEST_ACCEPT_FAIL';\n\nexport const NOTIFICATION_REQUEST_DISMISS_REQUEST = 'NOTIFICATION_REQUEST_DISMISS_REQUEST';\nexport const NOTIFICATION_REQUEST_DISMISS_SUCCESS = 'NOTIFICATION_REQUEST_DISMISS_SUCCESS';\nexport const NOTIFICATION_REQUEST_DISMISS_FAIL    = 'NOTIFICATION_REQUEST_DISMISS_FAIL';\n\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST = 'NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST';\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS = 'NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS';\nexport const NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL    = 'NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL';\n\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST';\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS';\nexport const NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL    = 'NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL';\n\ndefineMessages({\n  mention: { id: 'notification.mention', defaultMessage: '{name} mentioned you' },\n  group: { id: 'notifications.group', defaultMessage: '{count} notifications' },\n});\n\nconst fetchRelatedRelationships = (dispatch, notifications) => {\n  const accountIds = notifications.filter(item => ['follow', 'follow_request', 'admin.sign_up'].indexOf(item.type) !== -1).map(item => item.account.id);\n\n  if (accountIds.length > 0) {\n    dispatch(fetchRelationships(accountIds));\n  }\n};\n\nconst selectNotificationCountForRequest = (state, id) => {\n  const requests = state.getIn(['notificationRequests', 'items']);\n  const thisRequest = requests.find(request => request.get('id') === id);\n  return thisRequest ? thisRequest.get('notifications_count') : 0;\n};\n\nexport const loadPending = () => ({\n  type: NOTIFICATIONS_LOAD_PENDING,\n});\n\nexport function updateNotifications(notification, intlMessages, intlLocale) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const showInColumn = activeFilter === 'all' ? getState().getIn(['settings', 'notifications', 'shows', notification.type], true) : activeFilter === notification.type;\n    const showAlert    = getState().getIn(['settings', 'notifications', 'alerts', notification.type], true);\n    const playSound    = getState().getIn(['settings', 'notifications', 'sounds', notification.type], true);\n\n    let filtered = false;\n\n    if (['mention', 'status'].includes(notification.type) && notification.status.filtered) {\n      const filters = notification.status.filtered.filter(result => result.filter.context.includes('notifications'));\n\n      if (filters.some(result => result.filter.filter_action === 'hide')) {\n        return;\n      }\n\n      filtered = filters.length > 0;\n    }\n\n    if (['follow_request'].includes(notification.type)) {\n      dispatch(fetchFollowRequests());\n    }\n\n    dispatch(submitMarkers());\n\n    if (showInColumn) {\n      dispatch(importFetchedAccount(notification.account));\n\n      if (notification.status) {\n        dispatch(importFetchedStatus(notification.status));\n      }\n\n      if (notification.report) {\n        dispatch(importFetchedAccount(notification.report.target_account));\n      }\n\n\n      dispatch(notificationsUpdate({ notification, preferPendingItems, playSound: playSound && !filtered}));\n\n      fetchRelatedRelationships(dispatch, [notification]);\n    } else if (playSound && !filtered) {\n      dispatch({\n        type: NOTIFICATIONS_UPDATE_NOOP,\n        meta: { sound: 'boop' },\n      });\n    }\n\n    // Desktop notifications\n    if (typeof window.Notification !== 'undefined' && showAlert && !filtered) {\n      const title = new IntlMessageFormat(intlMessages[`notification.${notification.type}`], intlLocale).format({ name: notification.account.display_name.length > 0 ? notification.account.display_name : notification.account.username });\n      const body  = (notification.status && notification.status.spoiler_text.length > 0) ? notification.status.spoiler_text : unescapeHTML(notification.status ? notification.status.content : '');\n\n      const notify = new Notification(title, { body, icon: notification.account.avatar, tag: notification.id });\n\n      notify.addEventListener('click', () => {\n        window.focus();\n        notify.close();\n      });\n    }\n  };\n}\n\nconst excludeTypesFromSettings = state => state.getIn(['settings', 'notifications', 'shows']).filter(enabled => !enabled).keySeq().toJS();\n\nconst excludeTypesFromFilter = filter => {\n  const allTypes = ImmutableList([\n    'follow',\n    'follow_request',\n    'favourite',\n    'reblog',\n    'mention',\n    'poll',\n    'status',\n    'update',\n    'admin.sign_up',\n    'admin.report',\n  ]);\n\n  return allTypes.filterNot(item => item === filter).toJS();\n};\n\nconst noOp = () => {};\n\nlet expandNotificationsController = new AbortController();\n\nexport function expandNotifications({ maxId, forceLoad = false } = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const activeFilter = getState().getIn(['settings', 'notifications', 'quickFilter', 'active']);\n    const notifications = getState().get('notifications');\n    const isLoadingMore = !!maxId;\n\n    if (notifications.get('isLoading')) {\n      if (forceLoad) {\n        expandNotificationsController.abort();\n        expandNotificationsController = new AbortController();\n      } else {\n        done();\n        return;\n      }\n    }\n\n    const params = {\n      max_id: maxId,\n      exclude_types: activeFilter === 'all'\n        ? excludeTypesFromSettings(getState())\n        : excludeTypesFromFilter(activeFilter),\n    };\n\n    if (!params.max_id && (notifications.get('items', ImmutableList()).size + notifications.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = notifications.getIn(['pendingItems', 0, 'id']);\n      const b = notifications.getIn(['items', 0, 'id']);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandNotificationsRequest(isLoadingMore));\n\n    api().get('/api/v1/notifications', { params, signal: expandNotificationsController.signal }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n      dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n      dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n      dispatch(expandNotificationsSuccess(response.data, next ? next.uri : null, isLoadingMore, isLoadingRecent, isLoadingRecent && preferPendingItems));\n      fetchRelatedRelationships(dispatch, response.data);\n      dispatch(submitMarkers());\n    }).catch(error => {\n      dispatch(expandNotificationsFail(error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function expandNotificationsRequest(isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_REQUEST,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsSuccess(notifications, next, isLoadingMore, isLoadingRecent, usePendingItems) {\n  return {\n    type: NOTIFICATIONS_EXPAND_SUCCESS,\n    notifications,\n    next,\n    isLoadingRecent: isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandNotificationsFail(error, isLoadingMore) {\n  return {\n    type: NOTIFICATIONS_EXPAND_FAIL,\n    error,\n    skipLoading: !isLoadingMore,\n    skipAlert: !isLoadingMore || error.name === 'AbortError',\n  };\n}\n\nexport function scrollTopNotifications(top) {\n  return {\n    type: NOTIFICATIONS_SCROLL_TOP,\n    top,\n  };\n}\n\nexport function setFilter (filterType) {\n  return dispatch => {\n    dispatch({\n      type: NOTIFICATIONS_FILTER_SET,\n      path: ['notifications', 'quickFilter', 'active'],\n      value: filterType,\n    });\n    dispatch(expandNotifications({ forceLoad: true }));\n    dispatch(saveSettings());\n  };\n}\n\nexport const mountNotifications = () => ({\n  type: NOTIFICATIONS_MOUNT,\n});\n\nexport const unmountNotifications = () => ({\n  type: NOTIFICATIONS_UNMOUNT,\n});\n\n\nexport const markNotificationsAsRead = () => ({\n  type: NOTIFICATIONS_MARK_AS_READ,\n});\n\n// Browser support\nexport function setupBrowserNotifications() {\n  return dispatch => {\n    dispatch(setBrowserSupport('Notification' in window));\n    if ('Notification' in window) {\n      dispatch(setBrowserPermission(Notification.permission));\n    }\n\n    if ('Notification' in window && 'permissions' in navigator) {\n      navigator.permissions.query({ name: 'notifications' }).then((status) => {\n        status.onchange = () => dispatch(setBrowserPermission(Notification.permission));\n      }).catch(console.warn);\n    }\n  };\n}\n\nexport function requestBrowserPermission(callback = noOp) {\n  return dispatch => {\n    requestNotificationPermission((permission) => {\n      dispatch(setBrowserPermission(permission));\n      callback(permission);\n\n      if (permission === 'granted') {\n        dispatch(registerPushNotifications());\n      }\n    });\n  };\n}\n\nexport function setBrowserSupport (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_SUPPORT,\n    value,\n  };\n}\n\nexport function setBrowserPermission (value) {\n  return {\n    type: NOTIFICATIONS_SET_BROWSER_PERMISSION,\n    value,\n  };\n}\n\nexport const fetchNotificationRequests = () => (dispatch, getState) => {\n  const params = {};\n\n  if (getState().getIn(['notificationRequests', 'isLoading'])) {\n    return;\n  }\n\n  if (getState().getIn(['notificationRequests', 'items'])?.size > 0) {\n    params.since_id = getState().getIn(['notificationRequests', 'items', 0, 'id']);\n  }\n\n  dispatch(fetchNotificationRequestsRequest());\n\n  api().get('/api/v1/notifications/requests', { params }).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n    dispatch(fetchNotificationRequestsSuccess(response.data, next ? next.uri : null));\n  }).catch(err => {\n    dispatch(fetchNotificationRequestsFail(err));\n  });\n};\n\nexport const fetchNotificationRequestsRequest = () => ({\n  type: NOTIFICATION_REQUESTS_FETCH_REQUEST,\n});\n\nexport const fetchNotificationRequestsSuccess = (requests, next) => ({\n  type: NOTIFICATION_REQUESTS_FETCH_SUCCESS,\n  requests,\n  next,\n});\n\nexport const fetchNotificationRequestsFail = error => ({\n  type: NOTIFICATION_REQUESTS_FETCH_FAIL,\n  error,\n});\n\nexport const expandNotificationRequests = () => (dispatch, getState) => {\n  const url = getState().getIn(['notificationRequests', 'next']);\n\n  if (!url || getState().getIn(['notificationRequests', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandNotificationRequestsRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(x => x.account)));\n    dispatch(expandNotificationRequestsSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(expandNotificationRequestsFail(err));\n  });\n};\n\nexport const expandNotificationRequestsRequest = () => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_REQUEST,\n});\n\nexport const expandNotificationRequestsSuccess = (requests, next) => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_SUCCESS,\n  requests,\n  next,\n});\n\nexport const expandNotificationRequestsFail = error => ({\n  type: NOTIFICATION_REQUESTS_EXPAND_FAIL,\n  error,\n});\n\nexport const fetchNotificationRequest = id => (dispatch, getState) => {\n  const current = getState().getIn(['notificationRequests', 'current']);\n\n  if (current.getIn(['item', 'id']) === id || current.get('isLoading')) {\n    return;\n  }\n\n  dispatch(fetchNotificationRequestRequest(id));\n\n  api().get(`/api/v1/notifications/requests/${id}`).then(({ data }) => {\n    dispatch(fetchNotificationRequestSuccess(data));\n  }).catch(err => {\n    dispatch(fetchNotificationRequestFail(id, err));\n  });\n};\n\nexport const fetchNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchNotificationRequestSuccess = request => ({\n  type: NOTIFICATION_REQUEST_FETCH_SUCCESS,\n  request,\n});\n\nexport const fetchNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const acceptNotificationRequest = (id) => (dispatch, getState) => {\n  const count = selectNotificationCountForRequest(getState(), id);\n  dispatch(acceptNotificationRequestRequest(id));\n\n  api().post(`/api/v1/notifications/requests/${id}/accept`).then(() => {\n    dispatch(acceptNotificationRequestSuccess(id));\n    dispatch(decreasePendingNotificationsCount(count));\n  }).catch(err => {\n    dispatch(acceptNotificationRequestFail(id, err));\n  });\n};\n\nexport const acceptNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_REQUEST,\n  id,\n});\n\nexport const acceptNotificationRequestSuccess = id => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_SUCCESS,\n  id,\n});\n\nexport const acceptNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_ACCEPT_FAIL,\n  id,\n  error,\n});\n\nexport const dismissNotificationRequest = (id) => (dispatch, getState) => {\n  const count = selectNotificationCountForRequest(getState(), id);\n  dispatch(dismissNotificationRequestRequest(id));\n\n  api().post(`/api/v1/notifications/requests/${id}/dismiss`).then(() =>{\n    dispatch(dismissNotificationRequestSuccess(id));\n    dispatch(decreasePendingNotificationsCount(count));\n  }).catch(err => {\n    dispatch(dismissNotificationRequestFail(id, err));\n  });\n};\n\nexport const dismissNotificationRequestRequest = id => ({\n  type: NOTIFICATION_REQUEST_DISMISS_REQUEST,\n  id,\n});\n\nexport const dismissNotificationRequestSuccess = id => ({\n  type: NOTIFICATION_REQUEST_DISMISS_SUCCESS,\n  id,\n});\n\nexport const dismissNotificationRequestFail = (id, error) => ({\n  type: NOTIFICATION_REQUEST_DISMISS_FAIL,\n  id,\n  error,\n});\n\nexport const fetchNotificationsForRequest = accountId => (dispatch, getState) => {\n  const current = getState().getIn(['notificationRequests', 'current']);\n  const params = { account_id: accountId };\n\n  if (current.getIn(['item', 'account']) === accountId) {\n    if (current.getIn(['notifications', 'isLoading'])) {\n      return;\n    }\n\n    if (current.getIn(['notifications', 'items'])?.size > 0) {\n      params.since_id = current.getIn(['notifications', 'items', 0, 'id']);\n    }\n  }\n\n  dispatch(fetchNotificationsForRequestRequest());\n\n  api().get('/api/v1/notifications', { params }).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n    dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n    dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n    dispatch(fetchNotificationsForRequestSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(fetchNotificationsForRequestFail(err));\n  });\n};\n\nexport const fetchNotificationsForRequestRequest = () => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_REQUEST,\n});\n\nexport const fetchNotificationsForRequestSuccess = (notifications, next) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_SUCCESS,\n  notifications,\n  next,\n});\n\nexport const fetchNotificationsForRequestFail = (error) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_FETCH_FAIL,\n  error,\n});\n\nexport const expandNotificationsForRequest = () => (dispatch, getState) => {\n  const url = getState().getIn(['notificationRequests', 'current', 'notifications', 'next']);\n\n  if (!url || getState().getIn(['notificationRequests', 'current', 'notifications', 'isLoading'])) {\n    return;\n  }\n\n  dispatch(expandNotificationsForRequestRequest());\n\n  api().get(url).then(response => {\n    const next = getLinks(response).refs.find(link => link.rel === 'next');\n    dispatch(importFetchedAccounts(response.data.map(item => item.account)));\n    dispatch(importFetchedStatuses(response.data.map(item => item.status).filter(status => !!status)));\n    dispatch(importFetchedAccounts(response.data.filter(item => item.report).map(item => item.report.target_account)));\n\n    dispatch(expandNotificationsForRequestSuccess(response.data, next?.uri));\n  }).catch(err => {\n    dispatch(expandNotificationsForRequestFail(err));\n  });\n};\n\nexport const expandNotificationsForRequestRequest = () => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_REQUEST,\n});\n\nexport const expandNotificationsForRequestSuccess = (notifications, next) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_SUCCESS,\n  notifications,\n  next,\n});\n\nexport const expandNotificationsForRequestFail = (error) => ({\n  type: NOTIFICATIONS_FOR_REQUEST_EXPAND_FAIL,\n  error,\n});\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ModalProps } from 'mastodon/reducers/modal';\n\nimport type { MODAL_COMPONENTS } from '../features/ui/components/modal_root';\n\nexport type ModalType = keyof typeof MODAL_COMPONENTS;\n\ninterface OpenModalPayload {\n  modalType: ModalType;\n  modalProps: ModalProps;\n}\nexport const openModal = createAction<OpenModalPayload>('MODAL_OPEN');\n\ninterface CloseModalPayload {\n  modalType: ModalType | undefined;\n  ignoreFocus: boolean;\n}\nexport const closeModal = createAction<CloseModalPayload>('MODAL_CLOSE');\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiAccountJSON } from 'mastodon/api_types/accounts';\nimport type { ApiRelationshipJSON } from 'mastodon/api_types/relationships';\n\nexport const revealAccount = createAction<{\n  id: string;\n}>('accounts/revealAccount');\n\nexport const importAccounts = createAction<{ accounts: ApiAccountJSON[] }>(\n  'accounts/importAccounts',\n);\n\nfunction actionWithSkipLoadingTrue<Args extends object>(args: Args) {\n  return {\n    payload: {\n      ...args,\n      skipLoading: true,\n    },\n  };\n}\n\nexport const followAccountSuccess = createAction(\n  'accounts/followAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    alreadyFollowing: boolean;\n  }>,\n);\n\nexport const unfollowAccountSuccess = createAction(\n  'accounts/unfollowAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    statuses: unknown;\n    alreadyFollowing?: boolean;\n  }>,\n);\n\nexport const authorizeFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestAuthorize/SUCCESS',\n);\n\nexport const rejectFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestReject/SUCCESS',\n);\n\nexport const followAccountRequest = createAction(\n  'accounts/follow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string; locked: boolean }>,\n);\n\nexport const followAccountFail = createAction(\n  'accounts/follow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string; locked: boolean }>,\n);\n\nexport const unfollowAccountRequest = createAction(\n  'accounts/unfollow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string }>,\n);\n\nexport const unfollowAccountFail = createAction(\n  'accounts/unfollow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string }>,\n);\n\nexport const blockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/block/SUCCESS');\n\nexport const unblockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unblock/SUCCESS');\n\nexport const muteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/mute/SUCCESS');\n\nexport const unmuteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unmute/SUCCESS');\n\nexport const pinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/pin/SUCCESS');\n\nexport const unpinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unpin/SUCCESS');\n\nexport const fetchRelationshipsSuccess = createAction(\n  'relationships/fetch/SUCCESS',\n  actionWithSkipLoadingTrue<{ relationships: ApiRelationshipJSON[] }>,\n);\n","import { createAction } from '@reduxjs/toolkit';\n\nimport type { ApiAccountJSON } from 'flavours/glitch/api_types/accounts';\nimport type { ApiRelationshipJSON } from 'flavours/glitch/api_types/relationships';\n\nexport const revealAccount = createAction<{\n  id: string;\n}>('accounts/revealAccount');\n\nexport const importAccounts = createAction<{ accounts: ApiAccountJSON[] }>(\n  'accounts/importAccounts',\n);\n\nfunction actionWithSkipLoadingTrue<Args extends object>(args: Args) {\n  return {\n    payload: {\n      ...args,\n      skipLoading: true,\n    },\n  };\n}\n\nexport const followAccountSuccess = createAction(\n  'accounts/followAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    alreadyFollowing: boolean;\n  }>,\n);\n\nexport const unfollowAccountSuccess = createAction(\n  'accounts/unfollowAccount/SUCCESS',\n  actionWithSkipLoadingTrue<{\n    relationship: ApiRelationshipJSON;\n    statuses: unknown;\n    alreadyFollowing?: boolean;\n  }>,\n);\n\nexport const authorizeFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestAuthorize/SUCCESS',\n);\n\nexport const rejectFollowRequestSuccess = createAction<{ id: string }>(\n  'accounts/followRequestReject/SUCCESS',\n);\n\nexport const followAccountRequest = createAction(\n  'accounts/follow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string; locked: boolean }>,\n);\n\nexport const followAccountFail = createAction(\n  'accounts/follow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string; locked: boolean }>,\n);\n\nexport const unfollowAccountRequest = createAction(\n  'accounts/unfollow/REQUEST',\n  actionWithSkipLoadingTrue<{ id: string }>,\n);\n\nexport const unfollowAccountFail = createAction(\n  'accounts/unfollow/FAIL',\n  actionWithSkipLoadingTrue<{ id: string; error: string }>,\n);\n\nexport const blockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/block/SUCCESS');\n\nexport const unblockAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unblock/SUCCESS');\n\nexport const muteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n  statuses: unknown;\n}>('accounts/mute/SUCCESS');\n\nexport const unmuteAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unmute/SUCCESS');\n\nexport const pinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/pin/SUCCESS');\n\nexport const unpinAccountSuccess = createAction<{\n  relationship: ApiRelationshipJSON;\n}>('accounts/unpin/SUCCESS');\n\nexport const fetchRelationshipsSuccess = createAction(\n  'relationships/fetch/SUCCESS',\n  actionWithSkipLoadingTrue<{ relationships: ApiRelationshipJSON[] }>,\n);\n","import { PureComponent, createRef } from 'react';\n\nimport classNames from 'classnames';\n\nimport { AnimatedNumber } from './animated_number';\nimport type { IconProp } from './icon';\nimport { Icon } from './icon';\n\ninterface Props {\n  className?: string;\n  title: string;\n  icon: string;\n  iconComponent: IconProp;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  onMouseDown?: React.MouseEventHandler<HTMLButtonElement>;\n  onKeyDown?: React.KeyboardEventHandler<HTMLButtonElement>;\n  onKeyPress?: React.KeyboardEventHandler<HTMLButtonElement>;\n  active: boolean;\n  expanded?: boolean;\n  style?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  disabled: boolean;\n  inverted?: boolean;\n  animate: boolean;\n  overlay: boolean;\n  tabIndex: number;\n  counter?: number;\n  href?: string;\n  ariaHidden: boolean;\n}\ninterface States {\n  activate: boolean;\n  deactivate: boolean;\n}\nexport class IconButton extends PureComponent<Props, States> {\n  buttonRef = createRef<HTMLButtonElement>();\n\n  static defaultProps = {\n    active: false,\n    disabled: false,\n    animate: false,\n    overlay: false,\n    tabIndex: 0,\n    ariaHidden: false,\n  };\n\n  state = {\n    activate: false,\n    deactivate: false,\n  };\n\n  UNSAFE_componentWillReceiveProps(nextProps: Props) {\n    if (!nextProps.animate) return;\n\n    if (this.props.active && !nextProps.active) {\n      this.setState({ activate: false, deactivate: true });\n    } else if (!this.props.active && nextProps.active) {\n      this.setState({ activate: true, deactivate: false });\n    }\n  }\n\n  handleClick: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    e.preventDefault();\n\n    if (!this.props.disabled && this.props.onClick != null) {\n      this.props.onClick(e);\n    }\n  };\n\n  handleKeyPress: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (this.props.onKeyPress && !this.props.disabled) {\n      this.props.onKeyPress(e);\n    }\n  };\n\n  handleMouseDown: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onMouseDown) {\n      this.props.onMouseDown(e);\n    }\n  };\n\n  handleKeyDown: React.KeyboardEventHandler<HTMLButtonElement> = (e) => {\n    if (!this.props.disabled && this.props.onKeyDown) {\n      this.props.onKeyDown(e);\n    }\n  };\n\n  render() {\n    const style = {\n      ...this.props.style,\n      ...(this.props.active ? this.props.activeStyle : {}),\n    };\n\n    const {\n      active,\n      className,\n      disabled,\n      expanded,\n      icon,\n      iconComponent,\n      inverted,\n      overlay,\n      tabIndex,\n      title,\n      counter,\n      href,\n      ariaHidden,\n    } = this.props;\n\n    const { activate, deactivate } = this.state;\n\n    const classes = classNames(className, 'icon-button', {\n      active,\n      disabled,\n      inverted,\n      activate,\n      deactivate,\n      overlayed: overlay,\n      'icon-button--with-counter': typeof counter !== 'undefined',\n    });\n\n    let contents = (\n      <>\n        <Icon id={icon} icon={iconComponent} aria-hidden='true' />{' '}\n        {typeof counter !== 'undefined' && (\n          <span className='icon-button__counter'>\n            <AnimatedNumber value={counter} />\n          </span>\n        )}\n      </>\n    );\n\n    if (href != null) {\n      contents = (\n        <a href={href} target='_blank' rel='noopener noreferrer'>\n          {contents}\n        </a>\n      );\n    }\n\n    return (\n      <button\n        type='button'\n        aria-label={title}\n        aria-expanded={expanded}\n        aria-hidden={ariaHidden}\n        title={title}\n        className={classes}\n        onClick={this.handleClick}\n        onMouseDown={this.handleMouseDown}\n        onKeyDown={this.handleKeyDown}\n        onKeyPress={this.handleKeyPress}\n        style={style}\n        tabIndex={tabIndex}\n        disabled={disabled}\n        ref={this.buttonRef}\n      >\n        {contents}\n      </button>\n    );\n  }\n}\n","var _path;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgClose(_ref) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: 24,\n    viewBox: \"0 -960 960 960\",\n    width: 24,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z\"\n  })));\n}\nexport default SvgClose;","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\n\n// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors = process.env.NODE_ENV !== \"production\" ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : [];\nfunction die(error, ...args) {\n  if (process.env.NODE_ENV !== \"production\") {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  var _a;\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!((_a = value.constructor) == null ? void 0 : _a[DRAFTABLE]) || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Object.entries(obj).forEach(([key, value]) => {\n      iter(key, value, obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  if (!strict && isPlainObject(base)) {\n    if (!getPrototypeOf(base)) {\n      const obj = /* @__PURE__ */ Object.create(null);\n      return Object.assign(obj, base);\n    }\n    return __spreadValues({}, base);\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(base);\n  delete descriptors[DRAFT_STATE];\n  let keys = Reflect.ownKeys(descriptors);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const desc = descriptors[key];\n    if (desc.writable === false) {\n      desc.writable = true;\n      desc.configurable = true;\n    }\n    if (desc.get || desc.set)\n      descriptors[key] = {\n        configurable: true,\n        writable: true,\n        // could live with !!desc.set as well here...\n        enumerable: desc.enumerable,\n        value: base[key]\n      };\n  }\n  return Object.create(getPrototypeOf(base), descriptors);\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    each(obj, (_key, value) => freeze(value, true), true);\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path),\n      true\n      // See #590, don't recurse into non-enumerable of non drafted objects\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if (process.env.NODE_ENV !== \"production\" && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if (!parentState || !parentState.scope_.parent_)\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc == null ? void 0 : desc.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2 == null ? void 0 : current2[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if (process.env.NODE_ENV !== \"production\" && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if (process.env.NODE_ENV !== \"production\" && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  var _a;\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    (_a = desc.get) == null ? void 0 : _a.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof (config == null ? void 0 : config.autoFreeze) === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof (config == null ? void 0 : config.useStrictShallowCopy) === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (process.env.NODE_ENV !== \"production\") {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\nexport {\n  Immer2 as Immer,\n  applyPatches,\n  castDraft,\n  castImmutable,\n  createDraft,\n  current,\n  enableMapSet,\n  enablePatches,\n  finishDraft,\n  freeze,\n  DRAFTABLE as immerable,\n  isDraft,\n  isDraftable,\n  NOTHING as nothing,\n  original,\n  produce,\n  produceWithPatches,\n  setAutoFreeze,\n  setUseStrictShallowCopy\n};\n//# sourceMappingURL=immer.legacy-esm.js.map","// src/utils/formatProdErrorMessage.ts\nfunction formatProdErrorMessage(code) {\n  return `Minified Redux error #${code}; visit https://redux.js.org/Errors?code=${code} for the full message or use the non-minified dev environment for full errors. `;\n}\n\n// src/utils/symbol-observable.ts\nvar $$observable = /* @__PURE__ */ (() => typeof Symbol === \"function\" && Symbol.observable || \"@@observable\")();\nvar symbol_observable_default = $$observable;\n\n// src/utils/actionTypes.ts\nvar randomString = () => Math.random().toString(36).substring(7).split(\"\").join(\".\");\nvar ActionTypes = {\n  INIT: `@@redux/INIT${/* @__PURE__ */ randomString()}`,\n  REPLACE: `@@redux/REPLACE${/* @__PURE__ */ randomString()}`,\n  PROBE_UNKNOWN_ACTION: () => `@@redux/PROBE_UNKNOWN_ACTION${randomString()}`\n};\nvar actionTypes_default = ActionTypes;\n\n// src/utils/isPlainObject.ts\nfunction isPlainObject(obj) {\n  if (typeof obj !== \"object\" || obj === null)\n    return false;\n  let proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(obj) === proto || Object.getPrototypeOf(obj) === null;\n}\n\n// src/utils/kindOf.ts\nfunction miniKindOf(val) {\n  if (val === void 0)\n    return \"undefined\";\n  if (val === null)\n    return \"null\";\n  const type = typeof val;\n  switch (type) {\n    case \"boolean\":\n    case \"string\":\n    case \"number\":\n    case \"symbol\":\n    case \"function\": {\n      return type;\n    }\n  }\n  if (Array.isArray(val))\n    return \"array\";\n  if (isDate(val))\n    return \"date\";\n  if (isError(val))\n    return \"error\";\n  const constructorName = ctorName(val);\n  switch (constructorName) {\n    case \"Symbol\":\n    case \"Promise\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n    case \"Map\":\n    case \"Set\":\n      return constructorName;\n  }\n  return Object.prototype.toString.call(val).slice(8, -1).toLowerCase().replace(/\\s/g, \"\");\n}\nfunction ctorName(val) {\n  return typeof val.constructor === \"function\" ? val.constructor.name : null;\n}\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === \"string\" && val.constructor && typeof val.constructor.stackTraceLimit === \"number\";\n}\nfunction isDate(val) {\n  if (val instanceof Date)\n    return true;\n  return typeof val.toDateString === \"function\" && typeof val.getDate === \"function\" && typeof val.setDate === \"function\";\n}\nfunction kindOf(val) {\n  let typeOfVal = typeof val;\n  if (process.env.NODE_ENV !== \"production\") {\n    typeOfVal = miniKindOf(val);\n  }\n  return typeOfVal;\n}\n\n// src/createStore.ts\nfunction createStore(reducer, preloadedState, enhancer) {\n  if (typeof reducer !== \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : `Expected the root reducer to be a function. Instead, received: '${kindOf(reducer)}'`);\n  }\n  if (typeof preloadedState === \"function\" && typeof enhancer === \"function\" || typeof enhancer === \"function\" && typeof arguments[3] === \"function\") {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : \"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.\");\n  }\n  if (typeof preloadedState === \"function\" && typeof enhancer === \"undefined\") {\n    enhancer = preloadedState;\n    preloadedState = void 0;\n  }\n  if (typeof enhancer !== \"undefined\") {\n    if (typeof enhancer !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : `Expected the enhancer to be a function. Instead, received: '${kindOf(enhancer)}'`);\n    }\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n  let currentReducer = reducer;\n  let currentState = preloadedState;\n  let currentListeners = /* @__PURE__ */ new Map();\n  let nextListeners = currentListeners;\n  let listenerIdCounter = 0;\n  let isDispatching = false;\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = /* @__PURE__ */ new Map();\n      currentListeners.forEach((listener, key) => {\n        nextListeners.set(key, listener);\n      });\n    }\n  }\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : \"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.\");\n    }\n    return currentState;\n  }\n  function subscribe(listener) {\n    if (typeof listener !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : `Expected the listener to be a function. Instead, received: '${kindOf(listener)}'`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : \"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.\");\n    }\n    let isSubscribed = true;\n    ensureCanMutateNextListeners();\n    const listenerId = listenerIdCounter++;\n    nextListeners.set(listenerId, listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : \"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.\");\n      }\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      nextListeners.delete(listenerId);\n      currentListeners = null;\n    };\n  }\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : `Actions must be plain objects. Instead, the actual type was: '${kindOf(action)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);\n    }\n    if (typeof action.type === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n    if (typeof action.type !== \"string\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(17) : `Action \"type\" property must be a string. Instead, the actual type was: '${kindOf(action.type)}'. Value was: '${action.type}' (stringified)`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : \"Reducers may not dispatch actions.\");\n    }\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n    const listeners = currentListeners = nextListeners;\n    listeners.forEach((listener) => {\n      listener();\n    });\n    return action;\n  }\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== \"function\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : `Expected the nextReducer to be a function. Instead, received: '${kindOf(nextReducer)}`);\n    }\n    currentReducer = nextReducer;\n    dispatch({\n      type: actionTypes_default.REPLACE\n    });\n  }\n  function observable() {\n    const outerSubscribe = subscribe;\n    return {\n      /**\n       * The minimal observable subscription method.\n       * @param observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe(observer) {\n        if (typeof observer !== \"object\" || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : `Expected the observer to be an object. Instead, received: '${kindOf(observer)}'`);\n        }\n        function observeState() {\n          const observerAsObserver = observer;\n          if (observerAsObserver.next) {\n            observerAsObserver.next(getState());\n          }\n        }\n        observeState();\n        const unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe\n        };\n      },\n      [symbol_observable_default]() {\n        return this;\n      }\n    };\n  }\n  dispatch({\n    type: actionTypes_default.INIT\n  });\n  const store = {\n    dispatch,\n    subscribe,\n    getState,\n    replaceReducer,\n    [symbol_observable_default]: observable\n  };\n  return store;\n}\nfunction legacy_createStore(reducer, preloadedState, enhancer) {\n  return createStore(reducer, preloadedState, enhancer);\n}\n\n// src/utils/warning.ts\nfunction warning(message) {\n  if (typeof console !== \"undefined\" && typeof console.error === \"function\") {\n    console.error(message);\n  }\n  try {\n    throw new Error(message);\n  } catch (e) {\n  }\n}\n\n// src/combineReducers.ts\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  const reducerKeys = Object.keys(reducers);\n  const argumentName = action && action.type === actionTypes_default.INIT ? \"preloadedState argument passed to createStore\" : \"previous state received by the reducer\";\n  if (reducerKeys.length === 0) {\n    return \"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.\";\n  }\n  if (!isPlainObject(inputState)) {\n    return `The ${argumentName} has unexpected type of \"${kindOf(inputState)}\". Expected argument to be an object with the following keys: \"${reducerKeys.join('\", \"')}\"`;\n  }\n  const unexpectedKeys = Object.keys(inputState).filter((key) => !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key]);\n  unexpectedKeys.forEach((key) => {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === actionTypes_default.REPLACE)\n    return;\n  if (unexpectedKeys.length > 0) {\n    return `Unexpected ${unexpectedKeys.length > 1 ? \"keys\" : \"key\"} \"${unexpectedKeys.join('\", \"')}\" found in ${argumentName}. Expected to find one of the known reducer keys instead: \"${reducerKeys.join('\", \"')}\". Unexpected keys will be ignored.`;\n  }\n}\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach((key) => {\n    const reducer = reducers[key];\n    const initialState = reducer(void 0, {\n      type: actionTypes_default.INIT\n    });\n    if (typeof initialState === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : `The slice reducer for key \"${key}\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);\n    }\n    if (typeof reducer(void 0, {\n      type: actionTypes_default.PROBE_UNKNOWN_ACTION()\n    }) === \"undefined\") {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : `The slice reducer for key \"${key}\" returned undefined when probed with a random type. Don't try to handle '${actionTypes_default.INIT}' or other actions in \"redux/*\" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.`);\n    }\n  });\n}\nfunction combineReducers(reducers) {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers = {};\n  for (let i = 0; i < reducerKeys.length; i++) {\n    const key = reducerKeys[i];\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof reducers[key] === \"undefined\") {\n        warning(`No reducer provided for key \"${key}\"`);\n      }\n    }\n    if (typeof reducers[key] === \"function\") {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  const finalReducerKeys = Object.keys(finalReducers);\n  let unexpectedKeyCache;\n  if (process.env.NODE_ENV !== \"production\") {\n    unexpectedKeyCache = {};\n  }\n  let shapeAssertionError;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n  return function combination(state = {}, action) {\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      const warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n    let hasChanged = false;\n    const nextState = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer = finalReducers[key];\n      const previousStateForKey = state[key];\n      const nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === \"undefined\") {\n        const actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : `When called with an action of type ${actionType ? `\"${String(actionType)}\"` : \"(unknown type)\"}, the slice reducer for key \"${key}\" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.`);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\n// src/bindActionCreators.ts\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function(...args) {\n    return dispatch(actionCreator.apply(this, args));\n  };\n}\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === \"function\") {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n  if (typeof actionCreators !== \"object\" || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : `bindActionCreators expected an object or a function, but instead received: '${kindOf(actionCreators)}'. Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`);\n  }\n  const boundActionCreators = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === \"function\") {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n// src/compose.ts\nfunction compose(...funcs) {\n  if (funcs.length === 0) {\n    return (arg) => arg;\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce((a, b) => (...args) => a(b(...args)));\n}\n\n// src/applyMiddleware.ts\nfunction applyMiddleware(...middlewares) {\n  return (createStore2) => (reducer, preloadedState) => {\n    const store = createStore2(reducer, preloadedState);\n    let dispatch = () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : \"Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.\");\n    };\n    const middlewareAPI = {\n      getState: store.getState,\n      dispatch: (action, ...args) => dispatch(action, ...args)\n    };\n    const chain = middlewares.map((middleware) => middleware(middlewareAPI));\n    dispatch = compose(...chain)(store.dispatch);\n    return {\n      ...store,\n      dispatch\n    };\n  };\n}\n\n// src/utils/isAction.ts\nfunction isAction(action) {\n  return isPlainObject(action) && \"type\" in action && typeof action.type === \"string\";\n}\nexport {\n  actionTypes_default as __DO_NOT_USE__ActionTypes,\n  applyMiddleware,\n  bindActionCreators,\n  combineReducers,\n  compose,\n  createStore,\n  isAction,\n  isPlainObject,\n  legacy_createStore\n};\n//# sourceMappingURL=redux.mjs.map","import { boostModal, favouriteModal } from 'flavours/glitch/initial_state';\n\nimport api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { unreblog, reblog } from './interactions_typed';\nimport { openModal } from './modal';\n\nexport const REBLOGS_EXPAND_REQUEST = 'REBLOGS_EXPAND_REQUEST';\nexport const REBLOGS_EXPAND_SUCCESS = 'REBLOGS_EXPAND_SUCCESS';\nexport const REBLOGS_EXPAND_FAIL = 'REBLOGS_EXPAND_FAIL';\n\nexport const FAVOURITE_REQUEST = 'FAVOURITE_REQUEST';\nexport const FAVOURITE_SUCCESS = 'FAVOURITE_SUCCESS';\nexport const FAVOURITE_FAIL    = 'FAVOURITE_FAIL';\n\nexport const UNFAVOURITE_REQUEST = 'UNFAVOURITE_REQUEST';\nexport const UNFAVOURITE_SUCCESS = 'UNFAVOURITE_SUCCESS';\nexport const UNFAVOURITE_FAIL    = 'UNFAVOURITE_FAIL';\n\nexport const REBLOGS_FETCH_REQUEST = 'REBLOGS_FETCH_REQUEST';\nexport const REBLOGS_FETCH_SUCCESS = 'REBLOGS_FETCH_SUCCESS';\nexport const REBLOGS_FETCH_FAIL    = 'REBLOGS_FETCH_FAIL';\n\nexport const FAVOURITES_FETCH_REQUEST = 'FAVOURITES_FETCH_REQUEST';\nexport const FAVOURITES_FETCH_SUCCESS = 'FAVOURITES_FETCH_SUCCESS';\nexport const FAVOURITES_FETCH_FAIL    = 'FAVOURITES_FETCH_FAIL';\n\nexport const FAVOURITES_EXPAND_REQUEST = 'FAVOURITES_EXPAND_REQUEST';\nexport const FAVOURITES_EXPAND_SUCCESS = 'FAVOURITES_EXPAND_SUCCESS';\nexport const FAVOURITES_EXPAND_FAIL = 'FAVOURITES_EXPAND_FAIL';\n\nexport const PIN_REQUEST = 'PIN_REQUEST';\nexport const PIN_SUCCESS = 'PIN_SUCCESS';\nexport const PIN_FAIL    = 'PIN_FAIL';\n\nexport const UNPIN_REQUEST = 'UNPIN_REQUEST';\nexport const UNPIN_SUCCESS = 'UNPIN_SUCCESS';\nexport const UNPIN_FAIL    = 'UNPIN_FAIL';\n\nexport const BOOKMARK_REQUEST = 'BOOKMARK_REQUEST';\nexport const BOOKMARK_SUCCESS = 'BOOKMARKED_SUCCESS';\nexport const BOOKMARK_FAIL    = 'BOOKMARKED_FAIL';\n\nexport const UNBOOKMARK_REQUEST = 'UNBOOKMARKED_REQUEST';\nexport const UNBOOKMARK_SUCCESS = 'UNBOOKMARKED_SUCCESS';\nexport const UNBOOKMARK_FAIL    = 'UNBOOKMARKED_FAIL';\n\nexport const REACTION_UPDATE = 'REACTION_UPDATE';\n\nexport const REACTION_ADD_REQUEST = 'REACTION_ADD_REQUEST';\nexport const REACTION_ADD_SUCCESS = 'REACTION_ADD_SUCCESS';\nexport const REACTION_ADD_FAIL    = 'REACTION_ADD_FAIL';\n\nexport const REACTION_REMOVE_REQUEST = 'REACTION_REMOVE_REQUEST';\nexport const REACTION_REMOVE_SUCCESS = 'REACTION_REMOVE_SUCCESS';\nexport const REACTION_REMOVE_FAIL    = 'REACTION_REMOVE_FAIL';\n\nexport * from \"./interactions_typed\";\n\nexport function favourite(status) {\n  return function (dispatch) {\n    dispatch(favouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/favourite`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(favouriteSuccess(status));\n    }).catch(function (error) {\n      dispatch(favouriteFail(status, error));\n    });\n  };\n}\n\nexport function unfavourite(status) {\n  return (dispatch) => {\n    dispatch(unfavouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unfavourite`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unfavouriteSuccess(status));\n    }).catch(error => {\n      dispatch(unfavouriteFail(status, error));\n    });\n  };\n}\n\nexport function favouriteRequest(status) {\n  return {\n    type: FAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteSuccess(status) {\n  return {\n    type: FAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteFail(status, error) {\n  return {\n    type: FAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteRequest(status) {\n  return {\n    type: UNFAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteSuccess(status) {\n  return {\n    type: UNFAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteFail(status, error) {\n  return {\n    type: UNFAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function bookmark(status) {\n  return function (dispatch) {\n    dispatch(bookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/bookmark`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(bookmarkSuccess(status, response.data));\n    }).catch(function (error) {\n      dispatch(bookmarkFail(status, error));\n    });\n  };\n}\n\nexport function unbookmark(status) {\n  return (dispatch) => {\n    dispatch(unbookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unbookmark`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unbookmarkSuccess(status, response.data));\n    }).catch(error => {\n      dispatch(unbookmarkFail(status, error));\n    });\n  };\n}\n\nexport function bookmarkRequest(status) {\n  return {\n    type: BOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function bookmarkSuccess(status, response) {\n  return {\n    type: BOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function bookmarkFail(status, error) {\n  return {\n    type: BOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unbookmarkRequest(status) {\n  return {\n    type: UNBOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function unbookmarkSuccess(status, response) {\n  return {\n    type: UNBOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function unbookmarkFail(status, error) {\n  return {\n    type: UNBOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function fetchReblogs(id) {\n  return (dispatch) => {\n    dispatch(fetchReblogsRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/reblogged_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchReblogsFail(id, error));\n    });\n  };\n}\n\nexport function fetchReblogsRequest(id) {\n  return {\n    type: REBLOGS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchReblogsFail(id, error) {\n  return {\n    type: REBLOGS_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandReblogs(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'reblogged_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandReblogsRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandReblogsFail(id, error)));\n  };\n}\n\nexport function expandReblogsRequest(id) {\n  return {\n    type: REBLOGS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandReblogsFail(id, error) {\n  return {\n    type: REBLOGS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFavourites(id) {\n  return (dispatch) => {\n    dispatch(fetchFavouritesRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/favourited_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFavouritesFail(id, error));\n    });\n  };\n}\n\nexport function fetchFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandFavourites(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'favourited_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFavouritesRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandFavouritesFail(id, error)));\n  };\n}\n\nexport function expandFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pin(status) {\n  return (dispatch) => {\n    dispatch(pinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/pin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(pinSuccess(status));\n    }).catch(error => {\n      dispatch(pinFail(status, error));\n    });\n  };\n}\n\nexport function pinRequest(status) {\n  return {\n    type: PIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinSuccess(status) {\n  return {\n    type: PIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinFail(status, error) {\n  return {\n    type: PIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function unpin (status) {\n  return (dispatch) => {\n    dispatch(unpinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unpin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unpinSuccess(status));\n    }).catch(error => {\n      dispatch(unpinFail(status, error));\n    });\n  };\n}\n\nexport function unpinRequest(status) {\n  return {\n    type: UNPIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinSuccess(status) {\n  return {\n    type: UNPIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinFail(status, error) {\n  return {\n    type: UNPIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nfunction toggleReblogWithoutConfirmation(status, privacy) {\n  return (dispatch) => {\n    if (status.get('reblogged')) {\n      dispatch(unreblog({ statusId: status.get('id') }));\n    } else {\n      dispatch(reblog({ statusId: status.get('id'), privacy }));\n    }\n  };\n}\n\nexport function toggleReblog(statusId, skipModal = false) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    // The reblog modal expects a pre-filled account in status\n    // TODO: fix this by having the reblog modal get a statusId and do the work itself\n    status = status.set('account', state.accounts.get(status.get('account')));\n\n    const missing_description_setting = state.getIn(['local_settings', 'confirm_boost_missing_media_description']);\n    const missing_description = status.get('media_attachments').some(item => !item.get('description'));\n    if (missing_description_setting && missing_description && !status.get('reblogged')) {\n      dispatch(openModal({ modalType: 'BOOST', modalProps: { status, onReblog: (status, privacy) => dispatch(toggleReblogWithoutConfirmation(status, privacy)), missingMediaDescription: true } }));\n    } else if (boostModal && !skipModal) {\n      dispatch(openModal({ modalType: 'BOOST', modalProps: { status, onReblog: (status, privacy) => dispatch(toggleReblogWithoutConfirmation(status, privacy)) } }));\n    } else {\n      dispatch(toggleReblogWithoutConfirmation(status));\n    }\n  };\n}\n\nexport function toggleFavourite(statusId, skipModal = false) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    // The favourite modal expects a pre-filled account in status\n    // TODO: fix this by having the reblog modal get a statusId and do the work itself\n    status = status.set('account', state.accounts.get(status.get('account')));\n\n    if (status.get('favourited')) {\n      dispatch(unfavourite(status));\n    } else {\n      if (favouriteModal && !skipModal) {\n        dispatch(openModal({ modalType: 'FAVOURITE', modalProps: { status, onFavourite: (status) => dispatch(favourite(status)) } }));\n      } else {\n        dispatch(favourite(status));\n      }\n    }\n  };\n}\n\nexport const addReaction = (statusId, name, url) => (dispatch, getState) => {\n  const status = getState().get('statuses').get(statusId);\n  let alreadyAdded = false;\n  if (status) {\n    const reaction = status.get('reactions').find(x => x.get('name') === name);\n    if (reaction && reaction.get('me')) {\n      alreadyAdded = true;\n    }\n  }\n  if (!alreadyAdded) {\n    dispatch(addReactionRequest(statusId, name, url));\n  }\n\n  // encodeURIComponent is required for the Keycap Number Sign emoji, see:\n  // <https://github.com/glitch-soc/mastodon/pull/1980#issuecomment-1345538932>\n  api(getState).post(`/api/v1/statuses/${statusId}/react/${encodeURIComponent(name)}`).then(() => {\n    dispatch(addReactionSuccess(statusId, name));\n  }).catch(err => {\n    if (!alreadyAdded) {\n      dispatch(addReactionFail(statusId, name, err));\n    }\n  });\n};\n\nexport const addReactionRequest = (statusId, name, url) => ({\n  type: REACTION_ADD_REQUEST,\n  id: statusId,\n  name,\n  url,\n});\n\nexport const addReactionSuccess = (statusId, name) => ({\n  type: REACTION_ADD_SUCCESS,\n  id: statusId,\n  name,\n});\n\nexport const addReactionFail = (statusId, name, error) => ({\n  type: REACTION_ADD_FAIL,\n  id: statusId,\n  name,\n  error,\n});\n\nexport const removeReaction = (statusId, name) => (dispatch, getState) => {\n  dispatch(removeReactionRequest(statusId, name));\n\n  api(getState).post(`/api/v1/statuses/${statusId}/unreact/${encodeURIComponent(name)}`).then(() => {\n    dispatch(removeReactionSuccess(statusId, name));\n  }).catch(err => {\n    dispatch(removeReactionFail(statusId, name, err));\n  });\n};\n\nexport const removeReactionRequest = (statusId, name) => ({\n  type: REACTION_REMOVE_REQUEST,\n  id: statusId,\n  name,\n});\n\nexport const removeReactionSuccess = (statusId, name) => ({\n  type: REACTION_REMOVE_SUCCESS,\n  id: statusId,\n  name,\n});\n\nexport const removeReactionFail = (statusId, name) => ({\n  type: REACTION_REMOVE_FAIL,\n  id: statusId,\n  name,\n});\n","import api from '../api';\n\nimport { showAlertForError } from './alerts';\nimport { importFetchedAccounts } from './importer';\n\nexport const LIST_FETCH_REQUEST = 'LIST_FETCH_REQUEST';\nexport const LIST_FETCH_SUCCESS = 'LIST_FETCH_SUCCESS';\nexport const LIST_FETCH_FAIL    = 'LIST_FETCH_FAIL';\n\nexport const LISTS_FETCH_REQUEST = 'LISTS_FETCH_REQUEST';\nexport const LISTS_FETCH_SUCCESS = 'LISTS_FETCH_SUCCESS';\nexport const LISTS_FETCH_FAIL    = 'LISTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_TITLE_CHANGE = 'LIST_EDITOR_TITLE_CHANGE';\nexport const LIST_EDITOR_RESET        = 'LIST_EDITOR_RESET';\nexport const LIST_EDITOR_SETUP        = 'LIST_EDITOR_SETUP';\n\nexport const LIST_CREATE_REQUEST = 'LIST_CREATE_REQUEST';\nexport const LIST_CREATE_SUCCESS = 'LIST_CREATE_SUCCESS';\nexport const LIST_CREATE_FAIL    = 'LIST_CREATE_FAIL';\n\nexport const LIST_UPDATE_REQUEST = 'LIST_UPDATE_REQUEST';\nexport const LIST_UPDATE_SUCCESS = 'LIST_UPDATE_SUCCESS';\nexport const LIST_UPDATE_FAIL    = 'LIST_UPDATE_FAIL';\n\nexport const LIST_DELETE_REQUEST = 'LIST_DELETE_REQUEST';\nexport const LIST_DELETE_SUCCESS = 'LIST_DELETE_SUCCESS';\nexport const LIST_DELETE_FAIL    = 'LIST_DELETE_FAIL';\n\nexport const LIST_ACCOUNTS_FETCH_REQUEST = 'LIST_ACCOUNTS_FETCH_REQUEST';\nexport const LIST_ACCOUNTS_FETCH_SUCCESS = 'LIST_ACCOUNTS_FETCH_SUCCESS';\nexport const LIST_ACCOUNTS_FETCH_FAIL    = 'LIST_ACCOUNTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_SUGGESTIONS_CHANGE = 'LIST_EDITOR_SUGGESTIONS_CHANGE';\nexport const LIST_EDITOR_SUGGESTIONS_READY  = 'LIST_EDITOR_SUGGESTIONS_READY';\nexport const LIST_EDITOR_SUGGESTIONS_CLEAR  = 'LIST_EDITOR_SUGGESTIONS_CLEAR';\n\nexport const LIST_EDITOR_ADD_REQUEST = 'LIST_EDITOR_ADD_REQUEST';\nexport const LIST_EDITOR_ADD_SUCCESS = 'LIST_EDITOR_ADD_SUCCESS';\nexport const LIST_EDITOR_ADD_FAIL    = 'LIST_EDITOR_ADD_FAIL';\n\nexport const LIST_EDITOR_REMOVE_REQUEST = 'LIST_EDITOR_REMOVE_REQUEST';\nexport const LIST_EDITOR_REMOVE_SUCCESS = 'LIST_EDITOR_REMOVE_SUCCESS';\nexport const LIST_EDITOR_REMOVE_FAIL    = 'LIST_EDITOR_REMOVE_FAIL';\n\nexport const LIST_ADDER_RESET = 'LIST_ADDER_RESET';\nexport const LIST_ADDER_SETUP = 'LIST_ADDER_SETUP';\n\nexport const LIST_ADDER_LISTS_FETCH_REQUEST = 'LIST_ADDER_LISTS_FETCH_REQUEST';\nexport const LIST_ADDER_LISTS_FETCH_SUCCESS = 'LIST_ADDER_LISTS_FETCH_SUCCESS';\nexport const LIST_ADDER_LISTS_FETCH_FAIL    = 'LIST_ADDER_LISTS_FETCH_FAIL';\n\nexport const fetchList = id => (dispatch, getState) => {\n  if (getState().getIn(['lists', id])) {\n    return;\n  }\n\n  dispatch(fetchListRequest(id));\n\n  api().get(`/api/v1/lists/${id}`)\n    .then(({ data }) => dispatch(fetchListSuccess(data)))\n    .catch(err => dispatch(fetchListFail(id, err)));\n};\n\nexport const fetchListRequest = id => ({\n  type: LIST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListSuccess = list => ({\n  type: LIST_FETCH_SUCCESS,\n  list,\n});\n\nexport const fetchListFail = (id, error) => ({\n  type: LIST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchLists = () => (dispatch) => {\n  dispatch(fetchListsRequest());\n\n  api().get('/api/v1/lists')\n    .then(({ data }) => dispatch(fetchListsSuccess(data)))\n    .catch(err => dispatch(fetchListsFail(err)));\n};\n\nexport const fetchListsRequest = () => ({\n  type: LISTS_FETCH_REQUEST,\n});\n\nexport const fetchListsSuccess = lists => ({\n  type: LISTS_FETCH_SUCCESS,\n  lists,\n});\n\nexport const fetchListsFail = error => ({\n  type: LISTS_FETCH_FAIL,\n  error,\n});\n\nexport const submitListEditor = shouldReset => (dispatch, getState) => {\n  const listId = getState().getIn(['listEditor', 'listId']);\n  const title  = getState().getIn(['listEditor', 'title']);\n\n  if (listId === null) {\n    dispatch(createList(title, shouldReset));\n  } else {\n    dispatch(updateList(listId, title, shouldReset));\n  }\n};\n\nexport const setupListEditor = listId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_EDITOR_SETUP,\n    list: getState().getIn(['lists', listId]),\n  });\n\n  dispatch(fetchListAccounts(listId));\n};\n\nexport const changeListEditorTitle = value => ({\n  type: LIST_EDITOR_TITLE_CHANGE,\n  value,\n});\n\nexport const createList = (title, shouldReset) => (dispatch) => {\n  dispatch(createListRequest());\n\n  api().post('/api/v1/lists', { title }).then(({ data }) => {\n    dispatch(createListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(createListFail(err)));\n};\n\nexport const createListRequest = () => ({\n  type: LIST_CREATE_REQUEST,\n});\n\nexport const createListSuccess = list => ({\n  type: LIST_CREATE_SUCCESS,\n  list,\n});\n\nexport const createListFail = error => ({\n  type: LIST_CREATE_FAIL,\n  error,\n});\n\nexport const updateList = (id, title, shouldReset, isExclusive, replies_policy) => (dispatch) => {\n  dispatch(updateListRequest(id));\n\n  api().put(`/api/v1/lists/${id}`, { title, replies_policy, exclusive: typeof isExclusive === 'undefined' ? undefined : !!isExclusive }).then(({ data }) => {\n    dispatch(updateListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(updateListFail(id, err)));\n};\n\nexport const updateListRequest = id => ({\n  type: LIST_UPDATE_REQUEST,\n  id,\n});\n\nexport const updateListSuccess = list => ({\n  type: LIST_UPDATE_SUCCESS,\n  list,\n});\n\nexport const updateListFail = (id, error) => ({\n  type: LIST_UPDATE_FAIL,\n  id,\n  error,\n});\n\nexport const resetListEditor = () => ({\n  type: LIST_EDITOR_RESET,\n});\n\nexport const deleteList = id => (dispatch) => {\n  dispatch(deleteListRequest(id));\n\n  api().delete(`/api/v1/lists/${id}`)\n    .then(() => dispatch(deleteListSuccess(id)))\n    .catch(err => dispatch(deleteListFail(id, err)));\n};\n\nexport const deleteListRequest = id => ({\n  type: LIST_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteListSuccess = id => ({\n  type: LIST_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteListFail = (id, error) => ({\n  type: LIST_DELETE_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListAccounts = listId => (dispatch) => {\n  dispatch(fetchListAccountsRequest(listId));\n\n  api().get(`/api/v1/lists/${listId}/accounts`, { params: { limit: 0 } }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListAccountsSuccess(listId, data));\n  }).catch(err => dispatch(fetchListAccountsFail(listId, err)));\n};\n\nexport const fetchListAccountsRequest = id => ({\n  type: LIST_ACCOUNTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListAccountsSuccess = (id, accounts, next) => ({\n  type: LIST_ACCOUNTS_FETCH_SUCCESS,\n  id,\n  accounts,\n  next,\n});\n\nexport const fetchListAccountsFail = (id, error) => ({\n  type: LIST_ACCOUNTS_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListSuggestions = q => (dispatch) => {\n  const params = {\n    q,\n    resolve: false,\n    limit: 4,\n    following: true,\n  };\n\n  api().get('/api/v1/accounts/search', { params }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListSuggestionsReady(q, data));\n  }).catch(error => dispatch(showAlertForError(error)));\n};\n\nexport const fetchListSuggestionsReady = (query, accounts) => ({\n  type: LIST_EDITOR_SUGGESTIONS_READY,\n  query,\n  accounts,\n});\n\nexport const clearListSuggestions = () => ({\n  type: LIST_EDITOR_SUGGESTIONS_CLEAR,\n});\n\nexport const changeListSuggestions = value => ({\n  type: LIST_EDITOR_SUGGESTIONS_CHANGE,\n  value,\n});\n\nexport const addToListEditor = accountId => (dispatch, getState) => {\n  dispatch(addToList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const addToList = (listId, accountId) => (dispatch) => {\n  dispatch(addToListRequest(listId, accountId));\n\n  api().post(`/api/v1/lists/${listId}/accounts`, { account_ids: [accountId] })\n    .then(() => dispatch(addToListSuccess(listId, accountId)))\n    .catch(err => dispatch(addToListFail(listId, accountId, err)));\n};\n\nexport const addToListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const addToListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const addToListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_ADD_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const removeFromListEditor = accountId => (dispatch, getState) => {\n  dispatch(removeFromList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const removeFromList = (listId, accountId) => (dispatch) => {\n  dispatch(removeFromListRequest(listId, accountId));\n\n  api().delete(`/api/v1/lists/${listId}/accounts`, { params: { account_ids: [accountId] } })\n    .then(() => dispatch(removeFromListSuccess(listId, accountId)))\n    .catch(err => dispatch(removeFromListFail(listId, accountId, err)));\n};\n\nexport const removeFromListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const removeFromListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const removeFromListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_REMOVE_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const resetListAdder = () => ({\n  type: LIST_ADDER_RESET,\n});\n\nexport const setupListAdder = accountId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_ADDER_SETUP,\n    account: getState().getIn(['accounts', accountId]),\n  });\n  dispatch(fetchLists());\n  dispatch(fetchAccountLists(accountId));\n};\n\nexport const fetchAccountLists = accountId => (dispatch) => {\n  dispatch(fetchAccountListsRequest(accountId));\n\n  api().get(`/api/v1/accounts/${accountId}/lists`)\n    .then(({ data }) => dispatch(fetchAccountListsSuccess(accountId, data)))\n    .catch(err => dispatch(fetchAccountListsFail(accountId, err)));\n};\n\nexport const fetchAccountListsRequest = id => ({\n  type:LIST_ADDER_LISTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchAccountListsSuccess = (id, lists) => ({\n  type: LIST_ADDER_LISTS_FETCH_SUCCESS,\n  id,\n  lists,\n});\n\nexport const fetchAccountListsFail = (id, err) => ({\n  type: LIST_ADDER_LISTS_FETCH_FAIL,\n  id,\n  err,\n});\n\nexport const addToListAdder = listId => (dispatch, getState) => {\n  dispatch(addToList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n\nexport const removeFromListAdder = listId => (dispatch, getState) => {\n  dispatch(removeFromList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport api, { getLinks } from 'flavours/glitch/api';\nimport { compareId } from 'flavours/glitch/compare_id';\nimport { usePendingItems as preferPendingItems } from 'flavours/glitch/initial_state';\nimport { toServerSideType } from 'flavours/glitch/utils/filters';\n\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { submitMarkers } from './markers';\nimport {timelineDelete} from './timelines_typed';\n\nexport { disconnectTimeline } from './timelines_typed';\n\nexport const TIMELINE_UPDATE  = 'TIMELINE_UPDATE';\nexport const TIMELINE_CLEAR   = 'TIMELINE_CLEAR';\n\nexport const TIMELINE_EXPAND_REQUEST = 'TIMELINE_EXPAND_REQUEST';\nexport const TIMELINE_EXPAND_SUCCESS = 'TIMELINE_EXPAND_SUCCESS';\nexport const TIMELINE_EXPAND_FAIL    = 'TIMELINE_EXPAND_FAIL';\n\nexport const TIMELINE_SCROLL_TOP   = 'TIMELINE_SCROLL_TOP';\nexport const TIMELINE_LOAD_PENDING = 'TIMELINE_LOAD_PENDING';\nexport const TIMELINE_CONNECT      = 'TIMELINE_CONNECT';\n\nexport const TIMELINE_MARK_AS_PARTIAL = 'TIMELINE_MARK_AS_PARTIAL';\nexport const TIMELINE_INSERT          = 'TIMELINE_INSERT';\n\nexport const TIMELINE_SUGGESTIONS = 'inline-follow-suggestions';\nexport const TIMELINE_GAP = null;\n\nexport const loadPending = timeline => ({\n  type: TIMELINE_LOAD_PENDING,\n  timeline,\n});\n\nexport function updateTimeline(timeline, status, accept) {\n  return (dispatch, getState) => {\n    if (typeof accept === 'function' && !accept(status)) {\n      return;\n    }\n\n    if (getState().getIn(['timelines', timeline, 'isPartial'])) {\n      // Prevent new items from being added to a partial timeline,\n      // since it will be reloaded anyway\n\n      return;\n    }\n\n    let filtered = false;\n\n    if (status.filtered) {\n      const contextType = toServerSideType(timeline);\n      const filters = status.filtered.filter(result => result.filter.context.includes(contextType));\n\n      filtered = filters.length > 0;\n    }\n\n    dispatch(importFetchedStatus(status));\n\n    dispatch({\n      type: TIMELINE_UPDATE,\n      timeline,\n      status,\n      usePendingItems: preferPendingItems,\n      filtered,\n    });\n\n    if (timeline === 'home') {\n      dispatch(submitMarkers());\n    }\n  };\n}\n\nexport function deleteFromTimelines(id) {\n  return (dispatch, getState) => {\n    const accountId  = getState().getIn(['statuses', id, 'account']);\n    const references = getState().get('statuses').filter(status => status.get('reblog') === id).map(status => status.get('id')).valueSeq().toJSON();\n    const reblogOf   = getState().getIn(['statuses', id, 'reblog'], null);\n\n    dispatch(timelineDelete({ statusId: id, accountId, references, reblogOf }));\n  };\n}\n\nexport function clearTimeline(timeline) {\n  return (dispatch) => {\n    dispatch({ type: TIMELINE_CLEAR, timeline });\n  };\n}\n\nconst noOp = () => {};\n\nconst parseTags = (tags = {}, mode) => {\n  return (tags[mode] || []).map((tag) => {\n    return tag.value;\n  });\n};\n\nexport function expandTimeline(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const isLoadingMore = !!params.max_id;\n\n    if (timeline.get('isLoading')) {\n      done();\n      return;\n    }\n\n    if (!params.max_id && !params.pinned && (timeline.get('items', ImmutableList()).size + timeline.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = timeline.getIn(['pendingItems', 0]);\n      const b = timeline.getIn(['items', 0]);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandTimelineRequest(timelineId, isLoadingMore));\n\n    api().get(path, { params }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandTimelineSuccess(timelineId, response.data, next ? next.uri : null, response.status === 206, isLoadingRecent, isLoadingMore, isLoadingRecent && preferPendingItems));\n\n      if (timelineId === 'home' && !isLoadingMore && !isLoadingRecent) {\n        const now = new Date();\n        const fittingIndex = response.data.findIndex(status => now - (new Date(status.created_at)) > 4 * 3600 * 1000);\n\n        if (fittingIndex !== -1) {\n          dispatch(insertIntoTimeline(timelineId, TIMELINE_SUGGESTIONS, Math.max(1, fittingIndex)));\n        }\n      }\n\n      if (timelineId === 'home') {\n        dispatch(submitMarkers());\n      }\n    }).catch(error => {\n      dispatch(expandTimelineFail(timelineId, error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function fillTimelineGaps(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const items = timeline.get('items');\n    const nullIndexes = items.map((statusId, index) => statusId === null ? index : null);\n    const gaps = nullIndexes.map(index => index > 0 ? items.get(index - 1) : null);\n\n    // Only expand at most two gaps to avoid doing too many requests\n    done = gaps.take(2).reduce((done, maxId) => {\n      return (() => dispatch(expandTimeline(timelineId, path, { ...params, maxId }, done)));\n    }, done);\n\n    done();\n  };\n}\n\nexport const expandHomeTimeline            = ({ maxId } = {}, done = noOp) => expandTimeline('home', '/api/v1/timelines/home', { max_id: maxId }, done);\nexport const expandPublicTimeline          = ({ maxId, onlyMedia, onlyRemote, allowLocalOnly } = {}, done = noOp) => expandTimeline(`public${onlyRemote ? ':remote' : (allowLocalOnly ? ':allow_local_only' : '')}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, allow_local_only: !!allowLocalOnly, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandCommunityTimeline       = ({ maxId, onlyMedia } = {}, done = noOp) => expandTimeline(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandDirectTimeline          = ({ maxId } = {}, done = noOp) => expandTimeline('direct', '/api/v1/timelines/direct', { max_id: maxId }, done);\nexport const expandAccountTimeline         = (accountId, { maxId, withReplies, tagged } = {}) => expandTimeline(`account:${accountId}${withReplies ? ':with_replies' : ''}${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { exclude_replies: !withReplies, exclude_reblogs: withReplies, tagged, max_id: maxId });\nexport const expandAccountFeaturedTimeline = (accountId, { tagged } = {}) => expandTimeline(`account:${accountId}:pinned`, `/api/v1/accounts/${accountId}/statuses`, { pinned: true, tagged });\nexport const expandAccountMediaTimeline    = (accountId, { maxId } = {}) => expandTimeline(`account:${accountId}:media`, `/api/v1/accounts/${accountId}/statuses`, { max_id: maxId, only_media: true, limit: 40 });\nexport const expandListTimeline            = (id, { maxId } = {}, done = noOp) => expandTimeline(`list:${id}`, `/api/v1/timelines/list/${id}`, { max_id: maxId }, done);\nexport const expandLinkTimeline            = (url, { maxId } = {}, done = noOp) => expandTimeline(`link:${url}`, `/api/v1/timelines/link`, { url, max_id: maxId }, done);\nexport const expandHashtagTimeline         = (hashtag, { maxId, tags, local } = {}, done = noOp) => {\n  return expandTimeline(`hashtag:${hashtag}${local ? ':local' : ''}`, `/api/v1/timelines/tag/${hashtag}`, {\n    max_id: maxId,\n    any:    parseTags(tags, 'any'),\n    all:    parseTags(tags, 'all'),\n    none:   parseTags(tags, 'none'),\n    local:  local,\n  }, done);\n};\n\nexport const fillHomeTimelineGaps      = (done = noOp) => fillTimelineGaps('home', '/api/v1/timelines/home', {}, done);\nexport const fillPublicTimelineGaps    = ({ onlyMedia, onlyRemote, allowLocalOnly } = {}, done = noOp) => fillTimelineGaps(`public${onlyRemote ? ':remote' : (allowLocalOnly ? ':allow_local_only' : '')}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, only_media: !!onlyMedia, allow_local_only: !!allowLocalOnly }, done);\nexport const fillCommunityTimelineGaps = ({ onlyMedia } = {}, done = noOp) => fillTimelineGaps(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, only_media: !!onlyMedia }, done);\nexport const fillListTimelineGaps      = (id, done = noOp) => fillTimelineGaps(`list:${id}`, `/api/v1/timelines/list/${id}`, {}, done);\n\nexport function expandTimelineRequest(timeline, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_REQUEST,\n    timeline,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineSuccess(timeline, statuses, next, partial, isLoadingRecent, isLoadingMore, usePendingItems) {\n  return {\n    type: TIMELINE_EXPAND_SUCCESS,\n    timeline,\n    statuses,\n    next,\n    partial,\n    isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineFail(timeline, error, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_FAIL,\n    timeline,\n    error,\n    skipLoading: !isLoadingMore,\n    skipNotFound: timeline.startsWith('account:'),\n  };\n}\n\nexport function scrollTopTimeline(timeline, top) {\n  return {\n    type: TIMELINE_SCROLL_TOP,\n    timeline,\n    top,\n  };\n}\n\nexport function connectTimeline(timeline) {\n  return {\n    type: TIMELINE_CONNECT,\n    timeline,\n    usePendingItems: preferPendingItems,\n  };\n}\n\nexport const markAsPartial = timeline => ({\n  type: TIMELINE_MARK_AS_PARTIAL,\n  timeline,\n});\n\nexport const insertIntoTimeline = (timeline, key, index) => ({\n  type: TIMELINE_INSERT,\n  timeline,\n  index,\n  key,\n});\n","import { Map as ImmutableMap, List as ImmutableList } from 'immutable';\n\nimport api, { getLinks } from 'mastodon/api';\nimport { compareId } from 'mastodon/compare_id';\nimport { usePendingItems as preferPendingItems } from 'mastodon/initial_state';\n\nimport { importFetchedStatus, importFetchedStatuses } from './importer';\nimport { submitMarkers } from './markers';\nimport {timelineDelete} from './timelines_typed';\n\nexport { disconnectTimeline } from './timelines_typed';\n\nexport const TIMELINE_UPDATE  = 'TIMELINE_UPDATE';\nexport const TIMELINE_CLEAR   = 'TIMELINE_CLEAR';\n\nexport const TIMELINE_EXPAND_REQUEST = 'TIMELINE_EXPAND_REQUEST';\nexport const TIMELINE_EXPAND_SUCCESS = 'TIMELINE_EXPAND_SUCCESS';\nexport const TIMELINE_EXPAND_FAIL    = 'TIMELINE_EXPAND_FAIL';\n\nexport const TIMELINE_SCROLL_TOP   = 'TIMELINE_SCROLL_TOP';\nexport const TIMELINE_LOAD_PENDING = 'TIMELINE_LOAD_PENDING';\nexport const TIMELINE_CONNECT      = 'TIMELINE_CONNECT';\n\nexport const TIMELINE_MARK_AS_PARTIAL = 'TIMELINE_MARK_AS_PARTIAL';\nexport const TIMELINE_INSERT          = 'TIMELINE_INSERT';\n\nexport const TIMELINE_SUGGESTIONS = 'inline-follow-suggestions';\nexport const TIMELINE_GAP = null;\n\nexport const loadPending = timeline => ({\n  type: TIMELINE_LOAD_PENDING,\n  timeline,\n});\n\nexport function updateTimeline(timeline, status, accept) {\n  return (dispatch, getState) => {\n    if (typeof accept === 'function' && !accept(status)) {\n      return;\n    }\n\n    if (getState().getIn(['timelines', timeline, 'isPartial'])) {\n      // Prevent new items from being added to a partial timeline,\n      // since it will be reloaded anyway\n\n      return;\n    }\n\n    dispatch(importFetchedStatus(status));\n\n    dispatch({\n      type: TIMELINE_UPDATE,\n      timeline,\n      status,\n      usePendingItems: preferPendingItems,\n    });\n\n    if (timeline === 'home') {\n      dispatch(submitMarkers());\n    }\n  };\n}\n\nexport function deleteFromTimelines(id) {\n  return (dispatch, getState) => {\n    const accountId  = getState().getIn(['statuses', id, 'account']);\n    const references = getState().get('statuses').filter(status => status.get('reblog') === id).map(status => status.get('id')).valueSeq().toJSON();\n    const reblogOf   = getState().getIn(['statuses', id, 'reblog'], null);\n\n    dispatch(timelineDelete({ statusId: id, accountId, references, reblogOf }));\n  };\n}\n\nexport function clearTimeline(timeline) {\n  return (dispatch) => {\n    dispatch({ type: TIMELINE_CLEAR, timeline });\n  };\n}\n\nconst noOp = () => {};\n\nconst parseTags = (tags = {}, mode) => {\n  return (tags[mode] || []).map((tag) => {\n    return tag.value;\n  });\n};\n\nexport function expandTimeline(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const isLoadingMore = !!params.max_id;\n\n    if (timeline.get('isLoading')) {\n      done();\n      return;\n    }\n\n    if (!params.max_id && !params.pinned && (timeline.get('items', ImmutableList()).size + timeline.get('pendingItems', ImmutableList()).size) > 0) {\n      const a = timeline.getIn(['pendingItems', 0]);\n      const b = timeline.getIn(['items', 0]);\n\n      if (a && b && compareId(a, b) > 0) {\n        params.since_id = a;\n      } else {\n        params.since_id = b || a;\n      }\n    }\n\n    const isLoadingRecent = !!params.since_id;\n\n    dispatch(expandTimelineRequest(timelineId, isLoadingMore));\n\n    api().get(path, { params }).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedStatuses(response.data));\n      dispatch(expandTimelineSuccess(timelineId, response.data, next ? next.uri : null, response.status === 206, isLoadingRecent, isLoadingMore, isLoadingRecent && preferPendingItems));\n\n      if (timelineId === 'home' && !isLoadingMore && !isLoadingRecent) {\n        const now = new Date();\n        const fittingIndex = response.data.findIndex(status => now - (new Date(status.created_at)) > 4 * 3600 * 1000);\n\n        if (fittingIndex !== -1) {\n          dispatch(insertIntoTimeline(timelineId, TIMELINE_SUGGESTIONS, Math.max(1, fittingIndex)));\n        }\n      }\n\n      if (timelineId === 'home') {\n        dispatch(submitMarkers());\n      }\n    }).catch(error => {\n      dispatch(expandTimelineFail(timelineId, error, isLoadingMore));\n    }).finally(() => {\n      done();\n    });\n  };\n}\n\nexport function fillTimelineGaps(timelineId, path, params = {}, done = noOp) {\n  return (dispatch, getState) => {\n    const timeline = getState().getIn(['timelines', timelineId], ImmutableMap());\n    const items = timeline.get('items');\n    const nullIndexes = items.map((statusId, index) => statusId === null ? index : null);\n    const gaps = nullIndexes.map(index => index > 0 ? items.get(index - 1) : null);\n\n    // Only expand at most two gaps to avoid doing too many requests\n    done = gaps.take(2).reduce((done, maxId) => {\n      return (() => dispatch(expandTimeline(timelineId, path, { ...params, maxId }, done)));\n    }, done);\n\n    done();\n  };\n}\n\nexport const expandHomeTimeline            = ({ maxId } = {}, done = noOp) => expandTimeline('home', '/api/v1/timelines/home', { max_id: maxId }, done);\nexport const expandPublicTimeline          = ({ maxId, onlyMedia, onlyRemote } = {}, done = noOp) => expandTimeline(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandCommunityTimeline       = ({ maxId, onlyMedia } = {}, done = noOp) => expandTimeline(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, max_id: maxId, only_media: !!onlyMedia }, done);\nexport const expandAccountTimeline         = (accountId, { maxId, withReplies, tagged } = {}) => expandTimeline(`account:${accountId}${withReplies ? ':with_replies' : ''}${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { exclude_replies: !withReplies, exclude_reblogs: withReplies, tagged, max_id: maxId });\nexport const expandAccountFeaturedTimeline = (accountId, { tagged } = {}) => expandTimeline(`account:${accountId}:pinned${tagged ? `:${tagged}` : ''}`, `/api/v1/accounts/${accountId}/statuses`, { pinned: true, tagged });\nexport const expandAccountMediaTimeline    = (accountId, { maxId } = {}) => expandTimeline(`account:${accountId}:media`, `/api/v1/accounts/${accountId}/statuses`, { max_id: maxId, only_media: true, limit: 40 });\nexport const expandListTimeline            = (id, { maxId } = {}, done = noOp) => expandTimeline(`list:${id}`, `/api/v1/timelines/list/${id}`, { max_id: maxId }, done);\nexport const expandLinkTimeline            = (url, { maxId } = {}, done = noOp) => expandTimeline(`link:${url}`, `/api/v1/timelines/link`, { url, max_id: maxId }, done);\nexport const expandHashtagTimeline         = (hashtag, { maxId, tags, local } = {}, done = noOp) => {\n  return expandTimeline(`hashtag:${hashtag}${local ? ':local' : ''}`, `/api/v1/timelines/tag/${hashtag}`, {\n    max_id: maxId,\n    any:    parseTags(tags, 'any'),\n    all:    parseTags(tags, 'all'),\n    none:   parseTags(tags, 'none'),\n    local:  local,\n  }, done);\n};\n\nexport const fillHomeTimelineGaps      = (done = noOp) => fillTimelineGaps('home', '/api/v1/timelines/home', {}, done);\nexport const fillPublicTimelineGaps    = ({ onlyMedia, onlyRemote } = {}, done = noOp) => fillTimelineGaps(`public${onlyRemote ? ':remote' : ''}${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { remote: !!onlyRemote, only_media: !!onlyMedia }, done);\nexport const fillCommunityTimelineGaps = ({ onlyMedia } = {}, done = noOp) => fillTimelineGaps(`community${onlyMedia ? ':media' : ''}`, '/api/v1/timelines/public', { local: true, only_media: !!onlyMedia }, done);\nexport const fillListTimelineGaps      = (id, done = noOp) => fillTimelineGaps(`list:${id}`, `/api/v1/timelines/list/${id}`, {}, done);\n\nexport function expandTimelineRequest(timeline, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_REQUEST,\n    timeline,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineSuccess(timeline, statuses, next, partial, isLoadingRecent, isLoadingMore, usePendingItems) {\n  return {\n    type: TIMELINE_EXPAND_SUCCESS,\n    timeline,\n    statuses,\n    next,\n    partial,\n    isLoadingRecent,\n    usePendingItems,\n    skipLoading: !isLoadingMore,\n  };\n}\n\nexport function expandTimelineFail(timeline, error, isLoadingMore) {\n  return {\n    type: TIMELINE_EXPAND_FAIL,\n    timeline,\n    error,\n    skipLoading: !isLoadingMore,\n    skipNotFound: timeline.startsWith('account:'),\n  };\n}\n\nexport function scrollTopTimeline(timeline, top) {\n  return {\n    type: TIMELINE_SCROLL_TOP,\n    timeline,\n    top,\n  };\n}\n\nexport function connectTimeline(timeline) {\n  return {\n    type: TIMELINE_CONNECT,\n    timeline,\n    usePendingItems: preferPendingItems,\n  };\n}\n\nexport const markAsPartial = timeline => ({\n  type: TIMELINE_MARK_AS_PARTIAL,\n  timeline,\n});\n\nexport const insertIntoTimeline = (timeline, key, index) => ({\n  type: TIMELINE_INSERT,\n  timeline,\n  index,\n  key,\n});\n","export function compareId(id1: string, id2: string) {\n  if (id1 === id2) {\n    return 0;\n  }\n\n  if (id1.length === id2.length) {\n    return id1 > id2 ? 1 : -1;\n  } else {\n    return id1.length > id2.length ? 1 : -1;\n  }\n}\n","export function compareId(id1: string, id2: string) {\n  if (id1 === id2) {\n    return 0;\n  }\n\n  if (id1.length === id2.length) {\n    return id1 > id2 ? 1 : -1;\n  } else {\n    return id1.length > id2.length ? 1 : -1;\n  }\n}\n","import api from '../api';\n\nimport { showAlertForError } from './alerts';\nimport { importFetchedAccounts } from './importer';\n\nexport const LIST_FETCH_REQUEST = 'LIST_FETCH_REQUEST';\nexport const LIST_FETCH_SUCCESS = 'LIST_FETCH_SUCCESS';\nexport const LIST_FETCH_FAIL    = 'LIST_FETCH_FAIL';\n\nexport const LISTS_FETCH_REQUEST = 'LISTS_FETCH_REQUEST';\nexport const LISTS_FETCH_SUCCESS = 'LISTS_FETCH_SUCCESS';\nexport const LISTS_FETCH_FAIL    = 'LISTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_TITLE_CHANGE = 'LIST_EDITOR_TITLE_CHANGE';\nexport const LIST_EDITOR_RESET        = 'LIST_EDITOR_RESET';\nexport const LIST_EDITOR_SETUP        = 'LIST_EDITOR_SETUP';\n\nexport const LIST_CREATE_REQUEST = 'LIST_CREATE_REQUEST';\nexport const LIST_CREATE_SUCCESS = 'LIST_CREATE_SUCCESS';\nexport const LIST_CREATE_FAIL    = 'LIST_CREATE_FAIL';\n\nexport const LIST_UPDATE_REQUEST = 'LIST_UPDATE_REQUEST';\nexport const LIST_UPDATE_SUCCESS = 'LIST_UPDATE_SUCCESS';\nexport const LIST_UPDATE_FAIL    = 'LIST_UPDATE_FAIL';\n\nexport const LIST_DELETE_REQUEST = 'LIST_DELETE_REQUEST';\nexport const LIST_DELETE_SUCCESS = 'LIST_DELETE_SUCCESS';\nexport const LIST_DELETE_FAIL    = 'LIST_DELETE_FAIL';\n\nexport const LIST_ACCOUNTS_FETCH_REQUEST = 'LIST_ACCOUNTS_FETCH_REQUEST';\nexport const LIST_ACCOUNTS_FETCH_SUCCESS = 'LIST_ACCOUNTS_FETCH_SUCCESS';\nexport const LIST_ACCOUNTS_FETCH_FAIL    = 'LIST_ACCOUNTS_FETCH_FAIL';\n\nexport const LIST_EDITOR_SUGGESTIONS_CHANGE = 'LIST_EDITOR_SUGGESTIONS_CHANGE';\nexport const LIST_EDITOR_SUGGESTIONS_READY  = 'LIST_EDITOR_SUGGESTIONS_READY';\nexport const LIST_EDITOR_SUGGESTIONS_CLEAR  = 'LIST_EDITOR_SUGGESTIONS_CLEAR';\n\nexport const LIST_EDITOR_ADD_REQUEST = 'LIST_EDITOR_ADD_REQUEST';\nexport const LIST_EDITOR_ADD_SUCCESS = 'LIST_EDITOR_ADD_SUCCESS';\nexport const LIST_EDITOR_ADD_FAIL    = 'LIST_EDITOR_ADD_FAIL';\n\nexport const LIST_EDITOR_REMOVE_REQUEST = 'LIST_EDITOR_REMOVE_REQUEST';\nexport const LIST_EDITOR_REMOVE_SUCCESS = 'LIST_EDITOR_REMOVE_SUCCESS';\nexport const LIST_EDITOR_REMOVE_FAIL    = 'LIST_EDITOR_REMOVE_FAIL';\n\nexport const LIST_ADDER_RESET = 'LIST_ADDER_RESET';\nexport const LIST_ADDER_SETUP = 'LIST_ADDER_SETUP';\n\nexport const LIST_ADDER_LISTS_FETCH_REQUEST = 'LIST_ADDER_LISTS_FETCH_REQUEST';\nexport const LIST_ADDER_LISTS_FETCH_SUCCESS = 'LIST_ADDER_LISTS_FETCH_SUCCESS';\nexport const LIST_ADDER_LISTS_FETCH_FAIL    = 'LIST_ADDER_LISTS_FETCH_FAIL';\n\nexport const fetchList = id => (dispatch, getState) => {\n  if (getState().getIn(['lists', id])) {\n    return;\n  }\n\n  dispatch(fetchListRequest(id));\n\n  api().get(`/api/v1/lists/${id}`)\n    .then(({ data }) => dispatch(fetchListSuccess(data)))\n    .catch(err => dispatch(fetchListFail(id, err)));\n};\n\nexport const fetchListRequest = id => ({\n  type: LIST_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListSuccess = list => ({\n  type: LIST_FETCH_SUCCESS,\n  list,\n});\n\nexport const fetchListFail = (id, error) => ({\n  type: LIST_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchLists = () => (dispatch) => {\n  dispatch(fetchListsRequest());\n\n  api().get('/api/v1/lists')\n    .then(({ data }) => dispatch(fetchListsSuccess(data)))\n    .catch(err => dispatch(fetchListsFail(err)));\n};\n\nexport const fetchListsRequest = () => ({\n  type: LISTS_FETCH_REQUEST,\n});\n\nexport const fetchListsSuccess = lists => ({\n  type: LISTS_FETCH_SUCCESS,\n  lists,\n});\n\nexport const fetchListsFail = error => ({\n  type: LISTS_FETCH_FAIL,\n  error,\n});\n\nexport const submitListEditor = shouldReset => (dispatch, getState) => {\n  const listId = getState().getIn(['listEditor', 'listId']);\n  const title  = getState().getIn(['listEditor', 'title']);\n\n  if (listId === null) {\n    dispatch(createList(title, shouldReset));\n  } else {\n    dispatch(updateList(listId, title, shouldReset));\n  }\n};\n\nexport const setupListEditor = listId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_EDITOR_SETUP,\n    list: getState().getIn(['lists', listId]),\n  });\n\n  dispatch(fetchListAccounts(listId));\n};\n\nexport const changeListEditorTitle = value => ({\n  type: LIST_EDITOR_TITLE_CHANGE,\n  value,\n});\n\nexport const createList = (title, shouldReset) => (dispatch) => {\n  dispatch(createListRequest());\n\n  api().post('/api/v1/lists', { title }).then(({ data }) => {\n    dispatch(createListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(createListFail(err)));\n};\n\nexport const createListRequest = () => ({\n  type: LIST_CREATE_REQUEST,\n});\n\nexport const createListSuccess = list => ({\n  type: LIST_CREATE_SUCCESS,\n  list,\n});\n\nexport const createListFail = error => ({\n  type: LIST_CREATE_FAIL,\n  error,\n});\n\nexport const updateList = (id, title, shouldReset, isExclusive, replies_policy) => (dispatch) => {\n  dispatch(updateListRequest(id));\n\n  api().put(`/api/v1/lists/${id}`, { title, replies_policy, exclusive: typeof isExclusive === 'undefined' ? undefined : !!isExclusive }).then(({ data }) => {\n    dispatch(updateListSuccess(data));\n\n    if (shouldReset) {\n      dispatch(resetListEditor());\n    }\n  }).catch(err => dispatch(updateListFail(id, err)));\n};\n\nexport const updateListRequest = id => ({\n  type: LIST_UPDATE_REQUEST,\n  id,\n});\n\nexport const updateListSuccess = list => ({\n  type: LIST_UPDATE_SUCCESS,\n  list,\n});\n\nexport const updateListFail = (id, error) => ({\n  type: LIST_UPDATE_FAIL,\n  id,\n  error,\n});\n\nexport const resetListEditor = () => ({\n  type: LIST_EDITOR_RESET,\n});\n\nexport const deleteList = id => (dispatch) => {\n  dispatch(deleteListRequest(id));\n\n  api().delete(`/api/v1/lists/${id}`)\n    .then(() => dispatch(deleteListSuccess(id)))\n    .catch(err => dispatch(deleteListFail(id, err)));\n};\n\nexport const deleteListRequest = id => ({\n  type: LIST_DELETE_REQUEST,\n  id,\n});\n\nexport const deleteListSuccess = id => ({\n  type: LIST_DELETE_SUCCESS,\n  id,\n});\n\nexport const deleteListFail = (id, error) => ({\n  type: LIST_DELETE_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListAccounts = listId => (dispatch) => {\n  dispatch(fetchListAccountsRequest(listId));\n\n  api().get(`/api/v1/lists/${listId}/accounts`, { params: { limit: 0 } }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListAccountsSuccess(listId, data));\n  }).catch(err => dispatch(fetchListAccountsFail(listId, err)));\n};\n\nexport const fetchListAccountsRequest = id => ({\n  type: LIST_ACCOUNTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchListAccountsSuccess = (id, accounts, next) => ({\n  type: LIST_ACCOUNTS_FETCH_SUCCESS,\n  id,\n  accounts,\n  next,\n});\n\nexport const fetchListAccountsFail = (id, error) => ({\n  type: LIST_ACCOUNTS_FETCH_FAIL,\n  id,\n  error,\n});\n\nexport const fetchListSuggestions = q => (dispatch) => {\n  const params = {\n    q,\n    resolve: false,\n    limit: 4,\n    following: true,\n  };\n\n  api().get('/api/v1/accounts/search', { params }).then(({ data }) => {\n    dispatch(importFetchedAccounts(data));\n    dispatch(fetchListSuggestionsReady(q, data));\n  }).catch(error => dispatch(showAlertForError(error)));\n};\n\nexport const fetchListSuggestionsReady = (query, accounts) => ({\n  type: LIST_EDITOR_SUGGESTIONS_READY,\n  query,\n  accounts,\n});\n\nexport const clearListSuggestions = () => ({\n  type: LIST_EDITOR_SUGGESTIONS_CLEAR,\n});\n\nexport const changeListSuggestions = value => ({\n  type: LIST_EDITOR_SUGGESTIONS_CHANGE,\n  value,\n});\n\nexport const addToListEditor = accountId => (dispatch, getState) => {\n  dispatch(addToList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const addToList = (listId, accountId) => (dispatch) => {\n  dispatch(addToListRequest(listId, accountId));\n\n  api().post(`/api/v1/lists/${listId}/accounts`, { account_ids: [accountId] })\n    .then(() => dispatch(addToListSuccess(listId, accountId)))\n    .catch(err => dispatch(addToListFail(listId, accountId, err)));\n};\n\nexport const addToListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const addToListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_ADD_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const addToListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_ADD_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const removeFromListEditor = accountId => (dispatch, getState) => {\n  dispatch(removeFromList(getState().getIn(['listEditor', 'listId']), accountId));\n};\n\nexport const removeFromList = (listId, accountId) => (dispatch) => {\n  dispatch(removeFromListRequest(listId, accountId));\n\n  api().delete(`/api/v1/lists/${listId}/accounts`, { params: { account_ids: [accountId] } })\n    .then(() => dispatch(removeFromListSuccess(listId, accountId)))\n    .catch(err => dispatch(removeFromListFail(listId, accountId, err)));\n};\n\nexport const removeFromListRequest = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_REQUEST,\n  listId,\n  accountId,\n});\n\nexport const removeFromListSuccess = (listId, accountId) => ({\n  type: LIST_EDITOR_REMOVE_SUCCESS,\n  listId,\n  accountId,\n});\n\nexport const removeFromListFail = (listId, accountId, error) => ({\n  type: LIST_EDITOR_REMOVE_FAIL,\n  listId,\n  accountId,\n  error,\n});\n\nexport const resetListAdder = () => ({\n  type: LIST_ADDER_RESET,\n});\n\nexport const setupListAdder = accountId => (dispatch, getState) => {\n  dispatch({\n    type: LIST_ADDER_SETUP,\n    account: getState().getIn(['accounts', accountId]),\n  });\n  dispatch(fetchLists());\n  dispatch(fetchAccountLists(accountId));\n};\n\nexport const fetchAccountLists = accountId => (dispatch) => {\n  dispatch(fetchAccountListsRequest(accountId));\n\n  api().get(`/api/v1/accounts/${accountId}/lists`)\n    .then(({ data }) => dispatch(fetchAccountListsSuccess(accountId, data)))\n    .catch(err => dispatch(fetchAccountListsFail(accountId, err)));\n};\n\nexport const fetchAccountListsRequest = id => ({\n  type:LIST_ADDER_LISTS_FETCH_REQUEST,\n  id,\n});\n\nexport const fetchAccountListsSuccess = (id, lists) => ({\n  type: LIST_ADDER_LISTS_FETCH_SUCCESS,\n  id,\n  lists,\n});\n\nexport const fetchAccountListsFail = (id, err) => ({\n  type: LIST_ADDER_LISTS_FETCH_FAIL,\n  id,\n  err,\n});\n\nexport const addToListAdder = listId => (dispatch, getState) => {\n  dispatch(addToList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n\nexport const removeFromListAdder = listId => (dispatch, getState) => {\n  dispatch(removeFromList(listId, getState().getIn(['listAdder', 'accountId'])));\n};\n","import { boostModal } from 'mastodon/initial_state';\n\nimport api, { getLinks } from '../api';\n\nimport { fetchRelationships } from './accounts';\nimport { importFetchedAccounts, importFetchedStatus } from './importer';\nimport { unreblog, reblog } from './interactions_typed';\nimport { openModal } from './modal';\n\nexport const REBLOGS_EXPAND_REQUEST = 'REBLOGS_EXPAND_REQUEST';\nexport const REBLOGS_EXPAND_SUCCESS = 'REBLOGS_EXPAND_SUCCESS';\nexport const REBLOGS_EXPAND_FAIL = 'REBLOGS_EXPAND_FAIL';\n\nexport const FAVOURITE_REQUEST = 'FAVOURITE_REQUEST';\nexport const FAVOURITE_SUCCESS = 'FAVOURITE_SUCCESS';\nexport const FAVOURITE_FAIL    = 'FAVOURITE_FAIL';\n\nexport const UNFAVOURITE_REQUEST = 'UNFAVOURITE_REQUEST';\nexport const UNFAVOURITE_SUCCESS = 'UNFAVOURITE_SUCCESS';\nexport const UNFAVOURITE_FAIL    = 'UNFAVOURITE_FAIL';\n\nexport const REBLOGS_FETCH_REQUEST = 'REBLOGS_FETCH_REQUEST';\nexport const REBLOGS_FETCH_SUCCESS = 'REBLOGS_FETCH_SUCCESS';\nexport const REBLOGS_FETCH_FAIL    = 'REBLOGS_FETCH_FAIL';\n\nexport const FAVOURITES_FETCH_REQUEST = 'FAVOURITES_FETCH_REQUEST';\nexport const FAVOURITES_FETCH_SUCCESS = 'FAVOURITES_FETCH_SUCCESS';\nexport const FAVOURITES_FETCH_FAIL    = 'FAVOURITES_FETCH_FAIL';\n\nexport const FAVOURITES_EXPAND_REQUEST = 'FAVOURITES_EXPAND_REQUEST';\nexport const FAVOURITES_EXPAND_SUCCESS = 'FAVOURITES_EXPAND_SUCCESS';\nexport const FAVOURITES_EXPAND_FAIL = 'FAVOURITES_EXPAND_FAIL';\n\nexport const PIN_REQUEST = 'PIN_REQUEST';\nexport const PIN_SUCCESS = 'PIN_SUCCESS';\nexport const PIN_FAIL    = 'PIN_FAIL';\n\nexport const UNPIN_REQUEST = 'UNPIN_REQUEST';\nexport const UNPIN_SUCCESS = 'UNPIN_SUCCESS';\nexport const UNPIN_FAIL    = 'UNPIN_FAIL';\n\nexport const BOOKMARK_REQUEST = 'BOOKMARK_REQUEST';\nexport const BOOKMARK_SUCCESS = 'BOOKMARKED_SUCCESS';\nexport const BOOKMARK_FAIL    = 'BOOKMARKED_FAIL';\n\nexport const UNBOOKMARK_REQUEST = 'UNBOOKMARKED_REQUEST';\nexport const UNBOOKMARK_SUCCESS = 'UNBOOKMARKED_SUCCESS';\nexport const UNBOOKMARK_FAIL    = 'UNBOOKMARKED_FAIL';\n\nexport * from \"./interactions_typed\";\n\nexport function favourite(status) {\n  return function (dispatch) {\n    dispatch(favouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/favourite`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(favouriteSuccess(status));\n    }).catch(function (error) {\n      dispatch(favouriteFail(status, error));\n    });\n  };\n}\n\nexport function unfavourite(status) {\n  return (dispatch) => {\n    dispatch(unfavouriteRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unfavourite`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unfavouriteSuccess(status));\n    }).catch(error => {\n      dispatch(unfavouriteFail(status, error));\n    });\n  };\n}\n\nexport function favouriteRequest(status) {\n  return {\n    type: FAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteSuccess(status) {\n  return {\n    type: FAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function favouriteFail(status, error) {\n  return {\n    type: FAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteRequest(status) {\n  return {\n    type: UNFAVOURITE_REQUEST,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteSuccess(status) {\n  return {\n    type: UNFAVOURITE_SUCCESS,\n    status: status,\n    skipLoading: true,\n  };\n}\n\nexport function unfavouriteFail(status, error) {\n  return {\n    type: UNFAVOURITE_FAIL,\n    status: status,\n    error: error,\n    skipLoading: true,\n  };\n}\n\nexport function bookmark(status) {\n  return function (dispatch) {\n    dispatch(bookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/bookmark`).then(function (response) {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(bookmarkSuccess(status, response.data));\n    }).catch(function (error) {\n      dispatch(bookmarkFail(status, error));\n    });\n  };\n}\n\nexport function unbookmark(status) {\n  return (dispatch) => {\n    dispatch(unbookmarkRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unbookmark`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unbookmarkSuccess(status, response.data));\n    }).catch(error => {\n      dispatch(unbookmarkFail(status, error));\n    });\n  };\n}\n\nexport function bookmarkRequest(status) {\n  return {\n    type: BOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function bookmarkSuccess(status, response) {\n  return {\n    type: BOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function bookmarkFail(status, error) {\n  return {\n    type: BOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function unbookmarkRequest(status) {\n  return {\n    type: UNBOOKMARK_REQUEST,\n    status: status,\n  };\n}\n\nexport function unbookmarkSuccess(status, response) {\n  return {\n    type: UNBOOKMARK_SUCCESS,\n    status: status,\n    response: response,\n  };\n}\n\nexport function unbookmarkFail(status, error) {\n  return {\n    type: UNBOOKMARK_FAIL,\n    status: status,\n    error: error,\n  };\n}\n\nexport function fetchReblogs(id) {\n  return (dispatch) => {\n    dispatch(fetchReblogsRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/reblogged_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchReblogsFail(id, error));\n    });\n  };\n}\n\nexport function fetchReblogsRequest(id) {\n  return {\n    type: REBLOGS_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchReblogsFail(id, error) {\n  return {\n    type: REBLOGS_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandReblogs(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'reblogged_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandReblogsRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandReblogsSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandReblogsFail(id, error)));\n  };\n}\n\nexport function expandReblogsRequest(id) {\n  return {\n    type: REBLOGS_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandReblogsSuccess(id, accounts, next) {\n  return {\n    type: REBLOGS_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandReblogsFail(id, error) {\n  return {\n    type: REBLOGS_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function fetchFavourites(id) {\n  return (dispatch) => {\n    dispatch(fetchFavouritesRequest(id));\n\n    api().get(`/api/v1/statuses/${id}/favourited_by`).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(fetchFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => {\n      dispatch(fetchFavouritesFail(id, error));\n    });\n  };\n}\n\nexport function fetchFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_FETCH_REQUEST,\n    id,\n  };\n}\n\nexport function fetchFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_FETCH_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function fetchFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_FETCH_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function expandFavourites(id) {\n  return (dispatch, getState) => {\n    const url = getState().getIn(['user_lists', 'favourited_by', id, 'next']);\n    if (url === null) {\n      return;\n    }\n\n    dispatch(expandFavouritesRequest(id));\n\n    api().get(url).then(response => {\n      const next = getLinks(response).refs.find(link => link.rel === 'next');\n\n      dispatch(importFetchedAccounts(response.data));\n      dispatch(expandFavouritesSuccess(id, response.data, next ? next.uri : null));\n      dispatch(fetchRelationships(response.data.map(item => item.id)));\n    }).catch(error => dispatch(expandFavouritesFail(id, error)));\n  };\n}\n\nexport function expandFavouritesRequest(id) {\n  return {\n    type: FAVOURITES_EXPAND_REQUEST,\n    id,\n  };\n}\n\nexport function expandFavouritesSuccess(id, accounts, next) {\n  return {\n    type: FAVOURITES_EXPAND_SUCCESS,\n    id,\n    accounts,\n    next,\n  };\n}\n\nexport function expandFavouritesFail(id, error) {\n  return {\n    type: FAVOURITES_EXPAND_FAIL,\n    id,\n    error,\n  };\n}\n\nexport function pin(status) {\n  return (dispatch) => {\n    dispatch(pinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/pin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(pinSuccess(status));\n    }).catch(error => {\n      dispatch(pinFail(status, error));\n    });\n  };\n}\n\nexport function pinRequest(status) {\n  return {\n    type: PIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinSuccess(status) {\n  return {\n    type: PIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function pinFail(status, error) {\n  return {\n    type: PIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nexport function unpin (status) {\n  return (dispatch) => {\n    dispatch(unpinRequest(status));\n\n    api().post(`/api/v1/statuses/${status.get('id')}/unpin`).then(response => {\n      dispatch(importFetchedStatus(response.data));\n      dispatch(unpinSuccess(status));\n    }).catch(error => {\n      dispatch(unpinFail(status, error));\n    });\n  };\n}\n\nexport function unpinRequest(status) {\n  return {\n    type: UNPIN_REQUEST,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinSuccess(status) {\n  return {\n    type: UNPIN_SUCCESS,\n    status,\n    skipLoading: true,\n  };\n}\n\nexport function unpinFail(status, error) {\n  return {\n    type: UNPIN_FAIL,\n    status,\n    error,\n    skipLoading: true,\n  };\n}\n\nfunction toggleReblogWithoutConfirmation(status, privacy) {\n  return (dispatch) => {\n    if (status.get('reblogged')) {\n      dispatch(unreblog({ statusId: status.get('id') }));\n    } else {\n      dispatch(reblog({ statusId: status.get('id'), privacy }));\n    }\n  };\n}\n\nexport function toggleReblog(statusId, skipModal = false) {\n  return (dispatch, getState) => {\n    const state = getState();\n    let status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    // The reblog modal expects a pre-filled account in status\n    // TODO: fix this by having the reblog modal get a statusId and do the work itself\n    status = status.set('account', state.accounts.get(status.get('account')));\n\n    if (boostModal && !skipModal) {\n      dispatch(openModal({ modalType: 'BOOST', modalProps: { status, onReblog: (status, privacy) => dispatch(toggleReblogWithoutConfirmation(status, privacy)) } }));\n    } else {\n      dispatch(toggleReblogWithoutConfirmation(status));\n    }\n  };\n}\n\nexport function toggleFavourite(statusId) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const status = state.statuses.get(statusId);\n\n    if (!status)\n      return;\n\n    if (status.get('favourited')) {\n      dispatch(unfavourite(status));\n    } else {\n      dispatch(favourite(status));\n    }\n  };\n}\n"],"sourceRoot":""}